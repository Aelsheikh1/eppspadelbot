/*! For license information please see main.c7b51910.js.LICENSE.txt */
(()=>{var e={1288:(e,t,n)=>{"use strict";n.r(t),n.d(t,{adminAddPlayer:()=>j,adminRemovePlayer:()=>N,auth:()=>u,createGame:()=>P,createTournament:()=>M,createUser:()=>f,createUserWithEmail:()=>g,db:()=>d,deleteGame:()=>k,deleteUser:()=>_,forceRegisterFcmToken:()=>H,getAllGames:()=>C,getAllTournaments:()=>z,getAllUsers:()=>E,getGameById:()=>S,getTournamentById:()=>O,getUserData:()=>D,initializeServiceWorker:()=>U,isUserAdmin:()=>T,joinGame:()=>x,leaveGame:()=>w,messaging:()=>h,requestFcmToken:()=>q,setupTokenRefresh:()=>V,signIn:()=>y,signInWithEmail:()=>v,signInWithGoogle:()=>m,signOut:()=>b,unregisterServiceWorker:()=>W,updateGame:()=>A,updateTournament:()=>L,updateUserProfile:()=>R,updateUserRole:()=>I});var r=n(2555),o=n(7064),i=n(9555),a=n(6032),s=n(1947);const l={apiKey:"AIzaSyAyZAakNVP3eOnIeJ1qB1Ki-6qRgZ4VBg8",authDomain:"padelbolt-5d9a2.firebaseapp.com",projectId:"padelbolt-5d9a2",storageBucket:"padelbolt-5d9a2.firebasestorage.app",messagingSenderId:"773090904452",appId:"1:773090904452:web:e33380da424fe8d69e75d1",measurementId:"G-1PRKH5C8NV"},c=(0,o.Wp)(l),u=(0,i.getAuth)(c),d=(0,a.getFirestore)(c),h=(0,s.dG)(c),p=new i.HF;p.setCustomParameters({prompt:"select_account"});const f=async e=>{try{const{email:t,name:n,role:r}=e,o=(0,a.doc)((0,a.collection)(d,"users"));return await(0,a.setDoc)(o,{email:t,name:n||"User",role:r||"user",createdAt:(new Date).toISOString(),notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}}),o.id}catch(t){throw console.error("Error creating user:",t),t}},m=async()=>{try{const t=(await(0,i.df)(u,p)).user,n=(0,a.doc)(d,"users",t.uid);try{const e=await(0,a.getDoc)(n),o=t.displayName?t.displayName.split(" "):[],i={uid:t.uid,email:t.email,displayName:t.displayName||t.email.split("@")[0],firstName:o[0]||"",lastName:o.slice(1).join(" ")||"",photoURL:t.photoURL,lastLogin:(new Date).toISOString()};e.exists()?await(0,a.updateDoc)(n,i):await(0,a.setDoc)(n,(0,r.A)((0,r.A)({},i),{},{role:"user",createdAt:(new Date).toISOString(),notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}}))}catch(e){console.error("Firestore error:",e)}return t}catch(t){throw console.error("Error signing in with Google:",t),t}},g=async(e,t)=>{try{const n=(await(0,i.eJ)(u,e,t)).user,r=(0,a.doc)(d,"users",n.uid),o=e.split("@")[0],s=o.charAt(0).toUpperCase()+o.slice(1);return await(0,a.setDoc)(r,{uid:n.uid,email:n.email,displayName:s,firstName:"",lastName:"",role:"user",createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString(),notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}}),n}catch(n){throw console.error("Error creating user:",n),n}},y=async(e,t)=>{try{const n=(await(0,i.x9)(u,e,t)).user,r=(0,a.doc)(d,"users",n.uid);if((await(0,a.getDoc)(r)).exists())await(0,a.updateDoc)(r,{lastLogin:(new Date).toISOString()});else{const t=e.split("@")[0],o=t.charAt(0).toUpperCase()+t.slice(1);await(0,a.setDoc)(r,{uid:n.uid,email:n.email,displayName:o,firstName:"",lastName:"",role:"user",createdAt:(new Date).toISOString(),lastLogin:(new Date).toISOString(),notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}})}return n}catch(n){throw console.error("Error signing in:",n),n}},v=async(e,t)=>{try{const n=await(0,i.x9)(u,e,t),r=n.user,o=(0,a.doc)(d,"users",r.uid);if(!(await(0,a.getDoc)(o)).exists()){const t=e.split("@")[0];await(0,a.setDoc)(o,{uid:r.uid,email:r.email,displayName:t,firstName:"",lastName:"",role:"user",createdAt:(new Date).toISOString(),notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}})}return n}catch(n){throw console.error("Error signing in with email:",n),n}},b=async()=>{try{return await(0,i.CI)(u),!0}catch(e){throw console.error("Error signing out:",e),e}},x=async(e,t)=>{if(!e||!t)throw new Error("Invalid game or user ID");try{const n=(0,a.doc)(d,"games",e),r=await(0,a.getDoc)(n);if(!r.exists())throw new Error("Game not found");const o=r.data(),i=o.players||[];if(i.length>=o.maxPlayers)throw new Error("Game is full");if("closed"===o.status||!o.isOpen)throw new Error("Game is closed");if(i.includes(t))throw new Error("Looks like you're already signed up for this game! \ud83c\udfbe");await(0,a.updateDoc)(n,{players:(0,a.arrayUnion)(t)});const s=await(0,a.getDoc)(n);if(!(s.data().players||[]).includes(t))throw new Error("Failed to join game. Please try again.");return!0}catch(n){throw console.error("Error joining game:",n),n}},w=async(e,t)=>{if(!e||!t)throw new Error("Invalid game or user ID");try{const n=(0,a.doc)(d,"games",e),r=await(0,a.getDoc)(n);if(!r.exists())throw new Error("Game not found");const o=r.data();if(!(o.players||[]).includes(t))throw new Error("You are not in this game");await(0,a.updateDoc)(n,{players:(0,a.arrayRemove)(t)});const i=await(0,a.getDoc)(n);if((i.data().players||[]).includes(t))throw new Error("Failed to leave game. Please try again.");return!0}catch(n){throw console.error("Error leaving game:",n),n}},k=async e=>{const t=(0,a.writeBatch)(d);try{const n=(0,a.doc)(d,"games",e);return t.delete(n),await t.commit(),!0}catch(n){throw console.error("Error deleting game:",n),n}},A=async(e,t)=>{const n=(0,a.doc)(d,"games",e);await(0,a.updateDoc)(n,t)},S=async e=>{try{const t=await(0,a.getDoc)((0,a.doc)(d,"games",e));if(!t.exists())throw new Error("Game not found");return(0,r.A)({id:t.id},t.data())}catch(t){throw console.error("Error getting game:",t),t}},C=async()=>{try{return(await(0,a.getDocs)((0,a.collection)(d,"games"))).docs.map((e=>(0,r.A)({id:e.id},e.data())))}catch(e){throw console.error("Error getting games:",e),e}},T=async e=>{try{const t=await(0,a.getDoc)((0,a.doc)(d,"users",e));return t.exists()&&"admin"===t.data().role}catch(t){return console.error("Error checking admin status:",t),!1}},E=async()=>{try{return(await(0,a.getDocs)((0,a.collection)(d,"users"))).docs.map((e=>(0,r.A)({id:e.id},e.data())))}catch(e){throw console.error("Error getting users:",e),e}},I=async(e,t)=>{try{const n=(0,a.doc)(d,"users",e),{role:r,firstName:o,lastName:i}=t;return await(0,a.updateDoc)(n,{role:r,firstName:o||"",lastName:i||"",lastUpdated:(new Date).toISOString()}),!0}catch(n){throw console.error("Error updating user role:",n),n}},_=async e=>{try{await(0,a.deleteDoc)((0,a.doc)(d,"users",e));const t=await(0,a.getDocs)((0,a.collection)(d,"games")),n=(0,a.writeBatch)(d);return t.forEach((t=>{const r=t.data();if(r.players&&r.players.some((t=>t===e))){const o=r.players.filter((t=>t!==e));n.update(t.ref,{players:o})}})),await n.commit(),!0}catch(t){throw console.error("Error deleting user:",t),t}},j=async(e,t)=>{try{const n=(0,a.doc)(d,"games",e);return await(0,a.updateDoc)(n,{players:(0,a.arrayUnion)(t)}),!0}catch(n){throw console.error("Error adding player:",n),n}},N=async(e,t)=>{try{const n=(0,a.doc)(d,"games",e),r=await(0,a.getDoc)(n);if(!r.exists())throw new Error("Game not found");const o=r.data().players.find((e=>e===t));if(!o)throw new Error("Player not found");return await(0,a.updateDoc)(n,{players:(0,a.arrayRemove)(o)}),!0}catch(n){throw console.error("Error removing player:",n),n}},R=async(e,t)=>{if(!e||"string"!==typeof e)throw new Error("Invalid user ID");try{const n=(0,a.doc)(d,"users",e);await(0,a.setDoc)(n,(0,r.A)((0,r.A)({},t),{},{updatedAt:(new Date).toISOString()}),{merge:!0})}catch(n){throw console.error("Error updating user profile:",n),n}},D=async e=>{if(!e||"string"!==typeof e)throw new Error("Invalid user ID");try{const t=await(0,a.getDoc)((0,a.doc)(d,"users",e));return t.exists()?t.data():null}catch(t){throw console.error("Error fetching user data:",t),t}},P=async e=>{try{const t=u.currentUser;if(!t)throw new Error("User must be logged in to create a game");return(await(0,a.addDoc)((0,a.collection)(d,"games"),(0,r.A)((0,r.A)({},e),{},{createdBy:t.uid,createdAt:(0,a.serverTimestamp)(),status:"open",players:[t.uid]}))).id}catch(t){throw console.error("Error creating game:",t),t}},M=async e=>{try{var t;if(!await T(null===(t=u.currentUser)||void 0===t?void 0:t.uid))throw new Error("Only admins can create tournaments");const n=F(e),o=(0,a.writeBatch)(d),i=(0,a.doc)((0,a.collection)(d,"tournaments"));if(o.set(i,(0,r.A)((0,r.A)({},n),{},{createdAt:(0,a.serverTimestamp)(),updatedAt:(0,a.serverTimestamp)(),createdByAdmin:!0})),n.originalGameId){const e=(0,a.doc)(d,"games",n.originalGameId);o.update(e,{tournamentId:i.id,isConvertedToTournament:!0,updatedAt:(0,a.serverTimestamp)()})}return await o.commit(),i.id}catch(n){throw console.error("Error creating tournament:",n),n}},F=e=>{if(!e)return{};const t={};return Object.keys(e).forEach((n=>{const r=e[n];void 0!==r&&(null!==r?"object"!==typeof r||Array.isArray(r)?Array.isArray(r)?t[n]=r.map((e=>"object"===typeof e&&null!==e?F(e):void 0===e?null:e)).filter((e=>void 0!==e)):t[n]=r:t[n]=F(r):n.includes("date")||n.includes("time")?t[n]="":n.includes("teams")||n.includes("rounds")||n.includes("players")?t[n]=[]:t[n]="")})),t},O=async e=>{try{const t=await(0,a.getDoc)((0,a.doc)(d,"tournaments",e));if(!t.exists())throw new Error("Tournament not found");return(0,r.A)({id:t.id},t.data())}catch(t){throw console.error("Error getting tournament:",t),t}},L=async(e,t)=>{try{return await(0,a.updateDoc)((0,a.doc)(d,"tournaments",e),(0,r.A)((0,r.A)({},t),{},{updatedAt:(0,a.serverTimestamp)()})),!0}catch(n){throw console.error("Error updating tournament:",n),n}},z=async()=>{try{const e=await(0,a.getDocs)((0,a.collection)(d,"tournaments")),t=[];return e.forEach((e=>{t.push((0,r.A)({id:e.id},e.data()))})),t}catch(e){throw console.error("Error getting tournaments:",e),e}},B="BMzSIFpKw-T23cx8aoIfssl2Q8oYxKZVIXY5qYkrAVOzXXOzN3eIhhyQhsuA6_mnC4go0hk9IWQ06Dwqe-eHSfE",U=async()=>{if(!("serviceWorker"in navigator))return console.warn("[SW] Service workers are not supported in this browser"),null;try{const e=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");if(e&&(console.log("[SW] Service Worker already registered with scope:",e.scope),e.active))return console.log("[SW] Service Worker is active"),navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"FIREBASE_CONFIG",config:l}),console.log("[SW] Firebase config sent to existing Service Worker")),e;console.log("[SW] Registering new Service Worker...");const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/"});return console.log("[SW] Service Worker registered with scope:",t.scope),t.installing&&(console.log("[SW] Service Worker installing..."),await new Promise((e=>{t.installing.addEventListener("statechange",(t=>{"activated"===t.target.state&&(console.log("[SW] Service Worker activated"),e())}))}))),navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"FIREBASE_CONFIG",config:l}),console.log("[SW] Firebase config sent to Service Worker")),t}catch(e){return console.error("[SW] Service Worker registration failed:",e),null}},W=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.getRegistration();if(e){return await e.unregister()?(console.log("Service Worker successfully unregistered"),!0):(console.warn("Service Worker unregistration failed"),!1)}return!1}catch(e){return console.error("Error unregistering Service Worker:",e),!1}return!1};(0,s.xD)(h,(e=>{if(console.log("[FCM] Foreground message received:",e),e.notification&&e.notification.title){var t;const n=new Notification(e.notification.title,{body:e.notification.body||"",icon:"/logo192.png",tag:(null===(t=e.data)||void 0===t?void 0:t.gameId)||"default",renotify:!0,silent:!1,badge:"/logo192.png"});n.onclick=()=>{var t;window.focus(),null!==(t=e.data)&&void 0!==t&&t.gameId&&(window.location.href="/games/".concat(e.data.gameId)),n.close()}}}));const V=()=>{try{if(!h)return void console.warn("[FCM] Messaging not initialized");const e=setInterval((async()=>{console.log("[FCM] Checking if token needs refresh...");const e=u.currentUser;if(e)try{const t=await navigator.serviceWorker.ready;console.log("[FCM] Service worker ready for token refresh");const n=await(0,s.gf)(h,{vapidKey:B,serviceWorkerRegistration:t});if(n){console.log("[FCM] Token refreshed:",n.substring(0,10)+"..."),navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"UPDATE_FCM_TOKEN",token:n}),console.log("[FCM] Refreshed token sent to service worker")):console.warn("[FCM] No service worker controller available for token update");const t=(0,a.doc)(d,"users",e.uid),r=await(0,a.getDoc)(t);(r.exists()&&r.data().fcmTokens?r.data().fcmTokens:[]).includes(n)?(console.log("[FCM] Token already exists in Firestore, updating timestamp"),await(0,a.updateDoc)(t,{lastTokenUpdate:(new Date).toISOString()})):(await(0,a.updateDoc)(t,{fcmTokens:(0,a.arrayUnion)(n),lastTokenUpdate:(new Date).toISOString()}),console.log("[FCM] New refreshed token saved to Firestore"))}else console.warn("[FCM] Failed to get fresh token during refresh check")}catch(t){console.error("[FCM] Error during token refresh check:",t)}else console.log("[FCM] No user logged in, skipping token refresh")}),432e5);window.addEventListener("beforeunload",(()=>{clearInterval(e)})),console.log("[FCM] Token refresh monitoring set up")}catch(e){console.error("[FCM] Error setting up token refresh:",e)}},q=async()=>{try{if(!("Notification"in window))return console.warn("[FCM] Notifications not supported in this browser"),null;if("granted"!==Notification.permission){console.log("[FCM] Requesting notification permission...");if("granted"!==await Notification.requestPermission())return console.warn("[FCM] Notification permission denied by user"),null}const r=u.currentUser;if(!r)return console.warn("[FCM] No authenticated user for token registration"),null;"serviceWorker"in navigator&&(await navigator.serviceWorker.ready,console.log("[FCM] Service worker is ready for messaging")),console.log("[FCM] Getting token for user:",r.uid);const o=(0,s.dG)(c),i=await navigator.serviceWorker.ready;console.log("[FCM] Service worker ready for token request");const l=await(0,s.gf)(o,{vapidKey:B,serviceWorkerRegistration:i});if(!l)return console.error("[FCM] Failed to get FCM token"),null;if(console.log("[FCM] Token obtained:",l.substring(0,10)+"..."),navigator.serviceWorker&&navigator.serviceWorker.controller){const t="".concat(r.uid,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15)),n=(0,a.doc)(d,"users",r.uid),o=await(0,a.getDoc)(n),i=!!o.exists()&&!0===o.data().isAdmin?"admin":"user";navigator.serviceWorker.controller.postMessage({type:"UPDATE_FCM_TOKEN",token:l,userId:r.uid,userRole:i,deviceId:t}),console.log("[FCM] Token sent to service worker for user ".concat(r.uid," with role ").concat(i));try{await(0,a.updateDoc)(n,{devices:(0,a.arrayUnion)(t)})}catch(e){console.warn("[FCM] Error storing device ID:",e)}}try{const e=(0,a.doc)(d,"users",r.uid),n=await(0,a.getDoc)(e);if((n.exists()&&n.data().fcmTokens?n.data().fcmTokens:[]).includes(l))console.log("[FCM] Token already exists for user:",r.uid),await(0,a.updateDoc)(e,{lastTokenUpdate:(new Date).toISOString()});else{console.log("[FCM] Adding new token to user document");const t={fcmTokens:(0,a.arrayUnion)(l),lastTokenUpdate:(new Date).toISOString()};n.exists()&&n.data().notificationSettings||(t.notificationSettings={gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}),await(0,a.updateDoc)(e,t),console.log("[FCM] Token added to user document for:",r.uid)}try{const e=(0,a.doc)(d,"fcmTokens",l.substring(0,40)),t=n.exists()&&!0===n.data().isAdmin?"admin":"user";await(0,a.setDoc)(e,{userId:r.uid,email:r.email,isAdmin:!!n.exists()&&!0===n.data().isAdmin,userRole:t,token:l,createdAt:(new Date).toISOString(),lastActive:(new Date).toISOString(),device:navigator.userAgent}),console.log("[FCM] Token also stored in fcmTokens collection")}catch(t){console.warn("[FCM] Error storing token in fcmTokens collection:",t)}return console.log("[FCM] Token successfully registered for:",r.uid),l}catch(n){return console.error("[FCM] Error updating user document with token:",n),null}}catch(r){return console.error("[FCM] Error in requestFcmToken:",r),null}},H=async()=>{try{const e=u.currentUser;if(!e)return console.warn("[FCM] No authenticated user for token registration"),null;if(window.Notification&&"granted"===Notification.permission){const t=(0,s.dG)(c),n=await navigator.serviceWorker.ready,r=await(0,s.gf)(t,{vapidKey:B,serviceWorkerRegistration:n});if(r){const t=(0,a.doc)(d,"users",e.uid);return await(0,a.updateDoc)(t,{fcmTokens:(0,a.arrayUnion)(r)}),console.log("[FCM] Forced token added to Firestore for user:",e.uid,r),r}console.warn("[FCM] No token returned from getToken")}else console.warn("[FCM] Notification permission not granted or Notification API not available");return null}catch(e){return console.error("[FCM] Error forcing FCM token registration:",e),null}}},6823:(e,t,n)=>{"use strict";n.d(t,{Gl:()=>a,k1:()=>l,registerDevice:()=>s});var r=n(9555),o=n(6032),i=n(1288);const a=async e=>{try{const t=(0,r.getAuth)().currentUser;if(!t)return console.log("User not logged in. Cannot update notification settings."),!1;const n=(0,o.doc)(i.db,"users",t.uid);return await(0,o.updateDoc)(n,{notificationSettings:e}),console.log("Notification settings updated."),!0}catch(t){return console.error("Error updating notification settings:",t),!1}},s=async()=>{try{if(!("Notification"in window))return console.warn("[Notifications] Notifications not supported in this browser"),null;if("granted"!==Notification.permission){console.log("[Notifications] Requesting notification permission...");if("granted"!==await Notification.requestPermission())return console.warn("[Notifications] Notification permission denied"),null}const e=(0,r.getAuth)().currentUser;if(!e)return console.log("[Notifications] No user logged in. Cannot register device."),null;const t=(()=>{const e=localStorage.getItem("device_id");if(e)return e;const t=(navigator.userAgent+navigator.language+window.screen.width+window.screen.height).split("").reduce(((e,t)=>0|(e=(e<<5)-e+t.charCodeAt(0))),0),n="device_"+Math.abs(t)+"_"+Math.random().toString(36).substring(2,10);return localStorage.setItem("device_id",n),n})();console.log("[Notifications] Using device ID:",t);const n=(0,o.query)((0,o.collection)(i.db,"devices"),(0,o.where)("userId","==",e.uid),(0,o.where)("deviceId","==",t)),a=await(0,o.getDocs)(n);if(!a.empty){console.log("[Notifications] Found exact device match, updating timestamp");const n=a.docs[0];await(0,o.updateDoc)(n.ref,{lastActive:(new Date).toISOString()});const r=(0,o.doc)(i.db,"users",e.uid);return await(0,o.updateDoc)(r,{lastActive:(new Date).toISOString()}),console.log("[Notifications] Updated existing device registration"),t}const s=(0,o.query)((0,o.collection)(i.db,"devices"),(0,o.where)("userId","==",e.uid),(0,o.where)("deviceInfo","==",navigator.userAgent)),l=await(0,o.getDocs)(s);if(l.empty){const n=(0,o.doc)((0,o.collection)(i.db,"devices"),t);await(0,o.setDoc)(n,{userId:e.uid,deviceId:t,createdAt:(new Date).toISOString(),lastActive:(new Date).toISOString(),platform:"web",deviceInfo:navigator.userAgent}),console.log("[Notifications] New device registered successfully:",t)}else{console.log("[Notifications] Found ".concat(l.size," similar device registrations"));const e=[];l.forEach((n=>{e.push((0,o.updateDoc)(n.ref,{lastActive:(new Date).toISOString(),deviceId:t}))})),await Promise.all(e),console.log("[Notifications] Updated similar device registrations")}const c=(0,o.doc)(i.db,"users",e.uid);if(await(0,o.updateDoc)(c,{deviceId:t,lastActive:(new Date).toISOString(),notificationsEnabled:!0}),!localStorage.getItem("notificationsEnabledTime")){const e=Date.now().toString();localStorage.setItem("notificationsEnabledTime",e),console.log("[Notifications] First time enabling notifications, setting baseline time:",new Date(parseInt(e)))}return t}catch(e){return console.error("[Notifications] Error registering device:",e),null}},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(!("Notification"in window))return console.warn("Notifications not supported"),!1;if("granted"!==Notification.permission)return console.warn("Notification permission not granted"),!1;const r={body:t,icon:"/logo192.png",badge:"/logo192.png",data:n,requireInteraction:!0,tag:n.gameId||"default-notification"},o=new Notification(e,r);return o.onclick=()=>{console.log("Notification clicked"),o.close(),window.focus(),n.gameId&&(window.location.href="/games/".concat(n.gameId))},!0}catch(r){return console.error("Error showing notification:",r),!1}}},3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>oe});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),o=Math.abs,i=String.fromCharCode,a=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,b=0,x="";function w(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:m,column:g,length:a,return:""}}function k(e,t){return a(w("",null,null,"",null,null,0),e,{length:-e.length},t)}function A(){return b=v>0?u(x,--v):0,g--,10===b&&(g=1,m--),b}function S(){return b=v<y?u(x,v++):0,g++,10===b&&(g=1,m++),b}function C(){return u(x,v)}function T(){return v}function E(e,t){return d(x,e,t)}function I(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _(e){return m=g=1,y=h(x=e),v=0,[]}function j(e){return x="",e}function N(e){return s(E(v-1,P(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(b=C())&&b<33;)S();return I(e)>2||I(b)>3?"":" "}function D(e,t){for(;--t&&S()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return E(e,T()+(t<6&&32==C()&&32==S()))}function P(e){for(;S();)switch(b){case e:return v;case 34:case 39:34!==e&&39!==e&&P(b);break;case 40:41===e&&P(e);break;case 92:S()}return v}function M(e,t){for(;S()&&e+b!==57&&(e+b!==84||47!==C()););return"/*"+E(t,v-1)+"*"+i(47===e?e:S())}function F(e){for(;!I(C());)S();return E(e,v)}var O="-ms-",L="-moz-",z="-webkit-",B="comm",U="rule",W="decl",V="@keyframes";function q(e,t){for(var n="",r=p(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case W:return e.return=e.return||e.value;case B:return"";case V:return e.return=e.value+"{"+q(e.children,r)+"}";case U:e.value=e.props.join(",")}return h(n=q(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e){return j(K("",null,null,null,[""],e=_(e),0,[0],e))}function K(e,t,n,r,o,a,s,d,p){for(var m=0,g=0,y=s,v=0,b=0,x=0,w=1,k=1,E=1,I=0,_="",j=o,P=a,O=r,L=_;k;)switch(x=I,I=S()){case 40:if(108!=x&&58==u(L,y-1)){-1!=c(L+=l(N(I),"&","&\f"),"&\f")&&(E=-1);break}case 34:case 39:case 91:L+=N(I);break;case 9:case 10:case 13:case 32:L+=R(x);break;case 92:L+=D(T()-1,7);continue;case 47:switch(C()){case 42:case 47:f(Y(M(S(),T()),t,n),p);break;default:L+="/"}break;case 123*w:d[m++]=h(L)*E;case 125*w:case 59:case 0:switch(I){case 0:case 125:k=0;case 59+g:-1==E&&(L=l(L,/\f/g,"")),b>0&&h(L)-y&&f(b>32?Q(L+";",r,n,y-1):Q(l(L," ","")+";",r,n,y-2),p);break;case 59:L+=";";default:if(f(O=X(L,t,n,m,g,o,d,_,j=[],P=[],y),a),123===I)if(0===g)K(L,t,O,O,j,a,y,d,P);else switch(99===v&&110===u(L,3)?100:v){case 100:case 108:case 109:case 115:K(e,O,O,r&&f(X(e,O,O,0,0,o,d,_,o,j=[],y),P),o,P,y,d,r?j:P);break;default:K(L,O,O,O,[""],P,0,d,P)}}m=g=b=0,w=E=1,_=L="",y=s;break;case 58:y=1+h(L),b=x;default:if(w<1)if(123==I)--w;else if(125==I&&0==w++&&125==A())continue;switch(L+=i(I),I*w){case 38:E=g>0?1:(L+="\f",-1);break;case 44:d[m++]=(h(L)-1)*E,E=1;break;case 64:45===C()&&(L+=N(S())),v=C(),g=y=h(_=L+=F(T())),I++;break;case 45:45===x&&2==h(L)&&(w=0)}}return a}function X(e,t,n,r,i,a,c,u,h,f,m){for(var g=i-1,y=0===i?a:[""],v=p(y),b=0,x=0,k=0;b<r;++b)for(var A=0,S=d(e,g+1,g=o(x=c[b])),C=e;A<v;++A)(C=s(x>0?y[A]+" "+S:l(S,/&\f/g,y[A])))&&(h[k++]=C);return w(e,t,n,0===i?U:u,h,f,m)}function Y(e,t,n){return w(e,t,n,B,i(b),d(e,2,-2),0)}function Q(e,t,n,r){return w(e,t,n,W,d(e,0,r),d(e,r+1,-1),r)}var $=function(e,t,n){for(var r=0,o=0;r=o,o=C(),38===r&&12===o&&(t[n]=1),!I(o);)S();return E(e,v)},J=function(e,t){return j(function(e,t){var n=-1,r=44;do{switch(I(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=$(v-1,t,n);break;case 2:e[n]+=N(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=S());return e}(_(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var o=[],i=J(t,o),a=n.props,s=0,l=0;s<i.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=o[s]?i[s].replace(/&\f/g,a[c]):a[c]+" "+i[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+L+e+O+e+e;case 6828:case 4268:return z+e+O+e+e;case 6165:return z+e+O+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+O+"flex-$1$2")+e;case 5443:return z+e+O+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+O+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+O+l(e,"shrink","negative")+e;case 5292:return z+e+O+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+O+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+O+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+L+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+O+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+O+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+O+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+O+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+O+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case W:e.return=ne(e.value,e.length);break;case V:return q([k(e,{value:l(e.value,"@","@"+z)})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q([k(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return q([k(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),k(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),k(e,{props:[l(t,/:(plac\w+)/,O+"input-$1")]})],r)}return""}))}}],oe=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var o,i,a=e.stylisPlugins||re,s={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var c,u,d=[H,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=p(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}([ee,te].concat(a,d));i=function(e,t,n,r){c=n,q(G(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return f.sheet.hydrate(l),f}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},4472:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,w:()=>a});var r=n(5043),o=n(3803),i=(n(6598),n(9436),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,o.A)({key:"css"}):null));i.Provider;var a=function(e){return(0,r.forwardRef)((function(t,n){var o=(0,r.useContext)(i);return e(t,o,n)}))},s=(0,r.createContext)({})},6598:(e,t,n)=>{"use strict";n.d(t,{J:()=>g});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(918),i=!1,a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=(0,o.A)((function(e){return l(e)?e:e.replace(a,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===r[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"},h="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return f={name:o.name,styles:o.styles,next:f},o.name;var a=n;if(void 0!==a.styles){var s=a.next;if(void 0!==s)for(;void 0!==s;)f={name:s.name,styles:s.styles,next:f},s=s.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=p(e,t,n[o])+";";else for(var a in n){var s=n[a];if("object"!==typeof s){var l=s;null!=t&&void 0!==t[l]?r+=a+"{"+t[l]+"}":c(l)&&(r+=u(a)+":"+d(a,l)+";")}else{if("NO_COMPONENT_SELECTOR"===a&&i)throw new Error(h);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var f=p(e,t,s);switch(a){case"animation":case"animationName":r+=u(a)+":"+f+";";break;default:r+=a+"{"+f+"}"}}else for(var m=0;m<s.length;m++)c(s[m])&&(r+=u(a)+":"+d(a,s[m])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var l=f,m=n(e);return f=l,p(e,t,m)}}var g=n;if(null==t)return g;var y=t[g];return void 0!==y?y:g}var f,m=/label:\s*([^\s;{]+)\s*(;|$)/g;function g(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";f=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=p(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++){if(o+=p(n,t,e[a]),r)o+=i[a]}m.lastIndex=0;for(var s,l="";null!==(s=m.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:f}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>s,s:()=>a});var o=n(5043),i=!!(r||(r=n.t(o,2))).useInsertionEffect&&(r||(r=n.t(o,2))).useInsertionEffect,a=i||function(e){return e()},s=i||o.useLayoutEffect},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>o,sk:()=>i});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var o=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},i=function(e,t,n){o(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}},7700:(e,t,n)=>{"use strict";n.d(t,{Am:()=>N,FA:()=>T,Fy:()=>m,I9:()=>R,Im:()=>I,Ku:()=>O,T9:()=>h,Tj:()=>u,Uj:()=>a,XA:()=>p,ZQ:()=>g,bD:()=>_,cY:()=>f,dM:()=>S,eX:()=>A,g:()=>C,hp:()=>D,jZ:()=>y,lT:()=>x,lV:()=>b,nr:()=>w,sr:()=>v,tD:()=>P,u:()=>s,yU:()=>d,zW:()=>k});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,l=s?e[o+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0;++o;const s=o<e.length?n[e.charAt(o)]:64;++o;const l=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==a||null==s||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAyZAakNVP3eOnIeJ1qB1Ki-6qRgZ4VBg8",REACT_APP_FIREBASE_APP_ID:"1:773090904452:web:e33380da424fe8d69e75d1",REACT_APP_FIREBASE_AUTH_DOMAIN:"padelbolt-5d9a2.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-1PRKH5C8NV",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"773090904452",REACT_APP_FIREBASE_PROJECT_ID:"padelbolt-5d9a2",REACT_APP_FIREBASE_STORAGE_BUCKET:"padelbolt-5d9a2.appspot.com",REACT_APP_FIREBASE_VAPID_KEY:"BIq74BpG72bX8YlHuDMfYpDtrcd2Q-Wg5U_5-aPV1dVTN4zBMwN_gZdwY0D3EzUYXWz7ONiRaPW-_jVzYpHppTo",REACT_APP_ONESIGNAL_APP_ID:"6c89c857-e106-437a-b445-7150edf7cf22"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&s(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}function A(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function S(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new C(n,i,t)}}const E=/\{\$([^}]+)}/g;function I(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(j(n)&&j(i)){if(!_(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function j(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function R(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){const n=new M(e,t);return n.subscribe.bind(n)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function F(){}function O(e){return e&&e._delegate?e._delegate:e}},2505:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.A=a},9120:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");t.A=a},9778:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.A=a},4802:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.A=a},3471:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.A=a},9719:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"}),"DeleteSweep");t.A=a},3253:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41 6 19l1.41-1.41L1.83 12 .41 13.41z"}),"DoneAll");t.A=a},6115:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumbered");t.A=a},1958:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"History");t.A=a},9299:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)([(0,i.jsx)("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07L12 12.9z"},"0"),(0,i.jsx)("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52z"},"1")],"LocalFireDepartment");t.A=a},5310:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications");t.A=a},7991:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");t.A=a},2177:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");t.A=a},6360:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.A=a},9669:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M11 6H9V4h2v2zm4-2h-2v2h2V4zM9 14h2v-2H9v2zm10-4V8h-2v2h2zm0 4v-2h-2v2h2zm-6 0h2v-2h-2v2zm6-10h-2v2h2V4zm-6 4V6h-2v2h2zm-6 2V8h2V6H7V4H5v16h2v-8h2v-2H7zm8 2h2v-2h-2v2zm-4-2v2h2v-2h-2zM9 8v2h2V8H9zm4 2h2V8h-2v2zm2-4v2h2V6h-2z"}),"SportsScore");t.A=a},7412:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var o=r(n(39)),i=n(579),a=(0,o.default)((0,i.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");t.A=a},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(6772)},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>z});var r=n(8168),o=n(8587),i=n(7868),a=n(9172),s=n(7322),l=n(7758),c=n(2783);var u=n(4794);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function k(e,t,n,r){const o=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,o):"dark"===t&&(e.dark=(0,u.e$)(e.main,i)))}function A(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2}=e,l=(0,o.A)(e,b),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),A=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),S=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(t),E=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function I(e){return(0,u.eM)(e,w.text.primary)>=n?w.text.primary:x.text.primary}const _=e=>{let{color:t,name:n,mainShade:o=500,lightShade:a=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,i.A)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,i.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return k(t,"light",a,s),k(t,"dark",l,s),t.contrastText||(t.contrastText=I(t.main)),t},j={dark:w,light:x};return(0,a.A)((0,r.A)({common:(0,r.A)({},d),mode:t,primary:_({color:c,name:"primary"}),secondary:_({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:_({color:S,name:"error"}),warning:_({color:E,name:"warning"}),info:_({color:C,name:"info"}),success:_({color:T,name:"success"}),grey:h,contrastThreshold:n,getContrastText:I,augmentColor:_,tonalOffset:s},j[t]),l)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const C={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){const n="function"===typeof t?t(e):t,{fontFamily:i=T,fontSize:s=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:p,pxToRem:f}=n,m=(0,o.A)(n,S);const g=s/14,y=f||(e=>"".concat(e/h*g,"rem")),v=(e,t,n,o,a)=>{return(0,r.A)({fontFamily:i,fontWeight:e,fontSize:y(t),lineHeight:n},i===T?{letterSpacing:"".concat((s=o/t,Math.round(1e5*s)/1e5),"em")}:{},a,p);var s},b={h1:v(l,96,1.167,-1.5),h2:v(l,60,1.2,-.5),h3:v(c,48,1.167,0),h4:v(c,34,1.235,.25),h5:v(c,24,1.334,0),h6:v(u,20,1.6,.15),subtitle1:v(c,16,1.75,.15),subtitle2:v(u,14,1.57,.1),body1:v(c,16,1.5,.15),body2:v(c,14,1.43,.15),button:v(u,14,1.75,.4,C),caption:v(c,12,1.66,.4),overline:v(c,12,2.66,1,C),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,a.A)((0,r.A)({htmlFontSize:h,pxToRem:y,fontFamily:i,fontSize:s,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},b),m,{clone:!1})}function I(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const _=["none",I(0,2,1,-1,0,1,1,0,0,1,3,0),I(0,3,1,-2,0,2,2,0,0,1,5,0),I(0,3,3,-2,0,3,4,0,0,1,8,0),I(0,2,4,-1,0,4,5,0,0,1,10,0),I(0,3,5,-1,0,5,8,0,0,1,14,0),I(0,3,5,-1,0,6,10,0,0,1,18,0),I(0,4,5,-2,0,7,10,1,0,2,16,1),I(0,5,5,-3,0,8,10,1,0,3,14,2),I(0,5,6,-3,0,9,12,1,0,3,16,2),I(0,6,6,-3,0,10,14,1,0,4,18,3),I(0,6,7,-4,0,11,15,1,0,4,20,3),I(0,7,8,-4,0,12,17,2,0,5,22,4),I(0,7,8,-4,0,13,19,2,0,5,24,4),I(0,7,9,-4,0,14,21,2,0,5,26,4),I(0,8,9,-5,0,15,22,2,0,6,28,5),I(0,8,10,-5,0,16,24,2,0,6,30,5),I(0,8,11,-5,0,17,26,2,0,6,32,5),I(0,9,11,-5,0,18,28,2,0,7,34,6),I(0,9,12,-6,0,19,29,2,0,7,36,6),I(0,10,13,-6,0,20,31,3,0,8,38,7),I(0,10,13,-6,0,21,33,3,0,8,40,7),I(0,10,14,-6,0,22,35,3,0,8,42,7),I(0,11,14,-7,0,23,36,3,0,9,44,8),I(0,11,15,-7,0,24,38,3,0,9,46,8)],j=["duration","easing","delay"],N={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},R={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function D(e){return"".concat(Math.round(e),"ms")}function P(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function M(e){const t=(0,r.A)({},N,e.easing),n=(0,r.A)({},R,e.duration);return(0,r.A)({getAutoHeightDuration:P,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:a=t.easeInOut,delay:s=0}=r;(0,o.A)(r,j);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:D(i)," ").concat(a," ").concat("string"===typeof s?s:D(s)))).join(",")}},e,{easing:t,duration:n})}const F={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},O=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,o.A)(e,O);if(e.vars)throw new Error((0,i.A)(18));const p=A(n),f=(0,s.A)(e);let m=(0,a.A)(f,{mixins:(g=f.breakpoints,y=t,(0,r.A)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},y)),palette:p,shadows:_.slice(),typography:E(p,d),transitions:M(u),zIndex:(0,r.A)({},F)});var g,y;m=(0,a.A)(m,h);for(var v=arguments.length,b=new Array(v>1?v-1:0),x=1;x<v;x++)b[x-1]=arguments[x];return m=b.reduce(((e,t)=>(0,a.A)(e,t)),m),m.unstable_sxConfig=(0,r.A)({},l.A,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},m}const z=L},5170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(8279).A)()},3375:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="$$material"},4535:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,_n:()=>s,ep:()=>a});var r=n(920),o=n(5170),i=n(3375);const a=e=>(0,r.MC)(e)&&"classes"!==e,s=r.MC,l=(0,r.Ay)({themeId:i.A,defaultTheme:o.A,rootShouldForwardProp:a})},2876:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2919),o=n(5170),i=n(3375);function a(e){let{props:t,name:n}=e;return(0,r.A)({props:t,name:n,defaultTheme:o.A,themeId:i.A})}},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(7598).A},6593:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2456).A},9662:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(8168),o=n(5043),i=n(8587),a=n(3024),s=n(8610),l=n(6803),c=n(2876),u=n(4535),d=n(2532),h=n(2372);function p(e){return(0,h.Ay)("MuiSvgIcon",e)}(0,d.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(579);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.A)(n.color))],t["fontSize".concat((0,l.A)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(o=r.create)?void 0:o.call(r,"fill",{duration:null==(i=t.transitions)||null==(a=i.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(l=s.pxToRem)?void 0:l.call(s,20))||"1.25rem",medium:(null==(c=t.typography)||null==(u=c.pxToRem)?void 0:u.call(c,24))||"1.5rem",large:(null==(d=t.typography)||null==(h=d.pxToRem)?void 0:h.call(d,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(f=(t.vars||t).palette)||null==(m=f[n.color])?void 0:m.main)?p:{action:null==(g=(t.vars||t).palette)||null==(y=g.action)?void 0:y.active,disabled:null==(v=(t.vars||t).palette)||null==(b=v.action)?void 0:b.disabled,inherit:void 0}[n.color]}})),y=o.forwardRef((function(e,t){const n=(0,c.A)({props:e,name:"MuiSvgIcon"}),{children:o,className:u,color:d="inherit",component:h="svg",fontSize:y="medium",htmlColor:v,inheritViewBox:b=!1,titleAccess:x,viewBox:w="0 0 24 24"}=n,k=(0,i.A)(n,m),A=(0,r.A)({},n,{color:d,component:h,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:w}),S={};b||(S.viewBox=w);const C=(e=>{const{color:t,fontSize:n,classes:r}=e,o={root:["root","inherit"!==t&&"color".concat((0,l.A)(t)),"fontSize".concat((0,l.A)(n))]};return(0,s.A)(o,p,r)})(A);return(0,f.jsxs)(g,(0,r.A)({as:h,className:(0,a.A)(C.root,u),focusable:"false",color:v,"aria-hidden":!x||void 0,role:x?"img":void 0,ref:t},S,k,{ownerState:A,children:[o,x?(0,f.jsx)("title",{children:x}):null]}))}));y.muiName="SvgIcon";const v=y;function b(e,t){function n(n,o){return(0,f.jsx)(v,(0,r.A)({"data-testid":"".concat(t,"Icon"),ref:o},n,{children:e}))}return n.muiName=v.muiName,o.memo(o.forwardRef(n))}},950:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3468).A},6772:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>o.A,createChainedFunction:()=>i.A,createSvgIcon:()=>a.A,debounce:()=>s.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>d.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>w,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>m.A,unsupportedProp:()=>g,useControlled:()=>y.A,useEventCallback:()=>v.A,useForkRef:()=>b.A,useIsFocusVisible:()=>x.A});var r=n(9386),o=n(6803),i=n(6593),a=n(9662),s=n(950);const l=function(e,t){return()=>null};var c=n(7328),u=n(2427),d=n(6078);n(8168);const h=function(e,t){return()=>null};const p=n(6564).A;var f=n(5013),m=n(5879);const g=function(e,t,n,r,o){return null};var y=n(5420),v=n(3319),b=n(5849),x=n(5135);const w={configure:e=>{r.A.configure(e)}}},7328:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043);const o=function(e,t){var n,o;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(o=e.type)||null==(o=o._payload)||null==(o=o.value)?void 0:o.muiName)}},2427:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1668).A},6078:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3940).A},5420:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043);const o=function(e){let{controlled:t,default:n,name:o,state:i="value"}=e;const{current:a}=r.useRef(void 0!==t),[s,l]=r.useState(n);return[a?t:s,r.useCallback((e=>{a||l(e)}),[])]}},5013:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4440).A},3319:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1782).A},5849:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3462).A},5879:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5844).A},5135:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(5043);class o{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new o}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}let i=!0,a=!1;const s=new o,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function u(){i=!1}function d(){"hidden"===this.visibilityState&&a&&(i=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const p=function(){const e=r.useCallback((e=>{null!=e&&function(e){e.addEventListener("keydown",c,!0),e.addEventListener("mousedown",u,!0),e.addEventListener("pointerdown",u,!0),e.addEventListener("touchstart",u,!0),e.addEventListener("visibilitychange",d,!0)}(e.ownerDocument)}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(a=!0,s.start(100,(()=>{a=!1})),t.current=!1,!0)},ref:e}}},4984:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>x,q_:()=>w});var r=n(5043),o=n(8168),i=n(918),a=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,i.A)((function(e){return a.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(4472),c=n(1722),u=n(6598),d=n(9436),h=s,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:p},m=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,c.SF)(t,n,r);(0,d.s)((function(){return(0,c.sk)(t,n,r)}));return null};const y=function e(t,n){var i,a,s=t.__emotion_real===t,d=s&&t.__emotion_base||t;void 0!==n&&(i=n.label,a=n.target);var h=m(t,n,s),p=h||f(d),y=!p("as");return function(){var v=arguments,b=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&b.push("label:"+i+";"),null==v[0]||void 0===v[0].raw)b.push.apply(b,v);else{0,b.push(v[0][0]);for(var x=v.length,w=1;w<x;w++)b.push(v[w],v[0][w])}var k=(0,l.w)((function(e,t,n){var o=y&&e.as||d,i="",s=[],m=e;if(null==e.theme){for(var v in m={},e)m[v]=e[v];m.theme=(0,r.useContext)(l.T)}"string"===typeof e.className?i=(0,c.Rk)(t.registered,s,e.className):null!=e.className&&(i=e.className+" ");var x=(0,u.J)(b.concat(s),t.registered,m);i+=t.key+"-"+x.name,void 0!==a&&(i+=" "+a);var w=y&&void 0===h?f(o):p,k={};for(var A in e)y&&"as"===A||w(A)&&(k[A]=e[A]);return k.className=i,k.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(g,{cache:t,serialized:x,isStringTag:"string"===typeof o}),(0,r.createElement)(o,k))}));return k.displayName=void 0!==i?i:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",k.defaultProps=t.defaultProps,k.__emotion_real=k,k.__emotion_base=d,k.__emotion_styles=b,k.__emotion_forwardProp=h,Object.defineProperty(k,"toString",{value:function(){return"."+a}}),k.withComponent=function(t,r){return e(t,(0,o.A)({},n,r,{shouldForwardProp:m(k,r,!0)})).apply(void 0,b)},k}};var v=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));const b=v;function x(e,t){return b(e,t)}const w=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>a,iZ:()=>c,kW:()=>u,vf:()=>l,zu:()=>o});var r=n(9172);const o={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(o[e],"px)")};function a(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||i;return t.reduce(((r,o,i)=>(r[e.up(e.keys[i])]=n(t[i]),r)),{})}if("object"===typeof t){const e=r.breakpoints||i;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||o).indexOf(i)){r[e.up(i)]=n(t[i],i)}else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=s(e);for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];const a=[t,...o].reduce(((e,t)=>(0,r.A)(e,t)),{});return l(Object.keys(t),a)}function u(e){let{values:t,breakpoints:n,base:r}=e;const o=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),i=Object.keys(o);if(0===i.length)return t;let a;return i.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}},4794:(e,t,n)=>{"use strict";n.d(t,{X4:()=>u,e$:()=>d,tL:()=>p,eM:()=>c,a:()=>h});var r=n(7868);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function i(e){return o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.A)(9,e));let o,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),o=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o))throw new Error((0,r.A)(10,o))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:o}}function s(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function l(e){let t="hsl"===(e=a(e)).type||"hsla"===e.type?a(function(e){e=a(e);const{values:t}=e,n=t[0],r=t[1]/100,o=t[2]/100,i=r*Math.min(o,1-o),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return o-i*Math.max(Math.min(t-3,9-t,1),-1)};let c="rgb";const u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),s({type:c,values:u})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){const n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,s(e)}function d(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return s(e)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?d(e,t):h(e,t)}},920:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>v,MC:()=>h});var r=n(8168),o=n(8587),i=n(4984),a=n(9172),s=n(7322),l=n(2783);const c=["ownerState"],u=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function h(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const p=(0,s.A)(),f=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function m(e){let{defaultTheme:t,theme:n,themeId:r}=e;return o=n,0===Object.keys(o).length?t:n[r]||n;var o}function g(e){return e?(t,n)=>n[e]:null}function y(e,t){let{ownerState:n}=t,i=(0,o.A)(t,c);const a="function"===typeof e?e((0,r.A)({ownerState:n},i)):e;if(Array.isArray(a))return a.flatMap((e=>y(e,(0,r.A)({ownerState:n},i))));if(a&&"object"===typeof a&&Array.isArray(a.variants)){const{variants:e=[]}=a;let t=(0,o.A)(a,u);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,r.A)({ownerState:n},i,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&i[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,r.A)({ownerState:n},i,n)):e.style))})),t}return a}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=p,rootShouldForwardProp:s=h,slotShouldForwardProp:c=h}=e,u=e=>(0,l.A)((0,r.A)({},e,{theme:m((0,r.A)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.q_)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:p,slot:v,skipVariantsResolver:b,skipSx:x,overridesResolver:w=g(f(v))}=l,k=(0,o.A)(l,d),A=void 0!==b?b:v&&"Root"!==v&&"root"!==v||!1,S=x||!1;let C=h;"Root"===v||"root"===v?C=s:v?C=c:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const T=(0,i.Ay)(e,(0,r.A)({shouldForwardProp:C,label:undefined},k)),E=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.Q)(e)?o=>y(e,(0,r.A)({},o,{theme:m({theme:o.theme,defaultTheme:n,themeId:t})})):e,I=function(o){let i=E(o);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];const c=s?s.map(E):[];p&&w&&c.push((e=>{const o=m((0,r.A)({},e,{defaultTheme:n,themeId:t}));if(!o.components||!o.components[p]||!o.components[p].styleOverrides)return null;const i=o.components[p].styleOverrides,a={};return Object.entries(i).forEach((t=>{let[n,i]=t;a[n]=y(i,(0,r.A)({},e,{theme:o}))})),w(e,a)})),p&&!A&&c.push((e=>{var o;const i=m((0,r.A)({},e,{defaultTheme:n,themeId:t}));return y({variants:null==i||null==(o=i.components)||null==(o=o[p])?void 0:o.variants},(0,r.A)({},e,{theme:i}))})),S||c.push(u);const d=c.length-s.length;if(Array.isArray(o)&&d>0){const e=new Array(d).fill("");i=[...o,...e],i.raw=[...o.raw,...e]}const h=T(i,...c);return e.muiName&&(h.muiName=e.muiName),h};return T.withConfig&&(I.withConfig=T.withConfig),I}}},7322:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(8168),o=n(8587),i=n(9172);const a=["values","unit","step"];function s(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,s=(0,o.A)(e,a),l=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,r.A)({},e,{[t.key]:t.val})),{})})(t),c=Object.keys(l);function u(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-i/100).concat(n,")")}function h(e,r){const o=c.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==o&&"number"===typeof t[c[o]]?t[c[o]]:r)-i/100).concat(n,")")}return(0,r.A)({keys:c,values:l,up:u,down:d,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):u(e)},not:function(e){const t=c.indexOf(e);return 0===t?u(c[1]):t===c.length-1?d(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},s)}const l={borderRadius:4};var c=n(8604);var u=n(2783),d=n(7758);function h(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){const r=n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[r]:t}}return n.palette.mode===e?t:{}}const p=["breakpoints","palette","spacing","shape"];const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:a,shape:f={}}=e,m=(0,o.A)(e,p),g=s(t),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(a);let v=(0,i.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},l,f)},m);v.applyStyles=h;for(var b=arguments.length,x=new Array(b>1?b-1:0),w=1;w<b;w++)x[w-1]=arguments[w];return v=x.reduce(((e,t)=>(0,i.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},d.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,u.A)({sx:e,theme:this})},v}},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9172);const o=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>m,Lc:()=>v,Ms:()=>b});var r=n(9751),o=n(7162),i=n(3815);const a={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=a[t],o=s[n]||"";return Array.isArray(o)?o.map((e=>r+e)):[r+o]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function p(e,t,n,r){var i;const a=null!=(i=(0,o.Yn)(e,t,!1))?i:n;return"number"===typeof a?e=>"string"===typeof e?e:a*e:Array.isArray(a)?e=>"string"===typeof e?e:a[e]:"function"===typeof a?a:()=>{}}function f(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,o){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),o),a=e[n];return(0,r.NI)(e,a,i)}function y(e,t){const n=f(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(i.A,{})}function v(e){return y(e,u)}function b(e){return y(e,d)}function x(e){return y(e,h)}v.propTypes={},v.filterProps=u,b.propTypes={},b.filterProps=d,x.propTypes={},x.filterProps=h},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,BO:()=>a,Yn:()=>i});var r=n(7598),o=n(9751);function i(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function a(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||o:i(e,n)||o,t&&(r=t(r,o,e)),r}const s=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=i(e.theme,s)||{};return(0,o.NI)(e,c,(e=>{let o=a(u,l,e);return e===o&&"string"===typeof e&&(o=a(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?o:{[n]:o}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>P});var r=n(8604),o=n(7162),i=n(3815);const a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),o=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,i.A)(t,r[n](e)):t),{});return o.propTypes={},o.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),o};var s=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,o.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),p=c("borderBottom",l),f=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),b=c("borderLeftColor"),x=c("outline",l),w=c("outlineColor"),k=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,s.NI)(e,e.borderRadius,n)}return null};k.propTypes={},k.filterProps=["borderRadius"];a(u,d,h,p,f,m,g,y,v,b,k,x,w);const A=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,s.NI)(e,e.gap,n)}return null};A.propTypes={},A.filterProps=["gap"];const S=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.columnGap,n)}return null};S.propTypes={},S.filterProps=["columnGap"];const C=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,s.NI)(e,e.rowGap,n)}return null};C.propTypes={},C.filterProps=["rowGap"];a(A,S,C,(0,o.Ay)({prop:"gridColumn"}),(0,o.Ay)({prop:"gridRow"}),(0,o.Ay)({prop:"gridAutoFlow"}),(0,o.Ay)({prop:"gridAutoColumns"}),(0,o.Ay)({prop:"gridAutoRows"}),(0,o.Ay)({prop:"gridTemplateColumns"}),(0,o.Ay)({prop:"gridTemplateRows"}),(0,o.Ay)({prop:"gridTemplateAreas"}),(0,o.Ay)({prop:"gridArea"}));function T(e,t){return"grey"===t?t:e}a((0,o.Ay)({prop:"color",themeKey:"palette",transform:T}),(0,o.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,o.Ay)({prop:"backgroundColor",themeKey:"palette",transform:T}));function E(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const I=(0,o.Ay)({prop:"width",transform:E}),_=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const o=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||s.zu[t];return o?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(o).concat(e.theme.breakpoints.unit)}:{maxWidth:o}:{maxWidth:E(t)}};return(0,s.NI)(e,e.maxWidth,t)}return null};_.filterProps=["maxWidth"];const j=(0,o.Ay)({prop:"minWidth",transform:E}),N=(0,o.Ay)({prop:"height",transform:E}),R=(0,o.Ay)({prop:"maxHeight",transform:E}),D=(0,o.Ay)({prop:"minHeight",transform:E}),P=((0,o.Ay)({prop:"size",cssProperty:"width",transform:E}),(0,o.Ay)({prop:"size",cssProperty:"height",transform:E}),a(I,_,j,N,R,D,(0,o.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:k},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:A},rowGap:{style:C},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:E},maxWidth:{style:_},minWidth:{transform:E},height:{transform:E},maxHeight:{transform:E},minHeight:{transform:E},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},2783:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(7598),o=n(3815),i=n(7162),a=n(9751),s=n(7758);const l=function(){function e(e,t,n,o){const s={[e]:t,theme:n},l=o[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const p=(0,i.Yn)(n,u)||{};if(h)return h(s);return(0,a.NI)(s,t,(t=>{let n=(0,i.BO)(p,d,t);return t===n&&"string"===typeof t&&(n=(0,i.BO)(p,d,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:i,theme:l={}}=n||{};if(!i)return null;const c=null!=(r=l.unstable_sxConfig)?r:s.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const i=(0,a.EU)(l.breakpoints),s=Object.keys(i);let u=i;return Object.keys(r).forEach((n=>{const i=(s=r[n],d=l,"function"===typeof s?s(d):s);var s,d;if(null!==i&&void 0!==i)if("object"===typeof i)if(c[n])u=(0,o.A)(u,e(n,i,l,c));else{const e=(0,a.NI)({theme:l},i,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),o=new Set(r);return t.every((e=>o.size===Object.keys(e).length))}(e,i)?u=(0,o.A)(u,e):u[n]=t({sx:i,theme:l})}else u=(0,o.A)(u,e(n,i,l,c))})),(0,a.vf)(s,u)}return Array.isArray(i)?i.map(u):u(i)}}();l.filterProps=["sx"];const c=l},5527:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(7322),o=n(7082);const i=(0,r.A)();const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return(0,o.A)(e)}},2919:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3030);var o=n(5527);function i(e){let{props:t,name:n,defaultTheme:i,themeId:a}=e,s=(0,o.A)(i);a&&(s=s[a]||s);const l=function(e){const{theme:t,name:n,props:o}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.A)(t.components[n].defaultProps,o):o}({theme:s,name:n,props:t});return l}},7082:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043),o=n(4472);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.useContext(o.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}},9386:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const r=e=>e,o=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},7598:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7868);function o(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},8610:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((o=>{r[o]=e[o].reduce(((e,r)=>{if(r){const o=t(r);""!==o&&e.push(o),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{A:()=>r})},2456:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{A:()=>r})},3468:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((()=>{e.apply(this,o)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},9172:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,Q:()=>i});var r=n(8168),o=n(5043);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function a(e){if(o.isValidElement(e)||!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=a(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const l=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{o.isValidElement(t[r])?l[r]=t[r]:i(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&i(e[r])?l[r]=s(e[r],t[r],n):n.clone?l[r]=i(t[r])?a(t[r]):t[r]:l[r]=t[r]})),l}},7868:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},2372:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>i});var r=n(9386);const o={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i=o[t];return i?"".concat(n,"-").concat(i):"".concat(r.A.generate(e),"-").concat(t)}},2532:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2372);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o={};return t.forEach((t=>{o[t]=(0,r.Ay)(e,t,n)})),o}},1668:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},3940:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1668);function o(e){return(0,r.A)(e).defaultView||window}},3030:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(8168);function o(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach((i=>{if(i.toString().match(/^(components|slots)$/))n[i]=(0,r.A)({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const a=e[i]||{},s=t[i];n[i]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[i]=(0,r.A)({},s),Object.keys(a).forEach((e=>{n[i][e]=o(a[e],s[e])}))):n[i]=s:n[i]=a}else void 0===n[i]&&(n[i]=e[i])})),n}},6564:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},4440:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043);const o="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},1782:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043),o=n(4440);const i=function(e){const t=r.useRef(e);return(0,o.A)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},3462:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043),o=n(6564);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,o.A)(t,e)}))}),t)}},5844:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>s});var o=n(5043);let i=0;const a=(r||(r=n.t(o,2)))["useId".toString()];function s(e){if(void 0!==a){const t=a();return null!=e?e:t}return function(e){const[t,n]=o.useState(e),r=e||t;return o.useEffect((()=>{null==t&&(i+=1,n("mui-".concat(i)))}),[t]),r}(e)}},3024:(e,t,n)=>{"use strict";function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}n.d(t,{A:()=>o});const o=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}},219:(e,t,n)=>{"use strict";var r=n(3763),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||o}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var o=p(n);o&&o!==f&&e(t,o,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!i[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=h(n,y);try{c(t,y,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case o:return t}}}function k(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var F,O=Object.assign;function L(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case k:return"Portal";case C:return"Profiler";case S:return"StrictMode";case _:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ae=null,Se=null;function Ce(e){if(e=xo(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Te(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function Ee(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function _e(){}var je=!1;function Ne(e,t,n){if(je)return e(t,n);je=!0;try{return Ie(e,t,n)}finally{je=!1,(null!==Ae||null!==Se)&&(_e(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Me(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Oe=null,Le=!1,ze=null,Be={onError:function(e){Fe=!0,Oe=e}};function Ue(e,t,n,r,o,i,a,s,l){Fe=!1,Oe=null,Me.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return qe(o),e;if(a===r)return qe(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Qe=o.unstable_requestPaint,$e=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,At,St,Ct,Tt=!1,Et=[],It=null,_t=null,jt=null,Nt=new Map,Rt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ot(e){var t=bo(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==It&&Lt(It)&&(It=null),null!==_t&&Lt(_t)&&(_t=null),null!==jt&&Lt(jt)&&(jt=null),Nt.forEach(zt),Rt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==_t&&Ut(_t,e),null!==jt&&Ut(jt,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Dt.shift()}var Vt=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Gt(e,t,n,r){var o=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=o,Vt.transition=i}}function Kt(e,t,n,r){if(qt){var o=Yt(e,t,n,r);if(null===o)qr(e,t,r,Xt,n),Mt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return It=Ft(It,e,t,n,r,o),!0;case"dragenter":return _t=Ft(_t,e,t,n,r,o),!0;case"mouseover":return jt=Ft(jt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Nt.set(i,Ft(Nt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Rt.set(i,Ft(Rt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==o;){var i=xo(o);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&qr(e,t,r,Xt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=bo(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=O({},cn,{view:0,detail:0}),hn=on(dn),pn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(O({},pn,{dataTransfer:0})),gn=on(O({},dn,{relatedTarget:0})),yn=on(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Cn(){return Sn}var Tn=O({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=on(Tn),In=on(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=on(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),jn=on(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Nn),Dn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Mn,On=u&&(!Pn||Mn&&8<Mn&&11>=Mn),Ln=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Xn(e){Lr(e,0)}function Yn(e){if(K(wo(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ne(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ar={},Sr={};function Cr(e){if(Ar[e])return Ar[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ar[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=Cr("animationend"),Er=Cr("animationiteration"),Ir=Cr("animationstart"),_r=Cr("transitionend"),jr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){jr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Pr=Nr[Dr];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Er,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var u=Oe;Fe=!1,Oe=null,Le||(Le=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;Or(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;Or(o,s,c),i=l}}}if(Le)throw e=ze,Le=!1,ze=null,e}function zr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Qt(t)){case 1:var o=Ht;break;case 4:o=Gt;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,o=we(n),a=[];e:{var s=jr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Tr:case Er:case Ir:l=yn;break;case _r:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&u.push(Hr(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[mo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:wo(l),p=null==c?s:wo(c),(s=new u(m,f+"leave",l,n,o)).target=d,s.relatedTarget=p,m=null,bo(o)===r&&((u=new u(h,f+"enter",c,n,o)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Qn;else if(qn(s))if($n)g=ar;else{g=or;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,o):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wo(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,o);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,o)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(v=en()):(Jt="value"in($t=o)?$t.value:$t.textContent,Wn=!0)),0<(y=Gr(r,b)).length&&(b=new xn(b,e,null,n,o),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=v))}Lr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,o)),null!=(i=Re(e,t))&&r.push(Hr(e,i,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Re(n,i))&&a.unshift(Hr(n,l,s)):o||null!=(l=Re(n,i))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Wt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,mo="__reactContainer$"+ho,go="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function bo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[po]||e[mo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ko(e){return e[fo]||null}var Ao=[],So=-1;function Co(e){return{current:e}}function To(e){0>So||(e.current=Ao[So],Ao[So]=null,So--)}function Eo(e,t){So++,Ao[So]=e.current,e.current=t}var Io={},_o=Co(Io),jo=Co(!1),No=Io;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Do(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Po(){To(jo),To(_o)}function Mo(e,t,n){if(_o.current!==Io)throw Error(i(168));Eo(_o,t),Eo(jo,n)}function Fo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,V(e)||"Unknown",o));return O({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,No=_o.current,Eo(_o,e),Eo(jo,jo.current),!0}function Lo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Fo(e,t,No),r.__reactInternalMemoizedMergedChildContext=e,To(jo),To(_o),Eo(_o,e)):To(jo),Eo(jo,n)}var zo=null,Bo=!1,Uo=!1;function Wo(e){null===zo?zo=[e]:zo.push(e)}function Vo(){if(!Uo&&null!==zo){Uo=!0;var e=0,t=bt;try{var n=zo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zo=null,Bo=!1}catch(o){throw null!==zo&&(zo=zo.slice(e+1)),Ke(Ze,Vo),o}finally{bt=t,Uo=!1}}return null}var qo=[],Ho=0,Go=null,Ko=0,Xo=[],Yo=0,Qo=null,$o=1,Jo="";function Zo(e,t){qo[Ho++]=Ko,qo[Ho++]=Go,Go=e,Ko=t}function ei(e,t,n){Xo[Yo++]=$o,Xo[Yo++]=Jo,Xo[Yo++]=Qo,Qo=e;var r=$o;e=Jo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,$o=1<<32-at(t)+o|n<<o|r,Jo=i+e}else $o=1<<i|n<<o|r,Jo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Go;)Go=qo[--Ho],qo[Ho]=null,Ko=qo[--Ho],qo[Ho]=null;for(;e===Qo;)Qo=Xo[--Yo],Xo[Yo]=null,Jo=Xo[--Yo],Xo[Yo]=null,$o=Xo[--Yo],Xo[Yo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:$o,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw pi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=co(e.nextSibling)}function fi(){oi=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=x.ReactCurrentBatchConfig;function yi(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vi=Co(null),bi=null,xi=null,wi=null;function ki(){wi=xi=bi=null}function Ai(e){var t=vi.current;To(vi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){bi=e,wi=xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},null===xi){if(null===bi)throw Error(i(308));xi=e,bi.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var Ei=null;function Ii(e){null===Ei?Ei=[e]:Ei.push(e)}function _i(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ii(t)):(n.next=o.next,o.next=n),t.interleaved=n,ji(e,r)}function ji(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_l)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,ji(e,n)}return null===(o=r.interleaved)?(t.next=t,Ii(r)):(t.next=o.next,o.next=t),r.interleaved=t,ji(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Li(e,t,n,r){var o=e.updateQueue;Ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=O({},d,h);break e;case 2:Ni=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Bi=(new r.Component).refs;function Ui(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Pi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,o))&&(rc(t,e,o,r),Fi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Pi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Mi(e,i,o))&&(rc(t,e,o,r),Fi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Pi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Mi(e,o,r))&&(rc(t,e,r,n),Fi(t,e,r))}};function Vi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function qi(e,t,n){var r=!1,o=Io,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(o=Do(t)?No:_o.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):Io),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wi.enqueueReplaceState(t,t.state,null)}function Gi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Bi,Ri(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ti(i):(i=Do(t)?No:_o.current,o.context=Ro(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Ui(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Wi.enqueueReplaceState(o,o.state,null),Li(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function Ki(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===Bi&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yi(e){return(0,e._init)(e._payload)}function Qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===A?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Yi(i)===t.type)?((r=o(t,n.props)).ref=Ki(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Ki(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Ki(e,null,t),n.return=e,n;case k:return(t=zc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Xi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||M(n))return null!==o?null:d(e,t,n,r,null);Xi(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,o,null);Xi(t,r)}return null}function m(o,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(o,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(o,d),ii&&Zo(o,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Zo(o,m),c}for(d=r(o,d);m<s.length;m++)null!==(g=f(d,o,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(o,e)})),ii&&Zo(o,m),c}function g(o,s,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(o,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(o,m),ii&&Zo(o,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(o,v.value,c))&&(s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return ii&&Zo(o,g),u}for(m=r(o,m);!v.done;g++,v=l.next())null!==(v=f(m,o,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(o,e)})),ii&&Zo(o,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===A&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===A){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Yi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=Ki(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===A?((i=Fc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=Ki(r,i,a),l.return=r,r=l)}return s(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,l)).return=r,r=i}return s(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(M(a))return g(r,i,a,l);Xi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Lc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var $i=Qi(!0),Ji=Qi(!1),Zi={},ea=Co(Zi),ta=Co(Zi),na=Co(Zi);function ra(e){if(e===Zi)throw Error(i(174));return e}function oa(e,t){switch(Eo(na,t),Eo(ta,e),Eo(ea,Zi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}To(ea),Eo(ea,t)}function ia(){To(ea),To(ta),To(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Eo(ta,e),Eo(ea,n))}function sa(e){ta.current===e&&(To(ea),To(ta))}var la=Co(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,fa=0,ma=null,ga=null,ya=null,va=!1,ba=!1,xa=0,wa=0;function ka(){throw Error(i(321))}function Aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,o,a){if(fa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ss:ls,e=n(r,o),ba){a=0;do{if(ba=!1,xa=0,25<=a)throw Error(i(301));a+=1,ya=ga=null,t.updateQueue=null,ha.current=cs,e=n(r,o)}while(ba)}if(ha.current=as,t=null!==ga&&null!==ga.next,fa=0,ya=ga=ma=null,va=!1,t)throw Error(i(300));return e}function Ca(){var e=0!==xa;return xa=0,e}function Ta(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Ea(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ia(e,t){return"function"===typeof t?t(e):t}function _a(e){var t=Ea(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ga,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((fa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,ma.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,ma.lanes|=a,Ol|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=Ea(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Ra(e,t){var n=ma,r=Ea(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,xs=!0),r=r.queue,qa(Ma.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,za(9,Pa.bind(null,n,r,o,t),void 0,null),null===jl)throw Error(i(349));0!==(30&fa)||Da(n,t,o)}return o}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,Fa(t)&&Oa(e)}function Ma(e,t,n){return n((function(){Fa(t)&&Oa(e)}))}function Fa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oa(e){var t=ji(e,1);null!==t&&rc(t,e,1,-1)}function La(e){var t=Ta();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function za(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return Ea().memoizedState}function Ua(e,t,n,r){var o=Ta();ma.flags|=e,o.memoizedState=za(1|t,n,void 0,void 0===r?null:r)}function Wa(e,t,n,r){var o=Ea();r=void 0===r?null:r;var i=void 0;if(null!==ga){var a=ga.memoizedState;if(i=a.destroy,null!==r&&Aa(r,a.deps))return void(o.memoizedState=za(t,n,i,r))}ma.flags|=e,o.memoizedState=za(1|t,n,i,r)}function Va(e,t){return Ua(8390656,8,e,t)}function qa(e,t){return Wa(2048,8,e,t)}function Ha(e,t){return Wa(4,2,e,t)}function Ga(e,t){return Wa(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wa(4,4,Ka.bind(null,t,e),n)}function Ya(){}function Qa(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=Ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&fa)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Ol|=n,e.baseState=!0),t)}function Za(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{bt=n,pa.transition=r}}function es(){return Ea().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))os(t,n);else if(null!==(n=_i(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))os(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Ii(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=_i(e,t,o,r))&&(rc(n,e,r,o=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function os(e,t){ba=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var as={readContext:Ti,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},ss={readContext:Ti,useCallback:function(e,t){return Ta().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ta();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ta();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ta().memoizedState=e},useState:La,useDebugValue:Ya,useDeferredValue:function(e){return Ta().memoizedState=e},useTransition:function(){var e=La(!1),t=e[0];return e=Za.bind(null,e[1]),Ta().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,o=Ta();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&fa)||Da(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Va(Ma.bind(null,r,a,e),[e]),r.flags|=2048,za(9,Pa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ta(),t=jl.identifierPrefix;if(ii){var n=Jo;t=":"+t+"R"+(n=($o&~(1<<32-at($o)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ti,useCallback:Qa,useContext:Ti,useEffect:qa,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:$a,useReducer:_a,useRef:Ba,useState:function(){return _a(Ia)},useDebugValue:Ya,useDeferredValue:function(e){return Ja(Ea(),ga.memoizedState,e)},useTransition:function(){return[_a(Ia)[0],Ea().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ti,useCallback:Qa,useContext:Ti,useEffect:qa,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:$a,useReducer:ja,useRef:Ba,useState:function(){return ja(Ia)},useDebugValue:Ya,useDeferredValue:function(e){var t=Ea();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[ja(Ia)[0],Ea().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Pi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),hs(0,t)},n}function ms(e,t,n){(n=Pi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pi(-1,1)).tag=2,Mi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Ji(t,null,n,r):$i(t,e.child,n,r)}function ks(e,t,n,r,o){n=n.render;var i=t.ref;return Ci(t,o),r=Sa(e,t,n,r,i,o),n=Ca(),null===e||xs?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function As(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Dc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,o)}return t.flags|=1,(e=Pc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hs(e,t,o);0!==(131072&e.flags)&&(xs=!0)}}return Es(e,t,n,r,o)}function Cs(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Eo(Pl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Eo(Pl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Eo(Pl,Dl),Dl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Eo(Pl,Dl),Dl|=r;return ws(e,t,o,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,o){var i=Do(n)?No:_o.current;return i=Ro(t,i),Ci(t,o),n=Sa(e,t,n,r,i,o),r=Ca(),null===e||xs?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hs(e,t,o))}function Is(e,t,n,r,o){if(Do(n)){var i=!0;Oo(t)}else i=!1;if(Ci(t,o),null===t.stateNode)qs(e,t),qi(t,n,r),Gi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Ro(t,c=Do(n)?No:_o.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Hi(t,a,r,c),Ni=!1;var h=t.memoizedState;a.state=h,Li(t,r,a,o),l=t.memoizedState,s!==r||h!==l||jo.current||Ni?("function"===typeof u&&(Ui(t,n,u,r),l=t.memoizedState),(s=Ni||Vi(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Di(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:yi(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ti(l):l=Ro(t,l=Do(n)?No:_o.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Hi(t,a,r,l),Ni=!1,h=t.memoizedState,a.state=h,Li(t,r,a,o);var f=t.memoizedState;s!==d||h!==f||jo.current||Ni?("function"===typeof p&&(Ui(t,n,p,r),f=t.memoizedState),(c=Ni||Vi(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,i,o)}function _s(e,t,n,r,o,i){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Lo(t,n,!1),Hs(e,t,i);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=$i(t,e.child,null,i),t.child=$i(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,o&&Lo(t,n,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),oa(e,t.containerInfo)}function Ns(e,t,n,r,o){return fi(),mi(o),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Ds,Ps,Ms,Fs={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,o=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Eo(la,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,o,0,null),e=Fc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Fs,e):zs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Oc({mode:"visible",children:r.children},o,0,null),(a=Fc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&$i(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Fs,a);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=ds(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=jl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,ji(e,o),rc(r,e,o,-1))}return gc(),Bs(e,t,s,r=ds(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Xo[Yo++]=$o,Xo[Yo++]=Jo,Xo[Yo++]=Qo,$o=e.id,Jo=e.overflow,Qo=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pc(r,s):(s=Fc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,o}return e=(s=e.child).sibling,o=Pc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zs(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&mi(r),$i(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Ws(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Vs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Eo(la,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ws(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ca(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ws(t,!0,n,null,i);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Do(t.type)&&Po(),Ks(t),null;case 3:return r=t.stateNode,ia(),To(jo),To(_o),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(sc(ai),ai=null))),Ds(e,t),Ks(t),null;case 5:sa(t);var o=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=ra(ea.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[po]=t,r[fo]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)zr(Mr[o],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Q(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":oe(r,a),zr("invalid",r)}for(var l in ve(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[fo]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),o=r;break;case"iframe":case"object":case"embed":zr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)zr(Mr[o],e);o=r;break;case"source":zr("error",e),o=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),o=r;break;case"details":zr("toggle",e),o=r;break;case"input":Q(e,r),o=Y(e,r),zr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=O({},r,{value:void 0}),zr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),zr("invalid",e)}for(a in ve(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ra(na.current),ra(ea.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Ks(t),null;case 13:if(To(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[po]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(sc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Ml&&(Ml=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return ia(),Ds(e,t),null===e&&Wr(t.stateNode.containerInfo),Ks(t),null;case 10:return Ai(t.type._context),Ks(t),null;case 19:if(To(la),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Eo(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Vl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Ks(t),null}else 2*$e()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=la.current,Eo(la,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ni(t),t.tag){case 1:return Do(t.type)&&Po(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ia(),To(jo),To(_o),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(To(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return To(la),null;case 4:return ia(),null;case 10:return Ai(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Ps=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ra(ea.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"select":o=O({},o,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,$s=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&tl(t,n,i)}o=o.next}while(o!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[go],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:$s||el(n,t);case 6:var r=dl,o=hl;dl=null,pl(e,t,n),hl=o,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Wt(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=o;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),o=o.next}while(o!==r)}pl(e,t,n);break;case 1:if(!$s&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,pl(e,t,n),$s=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));fl(a,s,o),dl=null,hl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){Cc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),ol(3,e)}catch(g){Cc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(o,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":J(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(o,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Wl=$e())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($s=(u=$s)||d,gl(t,e),$s=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(f=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){kl(h);continue}}null!==f?(f.return=p,Zs=f):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),ul(e,ll(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zs=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var o=Zs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Qs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||$s;s=Qs;var c=$s;if(Qs=a,($s=l)&&!c)for(Zs=o;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Al(o):null!==l?(l.return=a,Zs=l):Al(o);for(;null!==i;)Zs=i,xl(i,t,n),i=i.sibling;Zs=o,Qs=s,$s=c}wl(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Zs=i):wl(e)}}function wl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:yi(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}$s||512&t.flags&&il(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function kl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Al(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Cc(t,o,l)}}var i=t.return;try{il(t)}catch(l){Cc(t,i,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Sl,Cl=Math.ceil,Tl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,_l=0,jl=null,Nl=null,Rl=0,Dl=0,Pl=Co(0),Ml=0,Fl=null,Ol=0,Ll=0,zl=0,Bl=null,Ul=null,Wl=0,Vl=1/0,ql=null,Hl=!1,Gl=null,Kl=null,Xl=!1,Yl=null,Ql=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&_l)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&_l)&&0!==Rl?Rl&-Rl:null!==gi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(i(185));yt(e,n,r),0!==(2&_l)&&e===jl||(e===jl&&(0===(2&_l)&&(Ll|=n),4===Ml&&lc(e,Rl)),oc(e,r),1===n&&0===_l&&0===(1&t.mode)&&(Vl=$e()+500,Bo&&Vo()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===jl?Rl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bo=!0,Wo(e)}(cc.bind(null,e)):Wo(cc.bind(null,e)),ao((function(){0===(6&_l)&&Vo()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=jc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,ec=0,0!==(6&_l))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=ht(e,e===jl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var o=_l;_l|=2;var a=mc();for(jl===e&&Rl===t||(ql=null,Vl=$e()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}ki(),Tl.current=a,_l=o,null!==Nl?t=0:(jl=null,Rl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=ac(e,o))),1===t)throw n=Fl,pc(e,0),lc(e,r),oc(e,$e()),n;if(6===t)lc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=yc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ac(e,a))),1===t))throw n=Fl,pc(e,0),lc(e,r),oc(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Ul,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(kc.bind(null,e,Ul,ql),t);break}kc(e,Ul,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ro(kc.bind(null,e,Ul,ql),r);break}kc(e,Ul,ql);break;default:throw Error(i(329))}}}return oc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~zl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&_l))throw Error(i(327));Ac();var t=ht(e,0);if(0===(1&t))return oc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Fl,pc(e,0),lc(e,t),oc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Ul,ql),oc(e,$e()),null}function uc(e,t){var n=_l;_l|=1;try{return e(t)}finally{0===(_l=n)&&(Vl=$e()+500,Bo&&Vo())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&_l)&&Ac();var t=_l;_l|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(_l=t))&&Vo()}}function hc(){Dl=Pl.current,To(Pl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Po();break;case 3:ia(),To(jo),To(_o),da();break;case 5:sa(r);break;case 4:ia();break;case 13:case 19:To(la);break;case 10:Ai(r.type._context);break;case 22:case 23:hc()}n=n.return}if(jl=e,Nl=e=Pc(e.current,null),Rl=Dl=t,Ml=0,Fl=null,zl=Ll=Ol=0,Ul=Bl=null,null!==Ei){for(t=0;t<Ei.length;t++)if(null!==(r=(n=Ei[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ei=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(ki(),ha.current=as,va){for(var r=ma.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}va=!1}if(fa=0,ya=ga=ma=null,ba=!1,xa=0,El.current=null,null===n||null===n.return){Ml=1,Fl=t,Nl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&gs(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,t),mi(us(c,l));break e}}a=c=us(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Oi(a,fs(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Oi(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=as,null===e?as:e}function gc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===jl||0===(268435455&Ol)&&0===(268435455&Ll)||lc(jl,Rl)}function yc(e,t){var n=_l;_l|=2;var r=mc();for(jl===e&&Rl===t||(ql=null,pc(e,t));;)try{vc();break}catch(o){fc(e,o)}if(ki(),_l=n,Tl.current=r,null!==Nl)throw Error(i(261));return jl=null,Rl=0,Ml}function vc(){for(;null!==Nl;)xc(Nl)}function bc(){for(;null!==Nl&&!Ye();)xc(Nl)}function xc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):Nl=t,El.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Dl)))return void(Nl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ml=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ml&&(Ml=5)}function kc(e,t,n){var r=bt,o=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Ac()}while(null!==Yl);if(0!==(6&_l))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===jl&&(Nl=jl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,jc(tt,(function(){return Ac(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var s=bt;bt=1;var l=_l;_l|=4,El.current=null,function(e,t){if(eo=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(l=s),p===a&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},qt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yi(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=nl,nl=!1}(e,n),yl(n,e),fr(to),qt=!!eo,to=eo=null,e.current=n,bl(n,e,o),Qe(),_l=l,bt=s,Il.transition=a}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Ql=o),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&Ac(),a=e.pendingLanes,0!==(1&a)?e===Jl?$l++:($l=0,Jl=e):$l=0,Vo()}(e,t,n,r)}finally{Il.transition=o,bt=r}return null}function Ac(){if(null!==Yl){var e=xt(Ql),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&_l))throw Error(i(331));var o=_l;for(_l|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var p=(d=Zs).sibling,f=d.return;if(al(d),d===u){Zs=null;break}if(null!==p){p.return=f,Zs=p;break}Zs=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zs=v;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var x=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Zs=x;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(k){Cc(l,l.return,k)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(_l=o,Vo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Sc(e,t,n){e=Mi(e,t=fs(0,t=us(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),oc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Mi(t,e=ms(t,e=us(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),oc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Rl&n)===n&&(4===Ml||3===Ml&&(130023424&Rl)===Rl&&500>$e()-Wl?pc(e,0):zl|=n),oc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=ji(e,t))&&(yt(e,t,n),oc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ec(e,n)}function jc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case A:return Fc(n.children,o,a,t);case S:s=8,o|=8;break;case C:return(e=Rc(12,n,t,2|o)).elementType=C,e.lanes=a,e;case _:return(e=Rc(13,n,t,o)).elementType=_,e.lanes=a,e;case j:return(e=Rc(19,n,t,o)).elementType=j,e.lanes=a,e;case D:return Oc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case E:s=9;break e;case I:s=11;break e;case N:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Fc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,o,i,a,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function Wc(e){if(!e)return Io;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Do(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Do(n))return Fo(e,n,t)}return t}function Vc(e,t,n,r,o,i,a,s,l){return(e=Uc(n,r,!0,e,0,i,0,s,l)).context=Wc(null),n=e.current,(i=Pi(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,Mi(n,i,o),e.current.lanes=o,yt(e,o,r),oc(e,r),e}function qc(e,t,n,r){var o=t.current,i=tc(),a=nc(o);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mi(o,t,a))&&(rc(e,o,a,i),Fi(e,o,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||jo.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:js(t),fi();break;case 5:aa(t);break;case 1:Do(t.type)&&Oo(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Eo(vi,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Eo(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Eo(la,1&la.current),null!==(e=Hs(e,t,n))?e.sibling:null);Eo(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Eo(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var o=Ro(t,_o.current);Ci(t,n),o=Sa(null,t,r,e,o,n);var a=Ca();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Do(r)?(a=!0,Oo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ri(t),o.updater=Wi,t.stateNode=o,o._reactInternals=t,Gi(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=yi(r,e),o){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=As(null,t,r,yi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Es(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 1:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 3:e:{if(js(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Di(e,t),Li(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ns(e,t,r,n,o=us(Error(i(423)),t));break e}if(r!==o){t=Ns(e,t,r,n,o=us(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Ji(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===o){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ls(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$i(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ks(e,t,r,o=t.elementType===r?o:yi(r,o),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Eo(vi,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!jo.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Pi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Si(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ci(t,n),r=r(o=Ti(o)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return o=yi(r=t.type,t.pendingProps),As(e,t,r,o=yi(r.type,o),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:yi(r,o),qs(e,t),t.tag=1,Do(r)?(e=!0,Oo(t)):e=!1,Ci(t,n),qi(t,r,o),Gi(t,r,o,n),_s(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Cs(e,t,n)}throw Error(i(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Hc(a);s.call(e)}}qc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[mo]=a.current,Wr(8===e.nodeType?e.parentNode:e),dc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[mo]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,n,r)})),l}(n,t,e,o,r);return Hc(a)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));qc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[mo]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),oc(t,$e()),0===(6&_l)&&(Vl=$e()+500,Vo()))}break;case 13:dc((function(){var t=ji(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},kt=function(e){if(13===e.tag){var t=ji(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},At=function(e){if(13===e.tag){var t=nc(e),n=ji(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},St=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(i(90));K(r),J(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=uc,_e=dc;var tu={usingClientEntryPoint:!1,Events:[xo,wo,ko,Te,Ee,uc]},nu={findFiberByHostInstance:bo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",o=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,o),e[mo]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,o,0,a,s),e[mo]=t.current,Wr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[mo]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case h:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case f:case l:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference")},2086:(e,t,n)=>{"use strict";n(5082)},1153:(e,t,n)=>{"use strict";var r=n(5043),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,A={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,o)&&!S.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:A.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+I(l,0):i,w(a)?(o="",null!=e&&(o=e.replace(E,"$&/")+"/"),_(a,t,o,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+I(s=e[c],c);l+=_(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=_(s=s.value,t,o,u=i+I(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],o=0;return _(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:A};t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=A.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(k);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var i=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),x(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,C=null,T=-1,E=5,I=-1;function _(){return!(t.unstable_now()-I<E)}function j(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?A():(S=!1,C=null)}}else S=!1}if("function"===typeof b)A=function(){b(j)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=j,A=function(){R.postMessage(null)}}else A=function(){y(j,0)};function D(e){C=e,S||(S=!0,A())}function P(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,D(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,P(w,i-a))):(e.sortIndex=s,n(c,e),m||f||(m=!0,D(k))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},2555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{A:()=>s})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},52:(e,t,n)=>{"use strict";n.d(t,{KO:()=>Y,MF:()=>G,Sx:()=>X,Us:()=>W,Wp:()=>K,j6:()=>U,om:()=>B});var r=n(8812),o=n(443),i=n(7700),a=n(2799);class s{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.9.24",u=new o.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",p="@firebase/analytics",f="@firebase/app-check-compat",m="@firebase/app-check",g="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",b="@firebase/database-compat",x="@firebase/functions",w="@firebase/functions-compat",k="@firebase/installations",A="@firebase/installations-compat",S="@firebase/messaging",C="@firebase/messaging-compat",T="@firebase/performance",E="@firebase/performance-compat",I="@firebase/remote-config",_="@firebase/remote-config-compat",j="@firebase/storage",N="@firebase/storage-compat",R="@firebase/firestore",D="@firebase/firestore-compat",P="firebase",M="[DEFAULT]",F={[l]:"fire-core",[d]:"fire-core-compat",[p]:"fire-analytics",[h]:"fire-analytics-compat",[m]:"fire-app-check",[f]:"fire-app-check-compat",[g]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[b]:"fire-rtdb-compat",[x]:"fire-fn",[w]:"fire-fn-compat",[k]:"fire-iid",[A]:"fire-iid-compat",[S]:"fire-fcm",[C]:"fire-fcm-compat",[T]:"fire-perf",[E]:"fire-perf-compat",[I]:"fire-rc",[_]:"fire-rc-compat",[j]:"fire-gcs",[N]:"fire-gcs-compat",[R]:"fire-fst",[D]:"fire-fst-compat","fire-js":"fire-js",[P]:"fire-js-all"},O=new Map,L=new Map;function z(e,t){try{e.container.addComponent(t)}catch(n){u.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function B(e){const t=e.name;if(L.has(t))return u.debug("There were multiple attempts to register component ".concat(t,".")),!1;L.set(t,e);for(const n of O.values())z(n,e);return!0}function U(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;U(e,t).clearInstance(n)}const V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},q=new i.FA("app","Firebase",V);class H{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw q.create("app-deleted",{appName:this._name})}}const G="10.7.0";function K(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const o=Object.assign({name:M,automaticDataCollectionEnabled:!1},t),a=o.name;if("string"!==typeof a||!a)throw q.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw q.create("no-options");const s=O.get(a);if(s){if((0,i.bD)(n,s.options)&&(0,i.bD)(o,s.config))return s;throw q.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of L.values())l.addComponent(r);const c=new H(n,o,l);return O.set(a,c),c}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;const t=O.get(e);if(!t&&e===M&&(0,i.T9)())return K();if(!t)throw q.create("no-app",{appName:e});return t}function Y(e,t,n){var o;let i=null!==(o=F[e])&&void 0!==o?o:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void u.warn(e.join(" "))}B(new r.uA("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Q="firebase-heartbeat-store";let $=null;function J(){return $||($=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Q)}}).catch((e=>{throw q.create("idb-open",{originalErrorMessage:e.message})}))),$}async function Z(e,t){try{const n=(await J()).transaction(Q,"readwrite"),r=n.objectStore(Q);await r.put(t,ee(e)),await n.done}catch(n){if(n instanceof i.g)u.warn(n.message);else{const e=q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function ee(e){return"".concat(e.name,"!").concat(e.options.appId)}class te{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new re(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ne();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ne(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),oe(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),oe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function ne(){return(new Date).toISOString().substring(0,10)}class re{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await J();return await t.transaction(Q).objectStore(Q).get(ee(e))}catch(t){if(t instanceof i.g)u.warn(t.message);else{const e=q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function oe(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ie;ie="",B(new r.uA("platform-logger",(e=>new s(e)),"PRIVATE")),B(new r.uA("heartbeat",(e=>new te(e)),"PRIVATE")),Y(l,c,ie),Y(l,c,"esm2017"),Y("fire-js","")},8812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>s,uA:()=>o});var r=n(7700);class o{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===i?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>o,Vy:()=>c});const r=[];var o;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));const i={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},a=o.INFO,s={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=s[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...t),this._logHandler(this,o.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...t),this._logHandler(this,o.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.INFO,...t),this._logHandler(this,o.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.WARN,...t),this._logHandler(this,o.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,o.ERROR,...t),this._logHandler(this,o.ERROR,...t)}}},7064:(e,t,n)=>{"use strict";n.d(t,{Wp:()=>r.Wp});var r=n(52);(0,r.KO)("firebase","10.7.0","app")},9555:(e,t,n)=>{"use strict";n.d(t,{HF:()=>ze,eJ:()=>Je,getAuth:()=>vn,onAuthStateChanged:()=>et,x9:()=>Ze,df:()=>Dt,CI:()=>tt});var r=n(7700),o=n(52),i=n(443);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var s=n(8812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new r.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new i.Vy("@firebase/auth");function h(e){if(d.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.error("Auth (".concat(o.MF,"): ").concat(e),...n)}}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function m(e,t,n){const o=Object.assign(Object.assign({},c()),{[t]:n});return new r.FA("auth","Firebase",o).create(t,{appName:e.name})}function g(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&p(e,"argument-error"),m(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw y(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function x(e,t){e||b(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===A()||"https:"===A()}function A(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class S{constructor(e,t){this.shortDelay=e,this.longDelay=t,x(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.jZ)()||(0,r.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||(0,r.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function C(e,t){x(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class T{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const E={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=new S(3e4,6e4);function _(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function j(e,t,n,o){return N(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},a={};o&&("GET"===t?a=o:i={body:JSON.stringify(o)});const s=(0,r.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),T.fetch()(D(e,e.config.apiHost,n,s),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))}))}async function N(e,t,n){e._canInitEmulator=!1;const o=Object.assign(Object.assign({},E),t);try{const t=new M(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw F(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw F(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw F(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw F(e,"user-disabled",i);const s=o[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw m(e,s,a);p(e,s)}}catch(i){if(i instanceof r.g)throw i;p(e,"network-request-failed",{message:String(i)})}}async function R(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await j(e,t,n,r,o);return"mfaPendingCredential"in i&&p(e,"multi-factor-auth-required",{_serverResponse:i}),i}function D(e,t,n,r){const o="".concat(t).concat(n,"?").concat(r);return e.config.emulator?C(e.config,o):"".concat(e.config.apiScheme,"://").concat(o)}function P(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),I.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function F(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=f(e,t,r);return o.customData._tokenResponse=n,o}function O(e){return void 0!==e&&void 0!==e.enterprise}class L{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function z(e,t){return j(e,"GET","/v2/recaptchaConfig",_(e,t))}function B(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function U(e){return 1e3*Number(e)}function W(e){const[t,n,o]=e.split(".");if(void 0===t||void 0===n||void 0===o)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(i){return h("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function V(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof r.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class H{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=B(this.lastLoginAt),this.creationTime=B(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function G(e){var t;const n=e.auth,r=await e.getIdToken(),o=await V(e,async function(e,t){return j(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));v(null===o||void 0===o?void 0:o.users.length,n,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const s=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map((e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const l=(c=e.providerData,u=s,[...c.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var c,u;const d=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null===l||void 0===l?void 0:l.length),p=!!d&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new H(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(e,f)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=W(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:i}=await async function(e,t){const n=await N(e,{},(async()=>{const n=(0,r.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:i}=e.config,a=D(e,o,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",T.fetch()(a,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,o,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,i=new K;return n&&(v("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),o&&(v("number"===typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return b("not implemented")}}function X(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Y{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new H(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await V(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,r.Ku)(e),o=await n.getIdToken(t),i=W(o);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:o,authTime:B(U(i.auth_time)),issuedAtTime:B(U(i.iat)),expirationTime:B(U(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.Ku)(e);await G(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Y(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await G(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await V(this,async function(e,t){return j(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,i,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:k,stsTokenManager:A}=t;v(b&&A,e,"internal-error");const S=K.fromJSON(this.name,A);v("string"===typeof b,e,"internal-error"),X(u,e.name),X(d,e.name),v("boolean"===typeof x,e,"internal-error"),v("boolean"===typeof w,e,"internal-error"),X(h,e.name),X(p,e.name),X(f,e.name),X(m,e.name),X(g,e.name),X(y,e.name);const C=new Y({uid:b,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(C.providerData=k.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new K;r.updateFromServerResponse(t);const o=new Y({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await G(o),o}}const Q=new Map;function $(e){x(e instanceof Function,"Expected a class definition");let t=Q.get(e);return t?(x(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Q.set(e,t),t)}class J{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J.type="NONE";const Z=J;function ee(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class te{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=ee(this.userKey,r.apiKey,o),this.fullPersistenceKey=ee("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Y._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new te($(Z),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=r[0]||$(Z);const i=ee(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Y._fromJSON(e,t);c!==o&&(a=n),o=c;break}}catch(l){}const s=r.filter((e=>e._shouldAllowMigration));return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(i)}catch(l){}}))),new te(o,e,n)):new te(o,e,n)}}function ne(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(re(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(le(t))return"Blackberry";if(ce(t))return"Webos";if(oe(t))return"Safari";if((t.includes("chrome/")||ie(t))&&!t.includes("edge/"))return"Chrome";if(se(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function re(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/firefox\//i.test(e)}function oe(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/crios\//i.test(e)}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iemobile/i.test(e)}function se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/android/i.test(e)}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/blackberry/i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/webos/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)();return ue(e)||se(e)||ce(e)||le(e)||/windows phone/i.test(e)||ae(e)}function he(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ne((0,r.ZQ)());break;case"Worker":t="".concat(ne((0,r.ZQ)()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(o.MF,"/").concat(i)}class pe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(o){r(o)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class fe{constructor(e){var t,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,i,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(i=s.containsNumericCharacter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class me{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ye(this),this.idTokenSubscription=new ye(this),this.beforeStateQueue=new pe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await te.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(i)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await G(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence($(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return j(e,"GET","/v2/passwordPolicy",_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new fe(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return j(e,"POST","/v2/accounts:revokeToken",_(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await te.create(this,[$(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(a,this,"internal-error"),a.then((()=>{i||o(this.currentUser)})),"function"===typeof t){const o=e.addObserver(t,n,r);return()=>{i=!0,o()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d.warn("Auth (".concat(o.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ge(e){return(0,r.Ku)(e)}class ye{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.tD)((e=>this.observer=e))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ve(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function be(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class xe{constructor(e){this.type="recaptcha-enterprise",this.auth=ge(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const o=window.grecaptcha;O(o)?o.enterprise.ready((()=>{o.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new L(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((o=>{if(!t&&O(window.grecaptcha))n(o,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ve("https://www.google.com/recaptcha/enterprise.js?render="+o).then((()=>{n(o,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function we(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new xe(e);let i;try{i=await o.verify(n)}catch(s){i=await o.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ke(e,t,n,r){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await we(e,t,n,"getOobCode"===n);return r(e,o)}return r(e,t).catch((async o=>{if(o.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const o=await we(e,t,n,"getOobCode"===n);return r(e,o)}return Promise.reject(o)}))}function Ae(e,t,n){const r=ge(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Se(t),{host:a,port:s}=function(e){const t=Se(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:Ce(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ce(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Se(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ce(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Te{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function Ee(e,t){return j(e,"POST","/v1/accounts:signUp",t)}async function Ie(e,t){return R(e,"POST","/v1/accounts:signInWithPassword",_(e,t))}class _e extends Te{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _e(e,t,"password")}static _fromEmailAndCode(e,t){return new _e(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ke(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ie);case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ke(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ee);case"emailLink":return async function(e,t){return R(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function je(e,t){return R(e,"POST","/v1/accounts:signInWithIdp",_(e,t))}class Ne extends Te{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ne(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Ne(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return je(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,je(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,je(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.Am)(t)}return e}}const Re={USER_NOT_FOUND:"user-not-found"};class De extends Te{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new De({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new De({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await R(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t));if(n.temporaryProof)throw F(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return R(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Re)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new De({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class Pe{constructor(e){var t,n,o,i,a,s;const l=(0,r.I9)((0,r.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(o=l.mode)&&void 0!==o?o:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=l.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=(0,r.I9)((0,r.hp)(e)).link,n=t?(0,r.I9)((0,r.hp)(t)).deep_link_id:null,o=(0,r.I9)((0,r.hp)(e)).deep_link_id;return(o?(0,r.I9)((0,r.hp)(o)).link:null)||o||n||t||e}(e);try{return new Pe(t)}catch(n){return null}}}class Me{constructor(){this.providerId=Me.PROVIDER_ID}static credential(e,t){return _e._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pe.parseLink(t);return v(n,"argument-error"),_e._fromEmailAndCode(e,n.code,n.tenantId)}}Me.PROVIDER_ID="password",Me.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Me.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Oe extends Fe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Le extends Oe{constructor(){super("facebook.com")}static credential(e){return Ne._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Le.credential(t.oauthAccessToken)}catch(n){return null}}}Le.FACEBOOK_SIGN_IN_METHOD="facebook.com",Le.PROVIDER_ID="facebook.com";class ze extends Oe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ne._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ze.credential(n,r)}catch(o){return null}}}ze.GOOGLE_SIGN_IN_METHOD="google.com",ze.PROVIDER_ID="google.com";class Be extends Oe{constructor(){super("github.com")}static credential(e){return Ne._fromParams({providerId:Be.PROVIDER_ID,signInMethod:Be.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Be.credentialFromTaggedObject(e)}static credentialFromError(e){return Be.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Be.credential(t.oauthAccessToken)}catch(n){return null}}}Be.GITHUB_SIGN_IN_METHOD="github.com",Be.PROVIDER_ID="github.com";class Ue extends Oe{constructor(){super("twitter.com")}static credential(e,t){return Ne._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ue.credential(n,r)}catch(o){return null}}}async function We(e,t){return R(e,"POST","/v1/accounts:signUp",_(e,t))}Ue.TWITTER_SIGN_IN_METHOD="twitter.com",Ue.PROVIDER_ID="twitter.com";class Ve{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await Y._fromIdTokenResponse(e,n,r),i=qe(n);return new Ve({user:o,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=qe(n);return new Ve({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function qe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class He extends r.g{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,He.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new He(e,t,n,r)}}function Ge(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw He._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ke(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await V(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ve._forOperation(e,"link",r)}async function Xe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,o="reauthenticate";try{const i=await V(e,Ge(r,o,t,e),n);v(i.idToken,r,"internal-error");const a=W(i.idToken);v(a,r,"internal-error");const{sub:s}=a;return v(e.uid===s,r,"user-mismatch"),Ve._forOperation(e,o,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&p(r,"user-mismatch"),i}}async function Ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",o=await Ge(e,r,t),i=await Ve._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(i.user),i}async function Qe(e,t){return Ye(ge(e),t)}async function $e(e){const t=ge(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Je(e,t,n){const r=ge(e),o=ke(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",We),i=await o.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&$e(e),t})),a=await Ve._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function Ze(e,t,n){return Qe((0,r.Ku)(e),Me.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&$e(e),t}))}function et(e,t,n,o){return(0,r.Ku)(e).onAuthStateChanged(t,n,o)}function tt(e){return(0,r.Ku)(e).signOut()}new WeakMap;const nt="__sak";class rt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nt,"1"),this.storage.removeItem(nt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ot extends rt{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.ZQ)();return oe(e)||ue(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=de(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const o=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,r.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ot.type="LOCAL";const it=ot;class at extends rt{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}at.type="SESSION";const st=at;class lt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new lt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,o))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lt.receivers=[];class ut{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise(((a,s)=>{const l=ct("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),o=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(c),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function dt(){return window}function ht(){return"undefined"!==typeof dt().WorkerGlobalScope&&"function"===typeof dt().importScripts}const pt="firebaseLocalStorageDb",ft="firebaseLocalStorage",mt="fbase_key";class gt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function yt(e,t){return e.transaction([ft],t?"readwrite":"readonly").objectStore(ft)}function vt(){const e=indexedDB.open(pt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ft,{keyPath:mt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ft)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(pt);return new gt(e).toPromise()}(),t(await vt()))}))}))}async function bt(e,t,n){const r=yt(e,!0).put({[mt]:t,value:n});return new gt(r).toPromise()}function xt(e,t){const n=yt(e,!0).delete(t);return new gt(n).toPromise()}class wt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await vt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ht()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lt._getInstance(ht()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ut(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vt();return await bt(e,nt,"1"),await xt(e,nt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>bt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=yt(e,!1).get(t),r=await new gt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=yt(e,!1).getAll();return new gt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}wt.type="LOCAL";const kt=wt;be("rcb"),new S(3e4,6e4);const At="recaptcha";async function St(e,t,n){var r;const o=await n.verify();try{let i;if(v("string"===typeof o,e,"argument-error"),v(n.type===At,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){v("enroll"===t.type,e,"internal-error");const n=await function(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:start",_(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;v(n,e,"missing-multi-factor-info");const a=await function(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:start",_(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return j(e,"POST","/v1/accounts:sendVerificationCode",_(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}class Ct{constructor(e){this.providerId=Ct.PROVIDER_ID,this.auth=ge(e)}verifyPhoneNumber(e,t){return St(this.auth,e,(0,r.Ku)(t))}static credential(e,t){return De._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ct.credentialFromTaggedObject(t)}static credentialFromError(e){return Ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?De._fromTokenResponse(n,r):null}}function Tt(e,t){return t?$(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ct.PROVIDER_ID="phone",Ct.PHONE_SIGN_IN_METHOD="phone";class Et extends Te{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return je(e,this._buildIdpRequest())}_linkToIdToken(e,t){return je(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return je(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function It(e){return Ye(e.auth,new Et(e),e.bypassAuthState)}function _t(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Xe(n,new Et(e),e.bypassAuthState)}async function jt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Ke(n,new Et(e),e.bypassAuthState)}class Nt{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return It;case"linkViaPopup":case"linkViaRedirect":return jt;case"reauthViaPopup":case"reauthViaRedirect":return _t;default:p(this.auth,"internal-error")}}resolve(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){x(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rt=new S(2e3,1e4);async function Dt(e,t,n){const r=ge(e);g(e,t,Fe);const o=Tt(r,n);return new Pt(r,"signInViaPopup",t,o).executeNotNull()}class Pt extends Nt{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,Pt.currentPopupAction&&Pt.currentPopupAction.cancel(),Pt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){x(1===this.filter.length,"Popup operations only handle one event");const e=ct();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Rt.get())};e()}}Pt.currentPopupAction=null;const Mt=new Map;class Ft extends Nt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Mt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=zt(t),r=Lt(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Mt.set(this.auth._key(),e)}return this.bypassAuthState||Mt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ot(e,t){Mt.set(e._key(),t)}function Lt(e){return $(e._redirectPersistence)}function zt(e){return ee("pendingRedirect",e.config.apiKey,e.name)}async function Bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ge(e),o=Tt(r,t),i=new Ft(r,o,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ut{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Vt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wt(e))}saveEventToCache(e){this.cachedEventUids.add(Wt(e)),this.lastProcessedEventTime=Date.now()}}function Wt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Vt(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const qt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ht=/^https?/;async function Gt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return j(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Kt(r))return}catch(n){}p(e,"unauthorized-domain")}function Kt(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Ht.test(n))return!1;if(qt.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const Xt=new S(3e4,6e4);function Yt(){const e=dt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Qt=null;function $t(e){return Qt=Qt||function(e){return new Promise(((t,n)=>{var r,o,i;function a(){Yt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yt(),n(f(e,"network-request-failed"))},timeout:Xt.get()})}if(null===(o=null===(r=dt().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=dt().gapi)||void 0===i?void 0:i.load)){const t=be("iframefcb");return dt()[t]=()=>{gapi.load?a():n(f(e,"network-request-failed"))},ve("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Qt=null,e}))}(e),Qt}const Jt=new S(5e3,15e3),Zt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},en=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tn(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?C(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:o.MF},a=en.get(e.config.apiHost);a&&(i.eid=a);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat((0,r.Am)(i).slice(1))}const nn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function on(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-o)/2,0).toString();let l="";const c=Object.assign(Object.assign({},nn),{width:o.toString(),height:i.toString(),top:a,left:s}),u=(0,r.ZQ)().toLowerCase();n&&(l=ie(u)?"_blank":n),re(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new rn(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(p){}return new rn(h)}const an="__/auth/handler",sn="emulator/auth/handler",ln=encodeURIComponent("fac");async function cn(e,t,n,i,a,s){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:o.MF,eventId:a};if(t instanceof Fe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,r.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))l[e]=t}if(t instanceof Oe){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(ln,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(an);return C(t,sn)}(e),"?").concat((0,r.Am)(c).slice(1)).concat(d)}const un="webStorageSupport";const dn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=st,this._completeRedirectFn=Bt,this._overrideRedirectResult=Ot}async _openPopup(e,t,n,r){var o;x(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return on(e,await cn(e,t,n,w(),r),ct())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){dt().location.href=e}(await cn(e,t,n,w(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(x(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await $t(e),n=dt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:tn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zt,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=f(e,"network-request-failed"),i=dt().setTimeout((()=>{r(o)}),Jt.get());function a(){dt().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(o)}))}))))}(e),n=new Ut(e);return t.register("authEvent",(t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(un,{type:un},(n=>{var r;const o=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[un];void 0!==o&&t(!!o),p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Gt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return de()||oe()||ue()}};var hn="@firebase/auth",pn="1.5.0";class fn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const mn=(0,r.XA)("authIdTokenMaxAge")||300;let gn=null;const yn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mn)return;const o=null===n||void 0===n?void 0:n.token;gn!==o&&(gn=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}}))};function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.Sx)();const t=(0,o.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,o.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),o=n.getOptions();if((0,r.bD)(o,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:dn,persistence:[kt,it,st]}),i=(0,r.XA)("authTokenSyncURL");if(i){const e=yn(i);!function(e,t,n){(0,r.Ku)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,o){(0,r.Ku)(e).onIdTokenChanged(t,n,o)}(n,(t=>e(t)))}const a=(0,r.Tj)("auth");return a&&Ae(n,"http://".concat(a)),n}var bn;bn="Browser",(0,o.om)(new s.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;v(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:bn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(bn)},c=new me(r,o,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,o.om)(new s.uA("auth-internal",(e=>(e=>new fn(e))(ge(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.KO)(hn,pn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(bn)),(0,o.KO)(hn,pn,"esm2017")},6032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:()=>Cm,AggregateField:()=>vf,AggregateQuerySnapshot:()=>bf,Bytes:()=>xf,CACHE_SIZE_UNLIMITED:()=>ef,CollectionReference:()=>Hp,DocumentReference:()=>qp,DocumentSnapshot:()=>Pm,FieldPath:()=>wf,FieldValue:()=>Af,Firestore:()=>tf,FirestoreError:()=>Wr,GeoPoint:()=>Sf,LoadBundleTask:()=>Zp,PersistentCacheIndexManager:()=>Eg,Query:()=>Vp,QueryCompositeFilterConstraint:()=>am,QueryConstraint:()=>nm,QueryDocumentSnapshot:()=>Mm,QueryEndAtConstraint:()=>ym,QueryFieldFilterConstraint:()=>om,QueryLimitConstraint:()=>dm,QueryOrderByConstraint:()=>cm,QuerySnapshot:()=>Fm,QueryStartAtConstraint:()=>fm,SnapshotMetadata:()=>Dm,Timestamp:()=>oo,Transaction:()=>yg,WriteBatch:()=>mg,_AutoId:()=>eo,_ByteString:()=>_i,_DatabaseId:()=>Li,_DocumentKey:()=>uo,_EmptyAppCheckTokenProvider:()=>Jr,_EmptyAuthCredentialsProvider:()=>Hr,_FieldPath:()=>co,_TestingHooks:()=>Pg,_cast:()=>Lp,_debugAssert:()=>zr,_isBase64Available:()=>Ii,_logWarn:()=>Mr,_validateIsNotUsedTogether:()=>Pp,addDoc:()=>Ym,aggregateFieldEqual:()=>Nm,aggregateQuerySnapshotEqual:()=>Rm,and:()=>lm,arrayRemove:()=>kg,arrayUnion:()=>wg,average:()=>_m,clearIndexedDbPersistence:()=>uf,collection:()=>Gp,collectionGroup:()=>Kp,connectFirestoreEmulator:()=>Wp,count:()=>jm,deleteAllPersistentCacheIndexes:()=>Ng,deleteDoc:()=>Xm,deleteField:()=>bg,disableNetwork:()=>pf,disablePersistentCacheIndexAutoCreation:()=>jg,doc:()=>Xp,documentId:()=>kf,enableIndexedDbPersistence:()=>sf,enableMultiTabIndexedDbPersistence:()=>lf,enableNetwork:()=>hf,enablePersistentCacheIndexAutoCreation:()=>_g,endAt:()=>bm,endBefore:()=>vm,ensureFirestoreConfigured:()=>of,executeWrite:()=>Jm,getAggregateFromServer:()=>tg,getCountFromServer:()=>eg,getDoc:()=>zm,getDocFromCache:()=>Um,getDocFromServer:()=>Wm,getDocs:()=>Vm,getDocsFromCache:()=>qm,getDocsFromServer:()=>Hm,getFirestore:()=>rf,getPersistentCacheIndexManager:()=>Ig,increment:()=>Ag,initializeFirestore:()=>nf,limit:()=>hm,limitToLast:()=>pm,loadBundle:()=>mf,memoryEagerGarbageCollector:()=>ag,memoryLocalCache:()=>lg,memoryLruGarbageCollector:()=>sg,namedQuery:()=>gf,onSnapshot:()=>Qm,onSnapshotsInSync:()=>$m,or:()=>sm,orderBy:()=>um,persistentLocalCache:()=>cg,persistentMultipleTabManager:()=>pg,persistentSingleTabManager:()=>hg,query:()=>rm,queryEqual:()=>Qp,refEqual:()=>Yp,runTransaction:()=>vg,serverTimestamp:()=>xg,setDoc:()=>Gm,setIndexConfiguration:()=>Cg,setLogLevel:()=>Rr,snapshotEqual:()=>Lm,startAfter:()=>gm,startAt:()=>mm,sum:()=>Im,terminate:()=>ff,updateDoc:()=>Km,waitForPendingWrites:()=>df,where:()=>im,writeBatch:()=>Sg});var r,o=n(52),i=n(8812),a=n(443),s=n(7700),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={},u=u||{},d=l||self;function h(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function w(){this.s=this.s,this.o=this.o}w.prototype.s=!1,w.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,f)&&e[f]||(e[f]=++m))},w.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const k=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function A(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(h(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};d.addEventListener("test",e,t),d.removeEventListener("test",e,t)}catch(n){}return e}();function E(e){return/^[\s\xa0]*$/.test(e)}function I(){var e=d.navigator;return e&&(e=e.userAgent)?e:""}function _(e){return-1!=I().indexOf(e)}function j(e){return j[" "](e),e}j[" "]=function(){};var N,R,D=_("Opera"),P=_("Trident")||_("MSIE"),M=_("Edge"),F=M||P,O=_("Gecko")&&!(-1!=I().toLowerCase().indexOf("webkit")&&!_("Edge"))&&!(_("Trident")||_("MSIE"))&&!_("Edge"),L=-1!=I().toLowerCase().indexOf("webkit")&&!_("Edge");function z(){var e=d.document;return e?e.documentMode:void 0}e:{var B="",U=function(){var e=I();return O?/rv:([^\);]+)(\)|;)/.exec(e):M?/Edge\/([\d\.]+)/.exec(e):P?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):L?/WebKit\/(\S+)/.exec(e):D?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(U&&(B=U?U[1]:""),P){var W=z();if(null!=W&&W>parseFloat(B)){N=String(W);break e}}N=B}if(d.document&&P){var V=z();R=V||(parseInt(N,10)||void 0)}else R=void 0;var q=R;function H(e,t){if(C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(O){e:{try{j(t.nodeName);var o=!0;break e}catch(i){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:G[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.$.h.call(this)}}x(H,C);var G={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),X=0;function Y(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=o,this.key=++X,this.fa=this.ia=!1}function Q(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,o=e.g[n],i=k(o,t);(r=0<=i)&&Array.prototype.splice.call(o,i,1),r&&(Q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return o}return-1}te.prototype.add=function(e,t,n,r,o){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=re(e,t,r,o);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new Y(t,this.src,i,!!r,o)).ia=n,e.push(t)),t};var oe="closure_lm_"+(1e6*Math.random()|0),ie={};function ae(e,t,n,r,o){if(r&&r.once)return le(e,t,n,r,o);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ae(e,t[i],n,r,o);return null}return n=me(n),e&&e[K]?e.O(t,n,p(r)?!!r.capture:!!r,o):se(e,t,n,!1,r,o)}function se(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var a=p(o)?!!o.capture:!!o,s=pe(e);if(s||(e[oe]=s=new te(e)),(n=s.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=he;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(o=a),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(de(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function le(e,t,n,r,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)le(e,t[i],n,r,o);return null}return n=me(n),e&&e[K]?e.P(t,n,p(r)?!!r.capture:!!r,o):se(e,t,n,!0,r,o)}function ce(e,t,n,r,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)ce(e,t[i],n,r,o);else r=p(r)?!!r.capture:!!r,n=me(n),e&&e[K]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=re(i=e.g[t],n,r,o))&&(Q(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=pe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,o)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[K])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(de(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pe(t))?(ne(n,e),0==n.h&&(n.src=null,t[oe]=null)):Q(e)}}}function de(e){return e in ie?ie[e]:ie[e]="on"+e}function he(e,t){if(e.fa)e=!0;else{t=new H(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ue(e),e=n.call(r,t)}return e}function pe(e){return(e=e[oe])instanceof te?e:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(e){return"function"===typeof e?e:(e[fe]||(e[fe]=function(t){return e.handleEvent(t)}),e[fe])}function ge(){w.call(this),this.i=new te(this),this.S=this,this.J=null}function ye(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var o=t;ee(t=new C(r,e),o)}if(o=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];o=ve(a,r,!0,t)&&o}if(o=ve(a=t.g=e,r,!0,t)&&o,o=ve(a,r,!1,t)&&o,n)for(i=0;i<n.length;i++)o=ve(a=t.g=n[i],r,!1,t)&&o}function ve(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.fa&&a.capture==n){var s=a.listener,l=a.la||a.src;a.ia&&ne(e.i,a),o=!1!==s.call(l,r)&&o}}return o&&!r.defaultPrevented}x(ge,w),ge.prototype[K]=!0,ge.prototype.removeEventListener=function(e,t,n,r){ce(this,e,t,n,r)},ge.prototype.N=function(){if(ge.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Q(n[r]);delete t.g[e],t.h--}}this.J=null},ge.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ge.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var be=d.JSON.stringify;function xe(){var e=Ee;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var we=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ke),(e=>e.reset()));class ke{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ae(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Se(e){d.setTimeout((()=>{throw e}),0)}let Ce,Te=!1,Ee=new class{constructor(){this.h=this.g=null}add(e,t){const n=we.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ie=()=>{const e=d.Promise.resolve(void 0);Ce=()=>{e.then(_e)}};var _e=()=>{for(var e;e=xe();){try{e.h.call(e.g)}catch(n){Se(n)}var t=we;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Te=!1};function je(e,t){ge.call(this),this.h=e||1,this.g=t||d,this.j=v(this.qb,this),this.l=Date.now()}function Ne(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Re(e,t,n){if("function"===typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function De(e){e.g=Re((()=>{e.g=null,e.i&&(e.i=!1,De(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}x(je,ge),(r=je.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(Ne(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){je.$.N.call(this),Ne(this),delete this.g};class Pe extends w{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:De(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(e){w.call(this),this.h=e,this.g={}}x(Me,w);var Fe=[];function Oe(e,t,n,r){Array.isArray(n)||(n&&(Fe[0]=n.toString()),n=Fe);for(var o=0;o<n.length;o++){var i=ae(t,n[o],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Le(e){$(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ue(e)}),e),e.g={}}function ze(){this.g=!0}function Be(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<o.length;a++)o[a]=""}}}return be(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Me.prototype.N=function(){Me.$.N.call(this),Le(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ze.prototype.Ea=function(){this.g=!1},ze.prototype.info=function(){};var Ue={},We=null;function Ve(){return We=We||new ge}function qe(e){C.call(this,Ue.Ta,e)}function He(e){const t=Ve();ye(t,new qe(t))}function Ge(e,t){C.call(this,Ue.STAT_EVENT,e),this.stat=t}function Ke(e){const t=Ve();ye(t,new Ge(t,e))}function Xe(e,t){C.call(this,Ue.Ua,e),this.size=t}function Ye(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Ue.Ta="serverreachability",x(qe,C),Ue.STAT_EVENT="statevent",x(Ge,C),Ue.Ua="timingevent",x(Xe,C);var Qe={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$e={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){C.call(this,"d")}function ot(){C.call(this,"c")}function it(){}function at(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Me(this),this.P=lt,e=F?125:void 0,this.V=new je(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new st}function st(){this.i=null,this.g="",this.h=!1}x(rt,C),x(ot,C),x(it,Je),it.prototype.g=function(){return new XMLHttpRequest},it.prototype.i=function(){return{}},tt=new it;var lt=45e3,ct={},ut={};function dt(e,t,n){e.L=1,e.A=jt(Ct(t)),e.u=n,e.S=!0,ht(e,null)}function ht(e,t){e.G=Date.now(),gt(e),e.B=Ct(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Vt(n.i,"t",r),e.o=0,n=e.l.J,e.h=new st,e.g=Hn(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Pe(v(e.Pa,e,e.g),e.O)),Oe(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),He(),function(e,t,n,r,o,i){e.info((function(){if(e.g)if(i)for(var a="",s=i.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function pt(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ft(e,t,n){let r,o=!0;for(;!e.J&&e.o<n.length;){if(r=mt(e,n),r==ut){4==t&&(e.s=4,Ke(14),o=!1),Be(e.j,e.m,null,"[Incomplete Response]");break}if(r==ct){e.s=4,Ke(15),Be(e.j,e.m,n,"[Invalid Chunk]"),o=!1;break}Be(e.j,e.m,r,null),wt(e,r)}pt(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ke(16),o=!1),e.i=e.i&&o,o?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),On(t),t.M=!0,Ke(11))):(Be(e.j,e.m,n,"[Invalid Chunked Response]"),xt(e),bt(e))}function mt(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ut:(n=Number(t.substring(n,r)),isNaN(n)?ct:(r+=1)+n>t.length?ut:(t=t.slice(r,r+n),e.o=r+n,t))}function gt(e){e.Y=Date.now()+e.P,yt(e,e.P)}function yt(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ye(v(e.lb,e),t)}function vt(e){e.C&&(d.clearTimeout(e.C),e.C=null)}function bt(e){0==e.l.H||e.J||Bn(e.l,e)}function xt(e){vt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ne(e.V),Le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function wt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Qt(n.i,e)))if(!e.K&&Qt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;zn(n),_n(n)}Fn(n),Ke(18)}}else n.Fa=o[1],0<n.Fa-n.V&&37500>o[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ye(v(n.ib,n),6e3));if(1>=Yt(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Wn(n,11)}else if((e.K||n.g==e)&&zn(n),!E(t))for(o=n.Ja.g.parse(t),t=0;t<o.length;t++){let c=o[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const o=c[4];null!=o&&(n.Ga=o,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&($t(i,i.h),i.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,_t(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=qn(r,r.J?r.pa:null,r.Y),a.K){Jt(r.i,a);var s=a,l=r.L;l&&s.setTimeout(l),s.C&&(vt(s),gt(s)),r.g=a}else Mn(r);0<n.j.length&&Nn(n)}else"stop"!=c[0]&&"close"!=c[0]||Wn(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wn(n,7):In(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}He()}catch(c){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(h(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),o=r.length,i=0;i<o;i++)t.call(void 0,r[i],n&&n[i],e)}(r=at.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==kn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const u=kn(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||F||this.g&&(this.h.h||this.g.ja()||An(this.g)))){this.J||4!=u||7==t||He(),vt(this);var n=this.g.da();this.ca=n;t:if(pt(this)){var r=An(this.g);e="";var o=r.length,i=4==kn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){xt(this),bt(this);var a="";break t}this.h.i=new d.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==o-1});r.length=0,this.h.g+=e,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,o,i,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+i+" "+a}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(s)){var c=s;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Ke(12),xt(this),bt(this);break e}Be(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wt(this,n)}this.S?(ft(this,u,a),F&&this.i&&3==u&&(Oe(this.U,this.V,"tick",this.mb),this.V.start())):(Be(this.j,this.m,a,null),wt(this,a)),4==u&&xt(this),this.i&&!this.J&&(4==u?Bn(this.l,this):(this.i=!1,gt(this)))}else(function(e){const t={};e=(e.g&&2<=kn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=Ae(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[o]||[];t[o]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),xt(this),bt(this)}}}catch(u){}},r.mb=function(){if(this.g){var e=kn(this.g),t=this.g.ja();this.o<t.length&&(vt(this),ft(this,e,t),this.i&&4!=e&&gt(this))}},r.cancel=function(){this.J=!0,xt(this)},r.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(He(),Ke(17)),xt(this),this.s=2,bt(this)):yt(this,this.Y-e)};var At=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof St){this.h=e.h,Tt(this,e.j),this.s=e.s,this.g=e.g,Et(this,e.m),this.l=e.l;var t=e.i,n=new zt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),It(this,n),this.o=e.o}else e&&(t=String(e).match(At))?(this.h=!1,Tt(this,t[1]||"",!0),this.s=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),Et(this,t[4]),this.l=Nt(t[5]||"",!0),It(this,t[6]||"",!0),this.o=Nt(t[7]||"")):(this.h=!1,this.i=new zt(null,this.h))}function Ct(e){return new St(e)}function Tt(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Et(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function It(e,t,n){t instanceof zt?(e.i=t,function(e,t){t&&!e.j&&(Bt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ut(this,t),Vt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Rt(t,Ot)),e.i=new zt(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function jt(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Rt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}St.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Rt(t,Pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Rt(t,Pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Rt(n,"/"==n.charAt(0)?Ft:Mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Rt(n,Lt)),e.join("")};var Pt=/[#\/\?@]/g,Mt=/[#\?:]/g,Ft=/[#\?]/g,Ot=/[#\?@]/g,Lt=/#/g;function zt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ut(e,t){Bt(e),t=qt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wt(e,t){return Bt(e),t=qt(e,t),e.g.has(t)}function Vt(e,t,n){Ut(e,t),0<n.length&&(e.i=null,e.g.set(qt(e,t),A(n)),e.h+=n.length)}function qt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=zt.prototype).add=function(e,t){Bt(this),this.i=null,e=qt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Bt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){Bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const o=e[r];for(let e=0;e<o.length;e++)n.push(t[r])}return n},r.Z=function(e){Bt(this);let t=[];if("string"===typeof e)Wt(this,e)&&(t=t.concat(this.g.get(qt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Bt(this),this.i=null,Wt(this,e=qt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ht=class{constructor(e,t){this.g=e,this.map=t}};function Gt(e){this.l=e||Kt,d.PerformanceNavigationTiming?e=0<(e=d.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kt=10;function Xt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yt(e){return e.h?1:e.g?e.g.size:0}function Qt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function $t(e,t){e.g?e.g.add(t):e.h=t}function Jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return A(e.i)}Gt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en,tn=class{stringify(e){return d.JSON.stringify(e,void 0)}parse(e){return d.JSON.parse(e,void 0)}};function nn(){this.g=new tn}function rn(e,t,n){const r=n||"";try{kt(e,(function(e,n){let o=e;p(e)&&(o=be(e)),t.push(r+n+"="+encodeURIComponent(o))}))}catch(o){throw t.push(r+"type="+encodeURIComponent("_badmap")),o}}function on(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch(i){}}function an(e){this.l=e.ec||null,this.j=e.ob||!1}function sn(e,t){ge.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ln,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}x(an,Je),an.prototype.g=function(){return new sn(this.l,this.j)},an.prototype.i=(en={},function(){return en}),x(sn,ge);var ln=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function un(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dn(e)}function dn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=sn.prototype).open=function(e,t){if(this.readyState!=ln)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||d).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,un(this)),this.readyState=ln},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?un(this):dn(this),3==this.readyState&&cn(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,un(this))},r.Ya=function(e){this.g&&(this.response=e,un(this))},r.ka=function(){this.g&&un(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=d.JSON.parse;function pn(e){ge.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fn,this.L=this.M=!1}x(pn,ge);var fn="",mn=/^https?$/i,gn=["POST","PUT"];function yn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vn(e),xn(e)}function vn(e){e.F||(e.F=!0,ye(e,"complete"),ye(e,"error"))}function bn(e){if(e.h&&"undefined"!=typeof u&&(!e.C[1]||4!=kn(e)||2!=e.da()))if(e.v&&4==kn(e))Re(e.La,0,e);else if(ye(e,"readystatechange"),4==kn(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var o=String(e.I).match(At)[1]||null;!o&&d.self&&d.self.location&&(o=d.self.location.protocol.slice(0,-1)),r=!mn.test(o?o.toLowerCase():"")}n=r}if(n)ye(e,"complete"),ye(e,"success");else{e.m=6;try{var i=2<kn(e)?e.g.statusText:""}catch(a){i=""}e.j=i+" ["+e.da()+"]",vn(e)}}finally{xn(e)}}}function xn(e,t){if(e.g){wn(e);const r=e.g,o=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ye(e,"ready");try{r.onreadystatechange=o}catch(n){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function kn(e){return e.g?e.g.readyState:0}function An(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(jr){return null}}function Sn(e){let t="";return $(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Cn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Sn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Tn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function En(e){this.Ga=0,this.j=[],this.l=new ze,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tn("baseRetryDelayMs",5e3,e),this.hb=Tn("retryDelaySeedMs",1e4,e),this.eb=Tn("forwardChannelMaxRetries",2,e),this.xa=Tn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Gt(e&&e.concurrentRequestLimit),this.Ja=new nn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function In(e){if(jn(e),3==e.H){var t=e.W++,n=Ct(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),Dn(e,n),(t=new at(e,e.l,t)).L=2,t.A=jt(Ct(n)),n=!1,d.navigator&&d.navigator.sendBeacon)try{n=d.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&d.Image&&((new Image).src=t.A,n=!0),n||(t.g=Hn(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gt(t)}Vn(e)}function _n(e){e.g&&(On(e),e.g.cancel(),e.g=null)}function jn(e){_n(e),e.u&&(d.clearTimeout(e.u),e.u=null),zn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Nn(e){if(!Xt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ce||Ie(),Te||(Ce(),Te=!0),Ee.add(t,e),e.C=0}}function Rn(e,t){var n;n=t?t.m:e.W++;const r=Ct(e.I);_t(r,"SID",e.K),_t(r,"RID",n),_t(r,"AID",e.V),Dn(e,r),e.o&&e.s&&Cn(r,e.o,e.s),n=new at(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Pn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),$t(e.i,n),dt(n,r,t)}function Dn(e,t){e.na&&$(e.na,(function(e,n){_t(t,n,e)})),e.h&&kt({},(function(e,n){_t(t,n,e)}))}function Pn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?v(e.h.Va,e.h,e):null;e:{var o=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=o[a].g;const s=o[a].map;if(n-=t,0>n)t=Math.max(0,o[a].g-100),i=!1;else try{rn(s,e,"req"+n+"_")}catch(Zo){r&&r(s)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Mn(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ce||Ie(),Te||(Ce(),Te=!0),Ee.add(t,e),e.A=0}}function Fn(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ye(v(e.Ma,e),Un(e,e.A)),e.A++,!0)}function On(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function Ln(e){e.g=new at(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ct(e.wa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.V),_t(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&_t(t,"TO",e.qa),_t(t,"TYPE","xmlhttp"),Dn(e,t),e.o&&e.s&&Cn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=jt(Ct(t)),n.u=null,n.S=!0,ht(n,e)}function zn(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function Bn(e,t){var n=null;if(e.g==t){zn(e),On(e),e.g=null;var r=2}else{if(!Qt(e.i,t))return;n=t.F,Jt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var o=e.C;ye(r=Ve(),new Xe(r,n)),Nn(e)}else Mn(e);else if(3==(o=t.s)||0==o&&0<t.ca||!(1==r&&function(e,t){return!(Yt(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ye(v(e.Na,e,t),Un(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),o){case 1:Wn(e,5);break;case 4:Wn(e,10);break;case 3:Wn(e,6);break;default:Wn(e,2)}}function Un(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Wn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=v(e.pb,e);n||(n=new St("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Tt(n,"https"),jt(n)),function(e,t){const n=new ze;if(d.Image){const r=new Image;r.onload=b(on,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(on,n,r,"TestLoadImage: error",!1,t),r.onabort=b(on,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(on,n,r,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ke(2);e.H=0,e.h&&e.h.za(t),Vn(e),jn(e)}function Vn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(S(e.ma,t),S(e.ma,e.j),e.i.i.length=0,A(e.j),e.j.length=0),e.h.ya()}}function qn(e,t,n){var r=n instanceof St?Ct(n):new St(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Et(r,r.m);else{var o=d.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var i=new St(null);r&&Tt(i,r),t&&(i.g=t),o&&Et(i,o),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&_t(r,n,t),_t(r,"VER",e.ra),Dn(e,r),r}function Hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pn(new an({ob:n})):new pn(e.va)).Oa(e.J),t}function Gn(){}function Kn(){if(P&&!(10<=Number(q)))throw Error("Environmental error: no available transport.")}function Xn(e,t){ge.call(this),this.g=new En(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!E(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $n(this)}function Yn(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qn(){ot.call(this),this.status=1}function $n(e){this.g=e}function Jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zn(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var o=0;16>o;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];var i=e.g[3],a=t+(i^n&(o^i))+r[0]+3614090360&4294967295;a=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^i&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^o^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(o^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(o^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((o=i+((a=o+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}function er(e,t){this.h=t;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var i=0|e[o];r&&i==t||(n[o]=i,r=!1)}this.g=n}(r=pn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=v(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void yn(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=d.FormData&&e instanceof d.FormData,!(0<=k(gn,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,s]of n)this.g.setRequestHeader(a,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return P&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.ua,this)):this.A=Re(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){yn(this,i)}},r.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ye(this,"complete"),ye(this,"abort"),xn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xn(this,!0)),pn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?bn(this):this.kb())},r.kb=function(){bn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<kn(this)?this.g.status:-1}catch(en){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(en){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=En.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const o=new at(this,this.l,e);let i=this.s;if(this.U&&(i?(i=J(i),ee(i,this.U)):i=this.U),null!==this.o||this.O||(o.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Pn(this,o,t),_t(n=Ct(this.I),"RID",e),_t(n,"CVER",22),this.F&&_t(n,"X-HTTP-Session-Id",this.F),Dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Sn(i)))+"&"+t:this.o&&Cn(n,this.o,i)),$t(this.i,o),this.bb&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),o.aa=!0,dt(o,n,null)):dt(o,n,t),this.H=2}}else 3==this.H&&(e?Rn(this,e):0==this.j.length||Xt(this.i)||Rn(this))},r.Ma=function(){if(this.u=null,Ln(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ye(v(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ke(10),_n(this),Ln(this))},r.ib=function(){null!=this.v&&(this.v=null,_n(this),Fn(this),Ke(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ke(2)):(this.l.info("Failed to ping google.com"),Ke(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=Gn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Kn.prototype.g=function(e,t){return new Xn(e,t)},x(Xn,ge),Xn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ke(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=qn(e,null,e.Y),Nn(e)},Xn.prototype.close=function(){In(this.g)},Xn.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=be(e),e=n);t.j.push(new Ht(t.fb++,e)),3==t.H&&Nn(t)},Xn.prototype.N=function(){this.g.h=null,delete this.j,In(this.g),delete this.g,Xn.$.N.call(this)},x(Yn,rt),x(Qn,ot),x($n,Gn),$n.prototype.Ba=function(){ye(this.g,"a")},$n.prototype.Aa=function(e){ye(this.g,new Yn(e))},$n.prototype.za=function(e){ye(this.g,new Qn)},$n.prototype.ya=function(){ye(this.g,"b")},x(Jn,(function(){this.blockSize=-1})),Jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,o=this.h,i=0;i<t;){if(0==o)for(;i<=n;)Zn(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[o++]=e.charCodeAt(i++),o==this.blockSize){Zn(this,r),o=0;break}}else for(;i<t;)if(r[o++]=e[i++],o==this.blockSize){Zn(this,r),o=0;break}}this.h=o,this.i+=t},Jn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var tr={};function nr(e){return-128<=e&&128>e?function(e,t){var n=tr;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new er([0|e],0>e?-1:0)})):new er([0|e],0>e?-1:0)}function rr(e){if(isNaN(e)||!isFinite(e))return ir;if(0>e)return ur(rr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=or;return new er(t,0)}var or=4294967296,ir=nr(0),ar=nr(1),sr=nr(16777216);function lr(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cr(e){return-1==e.h}function ur(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new er(n,~e.h).add(ar)}function dr(e,t){return e.add(ur(t))}function hr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pr(e,t){this.g=e,this.h=t}function fr(e,t){if(lr(t))throw Error("division by zero");if(lr(e))return new pr(ir,ir);if(cr(e))return t=fr(ur(e),t),new pr(ur(t.g),ur(t.h));if(cr(t))return t=fr(e,ur(t)),new pr(ur(t.g),t.h);if(30<e.g.length){if(cr(e)||cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ar,r=t;0>=r.X(e);)n=mr(n),r=mr(r);var o=gr(n,1),i=gr(r,1);for(r=gr(r,2),n=gr(n,2);!lr(r);){var a=i.add(r);0>=a.X(e)&&(o=o.add(n),i=a),r=gr(r,1),n=gr(n,1)}return t=dr(e,o.R(t)),new pr(o,t)}for(o=ir;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=rr(n)).R(t);cr(a)||0<a.X(e);)a=(i=rr(n-=r)).R(t);lr(i)&&(i=ar),o=o.add(i),e=dr(e,a)}return new pr(o,e)}function mr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new er(n,e.h)}function gr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,o=[],i=0;i<r;i++)o[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new er(o,e.h)}(r=er.prototype).ea=function(){if(cr(this))return-ur(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:or+r)*t,t*=or}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(lr(this))return"0";if(cr(this))return"-"+ur(this).toString(e);for(var t=rr(Math.pow(e,6)),n=this,r="";;){var o=fr(n,t).g,i=((0<(n=dr(n,o.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(lr(n=o))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return cr(e=dr(this,e))?-1:lr(e)?0:1},r.abs=function(){return cr(this)?ur(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,o=0;o<=t;o++){var i=r+(65535&this.D(o))+(65535&e.D(o)),a=(i>>>16)+(this.D(o)>>>16)+(e.D(o)>>>16);r=a>>>16,i&=65535,a&=65535,n[o]=a<<16|i}return new er(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(lr(this)||lr(e))return ir;if(cr(this))return cr(e)?ur(this).R(ur(e)):ur(ur(this).R(e));if(cr(e))return ur(this.R(ur(e)));if(0>this.X(sr)&&0>e.X(sr))return rr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<e.g.length;o++){var i=this.D(r)>>>16,a=65535&this.D(r),s=e.D(o)>>>16,l=65535&e.D(o);n[2*r+2*o]+=a*l,hr(n,2*r+2*o),n[2*r+2*o+1]+=i*l,hr(n,2*r+2*o+1),n[2*r+2*o+1]+=a*s,hr(n,2*r+2*o+1),n[2*r+2*o+2]+=i*s,hr(n,2*r+2*o+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new er(n,0)},r.gb=function(e){return fr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new er(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new er(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new er(n,this.h^e.h)},Kn.prototype.createWebChannel=Kn.prototype.g,Xn.prototype.send=Xn.prototype.u,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,$e.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",ge.prototype.listen=ge.prototype.O,pn.prototype.listenOnce=pn.prototype.P,pn.prototype.getLastError=pn.prototype.Sa,pn.prototype.getLastErrorCode=pn.prototype.Ia,pn.prototype.getStatus=pn.prototype.da,pn.prototype.getResponseJson=pn.prototype.Wa,pn.prototype.getResponseText=pn.prototype.ja,pn.prototype.send=pn.prototype.ha,pn.prototype.setWithCredentials=pn.prototype.Oa,Jn.prototype.digest=Jn.prototype.l,Jn.prototype.reset=Jn.prototype.reset,Jn.prototype.update=Jn.prototype.j,er.prototype.add=er.prototype.add,er.prototype.multiply=er.prototype.R,er.prototype.modulo=er.prototype.gb,er.prototype.compare=er.prototype.X,er.prototype.toNumber=er.prototype.ea,er.prototype.toString=er.prototype.toString,er.prototype.getBits=er.prototype.D,er.fromNumber=rr,er.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ur(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=rr(Math.pow(n,8)),o=ir,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+a),n);8>a?(a=rr(Math.pow(n,a)),o=o.R(a).add(rr(s))):o=(o=o.R(r)).add(rr(s))}return o};var yr=c.createWebChannelTransport=function(){return new Kn},vr=c.getStatEventTarget=function(){return Ve()},br=c.ErrorCode=Qe,xr=c.EventType=$e,wr=c.Event=Ue,kr=c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ar=(c.FetchXmlHttpFactory=an,c.WebChannel=et),Sr=c.XhrIo=pn,Cr=c.Md5=Jn,Tr=c.Integer=er;const Er="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let _r="10.7.0";const jr=new a.Vy("@firebase/firestore");function Nr(){return jr.logLevel}function Rr(e){jr.setLogLevel(e)}function Dr(e){if(jr.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Fr);jr.debug("Firestore (".concat(_r,"): ").concat(e),...o)}}function Pr(e){if(jr.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Fr);jr.error("Firestore (".concat(_r,"): ").concat(e),...o)}}function Mr(e){if(jr.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Fr);jr.warn("Firestore (".concat(_r,"): ").concat(e),...o)}}function Fr(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(_r,") INTERNAL ASSERTION FAILED: ")+e;throw Pr(t),new Error(t)}function Lr(e,t){e||Or()}function zr(e,t){e||Or()}function Br(e,t){return e}const Ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wr extends s.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Hr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ir.UNAUTHENTICATED)))}shutdown(){}}class Gr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kr{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vr,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=o;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Dr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Dr("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vr)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Dr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lr("string"==typeof t.accessToken),new qr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lr(null===e||"string"==typeof e),new Ir(e)}}class Xr{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yr{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xr(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Qr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $r{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Dr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Dr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Dr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Dr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lr("string"==typeof e.token),this.R=e.token,new Qr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Jr{getToken(){return Promise.resolve(new Qr(""))}invalidateToken(){}start(e,t){}shutdown(){}}function Zr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class eo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Zr(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<t&&(n+=e.charAt(r[o]%62))}return n}}function to(e,t){return e<t?-1:e>t?1:0}function no(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function ro(e){return e+"\0"}class oo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Wr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oo.fromMillis(Date.now())}static fromDate(e){return oo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?to(this.nanoseconds,e.nanoseconds):to(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class io{constructor(e){this.timestamp=e}static fromTimestamp(e){return new io(e)}static min(){return new io(new oo(0,0))}static max(){return new io(new oo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ao{constructor(e,t,n){void 0===t?t=0:t>e.length&&Or(),void 0===n?n=e.length-t:n>e.length-t&&Or(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ao.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ao?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),o=t.get(r);if(n<o)return-1;if(n>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class so extends ao{construct(e,t,n){return new so(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter((e=>e.length>0)))}return new so(e)}static emptyPath(){return new so([])}}const lo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class co extends ao{construct(e,t,n){return new co(e,t,n)}static isValidIdentifier(e){return lo.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),co.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new co(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Wr(Ur.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wr(Ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(o(),r++)}if(o(),i)throw new Wr(Ur.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new co(t)}static emptyPath(){return new co([])}}class uo{constructor(e){this.path=e}static fromPath(e){return new uo(so.fromString(e))}static fromName(e){return new uo(so.fromString(e).popFirst(5))}static empty(){return new uo(so.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===so.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return so.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new uo(new so(e.slice()))}}class ho{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function po(e){return e.fields.find((e=>2===e.kind))}function fo(e){return e.fields.filter((e=>2!==e.kind))}function mo(e,t){let n=to(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=yo(e.fields[r],t.fields[r]),0!==n)return n;return to(e.fields.length,t.fields.length)}ho.UNKNOWN_ID=-1;class go{constructor(e,t){this.fieldPath=e,this.kind=t}}function yo(e,t){const n=co.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:to(e.kind,t.kind)}class vo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vo(0,wo.min())}}function bo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=io.fromTimestamp(1e9===r?new oo(n+1,0):new oo(n,r));return new wo(o,uo.empty(),t)}function xo(e){return new wo(e.readTime,e.key,-1)}class wo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new wo(io.min(),uo.empty(),-1)}static max(){return new wo(io.max(),uo.empty(),-1)}}function ko(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=uo.comparator(e.documentKey,t.documentKey),0!==n?n:to(e.largestBatchId,t.largestBatchId))}const Ao="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class So{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Co(e){if(e.code!==Ur.FAILED_PRECONDITION||e.message!==Ao)throw e;Dr("LocalStore","Unexpectedly lost primary lease")}class To{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Or(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new To(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof To?t:To.resolve(t)}catch(e){return To.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):To.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):To.reject(t)}static resolve(e){return new To(((t,n)=>{t(e)}))}static reject(e){return new To(((t,n)=>{n(e)}))}static waitFor(e){return new To(((t,n)=>{let r=0,o=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++o,i&&o===r&&t()}),(e=>n(e)))})),i=!0,o===r&&t()}))}static or(e){let t=To.resolve(!1);for(const n of e)t=t.next((e=>e?To.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new To(((n,r)=>{const o=e.length,i=new Array(o);let a=0;for(let s=0;s<o;s++){const l=s;t(e[l]).next((e=>{i[l]=e,++a,a===o&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new To(((n,r)=>{const o=()=>{!0===e()?t().next((()=>{o()}),r):n()};o()}))}}class Eo{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new jo(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Mo(t.target.error);this.V.reject(new jo(e,n))}}static open(e,t,n,r){try{return new Eo(t,e.transaction(r,n))}catch(e){throw new jo(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Dr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ro(t)}}class Io{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Io.S((0,s.ZQ)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dr("SimpleDb","Removing database:",e),Do(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,s.zW)())return!1;if(Io.C())return!0;const e=(0,s.ZQ)(),t=Io.S(e),n=0<t&&t<10,r=Io.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAyZAakNVP3eOnIeJ1qB1Ki-6qRgZ4VBg8",REACT_APP_FIREBASE_APP_ID:"1:773090904452:web:e33380da424fe8d69e75d1",REACT_APP_FIREBASE_AUTH_DOMAIN:"padelbolt-5d9a2.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-1PRKH5C8NV",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"773090904452",REACT_APP_FIREBASE_PROJECT_ID:"padelbolt-5d9a2",REACT_APP_FIREBASE_STORAGE_BUCKET:"padelbolt-5d9a2.appspot.com",REACT_APP_FIREBASE_VAPID_KEY:"BIq74BpG72bX8YlHuDMfYpDtrcd2Q-Wg5U_5-aPV1dVTN4zBMwN_gZdwY0D3EzUYXWz7ONiRaPW-_jVzYpHppTo",REACT_APP_ONESIGNAL_APP_ID:"6c89c857-e106-437a-b445-7150edf7cf22"})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Dr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new jo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Wr(Ur.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Wr(Ur.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new jo(e,r))},r.onupgradeneeded=e=>{Dr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Dr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const o="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.O(e);const t=Eo.open(this.db,e,o?"readonly":"readwrite",n),i=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),To.reject(e)))).toPromise();return i.catch((()=>{})),await t.m,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(Dr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class _o{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Do(this.k.delete())}}class jo extends Wr{constructor(e,t){super(Ur.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function No(e){return"IndexedDbTransactionError"===e.name}class Ro{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Dr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Dr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Do(n)}add(e){return Dr("SimpleDb","ADD",this.store.name,e,e),Do(this.store.add(e))}get(e){return Do(this.store.get(e)).next((t=>(void 0===t&&(t=null),Dr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Dr("SimpleDb","DELETE",this.store.name,e),Do(this.store.delete(e))}count(){return Dr("SimpleDb","COUNT",this.store.name),Do(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new To(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new To(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Dr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new To(((n,r)=>{t.onerror=e=>{const t=Mo(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new To(((r,o)=>{e.onerror=e=>{o(e.target.error)},e.onsuccess=e=>{const o=e.target.result;if(!o)return void r();const i=new _o(o),a=t(o.primaryKey,o.value,i);if(a instanceof To){const e=a.catch((e=>(i.done(),To.reject(e))));n.push(e)}i.isDone?r():null===i.$?o.continue():o.continue(i.$)}})).next((()=>To.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Do(e){return new To(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Mo(e.target.error);n(t)}}))}let Po=!1;function Mo(e){const t=Io.S((0,s.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Wr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Po||(Po=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Fo{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Dr("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Dr("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){No(e)?Dr("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Co(e)}await this.ee(6e4)}))}}class Oo{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,o=!0;return To.doWhile((()=>!0===o&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Dr("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));o=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const o=n.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.ie(r,n))).next((n=>(Dr("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>o.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=xo(t);ko(r,n)>0&&(n=r)})),new wo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Lo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function zo(e){return null==e}function Bo(e){return 0===e&&1/e==-1/0}function Uo(e){return"number"==typeof e&&Number.isInteger(e)&&!Bo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Wo(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=qo(t)),t=Vo(e.get(n),t);return qo(t)}function Vo(e,t){let n=t;const r=e.length;for(let o=0;o<r;o++){const t=e.charAt(o);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function qo(e){return e+"\x01\x01"}function Ho(e){const t=e.length;if(Lr(t>=2),2===t)return Lr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),so.emptyPath();const n=t-2,r=[];let o="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&Or(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===o.length?a=n:(o+=n,a=o,o=""),r.push(a);break;case"\x10":o+=e.substring(i,t),o+="\0";break;case"\x11":o+=e.substring(i,t+1);break;default:Or()}i=t+2}return new so(r)}Lo._e=-1;const Go=["userId","batchId"];function Ko(e,t){return[e,Wo(t)]}function Xo(e,t,n){return[e,Wo(t),n]}const Yo={},Qo=["prefixPath","collectionGroup","readTime","documentId"],$o=["prefixPath","collectionGroup","documentId"],Jo=["collectionGroup","readTime","prefixPath","documentId"],Zo=["canonicalId","targetId"],ei=["targetId","path"],ti=["path","targetId"],ni=["collectionId","parent"],ri=["indexId","uid"],oi=["uid","sequenceNumber"],ii=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ai=["indexId","uid","orderedDocumentKey"],si=["userId","collectionPath","documentId"],li=["userId","collectionPath","largestBatchId"],ci=["userId","collectionGroup","largestBatchId"],ui=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],di=[...ui,"documentOverlays"],hi=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pi=hi,fi=[...pi,"indexConfiguration","indexState","indexEntries"];class mi extends So{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function gi(e,t){const n=Br(e);return Io.M(n.ae,t)}function yi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bi(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xi{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new xi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new xi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wi(this.root,e,this.comparator,!1)}getReverseIterator(){return new wi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wi(this.root,e,this.comparator,!0)}}class wi{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:ki.RED,this.left=null!=r?r:ki.EMPTY,this.right=null!=o?o:ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new ki(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ki.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Or();if(this.right.isRed())throw Or();const e=this.left.check();if(e!==this.right.check())throw Or();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw Or()}get value(){throw Or()}get color(){throw Or()}get left(){throw Or()}get right(){throw Or()}copy(e,t,n,r,o){return this}insert(e,t,n){return new ki(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ai{constructor(e){this.comparator=e,this.data=new xi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Si(this.data.getIterator())}getIteratorFrom(e){return new Si(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ai))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ai(this.comparator);return t.data=e,t}}class Si{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ci(e){return e.hasNext()?e.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(co.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new Ai(co.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ei extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Ii(){return"undefined"!=typeof atob}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ei("Invalid base64 string: "+e):e}}(e);return new _i(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return to(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const ji=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(e){if(Lr(!!e),"string"==typeof e){let t=0;const n=ji.exec(e);if(Lr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ri(e.seconds),nanos:Ri(e.nanos)}}function Ri(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Di(e){return"string"==typeof e?_i.fromBase64String(e):_i.fromUint8Array(e)}function Pi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mi(e){const t=e.mapValue.fields.__previous_value__;return Pi(t)?Mi(t):t}function Fi(e){const t=Ni(e.mapValue.fields.__local_write_time__.timestampValue);return new oo(t.seconds,t.nanos)}class Oi{constructor(e,t,n,r,o,i,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class Li{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Li("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}const zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bi={nullValue:"NULL_VALUE"};function Ui(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pi(e)?4:na(e)?9007199254740991:10:Or()}function Wi(e,t){if(e===t)return!0;const n=Ui(e);if(n!==Ui(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fi(e).isEqual(Fi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ni(e.timestampValue),r=Ni(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Di(e.bytesValue).isEqual(Di(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ri(e.geoPointValue.latitude)===Ri(t.geoPointValue.latitude)&&Ri(e.geoPointValue.longitude)===Ri(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ri(e.integerValue)===Ri(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ri(e.doubleValue),r=Ri(t.doubleValue);return n===r?Bo(n)===Bo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return no(e.arrayValue.values||[],t.arrayValue.values||[],Wi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yi(n)!==yi(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!Wi(n[o],r[o])))return!1;return!0}(e,t);default:return Or()}}function Vi(e,t){return void 0!==(e.values||[]).find((e=>Wi(e,t)))}function qi(e,t){if(e===t)return 0;const n=Ui(e),r=Ui(t);if(n!==r)return to(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return to(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ri(e.integerValue||e.doubleValue),r=Ri(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hi(e.timestampValue,t.timestampValue);case 4:return Hi(Fi(e),Fi(t));case 5:return to(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Di(e),r=Di(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=to(n[o],r[o]);if(0!==e)return e}return to(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=to(Ri(e.latitude),Ri(t.latitude));return 0!==n?n:to(Ri(e.longitude),Ri(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=qi(n[o],r[o]);if(e)return e}return to(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===zi.mapValue&&t===zi.mapValue)return 0;if(e===zi.mapValue)return 1;if(t===zi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},i=Object.keys(o);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=to(r[a],i[a]);if(0!==e)return e;const t=qi(n[r[a]],o[i[a]]);if(0!==t)return t}return to(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Or()}}function Hi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return to(e,t);const n=Ni(e),r=Ni(t),o=to(n.seconds,r.seconds);return 0!==o?o:to(n.nanos,r.nanos)}function Gi(e){return Ki(e)}function Ki(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ni(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Di(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return uo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ki(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(Ki(e.fields[o]));return n+"}"}(e.mapValue):Or()}function Xi(e){switch(Ui(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Mi(e);return t?16+Xi(t):16;case 5:return 2*e.stringValue.length;case 6:return Di(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Xi(t)),0)}(e.arrayValue);case 10:return function(e){let t=0;return vi(e.fields,((e,n)=>{t+=e.length+Xi(n)})),t}(e.mapValue);default:throw Or()}}function Yi(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qi(e){return!!e&&"integerValue"in e}function $i(e){return!!e&&"arrayValue"in e}function Ji(e){return!!e&&"nullValue"in e}function Zi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ea(e){return!!e&&"mapValue"in e}function ta(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vi(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ta(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ta(e.arrayValue.values[n]);return t}return Object.assign({},e)}function na(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ra(e){return"nullValue"in e?Bi:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yi(Li.empty(),uo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Or()}function oa(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yi(Li.empty(),uo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?zi:Or()}function ia(e,t){const n=qi(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function aa(e,t){const n=qi(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class sa{constructor(e){this.value=e}static empty(){return new sa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ea(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(t)}setAll(e){let t=co.emptyPath(),n={},r=[];e.forEach(((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=ta(e):r.push(o.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());ea(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ea(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){vi(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new sa(ta(this.value))}}function la(e){const t=[];return vi(e.fields,((e,n)=>{const r=new co([e]);if(ea(n)){const e=la(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ti(t)}class ca{constructor(e,t,n,r,o,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ca(e,0,io.min(),io.min(),io.min(),sa.empty(),0)}static newFoundDocument(e,t,n,r){return new ca(e,1,t,io.min(),n,r,0)}static newNoDocument(e,t){return new ca(e,2,t,io.min(),io.min(),sa.empty(),0)}static newUnknownDocument(e,t){return new ca(e,3,t,io.min(),io.min(),sa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(io.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=io.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ca&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ua{constructor(e,t){this.position=e,this.inclusive=t}}function da(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const i=t[o],a=e.position[o];if(r=i.field.isKeyField()?uo.comparator(uo.fromName(a.referenceValue),n.key):qi(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ha(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Wi(e.position[n],t.position[n]))return!1;return!0}class pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function fa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ma{}class ga extends ma{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ta(e,t,n):"array-contains"===t?new ja(e,n):"in"===t?new Na(e,n):"not-in"===t?new Ra(e,n):"array-contains-any"===t?new Da(e,n):new ga(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ea(e,n):new Ia(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qi(t,this.value)):null!==t&&Ui(this.value)===Ui(t)&&this.matchesComparison(qi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Or()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ya extends ma{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ya(e,t)}matches(e){return va(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function va(e){return"and"===e.op}function ba(e){return"or"===e.op}function xa(e){return wa(e)&&va(e)}function wa(e){for(const t of e.filters)if(t instanceof ya)return!1;return!0}function ka(e){if(e instanceof ga)return e.field.canonicalString()+e.op.toString()+Gi(e.value);if(xa(e))return e.filters.map((e=>ka(e))).join(",");{const t=e.filters.map((e=>ka(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Aa(e,t){return e instanceof ga?function(e,t){return t instanceof ga&&e.op===t.op&&e.field.isEqual(t.field)&&Wi(e.value,t.value)}(e,t):e instanceof ya?function(e,t){return t instanceof ya&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Aa(n,t.filters[r])),!0)}(e,t):void Or()}function Sa(e,t){const n=e.filters.concat(t);return ya.create(n,e.op)}function Ca(e){return e instanceof ga?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gi(e.value))}(e):e instanceof ya?function(e){return e.op.toString()+" {"+e.getFilters().map(Ca).join(" ,")+"}"}(e):"Filter"}class Ta extends ga{constructor(e,t,n){super(e,t,n),this.key=uo.fromName(n.referenceValue)}matches(e){const t=uo.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ea extends ga{constructor(e,t){super(e,"in",t),this.keys=_a("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ia extends ga{constructor(e,t){super(e,"not-in",t),this.keys=_a("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _a(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>uo.fromName(e.referenceValue)))}class ja extends ga{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $i(t)&&Vi(t.arrayValue,this.value)}}class Na extends ga{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vi(this.value.arrayValue,t)}}class Ra extends ga{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vi(this.value.arrayValue,t)}}class Da extends ga{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$i(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Vi(this.value.arrayValue,e)))}}class Pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=a,this.ce=null}}function Ma(e){return new Pa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Fa(e){const t=Br(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ka(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),zo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gi(e))).join(",")),t.ce=e}return t.ce}function Oa(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Aa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ha(e.startAt,t.startAt)&&ha(e.endAt,t.endAt)}function La(e){return uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function za(e,t){return e.filters.filter((e=>e instanceof ga&&e.field.isEqual(t)))}function Ba(e,t,n){let r=Bi,o=!0;for(const i of za(e,t)){let e=Bi,t=!0;switch(i.op){case"<":case"<=":e=ra(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=Bi}ia({value:r,inclusive:o},{value:e,inclusive:t})<0&&(r=e,o=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];ia({value:r,inclusive:o},{value:e,inclusive:n.inclusive})<0&&(r=e,o=n.inclusive);break}return{value:r,inclusive:o}}function Ua(e,t,n){let r=zi,o=!0;for(const i of za(e,t)){let e=zi,t=!0;switch(i.op){case">=":case">":e=oa(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=zi}aa({value:r,inclusive:o},{value:e,inclusive:t})>0&&(r=e,o=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];aa({value:r,inclusive:o},{value:e,inclusive:n.inclusive})>0&&(r=e,o=n.inclusive);break}return{value:r,inclusive:o}}class Wa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=s,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Va(e,t,n,r,o,i,a,s){return new Wa(e,t,n,r,o,i,a,s)}function qa(e){return new Wa(e)}function Ha(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ga(e){return null!==e.collectionGroup}function Ka(e){const t=Br(e);if(null===t.le){t.le=[];const e=new Set;for(const o of t.explicitOrderBy)t.le.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ai(co.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new pa(r,n))})),e.has(co.keyField().canonicalString())||t.le.push(new pa(co.keyField(),n))}return t.le}function Xa(e){const t=Br(e);return t.he||(t.he=Ya(t,Ka(e))),t.he}function Ya(e,t){if("F"===e.limitType)return Ma(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new pa(e.field,t)}));const n=e.endAt?new ua(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ua(e.startAt.position,e.startAt.inclusive):null;return Ma(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Qa(e,t){const n=e.filters.concat([t]);return new Wa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $a(e,t,n){return new Wa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ja(e,t){return Oa(Xa(e),Xa(t))&&e.limitType===t.limitType}function Za(e){return"".concat(Fa(Xa(e)),"|lt:").concat(e.limitType)}function es(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ca(e))).join(", "),"]")),zo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gi(e))).join(",")),"Target(".concat(t,")")}(Xa(e)),"; limitType=").concat(e.limitType,")")}function ts(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ka(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=da(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ka(e),t))&&!(e.endAt&&!function(e,t,n){const r=da(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ka(e),t))}(e,t)}function ns(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rs(e){return(t,n)=>{let r=!1;for(const o of Ka(e)){const e=os(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function os(e,t,n){const r=e.field.isKeyField()?uo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?qi(r,o):Or()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Or()}}class is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,((t,n)=>{for(const[r,o]of n)e(r,o)}))}isEmpty(){return bi(this.inner)}size(){return this.innerSize}}const as=new xi(uo.comparator);function ss(){return as}const ls=new xi(uo.comparator);function cs(){let e=ls;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function us(e){let t=ls;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ds(){return ps()}function hs(){return ps()}function ps(){return new is((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fs=new xi(uo.comparator),ms=new Ai(uo.comparator);function gs(){let e=ms;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const ys=new Ai(to);function vs(){return ys}function bs(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bo(t)?"-0":t}}function xs(e){return{integerValue:""+e}}function ws(e,t){return Uo(t)?xs(t):bs(e,t)}class ks{constructor(){this._=void 0}}function As(e,t,n){return e instanceof Ts?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Pi(t)&&(t=Mi(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Es?Is(e,t):e instanceof _s?js(e,t):function(e,t){const n=Cs(e,t),r=Rs(n)+Rs(e.Ie);return Qi(n)&&Qi(e.Ie)?xs(r):bs(e.serializer,r)}(e,t)}function Ss(e,t,n){return e instanceof Es?Is(e,t):e instanceof _s?js(e,t):n}function Cs(e,t){return e instanceof Ns?function(e){return Qi(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ts extends ks{}class Es extends ks{constructor(e){super(),this.elements=e}}function Is(e,t){const n=Ds(t);for(const r of e.elements)n.some((e=>Wi(e,r)))||n.push(r);return{arrayValue:{values:n}}}class _s extends ks{constructor(e){super(),this.elements=e}}function js(e,t){let n=Ds(t);for(const r of e.elements)n=n.filter((e=>!Wi(e,r)));return{arrayValue:{values:n}}}class Ns extends ks{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Rs(e){return Ri(e.integerValue||e.doubleValue)}function Ds(e){return $i(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ps{constructor(e,t){this.field=e,this.transform=t}}class Ms{constructor(e,t){this.version=e,this.transformResults=t}}class Fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fs}static exists(e){return new Fs(void 0,e)}static updateTime(e){return new Fs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Os(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ls{}function zs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ys(e.key,Fs.none()):new qs(e.key,e.data,Fs.none());{const n=e.data,r=sa.empty();let o=new Ai(co.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new Hs(e.key,r,new Ti(o.toArray()),Fs.none())}}function Bs(e,t,n){e instanceof qs?function(e,t,n){const r=e.value.clone(),o=Ks(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hs?function(e,t,n){if(!Os(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ks(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(Gs(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Us(e,t,n,r){return e instanceof qs?function(e,t,n,r){if(!Os(e.precondition,t))return n;const o=e.value.clone(),i=Xs(e.fieldTransforms,r,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hs?function(e,t,n,r){if(!Os(e.precondition,t))return n;const o=Xs(e.fieldTransforms,r,t),i=t.data;return i.setAll(Gs(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Os(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ws(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),o=Cs(r.transform,e||null);null!=o&&(null===n&&(n=sa.empty()),n.set(r.field,o))}return n||null}function Vs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&no(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Es&&t instanceof Es||e instanceof _s&&t instanceof _s?no(e.elements,t.elements,Wi):e instanceof Ns&&t instanceof Ns?Wi(e.Ie,t.Ie):e instanceof Ts&&t instanceof Ts}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qs extends Ls{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hs extends Ls{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Gs(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ks(e,t,n){const r=new Map;Lr(e.length===n.length);for(let o=0;o<n.length;o++){const i=e[o],a=i.transform,s=t.data.field(i.field);r.set(i.field,Ss(a,s,n[o]))}return r}function Xs(e,t,n){const r=new Map;for(const o of e){const e=o.transform,i=n.data.field(o.field);r.set(o.field,As(e,i,t))}return r}class Ys extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qs extends Ls{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $s{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Bs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Us(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Us(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hs();return this.mutations.forEach((r=>{const o=e.get(r.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(r.key)?null:a;const s=zs(i,a);null!==s&&n.set(r.key,s),i.isValidDocument()||i.convertToNoDocument(io.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gs())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,((e,t)=>Vs(e,t)))&&no(this.baseMutations,e.baseMutations,((e,t)=>Vs(e,t)))}}class Js{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Lr(e.mutations.length===n.length);let r=fs;const o=e.mutations;for(let i=0;i<o.length;i++)r=r.insert(o[i].key,n[i].version);return new Js(e,t,n,r)}}class Zs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class el{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class tl{constructor(e,t){this.count=e,this.unchangedNames=t}}var nl,rl;function ol(e){switch(e){default:return Or();case Ur.CANCELLED:case Ur.UNKNOWN:case Ur.DEADLINE_EXCEEDED:case Ur.RESOURCE_EXHAUSTED:case Ur.INTERNAL:case Ur.UNAVAILABLE:case Ur.UNAUTHENTICATED:return!1;case Ur.INVALID_ARGUMENT:case Ur.NOT_FOUND:case Ur.ALREADY_EXISTS:case Ur.PERMISSION_DENIED:case Ur.FAILED_PRECONDITION:case Ur.ABORTED:case Ur.OUT_OF_RANGE:case Ur.UNIMPLEMENTED:case Ur.DATA_LOSS:return!0}}function il(e){if(void 0===e)return Pr("GRPC error has no .code"),Ur.UNKNOWN;switch(e){case nl.OK:return Ur.OK;case nl.CANCELLED:return Ur.CANCELLED;case nl.UNKNOWN:return Ur.UNKNOWN;case nl.DEADLINE_EXCEEDED:return Ur.DEADLINE_EXCEEDED;case nl.RESOURCE_EXHAUSTED:return Ur.RESOURCE_EXHAUSTED;case nl.INTERNAL:return Ur.INTERNAL;case nl.UNAVAILABLE:return Ur.UNAVAILABLE;case nl.UNAUTHENTICATED:return Ur.UNAUTHENTICATED;case nl.INVALID_ARGUMENT:return Ur.INVALID_ARGUMENT;case nl.NOT_FOUND:return Ur.NOT_FOUND;case nl.ALREADY_EXISTS:return Ur.ALREADY_EXISTS;case nl.PERMISSION_DENIED:return Ur.PERMISSION_DENIED;case nl.FAILED_PRECONDITION:return Ur.FAILED_PRECONDITION;case nl.ABORTED:return Ur.ABORTED;case nl.OUT_OF_RANGE:return Ur.OUT_OF_RANGE;case nl.UNIMPLEMENTED:return Ur.UNIMPLEMENTED;case nl.DATA_LOSS:return Ur.DATA_LOSS;default:return Or()}}(rl=nl||(nl={}))[rl.OK=0]="OK",rl[rl.CANCELLED=1]="CANCELLED",rl[rl.UNKNOWN=2]="UNKNOWN",rl[rl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rl[rl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rl[rl.NOT_FOUND=5]="NOT_FOUND",rl[rl.ALREADY_EXISTS=6]="ALREADY_EXISTS",rl[rl.PERMISSION_DENIED=7]="PERMISSION_DENIED",rl[rl.UNAUTHENTICATED=16]="UNAUTHENTICATED",rl[rl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rl[rl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rl[rl.ABORTED=10]="ABORTED",rl[rl.OUT_OF_RANGE=11]="OUT_OF_RANGE",rl[rl.UNIMPLEMENTED=12]="UNIMPLEMENTED",rl[rl.INTERNAL=13]="INTERNAL",rl[rl.UNAVAILABLE=14]="UNAVAILABLE",rl[rl.DATA_LOSS=15]="DATA_LOSS";let al=null;function sl(){return new TextEncoder}const ll=new Tr([4294967295,4294967295],0);function cl(e){const t=sl().encode(e),n=new Cr;return n.update(t),new Uint8Array(n.digest())}function ul(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Tr([n,r],0),new Tr([o,i],0)]}class dl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hl("Invalid padding: ".concat(t));if(n<0)throw new hl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new hl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new hl("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Tr.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Tr.fromNumber(n)));return 1===r.compare(ll)&&(r=new Tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=cl(e),[n,r]=ul(t);for(let o=0;o<this.hashCount;o++){const e=this.de(n,r,o);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new dl(o,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.Te)return;const t=cl(e),[n,r]=ul(t);for(let o=0;o<this.hashCount;o++){const e=this.de(n,r,o);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pl{constructor(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new pl(io.min(),r,new xi(to),ss(),gs())}}class fl{constructor(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fl(n,t,gs(),gs(),gs())}}class ml{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class gl{constructor(e,t){this.targetId=e,this.fe=t}}class yl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_i.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class vl{constructor(){this.ge=0,this.pe=wl(),this.ye=_i.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=gs(),t=gs(),n=gs();return this.pe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Or()}})),new fl(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=wl()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Lr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class bl{constructor(e){this.Le=e,this.ke=new Map,this.qe=ss(),this.Qe=xl(),this.Ke=new xi(to)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Or()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const o=r.target;if(La(o))if(0===n){const e=new uo(o.path);this.We(t,e,ca.newNoDocument(e,io.min()))}else Lr(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),o=n?this.et(n,e,r):1;if(0!==o){this.He(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==al||al.tt(function(e,t,n,r,o){var i,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===o,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.fe,this.Le.nt(),n,o))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=t;let i,a;try{i=Di(n).toUint8Array()}catch(e){if(e instanceof Ei)return Mr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new dl(i,r,o)}catch(e){return Mr(e instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Te?null:a}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const o=this.Le.nt(),i="projects/".concat(o.projectId,"/databases/").concat(o.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const o=this.Ye(r);if(o){if(n.current&&La(o.target)){const t=new uo(o.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ca.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=gs();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new pl(e,t,this.Ke,this.qe,n);return this.qe=ss(),this.Qe=xl(),this.Ke=new xi(to),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new vl,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ai(to),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Dr("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new vl),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xl(){return new xi(uo.comparator)}function wl(){return new xi(uo.comparator)}const kl={asc:"ASCENDING",desc:"DESCENDING"},Al={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sl={and:"AND",or:"OR"};class Cl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tl(e,t){return e.useProto3Json||zo(t)?t:{value:t}}function El(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Il(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _l(e,t){return El(e,t.toTimestamp())}function jl(e){return Lr(!!e),io.fromTimestamp(function(e){const t=Ni(e);return new oo(t.seconds,t.nanos)}(e))}function Nl(e,t){return function(e){return new so(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Rl(e){const t=so.fromString(e);return Lr(ec(t)),t}function Dl(e,t){return Nl(e.databaseId,t.path)}function Pl(e,t){const n=Rl(t);if(n.get(1)!==e.databaseId.projectId)throw new Wr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uo(Ll(n))}function Ml(e,t){return Nl(e.databaseId,t)}function Fl(e){const t=Rl(e);return 4===t.length?so.emptyPath():Ll(t)}function Ol(e){return new so(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ll(e){return Lr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zl(e,t,n){return{name:Dl(e,t),fields:n.value.mapValue.fields}}function Bl(e,t,n){const r=Pl(e,t.name),o=jl(t.updateTime),i=t.createTime?jl(t.createTime):io.min(),a=new sa({mapValue:{fields:t.fields}}),s=ca.newFoundDocument(r,o,i,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ul(e,t){let n;if(t instanceof qs)n={update:zl(e,t.key,t.value)};else if(t instanceof Ys)n={delete:Dl(e,t.key)};else if(t instanceof Hs)n={update:zl(e,t.key,t.data),updateMask:Zl(t.fieldMask)};else{if(!(t instanceof Qs))return Or();n={verify:Dl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Es)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _s)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ns)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Or()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_l(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Or()}(e,t.precondition)),n}function Wl(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Fs.updateTime(jl(e.updateTime)):void 0!==e.exists?Fs.exists(e.exists):Fs.none()}(t.currentDocument):Fs.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Lr("REQUEST_TIME"===t.setToServerValue),n=new Ts;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Es(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _s(e)}else"increment"in t?n=new Ns(e,t.increment):Or();const r=co.fromServerFormat(t.fieldPath);return new Ps(r,n)}(e,t))):[];if(t.update){t.update.name;const o=Pl(e,t.update.name),i=new sa({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ti(t.map((e=>co.fromServerFormat(e))))}(t.updateMask);return new Hs(o,i,e,n,r)}return new qs(o,i,n,r)}if(t.delete){const r=Pl(e,t.delete);return new Ys(r,n)}if(t.verify){const r=Pl(e,t.verify);return new Qs(r,n)}return Or()}function Vl(e,t){return{documents:[Ml(e,t.path)]}}function ql(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ml(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ml(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(e){if(0!==e.length)return Jl(ya.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ql(e.field),direction:Kl(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const a=Tl(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hl(e){let t=Fl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Lr(1===r);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Gl(e);return t instanceof ya&&xa(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new pa($l(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,zo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ua(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ua(n,t)}(n.endAt)),Va(t,o,a,i,s,"F",l,c)}function Gl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$l(e.unaryFilter.field);return ga.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=$l(e.unaryFilter.field);return ga.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$l(e.unaryFilter.field);return ga.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$l(e.unaryFilter.field);return ga.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Or()}}(e):void 0!==e.fieldFilter?function(e){return ga.create($l(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Or()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ya.create(e.compositeFilter.filters.map((e=>Gl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Or()}}(e.compositeFilter.op))}(e):Or()}function Kl(e){return kl[e]}function Xl(e){return Al[e]}function Yl(e){return Sl[e]}function Ql(e){return{fieldPath:e.canonicalString()}}function $l(e){return co.fromServerFormat(e.fieldPath)}function Jl(e){return e instanceof ga?function(e){if("=="===e.op){if(Zi(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NAN"}};if(Ji(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zi(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NAN"}};if(Ji(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(e.field),op:Xl(e.op),value:e.value}}}(e):e instanceof ya?function(e){const t=e.getFilters().map((e=>Jl(e)));return 1===t.length?t[0]:{compositeFilter:{op:Yl(e.op),filters:t}}}(e):Or()}function Zl(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ec(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class tc{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:io.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:io.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_i.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new tc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nc{constructor(e){this.ut=e}}function rc(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:El(e,t.version.toTimestamp()),createTime:El(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ic(t.version)};else{if(!t.isUnknownDocument())return Or();r.unknownDocument={path:n.path.toArray(),version:ic(t.version)}}return r}function oc(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ic(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ac(e){const t=new oo(e.seconds,e.nanoseconds);return io.fromTimestamp(t)}function sc(e,t){const n=(t.baseMutations||[]).map((t=>Wl(e.ut,t)));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map((t=>Wl(e.ut,t))),o=oo.fromMillis(t.localWriteTimeMs);return new $s(t.batchId,o,n,r)}function lc(e){const t=ac(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ac(e.lastLimboFreeSnapshotVersion):io.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Lr(1===e.documents.length),Xa(qa(Fl(e.documents[0])))}(e.query):function(e){return Xa(Hl(e))}(e.query),new tc(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,_i.fromBase64String(e.resumeToken))}function cc(e,t){const n=ic(t.snapshotVersion),r=ic(t.lastLimboFreeSnapshotVersion);let o;o=La(t.target)?Vl(e.ut,t.target):ql(e.ut,t.target);const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Fa(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function uc(e){const t=Hl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$a(t,t.limit,"L"):t}function dc(e,t){return new Zs(t.largestBatchId,Wl(e.ut,t.overlayMutation))}function hc(e,t){const n=t.path.lastSegment();return[e,Wo(t.path.popLast()),n]}function pc(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ic(r.readTime),documentKey:Wo(r.documentKey.path),largestBatchId:r.largestBatchId}}class fc{getBundleMetadata(e,t){return mc(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:ac(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return mc(e).put(function(e){return{bundleId:e.id,createTime:ic(jl(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return gc(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:uc(e.bundledQuery),readTime:ac(e.readTime)}}(e)}))}saveNamedQuery(e,t){return gc(e).put(function(e){return{name:e.name,readTime:ic(jl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function mc(e){return gi(e,"bundles")}function gc(e){return gi(e,"namedQueries")}class yc{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new yc(e,n)}getOverlay(e,t){return vc(e).get(hc(this.userId,t)).next((e=>e?dc(this.serializer,e):null))}getOverlays(e,t){const n=ds();return To.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,o)=>{const i=new Zs(t,o);r.push(this.lt(e,i))})),To.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Wo(e.getCollectionPath()))));const o=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);o.push(vc(e).H("collectionPathOverlayIndex",r))})),To.waitFor(o)}getOverlaysForCollection(e,t,n){const r=ds(),o=Wo(t),i=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return vc(e).W("collectionPathOverlayIndex",i).next((e=>{for(const t of e){const e=dc(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const o=ds();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vc(e).Y({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=dc(this.serializer,t);o.size()<r||a.largestBatchId===i?(o.set(a.getKey(),a),i=a.largestBatchId):n.done()})).next((()=>o))}lt(e,t){return vc(e).put(function(e,t,n){const[r,o,i]=hc(t,n.mutation.key);return{userId:t,collectionPath:o,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ul(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function vc(e){return gi(e,"documentOverlays")}class bc{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Ri(e.integerValue));else if("doubleValue"in e){const n=Ri(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Bo(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Di(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?na(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Or()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),uo.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function xc(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wc(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=xc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}bc.St=new bc;class kc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=wc(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=wc(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ac{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Sc{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Cc{constructor(){this.Wt=new kc,this.Gt=new Ac(this.Wt),this.zt=new Sc(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Tc{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Tc(this.indexId,this.documentKey,this.arrayValue,n)}}function Ec(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ic(e.arrayValue,t.arrayValue),0!==n?n:(n=Ic(e.directionalValue,t.directionalValue),0!==n?n:uo.comparator(e.documentKey,t.documentKey)))}function Ic(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class _c{constructor(e){this.Jt=new Ai(((e,t)=>co.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Lr(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=po(e);if(void 0!==t&&!this.tn(t))return!1;const n=fo(e);let r=new Set,o=0,i=0;for(;o<n.length&&this.tn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[o];if(!this.nn(e,t)||!this.rn(this.Yt[i++],t))return!1}++o}for(;o<n.length;++o){const e=n[o];if(i>=this.Yt.length||!this.rn(this.Yt[i++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ai(co.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new go(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new go(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new go(n.field,"asc"===n.dir?0:1)));return new ho(ho.UNKNOWN_ID,this.collectionId,t,vo.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function jc(e){var t,n;if(Lr(e instanceof ga||e instanceof ya),e instanceof ga){if(e instanceof Na){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ga.create(e.field,"==",t))))||[];return ya.create(r,"or")}return e}const r=e.filters.map((e=>jc(e)));return ya.create(r,e.op)}function Nc(e){if(0===e.getFilters().length)return[];const t=Mc(jc(e));return Lr(Pc(t)),Rc(t)||Dc(t)?[t]:t.getFilters()}function Rc(e){return e instanceof ga}function Dc(e){return e instanceof ya&&xa(e)}function Pc(e){return Rc(e)||Dc(e)||function(e){if(e instanceof ya&&ba(e)){for(const t of e.getFilters())if(!Rc(t)&&!Dc(t))return!1;return!0}return!1}(e)}function Mc(e){if(Lr(e instanceof ga||e instanceof ya),e instanceof ga)return e;if(1===e.filters.length)return Mc(e.filters[0]);const t=e.filters.map((e=>Mc(e)));let n=ya.create(t,e.op);return n=Lc(n),Pc(n)?n:(Lr(n instanceof ya),Lr(va(n)),Lr(n.filters.length>1),n.filters.reduce(((e,t)=>Fc(e,t))))}function Fc(e,t){let n;return Lr(e instanceof ga||e instanceof ya),Lr(t instanceof ga||t instanceof ya),n=e instanceof ga?t instanceof ga?function(e,t){return ya.create([e,t],"and")}(e,t):Oc(e,t):t instanceof ga?Oc(t,e):function(e,t){if(Lr(e.filters.length>0&&t.filters.length>0),va(e)&&va(t))return Sa(e,t.getFilters());const n=ba(e)?e:t,r=ba(e)?t:e,o=n.filters.map((e=>Fc(e,r)));return ya.create(o,"or")}(e,t),Lc(n)}function Oc(e,t){if(va(t))return Sa(t,e.getFilters());{const n=t.filters.map((t=>Fc(e,t)));return ya.create(n,"or")}}function Lc(e){if(Lr(e instanceof ga||e instanceof ya),e instanceof ga)return e;const t=e.getFilters();if(1===t.length)return Lc(t[0]);if(wa(e))return e;const n=t.map((e=>Lc(e))),r=[];return n.forEach((t=>{t instanceof ga?r.push(t):t instanceof ya&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ya.create(r,e.op)}class zc{constructor(){this.on=new Bc}addToCollectionParentIndex(e,t){return this.on.add(t),To.resolve()}getCollectionParents(e,t){return To.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return To.resolve()}deleteFieldIndex(e,t){return To.resolve()}deleteAllFieldIndexes(e){return To.resolve()}createTargetIndexes(e,t){return To.resolve()}getDocumentsMatchingTarget(e,t){return To.resolve(null)}getIndexType(e,t){return To.resolve(0)}getFieldIndexes(e,t){return To.resolve([])}getNextCollectionGroupToUpdate(e){return To.resolve(null)}getMinOffset(e,t){return To.resolve(wo.min())}getMinOffsetFromCollectionGroup(e,t){return To.resolve(wo.min())}updateCollectionGroup(e,t,n){return To.resolve()}updateIndexEntries(e,t){return To.resolve()}}class Bc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ai(so.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ai(so.comparator)).toArray()}}const Uc=new Uint8Array(0);class Wc{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Bc,this.an=new is((e=>Fa(e)),((e,t)=>Oa(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const o={collectionId:n,parent:Wo(r)};return Vc(e).put(o)}return To.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ro(t),""],!1,!0);return Vc(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ho(r.parent))}return n}))}addFieldIndex(e,t){const n=Hc(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const o=n.add(r);if(t.indexState){const n=Gc(e);return o.next((e=>{n.put(pc(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Hc(e),r=Gc(e),o=qc(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Hc(e),n=qc(e),r=Gc(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return To.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new _c(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=qc(e);let r=!0;const o=new Map;return To.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),o.set(t,e)})))).next((()=>{if(r){let e=gs();const r=[];return To.forEach(o,((o,i)=>{Dr("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(o)," to execute ").concat(Fa(t)));const a=function(e,t){const n=po(t);if(void 0===n)return null;for(const r of za(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,o),s=function(e,t){const n=new Map;for(const r of fo(t))for(const t of za(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,o),l=function(e,t){const n=[];let r=!0;for(const o of fo(t)){const t=0===o.kind?Ba(e,o.fieldPath,e.startAt):Ua(e,o.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ua(n,r)}(i,o),c=function(e,t){const n=[];let r=!0;for(const o of fo(t)){const t=0===o.kind?Ua(e,o.fieldPath,e.endAt):Ba(e,o.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ua(n,r)}(i,o),u=this.ln(o,i,l),d=this.ln(o,i,c),h=this.hn(o,i,s),p=this.Pn(o.indexId,a,u,l.inclusive,d,c.inclusive,h);return To.forEach(p,(o=>n.j(o,t.limit).next((t=>{t.forEach((t=>{const n=uo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return To.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Nc(ya.create(e.filters,"and")).map((t=>Ma(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,o,i,a){const s=(null!=t?t.length:1)*Math.max(n.length,o.length),l=s/(null!=t?t.length:1),c=[];for(let u=0;u<s;++u){const s=t?this.In(t[u/l]):Uc,d=this.Tn(e,s,n[u%l],r),h=this.En(e,s,o[u%l],i),p=a.map((t=>this.Tn(e,s,t,!0)));c.push(...this.createRange(d,h,p))}return c}Tn(e,t,n,r){const o=new Tc(e,uo.empty(),t,n);return r?o:o.Ht()}En(e,t,n,r){const o=new Tc(e,uo.empty(),t,n);return r?o.Ht():o}cn(e,t){const n=new _c(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return To.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Ai(co.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Cc;for(const r of fo(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const o=n.jt(r.kind);bc.St.ht(e,o)}return n.Ut()}In(e){const t=new Cc;return bc.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Cc;return bc.St.ht(Yi(this.databaseId,t),n.jt(function(e){const t=fo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Cc);let o=0;for(const i of fo(e)){const e=n[o++];for(const n of r)if(this.Rn(t,i.fieldPath)&&$i(e))r=this.Vn(r,i,e);else{const t=n.jt(i.kind);bc.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],o=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Cc;n.seed(e.Ut()),bc.St.ht(i,n.jt(t.kind)),o.push(n)}return o}Rn(e,t){return!!e.filters.find((e=>e instanceof ga&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Hc(e),r=Gc(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return To.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new vo(t.sequenceNumber,new wo(ac(t.readTime),new uo(Ho(t.documentKey)),t.largestBatchId)):vo.empty(),r=e.fields.map((e=>{let[t,n]=e;return new go(co.fromServerFormat(t),n)}));return new ho(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:to(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Hc(e),o=Gc(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>To.forEach(t,(t=>o.put(pc(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return To.forEach(t,((t,r)=>{const o=n.get(t.collectionGroup);return(o?To.resolve(o):this.getFieldIndexes(e,t.collectionGroup)).next((o=>(n.set(t.collectionGroup,o),To.forEach(o,(n=>this.gn(e,t,n).next((t=>{const o=this.pn(r,n);return t.isEqual(o)?To.resolve():this.yn(e,r,n,t,o)})))))))}))}wn(e,t,n,r){return qc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return qc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=qc(e);let o=new Ai(Ec);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{o=o.add(new Tc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>o))}pn(e,t){let n=new Ai(Ec);const r=this.dn(t,e);if(null==r)return n;const o=po(t);if(null!=o){const i=e.data.field(o.fieldPath);if($i(i))for(const o of i.arrayValue.values||[])n=n.add(new Tc(t.indexId,e.key,this.In(o),r))}else n=n.add(new Tc(t.indexId,e.key,Uc,r));return n}yn(e,t,n,r,o){Dr("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,o){const i=e.getIterator(),a=t.getIterator();let s=Ci(i),l=Ci(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const r=n(s,l);r<0?t=!0:r>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(r(l),l=Ci(a)):t?(o(s),s=Ci(i)):(s=Ci(i),l=Ci(a))}}(r,o,Ec,(r=>{i.push(this.wn(e,t,n,r))}),(r=>{i.push(this.Sn(e,t,n,r))})),To.waitFor(i)}fn(e){let t=1;return Gc(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ec(e,t))).filter(((e,t,n)=>!t||0!==Ec(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=Ec(i,e),o=Ec(i,t);if(0===n)r[0]=e.Ht();else if(n>0&&o<0)r.push(i),r.push(i.Ht());else if(o>0)break}r.push(t);const o=[];for(let i=0;i<r.length;i+=2){if(this.bn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,Uc,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,Uc,[]];o.push(IDBKeyRange.bound(e,t))}return o}bn(e,t){return Ec(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Kc)}getMinOffset(e,t){return To.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Or())))).next(Kc)}}function Vc(e){return gi(e,"collectionParents")}function qc(e){return gi(e,"indexEntries")}function Hc(e){return gi(e,"indexConfiguration")}function Gc(e){return gi(e,"indexState")}function Kc(e){Lr(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const o=e[r].indexState.offset;ko(o,t)<0&&(t=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new wo(t.readTime,t.documentKey,n)}const Xc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Yc(e,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qc(e,t,n){const r=e.store("mutations"),o=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=r.Y({range:a},((e,t,n)=>(s++,n.delete())));i.push(l.next((()=>{Lr(1===s)})));const c=[];for(const u of n.mutations){const e=Xo(t,u.key.path,n.batchId);i.push(o.delete(e)),c.push(u.key)}return To.waitFor(i).next((()=>c))}function $c(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Or();t=e.noDocument}return JSON.stringify(t).length}Yc.DEFAULT_COLLECTION_PERCENTILE=10,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yc.DEFAULT=new Yc(41943040,Yc.DEFAULT_COLLECTION_PERCENTILE,Yc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yc.DISABLED=new Yc(-1,0,0);class Jc{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Lr(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Jc(o,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const o=tu(e),i=eu(e);return i.add({}).next((a=>{Lr("number"==typeof a);const s=new $s(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ul(e.ut,t))),o=n.mutations.map((t=>Ul(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:o}}(this.serializer,this.userId,s),c=[];let u=new Ai(((e,t)=>to(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Xo(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(o.put(t,Yo))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[a]=s.keys()})),To.waitFor(c).next((()=>s))}))}lookupMutationBatch(e,t){return eu(e).get(t).next((e=>e?(Lr(e.userId===this.userId),sc(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?To.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return eu(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Lr(t.batchId>=n),o=sc(this.serializer,t)),r.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return eu(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).W("userMutationsIndex",t).next((e=>e.map((e=>sc(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ko(this.userId,t.path),r=IDBKeyRange.lowerBound(n),o=[];return tu(e).Y({range:r},((n,r,i)=>{const[a,s,l]=n,c=Ho(s);if(a===this.userId&&t.path.isEqual(c))return eu(e).get(l).next((e=>{if(!e)throw Or();Lr(e.userId===this.userId),o.push(sc(this.serializer,e))}));i.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ai(to);const r=[];return t.forEach((t=>{const o=Ko(this.userId,t.path),i=IDBKeyRange.lowerBound(o),a=tu(e).Y({range:i},((e,r,o)=>{const[i,a,s]=e,l=Ho(a);i===this.userId&&t.path.isEqual(l)?n=n.add(s):o.done()}));r.push(a)})),To.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,o=Ko(this.userId,n),i=IDBKeyRange.lowerBound(o);let a=new Ai(to);return tu(e).Y({range:i},((e,t,o)=>{const[i,s,l]=e,c=Ho(s);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):o.done()})).next((()=>this.vn(e,a)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(eu(e).get(t).next((e=>{if(null===e)throw Or();Lr(e.userId===this.userId),n.push(sc(this.serializer,e))})))})),To.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Qc(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),To.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return To.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return tu(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ho(e[1]);r.push(t)}else n.done()})).next((()=>{Lr(0===r.length)}))}))}containsKey(e,t){return Zc(e,this.userId,t)}Mn(e){return nu(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Zc(e,t,n){const r=Ko(t,n.path),o=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return tu(e).Y({range:i,J:!0},((e,n,r)=>{const[i,s,l]=e;i===t&&s===o&&(a=!0),r.done()})).next((()=>a))}function eu(e){return gi(e,"mutations")}function tu(e){return gi(e,"documentMutations")}function nu(e){return gi(e,"mutationQueues")}class ru{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ru(0)}static Nn(){return new ru(-1)}}class ou{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new ru(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>io.fromTimestamp(new oo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>iu(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Lr(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const o=[];return iu(e).Y(((i,a)=>{const s=lc(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r++,o.push(this.removeTargetData(e,s)))})).next((()=>To.waitFor(o))).next((()=>r))}forEachTarget(e,t){return iu(e).Y(((e,n)=>{const r=lc(n);t(r)}))}Bn(e){return au(e).get("targetGlobalKey").next((e=>(Lr(null!==e),e)))}Ln(e,t){return au(e).put("targetGlobalKey",t)}kn(e,t){return iu(e).put(cc(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Fa(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return iu(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const i=lc(n);Oa(t,i.target)&&(o=i,r.done())})).next((()=>o))}addMatchingKeys(e,t,n){const r=[],o=su(e);return t.forEach((t=>{const i=Wo(t.path);r.push(o.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))})),To.waitFor(r)}removeMatchingKeys(e,t,n){const r=su(e);return To.forEach(t,(t=>{const o=Wo(t.path);return To.waitFor([r.delete([n,o]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=su(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=su(e);let o=gs();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ho(e[1]),i=new uo(r);o=o.add(i)})).next((()=>o))}containsKey(e,t){const n=Wo(t.path),r=IDBKeyRange.bound([n],[ro(n)],!1,!0);let o=0;return su(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,i]=e;0!==r&&(o++,n.done())})).next((()=>o>0))}_t(e,t){return iu(e).get(t).next((e=>e?lc(e):null))}}function iu(e){return gi(e,"targets")}function au(e){return gi(e,"targetGlobal")}function su(e){return gi(e,"targetDocuments")}function lu(e,t){let[n,r]=e,[o,i]=t;const a=to(n,o);return 0===a?to(r,i):a}class cu{constructor(e){this.Qn=e,this.buffer=new Ai(lu),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();lu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Dr("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){No(e)?Dr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Co(e)}await this.Gn(3e5)}))}}class du{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return To.resolve(Lo._e);const n=new cu(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Dr("LruGarbageCollector","Garbage collection skipped; disabled"),To.resolve(Xc)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Dr("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Xc):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,o,i,s,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Dr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(o=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Nr()<=a.$b.DEBUG&&Dr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-i)+"ms\n"+"\tRemoved ".concat(o," targets in ")+(l-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),To.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e}))))}}function hu(e,t){return new du(e,t)}class pu{constructor(e,t){this.db=e,this.garbageCollector=hu(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return fu(e,n)}removeReference(e,t,n){return fu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return fu(e,t)}Xn(e,t){return function(e,t){let n=!1;return nu(e).Z((r=>Zc(e,r,t).next((e=>(e&&(n=!0),To.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Zn(e,((i,a)=>{if(a<=t){const t=this.Xn(e,i).next((t=>{if(!t)return o++,n.getEntry(e,i).next((()=>(n.removeEntry(i,io.min()),su(e).delete(function(e){return[0,Wo(e.path)]}(i)))))}));r.push(t)}})).next((()=>To.waitFor(r))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return fu(e,t)}Zn(e,t){const n=su(e);let r,o=Lo._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[i,a]=e,{path:s,sequenceNumber:l}=n;0===i?(o!==Lo._e&&t(new uo(Ho(r)),o),o=l,r=s):o=Lo._e})).next((()=>{o!==Lo._e&&t(new uo(Ho(r)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fu(e,t){return su(e).put(function(e,t){return{targetId:0,path:Wo(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class mu{constructor(){this.changes=new is((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ca.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?To.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gu{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return xu(e).put(n)}removeEntry(e,t,n){return xu(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],oc(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=ca.newInvalidDocument(t);return xu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:ca.newInvalidDocument(t)};return xu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},((e,r)=>{n={document:this.tr(t,r),size:$c(r)}})).next((()=>n))}getEntries(e,t){let n=ss();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=ss(),r=new xi(uo.comparator);return this.rr(e,t,((e,t)=>{const o=this.tr(e,t);n=n.insert(e,o),r=r.insert(e,$c(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return To.resolve();let r=new Ai(Au);t.forEach((e=>r=r.add(e)));const o=IDBKeyRange.bound(wu(r.first()),wu(r.last())),i=r.getIterator();let a=i.getNext();return xu(e).Y({index:"documentKeyIndex",range:o},((e,t,r)=>{const o=uo.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Au(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.U(wu(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,o){const i=t.path,a=[i.popLast().toArray(),i.lastSegment(),oc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xu(e).W(IDBKeyRange.bound(a,s,!0)).next((e=>{null==o||o.incrementDocumentReadCount(e.length);let n=ss();for(const o of e){const e=this.tr(uo.fromSegments(o.prefixPath.concat(o.collectionGroup,o.documentId)),o);e.isFoundDocument()&&(ts(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let o=ss();const i=ku(t,n),a=ku(t,wo.max());return xu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},((e,t,n)=>{const i=this.tr(uo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);o=o.insert(i.key,i),o.size===r&&n.done()})).next((()=>o))}newChangeBuffer(e){return new vu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return bu(e).get("remoteDocumentGlobalKey").next((e=>(Lr(!!e),e)))}er(e,t){return bu(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Bl(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=uo.fromSegments(t.noDocument.path),r=ac(t.noDocument.readTime);n=ca.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Or();{const e=uo.fromSegments(t.unknownDocument.path),r=ac(t.unknownDocument.version);n=ca.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new oo(e[0],e[1]);return io.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(io.min()))return e}return ca.newInvalidDocument(e)}}function yu(e){return new gu(e)}class vu extends mu{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new is((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Ai(((e,t)=>to(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((o,i)=>{const a=this.ar.get(o);if(t.push(this._r.removeEntry(e,o,a.readTime)),i.isValidDocument()){const s=rc(this._r.serializer,i);r=r.add(o.path.popLast());const l=$c(s);n+=l-a.size,t.push(this._r.addEntry(e,o,s))}else if(n-=a.size,this.trackRemovals){const n=rc(this._r.serializer,i.convertToNoDocument(io.min()));t.push(this._r.addEntry(e,o,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),To.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function bu(e){return gi(e,"remoteDocumentGlobal")}function xu(e){return gi(e,"remoteDocumentsV14")}function wu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ku(e,t){const n=t.documentKey.path.toArray();return[e,oc(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Au(e,t){const n=e.path.toArray(),r=t.path.toArray();let o=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(o=to(n[i],r[i]),o)return o;return o=to(n.length,r.length),o||(o=to(n[n.length-2],r[r.length-2]),o||to(n[n.length-1],r[r.length-1]))}class Su{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Us(n.mutation,e,Ti.empty(),oo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,gs()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs();const r=ds();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=cs();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ds();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gs())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let o=ss();const i=ps(),a=ps();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Hs)?o=o.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Us(a.mutation,t,a.mutation.getFieldMask(),oo.now())):i.set(t.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,o).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Su(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=ps();let r=new xi(((e,t)=>e-t)),o=gs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const o of e)o.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Ti.empty();a=o.applyToLocalView(i,a),n.set(e,a);const s=(r.get(o.batchId)||gs()).add(e);r=r.insert(o.batchId,s)}))})).next((()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=hs();l.forEach((e=>{if(!o.has(e)){const r=zs(t.get(e),n.get(e));null!==r&&c.set(e,r),o=o.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,s,c))}return To.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ga(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):To.resolve(ds());let a=-1,s=o;return i.next((t=>To.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),o.get(t)?To.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,o))).next((()=>this.computeViews(e,s,t,gs()))).next((e=>({batchId:a,changes:us(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new uo(t)).next((e=>{let t=cs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let i=cs();return this.indexManager.getCollectionParents(e,o).next((a=>To.forEach(a,(a=>{const s=function(e,t){return new Wa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(o));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r)))).next((e=>{o.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ca.newInvalidDocument(r)))}));let n=cs();return e.forEach(((e,r)=>{const i=o.get(e);void 0!==i&&Us(i.mutation,r,Ti.empty(),oo.now()),ts(t,r)&&(n=n.insert(e,r))})),n}))}}class Tu{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return To.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jl(e.createTime)}}(t)),To.resolve()}getNamedQuery(e,t){return To.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:uc(e.bundledQuery),readTime:jl(e.readTime)}}(t)),To.resolve()}}class Eu{constructor(){this.overlays=new xi(uo.comparator),this.lr=new Map}getOverlay(e,t){return To.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ds();return To.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),To.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),To.resolve()}getOverlaysForCollection(e,t,n){const r=ds(),o=t.length+1,i=new uo(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return To.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new xi(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=ds(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ds(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return To.resolve(a)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Zs(t,n));let o=this.lr.get(t);void 0===o&&(o=gs(),this.lr.set(t,o)),this.lr.set(t,o.add(n.key))}}class Iu{constructor(){this.hr=new Ai(_u.Pr),this.Ir=new Ai(_u.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new _u(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new _u(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new uo(new so([])),n=new _u(t,e),r=new _u(t,e+1),o=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),o.push(e.key)})),o}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new uo(new so([])),n=new _u(t,e),r=new _u(t,e+1);let o=gs();return this.Ir.forEachInRange([n,r],(e=>{o=o.add(e.key)})),o}containsKey(e){const t=new _u(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _u{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return uo.comparator(e.key,t.key)||to(e.gr,t.gr)}static Tr(e,t){return to(e.gr,t.gr)||uo.comparator(e.key,t.key)}}class ju{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Ai(_u.Pr)}checkEmpty(e){return To.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new $s(o,t,n,r);this.mutationQueue.push(i);for(const a of r)this.yr=this.yr.add(new _u(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return To.resolve(i)}lookupMutationBatch(e,t){return To.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),o=r<0?0:r;return To.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return To.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return To.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _u(t,0),r=new _u(t,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);o.push(t)})),To.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ai(to);return t.forEach((e=>{const t=new _u(e,0),r=new _u(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),To.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;uo.isDocumentKey(o)||(o=o.child(""));const i=new _u(new uo(o),0);let a=new Ai(to);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.gr)),!0)}),i),To.resolve(this.br(a))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lr(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return To.forEach(t.mutations,(r=>{const o=new _u(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new _u(t,0),r=this.yr.firstAfterOrEqual(n);return To.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,To.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Nu{constructor(e){this.Cr=e,this.docs=new xi(uo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return To.resolve(n?n.document.mutableCopy():ca.newInvalidDocument(t))}getEntries(e,t){let n=ss();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ca.newInvalidDocument(e))})),To.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=ss();const i=t.path,a=new uo(i.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ko(xo(a),n)<=0||(r.has(a.key)||ts(t,a))&&(o=o.insert(a.key,a.mutableCopy()))}return To.resolve(o)}getAllFromCollectionGroup(e,t,n,r){Or()}vr(e,t){return To.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ru(this)}getSize(e){return To.resolve(this.size)}}class Ru extends mu{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),To.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Du{constructor(e){this.persistence=e,this.Fr=new is((e=>Fa(e)),Oa),this.lastRemoteSnapshotVersion=io.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Iu,this.targetCount=0,this.Nr=ru.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),To.resolve()}getLastRemoteSnapshotVersion(e){return To.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return To.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),To.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),To.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new ru(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,To.resolve()}updateTargetData(e,t){return this.kn(t),To.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,To.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.Fr.forEach(((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Fr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),To.waitFor(o).next((()=>r))}getTargetCount(e){return To.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return To.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),To.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((t=>{o.push(r.markPotentiallyOrphaned(e,t))})),To.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),To.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return To.resolve(n)}containsKey(e,t){return To.resolve(this.Or.containsKey(t))}}class Pu{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Lo(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Du(this),this.indexManager=new zc,this.remoteDocumentCache=function(e){return new Nu(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new nc(t),this.Kr=new Tu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new ju(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Dr("MemoryPersistence","Starting transaction:",e);const r=new Mu(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return To.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Mu extends So{constructor(e){super(),this.currentSequenceNumber=e}}class Fu{constructor(e){this.persistence=e,this.Gr=new Iu,this.zr=null}static jr(e){return new Fu(e)}get Hr(){if(this.zr)return this.zr;throw Or()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),To.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),To.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),To.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return To.forEach(this.Hr,(n=>{const r=uo.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,io.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return To.or([()=>To.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Ou{constructor(e,t){this.persistence=e,this.Yr=new is((e=>Wo(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=hu(this,t)}static jr(e,t){return new Ou(e,t)}$r(){}Ur(e){return To.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}jn(e){const t=this.Yn(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}Hn(e,t){return To.forEach(this.Yr,((n,r)=>this.Xn(e,n,r).next((e=>e?To.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.vr(e,(r=>this.Xn(e,r,t).next((e=>{e||(n++,o.removeEntry(r,io.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Yr.set(t,e.currentSequenceNumber),To.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Yr.set(n,e.currentSequenceNumber),To.resolve()}removeReference(e,t,n){return this.Yr.set(n,e.currentSequenceNumber),To.resolve()}updateLimboDocument(e,t){return this.Yr.set(t,e.currentSequenceNumber),To.resolve()}Qr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xi(e.data.value)),t}Xn(e,t,n){return To.or([()=>this.persistence.Wr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Yr.get(t);return To.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Lu{constructor(e){this.serializer=e}N(e,t,n,r){const o=new Eo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Go,{unique:!0}),e.createObjectStore("documentMutations")}(e),zu(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=To.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),zu(e)),i=i.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:io.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(o)))),n<4&&r>=4&&(0!==n&&(i=i.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Go,{unique:!0});const r=t.store("mutations"),o=n.map((e=>r.put(e)));return To.waitFor(o)}))}(e,o)))),i=i.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(i=i.next((()=>this.Zr(o)))),n<6&&r>=6&&(i=i.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o))))),n<7&&r>=7&&(i=i.next((()=>this.ei(o)))),n<8&&r>=8&&(i=i.next((()=>this.ti(e,o)))),n<9&&r>=9&&(i=i.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(i=i.next((()=>this.ni(o)))),n<11&&r>=11&&(i=i.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(i=i.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:si});t.createIndex("collectionPathOverlayIndex",li,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ci,{unique:!1})}(e)}))),n<13&&r>=13&&(i=i.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Qo});t.createIndex("documentKeyIndex",$o),t.createIndex("collectionGroupIndex",Jo)}(e))).next((()=>this.ri(e,o))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(i=i.next((()=>this.ii(e,o)))),n<15&&r>=15&&(i=i.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ri}).createIndex("sequenceNumberIndex",oi,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ii}).createIndex("documentKeyIndex",ai,{unique:!1})}(e)))),i}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=$c(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>To.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>To.forEach(n,(n=>{Lr(n.userId===t.userId);const r=sc(this.serializer,n);return Qc(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,o)=>{const i=new so(n),a=function(e){return[0,Wo(e)]}(i);r.push(t.get(a).next((n=>n?To.resolve():(n=>t.put({targetId:0,path:Wo(n),sequenceNumber:e.highestListenSequenceNumber}))(i))))})).next((()=>To.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ni});const n=t.store("collectionParents"),r=new Bc,o=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Wo(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new so(e);return o(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,i]=e;const a=Ho(r);return o(a.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=lc(n),o=cc(this.serializer,r);return t.put(o)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const o=t.store("remoteDocumentsV14"),i=function(e){return e.document?new uo(so.fromString(e.document.name).popFirst(5)):e.noDocument?uo.fromSegments(e.noDocument.path):e.unknownDocument?uo.fromSegments(e.unknownDocument.path):Or()}(n).path.toArray(),a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(o.put(a))})).next((()=>To.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=yu(this.serializer),o=new Pu(Fu.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:gs();sc(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),To.forEach(n,((e,n)=>{const i=new Ir(n),a=yc.ct(this.serializer,i),s=o.getIndexManager(i),l=Jc.ct(i,this.serializer,s,o.referenceDelegate);return new Cu(r,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new mi(t,Lo._e),e).next()}))}))}}function zu(e){e.createObjectStore("targetDocuments",{keyPath:ei}).createIndex("documentTargetsIndex",ti,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zo,{unique:!0}),e.createObjectStore("targetGlobal")}const Bu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uu{constructor(e,t,n,r,o,i,a,s,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=o,this.window=i,this.document=a,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Uu.D())throw new Wr(Ur.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pu(this,r),this.Ii=t+"main",this.serializer=new nc(s),this.Ti=new Io(this.Ii,this.ai,new Lu(this.serializer)),this.qr=new ou(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yu(this.serializer),this.Kr=new fc,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wr(Ur.FAILED_PRECONDITION,Bu);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Lo(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Vu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(No(e))return Dr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Wu(e).get("owner").next((e=>To.resolve(this.wi(e))))}Si(e){return Vu(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=gi(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return To.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?To.resolve(!0):Wu(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Wr(Ur.FAILED_PRECONDITION,Bu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vu(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Dr("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new mi(e,Lo._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Vu(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return Jc.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wc(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return yc.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Dr("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?fi:14===e?pi:13===e?hi:12===e?di:11===e?ui:void Or()}(this.ai);let i;return this.Ti.runTransaction(e,r,o,(r=>(i=new mi(r,this.Lr?this.Lr.next():Lo._e),"readwrite-primary"===t?this.fi(i).next((e=>!!e||this.gi(i))).next((t=>{if(!t)throw Pr("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Wr(Ur.FAILED_PRECONDITION,Ao);return n(i)})).next((e=>this.yi(i).next((()=>e)))):this.Li(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}Li(e){return Wu(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Wr(Ur.FAILED_PRECONDITION,Bu)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put("owner",t)}static D(){return Io.D()}pi(e){const t=Wu(e);return t.get("owner").next((e=>this.wi(e)?(Dr("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):To.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Pr("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;(0,s.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Dr("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Pr("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Wu(e){return gi(e,"owner")}function Vu(e){return gi(e,"clientMetadata")}function qu(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Hu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=gs(),r=gs();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Hu(e,t.fromCache,n,r)}}class Gu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ku{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.zi(e,t).next((e=>{o.result=e})).next((()=>{if(!o.result)return this.ji(e,t,r,n).next((e=>{o.result=e}))})).next((()=>{if(o.result)return;const n=new Gu;return this.Hi(e,t,n).next((r=>{if(o.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>o.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Nr()<=a.$b.DEBUG&&Dr("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),To.resolve()):(Nr()<=a.$b.DEBUG&&Dr("QueryEngine","Query:",es(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Nr()<=a.$b.DEBUG&&Dr("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xa(t))):To.resolve())}zi(e,t){if(Ha(t))return To.resolve(null);let n=Xa(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=$a(t,null,"F"),n=Xa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const o=gs(...r);return this.Gi.getDocuments(e,o).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.Yi(t,r);return this.Zi(t,i,o,n.readTime)?this.zi(e,$a(t,null,"F")):this.Xi(e,i,t,n)}))))})))))}ji(e,t,n,r){return Ha(t)||r.isEqual(io.min())?To.resolve(null):this.Gi.getDocuments(e,n).next((o=>{const i=this.Yi(t,o);return this.Zi(t,i,n,r)?To.resolve(null):(Nr()<=a.$b.DEBUG&&Dr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),es(t)),this.Xi(e,i,t,bo(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Ai(rs(e));return t.forEach(((t,r)=>{ts(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Hi(e,t,n){return Nr()<=a.$b.DEBUG&&Dr("QueryEngine","Using full collection scan to execute query:",es(t)),this.Gi.getDocumentsMatchingQuery(e,t,wo.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Xu{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new xi(to),this.ns=new is((e=>Fa(e)),Oa),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cu(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Yu(e,t,n,r){return new Xu(e,t,n,r)}async function Qu(e,t){const n=Br(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((o=>(r=o,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const o=[],i=[];let a=gs();for(const e of r){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({_s:e,removedBatchIds:o,addedBatchIds:i})))}))}))}function $u(e){const t=Br(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Ju(e,t,n){let r=gs(),o=gs();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ss();return n.forEach(((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(o=o.add(n)),i.isNoDocument()&&i.version.isEqual(io.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Dr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),{us:r,cs:o}}))}function Zu(e,t){const n=Br(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ed(e,t){const n=Br(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((o=>o?(r=o,To.resolve(r)):n.qr.allocateTargetId(e).next((o=>(r=new tc(t,o,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function td(e,t,n){const r=Br(e),o=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,o)))}catch(e){if(!No(e))throw e;Dr("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(o.target)}function nd(e,t,n){const r=Br(e);let o=io.min(),i=gs();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Br(e),o=r.ns.get(n);return void 0!==o?To.resolve(r.ts.get(o)):r.qr.getTargetData(t,n)}(r,e,Xa(t)).next((t=>{if(t)return o=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?o:io.min(),n?i:gs()))).next((e=>(id(r,ns(t),e),{documents:e,ls:i})))))}function rd(e,t){const n=Br(e),r=Br(n.qr),o=n.ts.get(t);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function od(e,t){const n=Br(e),r=n.rs.get(t)||io.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,bo(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(id(n,t,e),e)))}function id(e,t,n){let r=e.rs.get(t)||io.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function ad(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs();const r=await ed(e,Xa(uc(t.bundledQuery))),o=Br(e);return o.persistence.runTransaction("Save named query","readwrite",(e=>{const i=jl(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return o.Kr.saveNamedQuery(e,t);const a=r.withResumeToken(_i.EMPTY_BYTE_STRING,i);return o.ts=o.ts.insert(a.targetId,a),o.qr.updateTargetData(e,a).next((()=>o.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>o.qr.addMatchingKeys(e,n,r.targetId))).next((()=>o.Kr.saveNamedQuery(e,t)))}))}function sd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ld(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class ud{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let o,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(o=new Wr(r.error.code,r.error.message))),i?new ud(e,t,r.state,o):(Pr("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dd{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,o="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return o&&n.error&&(o="string"==typeof n.error.message&&"string"==typeof n.error.code,o&&(r=new Wr(n.error.code,n.error.message))),o?new dd(e,n.state,r):(Pr("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,o=vs();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=Uo(n.activeTargetIds[i]),o=o.add(n.activeTargetIds[i]);return r?new hd(e,o):(Pr("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class pd{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pd(t.clientId,t.onlineState):(Pr("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class fd{constructor(){this.activeTargetIds=vs()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class md{constructor(e,t,n,r,o){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new xi(to),this.started=!1,this.ps=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=sd(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new fd),this.Ss=new RegExp("^firestore_clients_".concat(i,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(i,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(i,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(sd(this.persistenceKey,n));if(e){const t=hd.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(cd(this.persistenceKey,e));if(n){const r=dd.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cd(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Dr("SharedClientState","READ",e,t),t}setItem(e,t){Dr("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Dr("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Dr("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Lo._e;if(null!=e)try{const n=JSON.parse(e);Lr("number"==typeof n),t=n}catch(e){Pr("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Lo._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new ud(this.currentUser,e,t,n),o=ld(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Es())}Bs(e){const t=ld(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=cd(this.persistenceKey,e),o=new dd(e,t,n);this.setItem(r,o.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return hd.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),o=void 0!==n[2]?n[2]:null;return ud.Ts(new Ir(o),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return dd.Ts(r,t)}Ms(e){return pd.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Dr("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),o=this.Os(n),i=[],a=[];return o.forEach((e=>{r.has(e)||i.push(e)})),r.forEach((e=>{o.has(e)||a.push(e)})),this.syncEngine.Xs(i,a).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=vs();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class gd{constructor(){this.eo=new fd,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new fd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yd{ro(e){}shutdown(){}}class vd{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Dr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Dr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bd=null;function xd(){return null===bd?bd=268435456+Math.round(2147483648*Math.random()):bd++,"0x"+bd.toString(16)}const wd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kd{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ad="WebChannelConnection";class Sd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,o){const i=xd(),a=this.So(e,t);Dr("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const s={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(s,r,o),this.Do(e,a,s,n).then((t=>(Dr("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t)),(t=>{throw Mr("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t}))}Co(e,t,n,r,o,i){return this.wo(e,t,n,r,o)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_r,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=wd[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const o=xd();return new Promise(((i,a)=>{const s=new Sr;s.setWithCredentials(!0),s.listenOnce(xr.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case br.NO_ERROR:const t=s.getResponseJson();Dr(Ad,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),i(t);break;case br.TIMEOUT:Dr(Ad,"RPC '".concat(e,"' ").concat(o," timed out")),a(new Wr(Ur.DEADLINE_EXCEEDED,"Request time out"));break;case br.HTTP_ERROR:const n=s.getStatus();if(Dr(Ad,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ur).indexOf(t)>=0?t:Ur.UNKNOWN}(t.status);a(new Wr(e,t.message))}else a(new Wr(Ur.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Wr(Ur.UNAVAILABLE,"Connection failed."));break;default:Or()}}finally{Dr(Ad,"RPC '".concat(e,"' ").concat(o," completed."))}}));const l=JSON.stringify(r);Dr(Ad,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=xd(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=yr(),a=vr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.bo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=o.join("");Dr(Ad,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=i.createWebChannel(c,s);let d=!1,h=!1;const p=new kd({co:t=>{h?Dr(Ad,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Dr(Ad,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Ar.EventType.OPEN,(()=>{h||Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),f(u,Ar.EventType.CLOSE,(()=>{h||(h=!0,Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.Ro())})),f(u,Ar.EventType.ERROR,(t=>{h||(h=!0,Mr(Ad,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.Ro(new Wr(Ur.UNAVAILABLE,"The operation could not be completed")))})),f(u,Ar.EventType.MESSAGE,(t=>{var n;if(!h){const o=t.data[0];Lr(!!o);const i=o,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=nl[e];if(void 0!==t)return il(t)}(t),o=a.message;void 0===n&&(n=Ur.INTERNAL,o="Unknown error status: "+t+" with message "+a.message),h=!0,p.Ro(new Wr(n,o)),u.close()}else Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," received:"),o),p.Vo(o)}})),f(a,wr.STAT_EVENT,(t=>{t.stat===kr.PROXY?Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===kr.NOPROXY&&Dr(Ad,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{p.Ao()}),0),p}}function Cd(){return"undefined"!=typeof window?window:null}function Td(){return"undefined"!=typeof document?document:null}function Ed(e){return new Cl(e,!0)}class Id{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Dr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class _d{constructor(e,t,n,r,o,i,a,s){this.si=e,this.Ko=n,this.$o=r,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Id(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Ur.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Ur.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Wr(Ur.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Dr("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Dr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jd extends _d{constructor(e,t,n,r,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Or()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Lr(void 0===t||"string"==typeof t),_i.fromBase64String(t||"")):(Lr(void 0===t||t instanceof Uint8Array),_i.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Ur.UNKNOWN:il(e.code);return new Wr(t,e.message||"")}(a);n=new yl(r,o,i,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Pl(e,r.document.name),i=jl(r.document.updateTime),a=r.document.createTime?jl(r.document.createTime):io.min(),s=new sa({mapValue:{fields:r.document.fields}}),l=ca.newFoundDocument(o,i,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ml(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Pl(e,r.document),i=r.readTime?jl(r.readTime):io.min(),a=ca.newNoDocument(o,i),s=r.removedTargetIds||[];n=new ml([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Pl(e,r.document),i=r.removedTargetIds||[];n=new ml([],i,o,null)}else{if(!("filter"in t))return Or();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:o}=e,i=new tl(r,o),a=e.targetId;n=new gl(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return io.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?io.min():t.readTime?jl(t.readTime):io.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Ol(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=La(r)?{documents:Vl(e,r)}:{query:ql(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Il(e,t.resumeToken);const r=Tl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(io.min())>0){n.readTime=El(e,t.snapshotVersion.toTimestamp());const r=Tl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Or()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Ol(this.serializer),t.removeTarget=e,this.e_(t)}}class Nd extends _d{constructor(e,t,n,r,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Lr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Lr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?jl(e.updateTime):jl(t);return n.isEqual(io.min())&&(n=jl(t)),new Ms(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=jl(e.commitTime);return this.listener.I_(n,t)}return Lr(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ol(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ul(this.serializer,e)))};this.e_(t)}}class Rd extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Wr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[o,i]=r;return this.connection.wo(e,t,n,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wr(Ur.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[i,a]=o;return this.connection.Co(e,t,n,i,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wr(Ur.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Dd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Pr(t),this.f_=!1):Dr("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Pd{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro((e=>{n.enqueueAndForget((async()=>{Vd(this)&&(Dr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Br(e);t.C_.add(4),await Fd(t),t.M_.set("Unknown"),t.C_.delete(4),await Md(t)}(this))}))})),this.M_=new Dd(n,r)}}async function Md(e){if(Vd(e))for(const t of e.v_)await t(!0)}async function Fd(e){for(const t of e.v_)await t(!1)}function Od(e,t){const n=Br(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Wd(n)?Ud(n):sh(n).Ho()&&zd(n,t))}function Ld(e,t){const n=Br(e),r=sh(n);n.D_.delete(t),r.Ho()&&Bd(n,t),0===n.D_.size&&(r.Ho()?r.Zo():Vd(n)&&n.M_.set("Unknown"))}function zd(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(io.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sh(e).u_(t)}function Bd(e,t){e.x_.Oe(t),sh(e).c_(t)}function Ud(e){e.x_=new bl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),sh(e).start(),e.M_.g_()}function Wd(e){return Vd(e)&&!sh(e).jo()&&e.D_.size>0}function Vd(e){return 0===Br(e).C_.size}function qd(e){e.x_=void 0}async function Hd(e){e.D_.forEach(((t,n)=>{zd(e,t)}))}async function Gd(e,t){qd(e),Wd(e)?(e.M_.w_(t),Ud(e)):e.M_.set("Unknown")}async function Kd(e,t,n){if(e.M_.set("Online"),t instanceof yl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Dr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xd(e,n)}else if(t instanceof ml?e.x_.$e(t):t instanceof gl?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(io.min()))try{const t=await $u(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const o=e.D_.get(r);o&&e.D_.set(r,o.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(_i.EMPTY_BYTE_STRING,r.snapshotVersion)),Bd(e,t);const o=new tc(r.target,t,n,r.sequenceNumber);zd(e,o)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Dr("RemoteStore","Failed to raise snapshot:",t),await Xd(e,t)}}async function Xd(e,t,n){if(!No(t))throw t;e.C_.add(1),await Fd(e),e.M_.set("Offline"),n||(n=()=>$u(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Dr("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Md(e)}))}function Yd(e,t){return t().catch((n=>Xd(e,n,t)))}async function Qd(e){const t=Br(e),n=lh(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;$d(t);)try{const e=await Zu(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Jd(t,e)}catch(e){await Xd(t,e)}Zd(t)&&eh(t)}function $d(e){return Vd(e)&&e.b_.length<10}function Jd(e,t){e.b_.push(t);const n=lh(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Zd(e){return Vd(e)&&!lh(e).jo()&&e.b_.length>0}function eh(e){lh(e).start()}async function th(e){lh(e).E_()}async function nh(e){const t=lh(e);for(const n of e.b_)t.P_(n.mutations)}async function rh(e,t,n){const r=e.b_.shift(),o=Js.from(r,t,n);await Yd(e,(()=>e.remoteSyncer.applySuccessfulWrite(o))),await Qd(e)}async function oh(e,t){t&&lh(e).h_&&await async function(e,t){if(function(e){return ol(e)&&e!==Ur.ABORTED}(t.code)){const n=e.b_.shift();lh(e).Yo(),await Yd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Qd(e)}}(e,t),Zd(e)&&eh(e)}async function ih(e,t){const n=Br(e);n.asyncQueue.verifyOperationInProgress(),Dr("RemoteStore","RemoteStore received new credentials");const r=Vd(n);n.C_.add(3),await Fd(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Md(n)}async function ah(e,t){const n=Br(e);t?(n.C_.delete(2),await Md(n)):t||(n.C_.add(2),await Fd(n),n.M_.set("Unknown"))}function sh(e){return e.O_||(e.O_=function(e,t,n){const r=Br(e);return r.A_(),new jd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Hd.bind(null,e),Io:Gd.bind(null,e),a_:Kd.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Wd(e)?Ud(e):e.M_.set("Unknown")):(await e.O_.stop(),qd(e))}))),e.O_}function lh(e){return e.N_||(e.N_=function(e,t,n){const r=Br(e);return r.A_(),new Nd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:th.bind(null,e),Io:oh.bind(null,e),T_:nh.bind(null,e),I_:rh.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Qd(e)):(await e.N_.stop(),e.b_.length>0&&(Dr("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class ch{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const i=Date.now()+n,a=new ch(e,t,i,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wr(Ur.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(e,t){if(Pr("AsyncQueue","".concat(t,": ").concat(e)),No(e))return new Wr(Ur.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class dh{constructor(e){this.comparator=e?(t,n)=>e(t,n)||uo.comparator(t.key,n.key):(e,t)=>uo.comparator(e.key,t.key),this.keyedMap=cs(),this.sortedSet=new xi(this.comparator)}static emptySet(e){return new dh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new dh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hh{constructor(){this.B_=new xi(uo.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Or():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ph{constructor(e,t,n,r,o,i,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,o){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new ph(e,t,dh.emptySet(t),i,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ja(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fh{constructor(){this.k_=void 0,this.listeners=[]}}class mh{constructor(){this.queries=new is((e=>Za(e)),Ja),this.onlineState="Unknown",this.q_=new Set}}async function gh(e,t){const n=Br(e),r=t.query;let o=!1,i=n.queries.get(r);if(i||(o=!0,i=new fh),o)try{i.k_=await n.onListen(r)}catch(e){const n=uh(e,"Initialization of query '".concat(es(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Q_(n.onlineState),i.k_&&t.K_(i.k_)&&xh(n)}async function yh(e,t){const n=Br(e),r=t.query;let o=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),o=0===i.listeners.length)}if(o)return n.queries.delete(r),n.onUnlisten(r)}function vh(e,t){const n=Br(e);let r=!1;for(const o of t){const e=o.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(o)&&(r=!0);t.k_=o}}r&&xh(n)}function bh(e,t,n){const r=Br(e),o=r.queries.get(t);if(o)for(const i of o.listeners)i.onError(n);r.queries.delete(t)}function xh(e){e.q_.forEach((e=>{e.next()}))}class wh{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ph(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class kh{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Ah{constructor(e){this.serializer=e}hs(e){return Pl(this.serializer,e)}Ps(e){return e.metadata.exists?Bl(this.serializer,e.document,!1):ca.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return jl(e)}}class Sh{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ch(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=so.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new Ah(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||gs()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const o=Br(e);let i=gs(),a=ss();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(i=i.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),a=a.insert(e,n)}const s=o.ss.newChangeBuffer({trackRemovals:!0}),l=await ed(o,function(e){return Xa(qa(so.fromString("__bundle__/docs/".concat(e))))}(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Ju(e,s,a).next((t=>(s.apply(e),t))).next((t=>o.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>o.qr.addMatchingKeys(e,i,l.targetId))).next((()=>o.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new Ah(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await ad(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Ch(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Th{constructor(e){this.key=e}}class Eh{constructor(e){this.key=e}}class Ih{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=gs(),this.mutatedKeys=gs(),this._a=rs(e),this.aa=new dh(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new hh,r=t?t.aa:this.aa;let o=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ts(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.ha(c,u)||(n.track({type:2,doc:u}),p=!0,(s&&this._a(u,s)>0||l&&this._a(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(s||l)&&(a=!0)),p&&(u?(i=i.add(u),o=h?o.add(e):o.delete(e)):(i=i.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),o=o.delete(e.key),n.track({type:1,doc:e})}return{aa:i,la:n,Zi:a,mutatedKeys:o}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const i=e.la.L_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Or()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const a=t&&!r?this.Ia():[],s=0===this.oa.size&&this.current&&!r?1:0,l=s!==this.sa;return this.sa=s,0!==i.length||l?{snapshot:new ph(this.query,e.aa,o,i,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new hh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=gs(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Eh(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Th(n))})),t}da(e){this.ia=e.ls,this.oa=gs();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return ph.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class _h{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class jh{constructor(e){this.key=e,this.Ra=!1}}class Nh{constructor(e,t,n,r,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Va={},this.ma=new is((e=>Za(e)),Ja),this.fa=new Map,this.ga=new Set,this.pa=new xi(uo.comparator),this.ya=new Map,this.wa=new Iu,this.Sa={},this.ba=new Map,this.Da=ru.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Rh(e,t){const n=op(e);let r,o;const i=n.ma.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),o=i.view.Aa();else{const e=await ed(n.localStore,Xa(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,o=await Dh(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&Od(n.remoteStore,e)}return o}async function Dh(e,t,n,r,o){e.va=(t,n,r)=>async function(e,t,n,r){let o=t.view.ca(n);o.Zi&&(o=await nd(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,o)})));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,i,a);return qh(e,t.targetId,s.Ta),s.snapshot}(e,t,n,r);const i=await nd(e.localStore,t,!0),a=new Ih(t,i.ls),s=a.ca(i.documents),l=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,o),c=a.applyChanges(s,e.isPrimaryClient,l);qh(e,n,c.Ta);const u=new _h(t,n,a);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function Ph(e,t){const n=Br(e),r=n.ma.get(t),o=n.fa.get(r.targetId);if(o.length>1)return n.fa.set(r.targetId,o.filter((e=>!Ja(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await td(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Ld(n.remoteStore,r.targetId),Wh(n,r.targetId)})).catch(Co)):(Wh(n,r.targetId),await td(n.localStore,r.targetId,!0))}async function Mh(e,t){const n=Br(e);try{const e=await function(e,t){const n=Br(e),r=t.snapshotVersion;let o=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.ss.newChangeBuffer({trackRemovals:!0});o=n.ts;const a=[];t.targetChanges.forEach(((i,s)=>{const l=o.get(s);if(!l)return;a.push(n.qr.removeMatchingKeys(e,i.removedDocuments,s).next((()=>n.qr.addMatchingKeys(e,i.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(_i.EMPTY_BYTE_STRING,io.min()).withLastLimboFreeSnapshotVersion(io.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),o=o.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.qr.updateTargetData(e,c))}));let s=ss(),l=gs();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Ju(e,i,t.documentUpdates).next((e=>{s=e.us,l=e.cs}))),!r.isEqual(io.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return To.waitFor(a).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.ts=o,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Lr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Lr(r.Ra):e.removedDocuments.size>0&&(Lr(r.Ra),r.Ra=!1))})),await Kh(n,e,t)}catch(e){await Co(e)}}function Fh(e,t,n){const r=Br(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const o=r.view.Q_(t);o.snapshot&&e.push(o.snapshot)})),function(e,t){const n=Br(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const o of n.listeners)o.Q_(t)&&(r=!0)})),r&&xh(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Oh(e,t,n){const r=Br(e);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.ya.get(t),i=o&&o.key;if(i){let e=new xi(uo.comparator);e=e.insert(i,ca.newNoDocument(i,io.min()));const n=gs().add(i),o=new pl(io.min(),new Map,new xi(to),e,n);await Mh(r,o),r.pa=r.pa.remove(i),r.ya.delete(t),Gh(r)}else await td(r.localStore,t,!1).then((()=>Wh(r,t,n))).catch(Co)}async function Lh(e,t){const n=Br(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Br(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const o=n.batch,i=o.keys();let a=To.resolve();return i.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);Lr(null!==i),t.version.compareTo(i)<0&&(o.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,o)))}(n,e,t,o).next((()=>o.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gs();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Uh(n,r,null),Bh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kh(n,e)}catch(e){await Co(e)}}async function zh(e,t,n){const r=Br(e);try{const e=await function(e,t){const n=Br(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Uh(r,t,n),Bh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Kh(r,e)}catch(n){await Co(n)}}function Bh(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Uh(e,t,n){const r=Br(e);let o=r.Sa[r.currentUser.toKey()];if(o){const e=o.get(t);e&&(n?e.reject(n):e.resolve(),o=o.remove(t)),r.Sa[r.currentUser.toKey()]=o}}function Wh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||Vh(e,t)}))}function Vh(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Ld(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Gh(e))}function qh(e,t,n){for(const r of n)r instanceof Th?(e.wa.addReference(r.key,t),Hh(e,r)):r instanceof Eh?(Dr("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Vh(e,r.key)):Or()}function Hh(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Dr("SyncEngine","New document in limbo: "+n),e.ga.add(r),Gh(e))}function Gh(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new uo(so.fromString(t)),r=e.Da.next();e.ya.set(r,new jh(n)),e.pa=e.pa.insert(n,r),Od(e.remoteStore,new tc(Xa(qa(n.path)),r,"TargetPurposeLimboResolution",Lo._e))}}async function Kh(e,t,n){const r=Br(e),o=[],i=[],a=[];r.ma.isEmpty()||(r.ma.forEach(((e,s)=>{a.push(r.va(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);const t=Hu.Qi(s.targetId,e);i.push(t)}})))})),await Promise.all(a),r.Va.a_(o),await async function(e,t){const n=Br(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>To.forEach(t,(t=>To.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>To.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!No(e))throw e;Dr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,o)}}}(r.localStore,i))}async function Xh(e,t){const n=Br(e);if(!n.currentUser.isEqual(t)){Dr("SyncEngine","User change. New user:",t.toKey());const e=await Qu(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Wr(Ur.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Kh(n,e._s)}}function Yh(e,t){const n=Br(e),r=n.ya.get(t);if(r&&r.Ra)return gs().add(r.key);{let e=gs();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function Qh(e,t){const n=Br(e),r=await nd(n.localStore,t.query,!0),o=t.view.da(r);return n.isPrimaryClient&&qh(n,t.targetId,o.Ta),o}async function $h(e,t){const n=Br(e);return od(n.localStore,t).then((e=>Kh(n,e)))}async function Jh(e,t,n,r){const o=Br(e),i=await function(e,t){const n=Br(e),r=Br(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):To.resolve(null)))))}(o.localStore,t);null!==i?("pending"===n?await Qd(o.remoteStore):"acknowledged"===n||"rejected"===n?(Uh(o,t,r||null),Bh(o,t),function(e,t){Br(Br(e).mutationQueue).Fn(t)}(o.localStore,t)):Or(),await Kh(o,i)):Dr("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Zh(e,t,n){const r=Br(e),o=[],i=[];for(const a of t){let e;const t=r.fa.get(a);if(t&&0!==t.length){e=await ed(r.localStore,Xa(t[0]));for(const e of t){const t=r.ma.get(e),n=await Qh(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await rd(r.localStore,a);e=await ed(r.localStore,t),await Dh(r,ep(t),a,!1,e.resumeToken)}o.push(e)}return r.Va.a_(i),o}function ep(e){return Va(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function tp(e){return function(e){return Br(Br(e).persistence).Bi()}(Br(e).localStore)}async function np(e,t,n,r){const o=Br(e);if(o.Ca)return void Dr("SyncEngine","Ignoring unexpected query state notification.");const i=o.fa.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await od(o.localStore,ns(i[0])),r=pl.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,_i.EMPTY_BYTE_STRING);await Kh(o,e,r);break}case"rejected":await td(o.localStore,t,!0),Wh(o,t,r);break;default:Or()}}async function rp(e,t,n){const r=op(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Dr("SyncEngine","Adding an already active target "+e);continue}const t=await rd(r.localStore,e),n=await ed(r.localStore,t);await Dh(r,ep(t),n.targetId,!1,n.resumeToken),Od(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await td(r.localStore,e,!1).then((()=>{Ld(r.remoteStore,e),Wh(r,e)})).catch(Co)}}function op(e){const t=Br(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Mh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Oh.bind(null,t),t.Va.a_=vh.bind(null,t.eventManager),t.Va.Fa=bh.bind(null,t.eventManager),t}function ip(e){const t=Br(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zh.bind(null,t),t}class ap{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Yu(this.persistence,new Ku,e.initialUser,this.serializer)}createPersistence(e){return new Pu(Fu.jr,this.serializer)}createSharedClientState(e){return new gd}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sp extends ap{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){Lr(this.persistence.referenceDelegate instanceof Ou);const n=this.persistence.referenceDelegate.garbageCollector;return new uu(n,e.asyncQueue,t)}createPersistence(e){const t=void 0!==this.cacheSizeBytes?Yc.withCacheSize(this.cacheSizeBytes):Yc.DEFAULT;return new Pu((e=>Ou.jr(e,t)),this.serializer)}}class lp extends ap{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await ip(this.xa.syncEngine),await Qd(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Yu(this.persistence,new Ku,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new uu(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Oo(t,this.persistence);return new Fo(e.asyncQueue,n)}createPersistence(e){const t=qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Yc.withCacheSize(this.cacheSizeBytes):Yc.DEFAULT;return new Uu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cd(),Td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gd}}class cp extends lp{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof md&&(this.sharedClientState.syncEngine={Ys:Jh.bind(null,t),Zs:np.bind(null,t),Xs:rp.bind(null,t),Bi:tp.bind(null,t),Js:$h.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Br(e);if(op(n),ip(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Zh(n,e.toArray());n.Ca=!0,await ah(n.remoteStore,!0);for(const r of t)Od(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,o)=>{n.sharedClientState.isLocalQueryTarget(o)?e.push(o):t=t.then((()=>(Wh(n,o),td(n.localStore,o,!0)))),Ld(n.remoteStore,o)})),await t,await Zh(n,e),function(e){const t=Br(e);t.ya.forEach(((e,n)=>{Ld(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new xi(uo.comparator)}(n),n.Ca=!1,await ah(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Cd();if(!md.D(t))throw new Wr(Ur.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=qu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new md(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xh.bind(null,this.syncEngine),await ah(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new mh}createDatastore(e){const t=Ed(e.databaseInfo.databaseId),n=function(e){return new Sd(e)}(e.databaseInfo);return function(e,t,n,r){return new Rd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,o){return new Pd(e,t,n,r,o)}(this.localStore,this.datastore,e.asyncQueue,(e=>Fh(this.syncEngine,e,0)),vd.D()?new vd:new yd)}createSyncEngine(e,t){return function(e,t,n,r,o,i,a){const s=new Nh(e,t,n,r,o,i);return a&&(s.Ca=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Br(e);Dr("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Fd(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function dp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class pp{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new kh(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class fp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Wr(Ur.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Br(e),r=Ol(n.serializer)+"/documents",o={documents:t.map((e=>Dl(n.serializer,e)))},i=await n.Co("BatchGetDocuments",r,o,t.length),a=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Lr(!!t.found),t.found.name,t.found.updateTime;const n=Pl(e,t.found.name),r=jl(t.found.updateTime),o=t.found.createTime?jl(t.found.createTime):io.min(),i=new sa({mapValue:{fields:t.found.fields}});return ca.newFoundDocument(n,r,o,i)}(e,t):"missing"in t?function(e,t){Lr(!!t.missing),Lr(!!t.readTime);const n=Pl(e,t.missing),r=jl(t.readTime);return ca.newNoDocument(n,r)}(e,t):Or()}(n.serializer,e);a.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=a.get(e.toString());Lr(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ys(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=uo.fromPath(t);this.mutations.push(new Qs(n,this.precondition(n)))})),await async function(e,t){const n=Br(e),r=Ol(n.serializer)+"/documents",o={writes:t.map((e=>Ul(n.serializer,e)))};await n.wo("Commit",r,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Or();t=io.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wr(Ur.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(io.min())?Fs.exists(!1):Fs.updateTime(t):Fs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(io.min()))throw new Wr(Ur.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fs.updateTime(t)}return Fs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mp{constructor(e,t,n,r,o){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=o,this.Wa=n.maxAttempts,this.zo=new Id(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new fp(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!zo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ol(t)}return!1}}class gp{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ir.UNAUTHENTICATED,this.clientId=eo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Dr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Dr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=uh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yp(e,t){e.asyncQueue.verifyOperationInProgress(),Dr("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Qu(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function vp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xp(e);Dr("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>ih(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ih(t.remoteStore,n))),e._onlineComponents=t}function bp(e){return"FirebaseError"===e.name?e.code===Ur.FAILED_PRECONDITION||e.code===Ur.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function xp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dr("FirestoreClient","Using user provided OfflineComponentProvider");try{await yp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!bp(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),await yp(e,new ap)}}else Dr("FirestoreClient","Using default OfflineComponentProvider"),await yp(e,new ap);return e._offlineComponents}async function wp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dr("FirestoreClient","Using user provided OnlineComponentProvider"),await vp(e,e._uninitializedComponentsProvider._online)):(Dr("FirestoreClient","Using default OnlineComponentProvider"),await vp(e,new up))),e._onlineComponents}function kp(e){return xp(e).then((e=>e.persistence))}function Ap(e){return xp(e).then((e=>e.localStore))}function Sp(e){return wp(e).then((e=>e.remoteStore))}function Cp(e){return wp(e).then((e=>e.syncEngine))}function Tp(e){return wp(e).then((e=>e.datastore))}async function Ep(e){const t=await wp(e),n=t.eventManager;return n.onListen=Rh.bind(null,t.syncEngine),n.onUnlisten=Ph.bind(null,t.syncEngine),n}function Ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,o){const i=new hp({next:i=>{t.enqueueAndForget((()=>yh(e,a)));const s=i.docs.has(n);!s&&i.fromCache?o.reject(new Wr(Ur.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&i.fromCache&&r&&"server"===r.source?o.reject(new Wr(Ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(i)},error:e=>o.reject(e)}),a=new wh(qa(n.path),i,{includeMetadataChanges:!0,J_:!0});return gh(e,a)}(await Ep(e),e.asyncQueue,t,n,r))),r.promise}function _p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,o){const i=new hp({next:n=>{t.enqueueAndForget((()=>yh(e,a))),n.fromCache&&"server"===r.source?o.reject(new Wr(Ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(n)},error:e=>o.reject(e)}),a=new wh(n,i,{includeMetadataChanges:!0,J_:!0});return gh(e,a)}(await Ep(e),e.asyncQueue,t,n,r))),r.promise}function jp(e,t,n,r){const o=function(e,t){let n;return n="string"==typeof e?sl().encode(e):e,function(e,t){return new pp(e,t)}(function(e,t){if(e instanceof Uint8Array)return dp(e,t);if(e instanceof ArrayBuffer)return dp(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ed(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Br(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Br(e),r=jl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Ch(r));const o=new Sh(r,e.localStore,t.serializer);let i=await t.Ma();for(;i;){const e=await o.ea(i);e&&n._updateProgress(e),i=await t.Ma()}const a=await o.complete();return await Kh(e,a.ra,void 0),await function(e,t){const n=Br(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.na)}catch(e){return Mr("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Cp(e),o,r)}))}function Np(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Rp=new Map;function Dp(e,t,n){if(!n)throw new Wr(Ur.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pp(e,t,n,r){if(!0===t&&!0===r)throw new Wr(Ur.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Mp(e){if(!uo.isDocumentKey(e))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fp(e){if(uo.isDocumentKey(e))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Op(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Or()}function Lp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wr(Ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(e);throw new Wr(Ur.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function zp(e,t){if(t<=0)throw new Wr(Ur.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Bp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wr(Ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Wr(Ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Np(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Wr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Wr(Ur.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wr(Ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wr(Ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hr;switch(e.type){case"firstParty":return new Yr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wr(Ur.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rp.get(e);t&&(Dr("ComponentProvider","Removing Datastore"),Rp.delete(e),t.terminate())}(this),Promise.resolve()}}function Wp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var o;const i=(e=Lp(e,Up))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ir.MOCK_USER;else{t=(0,s.Fy)(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Wr(Ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ir(i)}e._authCredentials=new Gr(new qr(t,n))}}class Vp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vp(this.firestore,e,this._query)}}class qp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qp(this.firestore,e,this._key)}}class Hp extends Vp{constructor(e,t,n){super(e,t,qa(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qp(this.firestore,null,new uo(e))}withConverter(e){return new Hp(this.firestore,e,this._path)}}function Gp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=(0,s.Ku)(e),Dp("collection","path",t),e instanceof Up){const n=so.fromString(t,...r);return Fp(n),new Hp(e,null,n)}{if(!(e instanceof qp||e instanceof Hp))throw new Wr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(so.fromString(t,...r));return Fp(n),new Hp(e.firestore,null,n)}}function Kp(e,t){if(e=Lp(e,Up),Dp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Vp(e,null,function(e){return new Wa(so.emptyPath(),e)}(t))}function Xp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(e=(0,s.Ku)(e),1===arguments.length&&(t=eo.newId()),Dp("doc","path",t),e instanceof Up){const n=so.fromString(t,...r);return Mp(n),new qp(e,null,new uo(n))}{if(!(e instanceof qp||e instanceof Hp))throw new Wr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(so.fromString(t,...r));return Mp(n),new qp(e.firestore,e instanceof Hp?e.converter:null,new uo(n))}}function Yp(e,t){return e=(0,s.Ku)(e),t=(0,s.Ku)(t),(e instanceof qp||e instanceof Hp)&&(t instanceof qp||t instanceof Hp)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qp(e,t){return e=(0,s.Ku)(e),t=(0,s.Ku)(t),e instanceof Vp&&t instanceof Vp&&e.firestore===t.firestore&&Ja(e._query,t._query)&&e.converter===t.converter}class $p{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Id(this,"async_queue_retry"),this.iu=()=>{const e=Td();e&&Dr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Td();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Td();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Vr;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!No(e))throw e;Dr("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Pr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=ch.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Or()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Jp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Zp{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const ef=-1;class tf extends Up{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $p,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||af(this),this._firestoreClient.terminate()}}function nf(e,t,n){n||(n="(default)");const r=(0,o.j6)(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),o=r.getOptions(n);if((0,s.bD)(o,t))return e;throw new Wr(Ur.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Wr(Ur.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wr(Ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function rf(e,t){const n="object"==typeof e?e:(0,o.Sx)(),r="string"==typeof e?e:t||"(default)",i=(0,o.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,s.yU)("firestore");e&&Wp(i,...e)}return i}function of(e){return e._firestoreClient||af(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function af(e){var t,n,r;const o=e._freezeSettings(),i=function(e,t,n,r){return new Oi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Np(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,o);e._firestoreClient=new gp(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=o.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=o.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.localCache.kind,_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider})}function sf(e,t){yf(e=Lp(e,tf));const n=of(e);if(n._uninitializedComponentsProvider)throw new Wr(Ur.FAILED_PRECONDITION,"SDK cache is already specified.");Mr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),o=new up;return cf(n,o,new lp(o,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function lf(e){yf(e=Lp(e,tf));const t=of(e);if(t._uninitializedComponentsProvider)throw new Wr(Ur.FAILED_PRECONDITION,"SDK cache is already specified.");Mr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new up;return cf(t,r,new cp(r,n.cacheSizeBytes))}function cf(e,t,n){const r=new Vr;return e.asyncQueue.enqueue((async()=>{try{await yp(e,n),await vp(e,t),r.resolve()}catch(e){const n=e;if(!bp(n))throw n;Mr("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function uf(e){if(e._initialized&&!e._terminated)throw new Wr(Ur.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Vr;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Io.D())return Promise.resolve();const t=e+"main";await Io.delete(t)}(qu(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function df(e){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Br(e);Vd(n.remoteStore)||Dr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Br(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=uh(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Cp(e),t))),t.promise}(of(e=Lp(e,tf)))}function hf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await kp(e),n=await Sp(e);return t.setNetworkEnabled(!0),function(e){const t=Br(e);return t.C_.delete(0),Md(t)}(n)}))}(of(e=Lp(e,tf)))}function pf(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await kp(e),n=await Sp(e);return t.setNetworkEnabled(!1),async function(e){const t=Br(e);t.C_.add(0),await Fd(t),t.M_.set("Offline")}(n)}))}(of(e=Lp(e,tf)))}function ff(e){return(0,o.Us)(e.app,"firestore",e._databaseId.database),e._delete()}function mf(e,t){const n=of(e=Lp(e,tf)),r=new Zp;return jp(n,e._databaseId,t,r),r}function gf(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Br(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await Ap(e),t)))}(of(e=Lp(e,tf)),t).then((t=>t?new Vp(e,null,t.query):null))}function yf(e){if(e._initialized||e._terminated)throw new Wr(Ur.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class bf{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class xf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xf(_i.fromBase64String(e))}catch(e){throw new Wr(Ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new xf(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new co(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function kf(){return new wf("__name__")}class Af{constructor(e){this._methodName=e}}class Sf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wr(Ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wr(Ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return to(this._lat,e._lat)||to(this._long,e._long)}}const Cf=/^__.*__$/;class Tf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new qs(e,this.data,t,this.fieldTransforms)}}class Ef{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function If(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Or()}}class _f{constructor(e,t,n,r,o,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===o&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new _f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Yf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(If(this.Iu)&&Cf.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class jf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ed(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _f({Iu:e,methodName:t,gu:n,path:co.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(e){const t=e._freezeSettings(),n=Ed(e._databaseId);return new jf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rf(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.pu(i.merge||i.mergeFields?2:0,t,n,o);Hf("Data must be an object, but it was:",a,r);const s=Vf(r,a);let l,c;if(i.merge)l=new Ti(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const o=Gf(t,r,n);if(!a.contains(o))throw new Wr(Ur.INVALID_ARGUMENT,"Field '".concat(o,"' is specified in your field mask but missing from your input data."));Qf(e,o)||e.push(o)}l=new Ti(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new Tf(new sa(s),l,c)}class Df extends Af{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Df}}function Pf(e,t,n){return new _f({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Mf extends Af{_toFieldTransform(e){return new Ps(e.path,new Ts)}isEqual(e){return e instanceof Mf}}class Ff extends Af{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Pf(this,e,!0),n=this.yu.map((e=>Wf(e,t))),r=new Es(n);return new Ps(e.path,r)}isEqual(e){return this===e}}class Of extends Af{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Pf(this,e,!0),n=this.yu.map((e=>Wf(e,t))),r=new _s(n);return new Ps(e.path,r)}isEqual(e){return this===e}}class Lf extends Af{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Ns(e.serializer,ws(e.serializer,this.wu));return new Ps(e.path,t)}isEqual(e){return this===e}}function zf(e,t,n,r){const o=e.pu(1,t,n);Hf("Data must be an object, but it was:",o,r);const i=[],a=sa.empty();vi(r,((e,r)=>{const l=Xf(t,e,n);r=(0,s.Ku)(r);const c=o.Ru(l);if(r instanceof Df)i.push(l);else{const e=Wf(r,c);null!=e&&(i.push(l),a.set(l,e))}}));const l=new Ti(i);return new Ef(a,l,o.fieldTransforms)}function Bf(e,t,n,r,o,i){const a=e.pu(1,t,n),l=[Gf(t,r,n)],c=[o];if(i.length%2!=0)throw new Wr(Ur.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let s=0;s<i.length;s+=2)l.push(Gf(t,i[s])),c.push(i[s+1]);const u=[],d=sa.empty();for(let p=l.length-1;p>=0;--p)if(!Qf(u,l[p])){const e=l[p];let t=c[p];t=(0,s.Ku)(t);const n=a.Ru(e);if(t instanceof Df)u.push(e);else{const r=Wf(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new Ti(u);return new Ef(d,h,a.fieldTransforms)}function Uf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Wf(n,e.pu(r?4:3,t))}function Wf(e,t){if(qf(e=(0,s.Ku)(e)))return Hf("Unsupported field value:",t,e),Vf(e,t);if(e instanceof Af)return function(e,t){if(!If(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const o of e){let e=Wf(o,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,s.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ws(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oo.fromDate(e);return{timestampValue:El(t.serializer,n)}}if(e instanceof oo){const n=new oo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:El(t.serializer,n)}}if(e instanceof Sf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xf)return{bytesValue:Il(t.serializer,e._byteString)};if(e instanceof qp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Nl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Op(e)))}(e,t)}function Vf(e,t){const n={};return bi(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vi(e,((e,r)=>{const o=Wf(r,t.Eu(e));null!=o&&(n[e]=o)})),{mapValue:{fields:n}}}function qf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oo||e instanceof Sf||e instanceof xf||e instanceof qp||e instanceof Af)}function Hf(e,t,n){if(!qf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Op(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function Gf(e,t,n){if((t=(0,s.Ku)(t))instanceof wf)return t._internalPath;if("string"==typeof t)return Xf(e,t);throw Yf("Field path arguments must be of type string or ",e,!1,void 0,n)}const Kf=new RegExp("[~\\*/\\[\\]]");function Xf(e,t,n){if(t.search(Kf)>=0)throw Yf("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new wf(...t.split("."))._internalPath}catch(x){throw Yf("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yf(e,t,n,r,o){const i=r&&!r.isEmpty(),a=void 0!==o;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(o)),l+=")"),new Wr(Ur.INVALID_ARGUMENT,s+e+l)}function Qf(e,t){return e.some((e=>e.isEqual(t)))}class $f{constructor(e,t,n,r,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jf extends $f{data(){return super.data()}}function Zf(e,t){return"string"==typeof t?Xf(e,t):t instanceof wf?t._internalPath:t._delegate._internalPath}function em(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wr(Ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tm{}class nm extends tm{}function rm(e,t){let n=[];for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t instanceof tm&&n.push(t),n=n.concat(o),function(e){const t=e.filter((e=>e instanceof am)).length,n=e.filter((e=>e instanceof om)).length;if(t>1||t>0&&n>0)throw new Wr(Ur.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class om extends nm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new om(e,t,n)}_apply(e){const t=this._parse(e);return Am(e._query,t),new Vp(e.firestore,e.converter,Qa(e._query,t))}_parse(e){const t=Nf(e.firestore),n=function(e,t,n,r,o,i,a){let s;if(o.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){km(a,i);const t=[];for(const n of a)t.push(wm(r,e,n));s={arrayValue:{values:t}}}else s=wm(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||km(a,i),s=Uf(n,t,a,"in"===i||"not-in"===i);return ga.create(o,i,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function im(e,t,n){const r=t,o=Zf("where",e);return om._create(o,r,n)}class am extends tm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new am(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ya.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const o of r)Am(n,o),n=Qa(n,o)}(e._query,t),new Vp(e.firestore,e.converter,Qa(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function sm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Sm("or",e))),am._create("or",t)}function lm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Sm("and",e))),am._create("and",t)}class cm extends nm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cm(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pa(t,n)}(e._query,this._field,this._direction);return new Vp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Wa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function um(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Zf("orderBy",e);return cm._create(n,t)}class dm extends nm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new dm(e,t,n)}_apply(e){return new Vp(e.firestore,e.converter,$a(e._query,this._limit,this._limitType))}}function hm(e){return zp("limit",e),dm._create("limit",e,"F")}function pm(e){return zp("limitToLast",e),dm._create("limitToLast",e,"L")}class fm extends nm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new fm(e,t,n)}_apply(e){const t=xm(e,this.type,this._docOrFields,this._inclusive);return new Vp(e.firestore,e.converter,function(e,t){return new Wa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function mm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fm._create("startAt",t,!0)}function gm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fm._create("startAfter",t,!1)}class ym extends nm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ym(e,t,n)}_apply(e){const t=xm(e,this.type,this._docOrFields,this._inclusive);return new Vp(e.firestore,e.converter,function(e,t){return new Wa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function vm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ym._create("endBefore",t,!1)}function bm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ym._create("endAt",t,!0)}function xm(e,t,n,r){if(n[0]=(0,s.Ku)(n[0]),n[0]instanceof $f)return function(e,t,n,r,o){if(!r)throw new Wr(Ur.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const a of Ka(e))if(a.field.isKeyField())i.push(Yi(t,r.key));else{const e=r.data.field(a.field);if(Pi(e))throw new Wr(Ur.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new ua(i,o)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const o=Nf(e.firestore);return function(e,t,n,r,o,i){const a=e.explicitOrderBy;if(o.length>a.length)throw new Wr(Ur.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const s=[];for(let l=0;l<o.length;l++){const i=o[l];if(a[l].field.isKeyField()){if("string"!=typeof i)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!Ga(e)&&-1!==i.indexOf("/"))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(so.fromString(i));if(!uo.isDocumentKey(n))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const o=new uo(n);s.push(Yi(t,o))}else{const e=Uf(n,r,i);s.push(e)}}return new ua(s,i)}(e._query,e.firestore._databaseId,o,t,n,r)}}function wm(e,t,n){if("string"==typeof(n=(0,s.Ku)(n))){if(""===n)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ga(t)&&-1!==n.indexOf("/"))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(so.fromString(n));if(!uo.isDocumentKey(r))throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yi(e,new uo(r))}if(n instanceof qp)return Yi(e,n._key);throw new Wr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Op(n),"."))}function km(e,t){if(!Array.isArray(e)||0===e.length)throw new Wr(Ur.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Am(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Sm(e,t){if(!(t instanceof om||t instanceof am))throw new Wr(Ur.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Cm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Or()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return vi(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Sf(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Mi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fi(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new oo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=so.fromString(e);Lr(ec(n));const r=new Li(n.get(1),n.get(3)),o=new uo(n.popFirst(5));return r.isEqual(t)||Pr("Document ".concat(o," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),o}}function Tm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Em extends Cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new xf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qp(this.firestore,null,t)}}function Im(e){return new vf("sum",Gf("sum",e))}function _m(e){return new vf("avg",Gf("average",e))}function jm(){return new vf("count")}function Nm(e,t){var n,r;return e instanceof vf&&t instanceof vf&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function Rm(e,t){return Qp(e.query,t.query)&&(0,s.bD)(e.data(),t.data())}class Dm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pm extends $f{constructor(e,t,n,r,o,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Mm extends Pm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Fm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Mm(this._firestore,this._userDataWriter,n.key,n,new Dm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wr(Ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Mm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let o=-1,i=-1;return 0!==t.type&&(o=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Om(t.type),doc:r,oldIndex:o,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Om(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Or()}}function Lm(e,t){return e instanceof Pm&&t instanceof Pm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fm&&t instanceof Fm&&e._firestore===t._firestore&&Qp(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function zm(e){e=Lp(e,qp);const t=Lp(e.firestore,tf);return Ip(of(t),e._key).then((n=>Zm(t,e,n)))}class Bm extends Cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new xf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qp(this.firestore,null,t)}}function Um(e){e=Lp(e,qp);const t=Lp(e.firestore,tf),n=of(t),r=new Bm(t);return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Br(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Wr(Ur.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=uh(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Ap(e),t,n))),n.promise}(n,e._key).then((n=>new Pm(t,r,e._key,n,new Dm(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Wm(e){e=Lp(e,qp);const t=Lp(e.firestore,tf);return Ip(of(t),e._key,{source:"server"}).then((n=>Zm(t,e,n)))}function Vm(e){e=Lp(e,Vp);const t=Lp(e.firestore,tf),n=of(t),r=new Bm(t);return em(e._query),_p(n,e._query).then((n=>new Fm(t,r,e,n)))}function qm(e){e=Lp(e,Vp);const t=Lp(e.firestore,tf),n=of(t),r=new Bm(t);return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await nd(e,t,!0),o=new Ih(t,r.ls),i=o.ca(r.documents),a=o.applyChanges(i,!1);n.resolve(a.snapshot)}catch(e){const r=uh(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Ap(e),t,n))),n.promise}(n,e._query).then((n=>new Fm(t,r,e,n)))}function Hm(e){e=Lp(e,Vp);const t=Lp(e.firestore,tf),n=of(t),r=new Bm(t);return _p(n,e._query,{source:"server"}).then((n=>new Fm(t,r,e,n)))}function Gm(e,t,n){e=Lp(e,qp);const r=Lp(e.firestore,tf),o=Tm(e.converter,t,n);return Jm(r,[Rf(Nf(r),"setDoc",e._key,o,null!==e.converter,n).toMutation(e._key,Fs.none())])}function Km(e,t,n){e=Lp(e,qp);const r=Lp(e.firestore,tf),o=Nf(r);let i;for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];return i="string"==typeof(t=(0,s.Ku)(t))||t instanceof wf?Bf(o,"updateDoc",e._key,t,n,l):zf(o,"updateDoc",e._key,t),Jm(r,[i.toMutation(e._key,Fs.exists(!0))])}function Xm(e){return Jm(Lp(e.firestore,tf),[new Ys(e._key,Fs.none())])}function Ym(e,t){const n=Lp(e.firestore,tf),r=Xp(e),o=Tm(e.converter,t);return Jm(n,[Rf(Nf(e.firestore),"addDoc",r._key,o,null!==e.converter,{}).toMutation(r._key,Fs.exists(!1))]).then((()=>r))}function Qm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,i,a;e=(0,s.Ku)(e);let l={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Jp(n[c])||(l=n[c],c++);const u={includeMetadataChanges:l.includeMetadataChanges};if(Jp(n[c])){const e=n[c];n[c]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,p;if(e instanceof qp)h=Lp(e.firestore,tf),p=qa(e._key.path),d={next:t=>{n[c]&&n[c](Zm(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Lp(e,Vp);h=Lp(t.firestore,tf),p=t._query;const r=new Bm(h);d={next:e=>{n[c]&&n[c](new Fm(h,r,t,e))},error:n[c+1],complete:n[c+2]},em(e._query)}return function(e,t,n,r){const o=new hp(r),i=new wh(t,o,n);return e.asyncQueue.enqueueAndForget((async()=>gh(await Ep(e),i))),()=>{o.Na(),e.asyncQueue.enqueueAndForget((async()=>yh(await Ep(e),i)))}}(of(h),p,u,d)}function $m(e,t){return function(e,t){const n=new hp(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Br(e).q_.add(t),t.next()}(await Ep(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Br(e).q_.delete(t)}(await Ep(e),n)))}}(of(e=Lp(e,tf)),Jp(t)?t:{next:t})}function Jm(e,t){return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ip(e);try{const e=await function(e,t){const n=Br(e),r=oo.now(),o=t.reduce(((e,t)=>e.add(t.key)),gs());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=ss(),l=gs();return n.ss.getEntries(e,o).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((o=>{i=o;const a=[];for(const e of t){const t=Ws(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Hs(e.key,t,la(t.value.mapValue),Fs.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:us(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new xi(to)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Kh(r,e.changes),await Qd(r.remoteStore)}catch(e){const t=uh(e,"Failed to persist write");n.reject(t)}}(await Cp(e),t,n))),n.promise}(of(e),t)}function Zm(e,t,n){const r=n.docs.get(t._key),o=new Bm(e);return new Pm(e,o,t._key,r,new Dm(n.hasPendingWrites,n.fromCache),t.converter)}function eg(e){return tg(e,{count:jm()})}function tg(e,t){const n=Lp(e.firestore,tf),r=of(n),o=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}(t,((e,t)=>new el(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>{try{const o=await Tp(e);r.resolve(async function(e,t,n){var r;const o=Br(e),{request:i,R_:a}=function(e,t,n){const r=ql(e,t),o={},i=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;o[t]=e.alias,"count"===e.aggregateType?i.push({alias:t,count:{}}):"avg"===e.aggregateType?i.push({alias:t,avg:{field:Ql(e.fieldPath)}}):"sum"===e.aggregateType&&i.push({alias:t,sum:{field:Ql(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:i,structuredQuery:r.structuredQuery},parent:r.parent},R_:o}}(o.serializer,function(e){const t=Br(e);return t.Pe||(t.Pe=Ya(t,e.explicitOrderBy)),t.Pe}(t),n),s=i.parent;o.connection.yo||delete i.parent;const l=(await o.Co("RunAggregationQuery",s,i,1)).filter((e=>!!e.result));Lr(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[a[t]]=c[t],e)),{})}(o,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,o).then((t=>function(e,t,n){const r=new Bm(e);return new bf(t,r,n)}(n,e,t)))}class ng{constructor(e){this.kind="memory",this._onlineComponentProvider=new up,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new ap}toJSON(){return{kind:this.kind}}}class rg{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=hg(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class og{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new ap}toJSON(){return{kind:this.kind}}}class ig{constructor(e){this.kind="memoryLru",this._offlineComponentProvider=new sp(e)}toJSON(){return{kind:this.kind}}}function ag(){return new og}function sg(e){return new ig(null==e?void 0:e.cacheSizeBytes)}function lg(e){return new ng(e)}function cg(e){return new rg(e)}class ug{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new up,this._offlineComponentProvider=new lp(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}class dg{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new up,this._offlineComponentProvider=new cp(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes)}}function hg(e){return new ug(null==e?void 0:e.forceOwnership)}function pg(){return new dg}const fg={maxAttempts:5};class mg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nf(e)}set(e,t,n){this._verifyNotCommitted();const r=gg(e,this._firestore),o=Tm(r.converter,t,n),i=Rf(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Fs.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gg(e,this._firestore);let o;for(var i=arguments.length,a=new Array(i>3?i-3:0),l=3;l<i;l++)a[l-3]=arguments[l];return o="string"==typeof(t=(0,s.Ku)(t))||t instanceof wf?Bf(this._dataReader,"WriteBatch.update",r._key,t,n,a):zf(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,Fs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gg(e,this._firestore);return this._mutations=this._mutations.concat(new Ys(t._key,Fs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wr(Ur.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gg(e,t){if((e=(0,s.Ku)(e)).firestore!==t)throw new Wr(Ur.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nf(e)}get(e){const t=gg(e,this._firestore),n=new Em(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Or();const r=e[0];if(r.isFoundDocument())return new $f(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new $f(this._firestore,n,t._key,null,t.converter);throw Or()}))}set(e,t,n){const r=gg(e,this._firestore),o=Tm(r.converter,t,n),i=Rf(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=gg(e,this._firestore);let o;for(var i=arguments.length,a=new Array(i>3?i-3:0),l=3;l<i;l++)a[l-3]=arguments[l];return o="string"==typeof(t=(0,s.Ku)(t))||t instanceof wf?Bf(this._dataReader,"Transaction.update",r._key,t,n,a):zf(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=gg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gg(e,this._firestore),n=new Bm(this._firestore);return super.get(e).then((e=>new Pm(this._firestore,n,t._key,e._document,new Dm(!1,!1),t.converter)))}}function vg(e,t,n){e=Lp(e,tf);const r=Object.assign(Object.assign({},fg),n);return function(e){if(e.maxAttempts<1)throw new Wr(Ur.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>{const o=await Tp(e);new mp(e.asyncQueue,o,n,t,r).run()})),r.promise}(of(e),(n=>t(new yg(e,n))),r)}function bg(){return new Df("deleteField")}function xg(){return new Mf("serverTimestamp")}function wg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ff("arrayUnion",t)}function kg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Of("arrayRemove",t)}function Ag(e){return new Lf("increment",e)}function Sg(e){return of(e=Lp(e,tf)),new mg(e,(t=>Jm(e,t)))}function Cg(e,t){var n;const r=of(e=Lp(e,tf));if(!r._uninitializedComponentsProvider||"memory"===(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return Mr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const o=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new Wr(Ur.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=Tg(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=Xf("setIndexConfiguration",Tg(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new go(e,2)):"ASCENDING"===n.order?t.push(new go(e,0)):"DESCENDING"===n.order&&t.push(new go(e,1))}n.push(new ho(ho.UNKNOWN_ID,e,t,vo.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue((async()=>async function(e,t){const n=Br(e),r=n.indexManager,o=[];return n.persistence.runTransaction("Configure indexes","readwrite",(e=>r.getFieldIndexes(e).next((n=>function(e,t,n,r,o){e=[...e],t=[...t],e.sort(n),t.sort(n);const i=e.length,a=t.length;let s=0,l=0;for(;s<a&&l<i;){const i=n(e[l],t[s]);i<0?o(e[l++]):i>0?r(t[s++]):(s++,l++)}for(;s<a;)r(t[s++]);for(;l<i;)o(e[l++])}(n,t,mo,(t=>{o.push(r.addFieldIndex(e,t))}),(t=>{o.push(r.deleteFieldIndex(e,t))})))).next((()=>To.waitFor(o)))))}(await Ap(e),t)))}(r,o)}function Tg(e,t){if("string"!=typeof e[t])throw new Wr(Ur.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class Eg{constructor(e){this._client=e,this.type="PersistentCacheIndexManager"}}function Ig(e){var t;e=Lp(e,tf);const n=Dg.get(e);if(n)return n;const r=of(e);if("persistent"!==(null===(t=r._uninitializedComponentsProvider)||void 0===t?void 0:t._offlineKind))return null;const o=new Eg(r);return Dg.set(e,o),o}function _g(e){Rg(e,!0)}function jg(e){Rg(e,!1)}function Ng(e){e._client.verifyNotTerminated(),function(e){return e.asyncQueue.enqueue((async()=>function(e){const t=Br(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",(e=>n.deleteAllFieldIndexes(e)))}(await Ap(e))))}(e._client).then((e=>Dr("deleting all persistent cache indexes succeeded"))).catch((e=>Mr("deleting all persistent cache indexes failed",e)))}function Rg(e,t){e._client.verifyNotTerminated(),function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){Br(e).es.$i=t}(await Ap(e),t)))}(e._client,t).then((e=>Dr("setting persistent cache index auto creation isEnabled=".concat(t," succeeded")))).catch((e=>Mr("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e)))}const Dg=new WeakMap;class Pg{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Mg.instance.onExistenceFilterMismatch(e)}}class Mg{constructor(){this.Su=new Map}static get instance(){return Fg||(Fg=new Mg,function(e){if(al)throw new Error("a TestingHooksSpi instance is already set");al=e}(Fg)),Fg}tt(e){this.Su.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Su;return n.set(t,e),()=>n.delete(t)}}let Fg=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_r=e}(o.MF),(0,o.om)(new i.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:o}=n;const i=e.getProvider("app").getImmediate(),a=new tf(new Kr(e.getProvider("auth-internal")),new $r(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wr(Ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(e.options.projectId,t)}(i,r),i);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),(0,o.KO)(Er,"4.4.0",e),(0,o.KO)(Er,"4.4.0","esm2017")}()},1947:(e,t,n)=>{"use strict";n.d(t,{dG:()=>nt,gf:()=>rt,xD:()=>ot});var r=n(52),o=n(8812),i=n(7700),a=n(2555);let s,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(v(this),n),y(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(e.apply(v(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(v(this),t,...r);return d.set(i,t.sort?t.sort():[t]),y(i)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));u.set(e,t)}(e),t=e,(s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(y(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&c.set(t,e)})).catch((()=>{})),p.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),p.set(t,e)),t}const v=e=>p.get(e);const b=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],w=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return w.set(t,i),i}f=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(f);const A="@firebase/installations",S="0.6.4",C=1e4,T="w:".concat(S),E="FIS_v2",I=36e5,_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},j=new i.FA("installations","Installations",_);function N(e){return e instanceof i.g&&e.code.includes("request-failed")}function R(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function D(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function P(e,t){const n=(await t.json()).error;return j.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function M(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function F(e,t){let{refreshToken:n}=t;const r=M(e);return r.append("Authorization",function(e){return"".concat(E," ").concat(e)}(n)),r}async function O(e){const t=await e();return t.status>=500&&t.status<600?e():t}function L(e){return new Promise((t=>{setTimeout(t,e)}))}const z=/^[cdef][\w-]{21}$/;function B(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return z.test(t)?t:""}catch(e){return""}}function U(e){return"".concat(e.appName,"!").concat(e.appId)}const W=new Map;function V(e,t){const n=U(e);q(n,t),function(e,t){const n=G();n&&n.postMessage({key:e,fid:t});K()}(n,t)}function q(e,t){const n=W.get(e);if(n)for(const r of n)r(t)}let H=null;function G(){return!H&&"BroadcastChannel"in self&&(H=new BroadcastChannel("[Firebase] FID Change"),H.onmessage=e=>{q(e.data.key,e.data.fid)}),H}function K(){0===W.size&&H&&(H.close(),H=null)}const X="firebase-installations-store";let Y=null;function Q(){return Y||(Y=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=y(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(y(a.result),e.oldVersion,e.newVersion,y(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),s}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(X)}})),Y}async function $(e,t){const n=U(e),r=(await Q()).transaction(X,"readwrite"),o=r.objectStore(X),i=await o.get(n);return await o.put(t,n),await r.done,i&&i.fid===t.fid||V(e,t.fid),t}async function J(e){const t=U(e),n=(await Q()).transaction(X,"readwrite");await n.objectStore(X).delete(t),await n.done}async function Z(e,t){const n=U(e),r=(await Q()).transaction(X,"readwrite"),o=r.objectStore(X),i=await o.get(n),a=t(i);return void 0===a?await o.delete(n):await o.put(a,n),await r.done,!a||i&&i.fid===a.fid||V(e,a.fid),a}async function ee(e){let t;const n=await Z(e.appConfig,(n=>{const r=function(e){const t=e||{fid:B(),registrationStatus:0};return re(t)}(n),o=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(j.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:o}=t;const i=R(n),a=M(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:o,authVersion:E,appId:n.appId,sdkVersion:T},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await O((()=>fetch(i,c)));if(u.ok){const e=await u.json();return{fid:e.fid||o,registrationStatus:2,refreshToken:e.refreshToken,authToken:D(e.authToken)}}throw await P("Create Installation",u)}(e,t);return $(e.appConfig,n)}catch(n){throw N(n)&&409===n.customData.serverCode?await J(e.appConfig):await $(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:te(e)}:{installationEntry:t}}(e,r);return t=o.registrationPromise,o.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function te(e){let t=await ne(e.appConfig);for(;1===t.registrationStatus;)await L(100),t=await ne(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ee(e);return n||t}return t}function ne(e){return Z(e,(e=>{if(!e)throw j.create("installation-not-found");return re(e)}))}function re(e){return 1===(t=e).registrationStatus&&t.registrationTime+C<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function oe(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const o=function(e,t){let{fid:n}=t;return"".concat(R(e),"/").concat(n,"/authTokens:generate")}(n,t),i=F(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const s={installation:{sdkVersion:T,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(s)},c=await O((()=>fetch(o,l)));if(c.ok){return D(await c.json())}throw await P("Generate Auth Token",c)}async function ie(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Z(e.appConfig,(r=>{if(!se(r))throw j.create("not-registered");const o=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+I}(e)}(o))return r;if(1===o.requestStatus)return t=async function(e,t){let n=await ae(e.appConfig);for(;1===n.authToken.requestStatus;)await L(100),n=await ae(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ie(e,t):r}(e,n),r;{if(!navigator.onLine)throw j.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await oe(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await $(e.appConfig,r),n}catch(n){if(!N(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await $(e.appConfig,n)}else await J(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function ae(e){return Z(e,(e=>{if(!se(e))throw j.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+C<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function se(e){return void 0!==e&&2===e.registrationStatus}async function le(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await ee(e);t&&await t}(n);return(await ie(n,t)).token}function ce(e){return j.create("missing-app-config-values",{valueName:e})}const ue="installations",de=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ce("App Configuration");if(!e.name)throw ce("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ce(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},he=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,ue).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ee(t);return r?r.catch(console.error):ie(t).catch(console.error),n.fid}(n),getToken:e=>le(n,e)}};(0,r.om)(new o.uA(ue,de,"PUBLIC")),(0,r.om)(new o.uA("installations-internal",he,"PRIVATE")),(0,r.KO)(A,S),(0,r.KO)(A,S,"esm2017");var pe=n(2799);const fe="/firebase-messaging-sw.js",me="/firebase-cloud-messaging-push-scope",ge="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ye="https://fcmregistrations.googleapis.com/v1",ve="google.c.a.c_id";var be,xe;function we(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ke(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(be||(be={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(xe||(xe={}));const Ae="fcm_token_details_db",Se=5,Ce="fcm_token_object_Store";const Te="firebase-messaging-database",Ee=1,Ie="firebase-messaging-store";let _e=null;function je(){return _e||(_e=(0,pe.P2)(Te,Ee,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ie)}})),_e}async function Ne(e){const t=De(e),n=await je(),r=await n.transaction(Ie).objectStore(Ie).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(Ae))return null}let t=null;return(await(0,pe.P2)(Ae,Se,{upgrade:async(n,r,o,i)=>{var a;if(r<2)return;if(!n.objectStoreNames.contains(Ce))return;const s=i.objectStore(Ce),l=await s.index("fcmSenderId").get(e);if(await s.clear(),l)if(2===r){const e=l;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:we(e.vapidKey)}}}else if(3===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:we(e.auth),p256dh:we(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:we(e.vapidKey)}}}else if(4===r){const e=l;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:we(e.auth),p256dh:we(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:we(e.vapidKey)}}}}})).close(),await(0,pe.MR)(Ae),await(0,pe.MR)("fcm_vapid_details_db"),await(0,pe.MR)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await Re(e,t),t}}async function Re(e,t){const n=De(e),r=(await je()).transaction(Ie,"readwrite");return await r.objectStore(Ie).put(t,n),await r.done,t}function De(e){let{appConfig:t}=e;return t.appId}const Pe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Me=new i.FA("messaging","Messaging",Pe);async function Fe(e,t){const n={method:"DELETE",headers:await Le(e)};try{const r=await fetch("".concat(Oe(e.appConfig),"/").concat(t),n),o=await r.json();if(o.error){const e=o.error.message;throw Me.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw Me.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function Oe(e){let{projectId:t}=e;return"".concat(ye,"/projects/").concat(t,"/registrations")}async function Le(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function ze(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:o}=e;const i={web:{endpoint:r,auth:n,p256dh:t}};return o!==ge&&(i.web.applicationPubKey=o),i}const Be=6048e5;async function Ue(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ke(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:we(t.getKey("auth")),p256dh:we(t.getKey("p256dh"))},r=await Ne(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,o=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&o&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+Be?async function(e,t){try{const n=await async function(e,t){const n=await Le(e),r=ze(t.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch("".concat(Oe(e.appConfig),"/").concat(t.token),o);i=await n.json()}catch(a){throw Me.create("token-update-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw Me.create("token-update-failed",{errorInfo:e})}if(!i.token)throw Me.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Re(e.firebaseDependencies,r),n}catch(n){throw await We(e),n}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Fe(e.firebaseDependencies,r.token)}catch(o){console.warn(o)}return Ve(e.firebaseDependencies,n)}return Ve(e.firebaseDependencies,n)}async function We(e){const t=await Ne(e.firebaseDependencies);t&&(await Fe(e.firebaseDependencies,t.token),await async function(e){const t=De(e),n=(await je()).transaction(Ie,"readwrite");await n.objectStore(Ie).delete(t),await n.done}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Ve(e,t){const n=await async function(e,t){const n=await Le(e),r=ze(t),o={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch(Oe(e.appConfig),o);i=await t.json()}catch(a){throw Me.create("token-subscribe-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw Me.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw Me.create("token-subscribe-no-token");return i.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await Re(e,r),r.token}function qe(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const o=t.notification.image;o&&(e.notification.image=o);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,o,i,a;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const s=null!==(o=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(i=t.notification)||void 0===i?void 0:i.click_action;s&&(e.fcmOptions.link=s);const l=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function He(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Ge(e){return Me.create("missing-app-config-values",{valueName:e})}He("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),He("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ke{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw Ge("App Configuration Object");if(!e.name)throw Ge("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Ge(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Xe(e){try{e.swRegistration=await navigator.serviceWorker.register(fe,{scope:me}),e.swRegistration.update().catch((()=>{}))}catch(t){throw Me.create("failed-service-worker-registration",{browserErrorMessage:null===t||void 0===t?void 0:t.message})}}async function Ye(e,t){if(!navigator)throw Me.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw Me.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ge)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await Xe(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw Me.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),Ue(e)}async function Qe(e,t,n){const r=function(e){switch(e){case xe.NOTIFICATION_CLICKED:return"notification_open";case xe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[ve],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function $e(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===xe.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(qe(n)):e.onMessageHandler.next(qe(n)));const r=n.data;var o;"object"===typeof(o=r)&&o&&ve in o&&"1"===r["google.c.a.e"]&&await Qe(e,n.messageType,r)}const Je="@firebase/messaging",Ze="0.12.5",et=e=>{const t=new Ke(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>$e(t,e))),t},tt=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Ye(t,e)}};function nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();return async function(){try{await(0,i.eX)()}catch(e){return!1}return"undefined"!==typeof window&&(0,i.zW)()&&(0,i.dM)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then((e=>{if(!e)throw Me.create("unsupported-browser")}),(e=>{throw Me.create("indexed-db-unsupported")})),(0,r.j6)((0,i.Ku)(e),"messaging").getImmediate()}async function rt(e,t){return Ye(e=(0,i.Ku)(e),t)}function ot(e,t){return function(e,t){if(!navigator)throw Me.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=(0,i.Ku)(e),t)}(0,r.om)(new o.uA("messaging",et,"PUBLIC")),(0,r.om)(new o.uA("messaging-internal",tt,"PRIVATE")),(0,r.KO)(Je,Ze),(0,r.KO)(Je,Ze,"esm2017")},2799:(e,t,n)=>{"use strict";n.d(t,{MR:()=>v,P2:()=>y});var r=n(2555);const o=(e,t)=>t.some((t=>e instanceof t));let i,a;const s=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),m(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(g(this),t,...r);return c.set(i,t.sort?t.sort():[t]),m(i)}}function f(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));l.set(e,t)}(e),o(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(m(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const g=e=>d.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=m(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),m(n).then((()=>{}))}const b=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],w=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!b.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return w.set(t,i),i}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(h)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".af497d7b.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="padelbolt:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkpadelbolt=self.webpackChunkpadelbolt||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t,r=n(5043),o=n(4391),i=n(2555);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}(t=e||(e={})).Pop="POP",t.Push="PUSH",t.Replace="REPLACE";const s="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,o){void 0===o&&(o={});let{window:i=document.defaultView,v5Compat:c=!1}=o,p=i.history,f=e.Pop,m=null,g=y();function y(){return(p.state||{idx:null}).idx}function v(){f=e.Pop;let t=y(),n=null==t?null:t-g;g=t,m&&m({action:f,location:x.location,delta:n})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:h(e);return l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,p.replaceState(a({},p.state,{idx:g}),""));let x={get action(){return f},get location(){return t(i,p)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(s,v),m=e,()=>{i.removeEventListener(s,v),m=null}},createHref:e=>n(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let o=d(x.location,t,n);r&&r(o,t),g=y()+1;let a=u(o,g),s=x.createHref(o);try{p.pushState(a,"",s)}catch(l){i.location.assign(s)}c&&m&&m({action:f,location:x.location,delta:1})},replace:function(t,n){f=e.Replace;let o=d(x.location,t,n);r&&r(o,t),g=y();let i=u(o,g),a=x.createHref(o);p.replaceState(i,"",a),c&&m&&m({action:f,location:x.location,delta:0})},go:e=>p.go(e)};return x}var m,g;(g=m||(m={})).data="data",g.deferred="deferred",g.redirect="redirect",g.error="error";new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=N(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let o=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let a=0;null==i&&a<o.length;++a)i=I(o[a],j(r));return i}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=M([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),v(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:E(s,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))o(e,t,r);else o(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=b(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const x=/^:\w+$/,w=3,k=2,A=1,S=10,C=-2,T=e=>"*"===e;function E(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=C),t&&(r+=k),n.filter((e=>!T(e))).reduce(((e,t)=>e+(x.test(t)?w:""===t?A:S)),r)}function I(e,t){let{routesMeta:n}=e,r={},o="/",i=[];for(let a=0;a<n.length;++a){let e=n[a],s=a===n.length-1,l="/"===o?t:t.slice(o.length)||"/",c=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;i.push({params:r,pathname:M([o,c.pathname]),pathnameBase:F(M([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=M([o,c.pathnameBase]))}return i}function _(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(r.push(t),"/([^\\/]+)")));e.endsWith("*")?(r.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return c(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(s[n]||"",t),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function j(e){try{return decodeURI(e)}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=p(e):(o=a({},e),l(!o.pathname||!o.pathname.includes("?"),R("?","pathname","search",o)),l(!o.pathname||!o.pathname.includes("#"),R("#","pathname","hash",o)),l(!o.search||!o.search.includes("#"),R("#","search","hash",o)));let i,s=""===e||""===o.pathname,c=s?"/":o.pathname;if(r||null==c)i=n;else{let e=t.length-1;if(c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:O(r),hash:L(o)}}(o,i),d=c&&"/"!==c&&c.endsWith("/"),h=(s||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",L=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],U=(new Set(B),["get",...B]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const V=r.createContext(null);const q=r.createContext(null);const H=r.createContext(null);const G=r.createContext(null);const K=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function Y(){return null!=r.useContext(G)}function Q(){return Y()||l(!1),r.useContext(G).location}function $(e){r.useContext(H).static||r.useLayoutEffect(e)}function J(){let{isDataRoute:e}=r.useContext(K);return e?function(){let{router:e}=ue(ae.UseNavigateStable),t=he(le.UseNavigateStable),n=r.useRef(!1);return $((()=>{n.current=!0})),r.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},o)))}),[e,t])}():function(){Y()||l(!1);let e=r.useContext(V),{basename:t,navigator:n}=r.useContext(H),{matches:o}=r.useContext(K),{pathname:i}=Q(),a=JSON.stringify(D(o).map((e=>e.pathnameBase))),s=r.useRef(!1);return $((()=>{s.current=!0})),r.useCallback((function(r,o){if(void 0===o&&(o={}),!s.current)return;if("number"===typeof r)return void n.go(r);let l=P(r,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:M([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)}),[t,n,a,i,e])}()}function Z(){let{matches:e}=r.useContext(K),t=e[e.length-1];return t?t.params:{}}function ee(t,n,o){Y()||l(!1);let{navigator:i}=r.useContext(H),{matches:a}=r.useContext(K),s=a[a.length-1],c=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let d,h=Q();if(n){var f;let e="string"===typeof n?p(n):n;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),d=e}else d=h;let m=d.pathname||"/",g=y(t,{pathname:"/"===u?m:m.slice(u.length)||"/"});let v=ie(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:M([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,o);return n&&v?r.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},v):v}function te(){let e=function(){var e;let t=r.useContext(X),n=de(le.UseRouteError),o=he(le.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[o]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:o};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const ne=r.createElement(te,null);class re extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?r.createElement(K.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:o}=e,i=r.useContext(V);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(K.Provider,{value:t},o)}function ie(e,t,n){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}let a=e,s=null==(o=n)?void 0:o.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||l(!1),a=a.slice(0,Math.min(a.length,e+1))}return a.reduceRight(((e,o,i)=>{let l=o.route.id?null==s?void 0:s[o.route.id]:null,c=null;n&&(c=o.route.errorElement||ne);let u=t.concat(a.slice(0,i+1)),d=()=>{let t;return t=l?c:o.route.Component?r.createElement(o.route.Component,null):o.route.element?o.route.element:e,r.createElement(oe,{match:o,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===i)?r.createElement(re,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):d()}),null)}var ae,se,le,ce;function ue(e){let t=r.useContext(V);return t||l(!1),t}function de(e){let t=r.useContext(q);return t||l(!1),t}function he(e){let t=function(){let e=r.useContext(K);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}(se=ae||(ae={})).UseBlocker="useBlocker",se.UseRevalidator="useRevalidator",se.UseNavigateStable="useNavigate",(ce=le||(le={})).UseBlocker="useBlocker",ce.UseLoaderData="useLoaderData",ce.UseActionData="useActionData",ce.UseRouteError="useRouteError",ce.UseNavigation="useNavigation",ce.UseRouteLoaderData="useRouteLoaderData",ce.UseMatches="useMatches",ce.UseRevalidator="useRevalidator",ce.UseNavigateStable="useNavigate",ce.UseRouteId="useRouteId";function pe(e){let{to:t,replace:n,state:o,relative:i}=e;Y()||l(!1);let{matches:a}=r.useContext(K),{pathname:s}=Q(),c=J(),u=P(t,D(a).map((e=>e.pathnameBase)),s,"path"===i),d=JSON.stringify(u);return r.useEffect((()=>c(JSON.parse(d),{replace:n,state:o,relative:i})),[c,d,i,n,o]),null}function fe(e){l(!1)}function me(t){let{basename:n="/",children:o=null,location:i,navigationType:a=e.Pop,navigator:s,static:c=!1}=t;Y()&&l(!1);let u=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:u,navigator:s,static:c})),[u,s,c]);"string"===typeof i&&(i=p(i));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:y="default"}=i,v=r.useMemo((()=>{let e=N(h,u);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:y},navigationType:a}}),[u,h,f,m,g,y,a]);return null==v?null:r.createElement(H.Provider,{value:d},r.createElement(G.Provider,{children:o,value:v}))}function ge(e){let{children:t,location:n}=e;return ee(be(t),n)}var ye,ve;(ve=ye||(ye={}))[ve.pending=0]="pending",ve[ve.success=1]="success",ve[ve.error=2]="error";new Promise((()=>{}));r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,o)=>{if(!r.isValidElement(e))return;let i=[...t,o];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,i));e.type!==fe&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,i)),n.push(a)})),n}function xe(e){let{basename:t,children:n,window:o}=e,i=r.useRef();var a;null==i.current&&(i.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),f((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return d("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,a)));let s=i.current,[l,c]=r.useState({action:s.action,location:s.location});return r.useLayoutEffect((()=>s.listen(c)),[s]),r.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(we||(we={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));var Ae=n(8279),Se=n(8168),Ce=n(8587);const Te=r.createContext(null);function Ee(){return r.useContext(Te)}const Ie="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var _e=n(579);const je=function(e){const{children:t,theme:n}=e,o=Ee(),i=r.useMemo((()=>{const e=null===o?n:function(e,t){if("function"===typeof t)return t(e);return(0,Se.A)({},e,t)}(o,n);return null!=e&&(e[Ie]=null!==o),e}),[n,o]);return(0,_e.jsx)(Te.Provider,{value:i,children:t})};var Ne=n(4472),Re=n(7082);const De=["value"],Pe=r.createContext();const Me=function(e){let{value:t}=e,n=(0,Ce.A)(e,De);return(0,_e.jsx)(Pe.Provider,(0,Se.A)({value:null==t||t},n))},Fe=r.createContext(void 0);const Oe=function(e){let{value:t,children:n}=e;return(0,_e.jsx)(Fe.Provider,{value:t,children:n})},Le={};function ze(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.useMemo((()=>{const r=e&&t[e]||t;if("function"===typeof n){const i=n(r),a=e?(0,Se.A)({},t,{[e]:i}):i;return o?()=>a:a}return e?(0,Se.A)({},t,{[e]:n}):(0,Se.A)({},t,n)}),[e,t,n,o])}const Be=function(e){const{children:t,theme:n,themeId:r}=e,o=(0,Re.A)(Le),i=Ee()||Le,a=ze(r,o,n),s=ze(r,i,n,!0),l="rtl"===a.direction;return(0,_e.jsx)(je,{theme:s,children:(0,_e.jsx)(Ne.T.Provider,{value:a,children:(0,_e.jsx)(Me,{value:l,children:(0,_e.jsx)(Oe,{value:null==a?void 0:a.components,children:t})})})})};var Ue=n(3375);const We=["theme"];function Ve(e){let{theme:t}=e,n=(0,Ce.A)(e,We);const r=t[Ue.A];return(0,_e.jsx)(Be,(0,Se.A)({},n,{themeId:r?Ue.A:void 0,theme:r||t}))}var qe=n(2876),He=(n(3803),n(219),n(1722)),Ge=n(6598),Ke=n(9436),Xe=(0,Ne.w)((function(e,t){var n=e.styles,o=(0,Ge.J)([n],void 0,(0,r.useContext)(Ne.T)),i=(0,r.useRef)();return(0,Ke.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+e+" "+o.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",e),n.hydrate([a])),i.current=[n,r],function(){n.flush()}}),[t]),(0,Ke.i)((function(){var e=i.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==o.next&&(0,He.sk)(t,o.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",o,n,!1)}}),[t,o.name]),null}));function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Ge.J)(t)}var Qe=function(){var e=Ye.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function $e(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,_e.jsx)(Xe,{styles:r})}var Je=n(5527);const Ze=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const o=(0,Je.A)(r),i="function"===typeof t?t(n&&o[n]||o):t;return(0,_e.jsx)($e,{styles:i})};var et=n(5170);const tt=function(e){return(0,_e.jsx)(Ze,(0,Se.A)({},e,{defaultTheme:et.A,themeId:Ue.A}))},nt=(e,t)=>(0,Se.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),rt=e=>(0,Se.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const ot=function(e){const t=(0,qe.A)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:o=!1}=t;return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)(tt,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;const o={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((t=>{let[n,r]=t;var i;o[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(i=r.palette)?void 0:i.mode}}));let i=(0,Se.A)({html:nt(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,Se.A)({margin:0},rt(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},o);const a=null==(n=e.components)||null==(r=n.MuiCssBaseline)?void 0:r.styleOverrides;return a&&(i=[i,a]),i}(e,o)}),n]})};function it(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=it(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const at=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=it(e))&&(r&&(r+=" "),r+=t);return r};var st=n(4984),lt=n(2783),ct=n(9172),ut=n(7758);const dt=["sx"];function ht(e){const{sx:t}=e,n=(0,Ce.A)(e,dt),{systemProps:r,otherProps:o}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},o=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:ut.A;return Object.keys(e).forEach((t=>{o[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r})(n);let i;return i=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,ct.Q)(e)?(0,Se.A)({},r,e):r}:(0,Se.A)({},r,t),(0,Se.A)({},o,{sx:i})}const pt=["className","component"];var ft=n(9386);const mt=(0,Ae.A)(),gt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:i}=e,a=(0,st.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(lt.A);return r.forwardRef((function(e,r){const s=(0,Je.A)(n),l=ht(e),{className:c,component:u="div"}=l,d=(0,Ce.A)(l,pt);return(0,_e.jsx)(a,(0,Se.A)({as:u,ref:r,className:at(c,i?i(o):o),theme:t&&s[t]||s},d))}))}({themeId:Ue.A,defaultTheme:mt,defaultClassName:"MuiBox-root",generateClassName:ft.A.generate});function yt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var vt=n(3024),bt=n(8610),xt=n(6803),wt=n(4535),kt=n(2532),At=n(2372);function St(e){return(0,At.Ay)("MuiCircularProgress",e)}(0,kt.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Ct,Tt,Et,It;const _t=["className","color","disableShrink","size","style","thickness","value","variant"];let jt,Nt,Rt,Dt;const Pt=44,Mt=Qe(jt||(jt=Ct||(Ct=yt(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Ft=Qe(Nt||(Nt=Tt||(Tt=yt(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),Ot=(0,wt.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["color".concat((0,xt.A)(n.color))]]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:(n.vars||n).palette[t.color].main})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&Ye(Rt||(Rt=Et||(Et=yt(["\n      animation: "," 1.4s linear infinite;\n    "]))),Mt)})),Lt=(0,wt.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),zt=(0,wt.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t["circle".concat((0,xt.A)(n.variant))],n.disableShrink&&t.circleDisableShrink]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink&&Ye(Dt||(Dt=It||(It=yt(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Ft)})),Bt=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiCircularProgress"}),{className:r,color:o="primary",disableShrink:i=!1,size:a=40,style:s,thickness:l=3.6,value:c=0,variant:u="indeterminate"}=n,d=(0,Ce.A)(n,_t),h=(0,Se.A)({},n,{color:o,disableShrink:i,size:a,thickness:l,value:c,variant:u}),p=(e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,i={root:["root",n,"color".concat((0,xt.A)(r))],svg:["svg"],circle:["circle","circle".concat((0,xt.A)(n)),o&&"circleDisableShrink"]};return(0,bt.A)(i,St,t)})(h),f={},m={},g={};if("determinate"===u){const e=2*Math.PI*((Pt-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(c),f.strokeDashoffset="".concat(((100-c)/100*e).toFixed(3),"px"),m.transform="rotate(-90deg)"}return(0,_e.jsx)(Ot,(0,Se.A)({className:(0,vt.A)(p.root,r),style:(0,Se.A)({width:a,height:a},m,s),ownerState:h,ref:t,role:"progressbar"},g,d,{children:(0,_e.jsx)(Lt,{className:p.svg,ownerState:h,viewBox:"".concat(22," ").concat(22," ").concat(Pt," ").concat(Pt),children:(0,_e.jsx)(zt,{className:p.circle,style:f,ownerState:h,cx:Pt,cy:Pt,r:(Pt-l)/2,fill:"none",strokeWidth:l})})}))}));var Ut=n(4794);const Wt=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function Vt(e){return(0,At.Ay)("MuiPaper",e)}(0,kt.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const qt=["className","component","elevation","square","variant"],Ht=(0,wt.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,Se.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,Se.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Ut.X4)("#fff",Wt(n.elevation)),", ").concat((0,Ut.X4)("#fff",Wt(n.elevation)),")")},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),Gt=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiPaper"}),{className:r,component:o="div",elevation:i=1,square:a=!1,variant:s="elevation"}=n,l=(0,Ce.A)(n,qt),c=(0,Se.A)({},n,{component:o,elevation:i,square:a,variant:s}),u=(e=>{const{square:t,elevation:n,variant:r,classes:o}=e,i={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,bt.A)(i,Vt,o)})(c);return(0,_e.jsx)(Ht,(0,Se.A)({as:o,ownerState:c,className:(0,vt.A)(u.root,r),ref:t},l))}));function Kt(e){return(0,At.Ay)("MuiAppBar",e)}(0,kt.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const Xt=["className","color","enableColorOnDark","position"],Yt=(e,t)=>e?"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"):t,Qt=(0,wt.Ay)(Gt,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat((0,xt.A)(n.position))],t["color".concat((0,xt.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,Se.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,Se.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,Se.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,Se.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:Yt(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:Yt(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:Yt(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:Yt(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),$t=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiAppBar"}),{className:r,color:o="primary",enableColorOnDark:i=!1,position:a="fixed"}=n,s=(0,Ce.A)(n,Xt),l=(0,Se.A)({},n,{color:o,position:a,enableColorOnDark:i}),c=(e=>{const{color:t,position:n,classes:r}=e,o={root:["root","color".concat((0,xt.A)(t)),"position".concat((0,xt.A)(n))]};return(0,bt.A)(o,Kt,r)})(l);return(0,_e.jsx)(Qt,(0,Se.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,vt.A)(c.root,r,"fixed"===a&&"mui-fixed"),ref:t},s))}));var Jt=n(7598),Zt=n(2919);const en=(0,n(920).Ay)();var tn=n(7322);const nn=["className","component","disableGutters","fixed","maxWidth","classes"],rn=(0,tn.A)(),on=en("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,Jt.A)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),an=e=>(0,Zt.A)({props:e,name:"MuiContainer",defaultTheme:rn});const sn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=on,useThemeProps:n=an,componentName:o="MuiContainer"}=e,i=t((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,o=t.breakpoints.values[r];return 0!==o&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(o).concat(t.breakpoints.unit)}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}})}));return r.forwardRef((function(e,t){const r=n(e),{className:a,component:s="div",disableGutters:l=!1,fixed:c=!1,maxWidth:u="lg"}=r,d=(0,Ce.A)(r,nn),h=(0,Se.A)({},r,{component:s,disableGutters:l,fixed:c,maxWidth:u}),p=((e,t)=>{const{classes:n,fixed:r,disableGutters:o,maxWidth:i}=e,a={root:["root",i&&"maxWidth".concat((0,Jt.A)(String(i))),r&&"fixed",o&&"disableGutters"]};return(0,bt.A)(a,(e=>(0,At.Ay)(t,e)),n)})(h,o);return(0,_e.jsx)(i,(0,Se.A)({as:s,ownerState:h,className:at(p.root,a),ref:t},d))}))}({createStyledComponent:(0,wt.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["maxWidth".concat((0,xt.A)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,qe.A)({props:e,name:"MuiContainer"})});function ln(e){return(0,At.Ay)("MuiToolbar",e)}(0,kt.A)("MuiToolbar",["root","gutters","regular","dense"]);const cn=["className","component","disableGutters","variant"],un=(0,wt.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})}),(e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar})),dn=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiToolbar"}),{className:r,component:o="div",disableGutters:i=!1,variant:a="regular"}=n,s=(0,Ce.A)(n,cn),l=(0,Se.A)({},n,{component:o,disableGutters:i,variant:a}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,o={root:["root",!n&&"gutters",r]};return(0,bt.A)(o,ln,t)})(l);return(0,_e.jsx)(un,(0,Se.A)({as:o,className:(0,vt.A)(c.root,r),ref:t,ownerState:l},s))}));function hn(e){return(0,At.Ay)("MuiTypography",e)}(0,kt.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const pn=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],fn=(0,wt.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,xt.A)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),mn={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},gn={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},yn=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTypography"}),r=(e=>gn[e]||e)(n.color),o=ht((0,Se.A)({},n,{color:r})),{align:i="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=mn}=o,p=(0,Ce.A)(o,pn),f=(0,Se.A)({},o,{align:i,color:r,className:a,component:s,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=s||(u?"p":h[d]||mn[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:i,classes:a}=e,s={root:["root",i,"inherit"!==e.align&&"align".concat((0,xt.A)(t)),n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return(0,bt.A)(s,hn,a)})(f);return(0,_e.jsx)(fn,(0,Se.A)({as:m,ref:t,ownerState:f,className:(0,vt.A)(g.root,a)},p))}));var vn=n(5849),bn=n(3319),xn=n(5135);function wn(e,t){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wn(e,t)}function kn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,wn(e,t)}const An=r.createContext(null);function Sn(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function Cn(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Tn(e,t,n){var o=Sn(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var s={};for(var l in t){if(o[l])for(r=0;r<o[l].length;r++){var c=o[l][r];s[o[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,o);return Object.keys(i).forEach((function(a){var s=i[a];if((0,r.isValidElement)(s)){var l=a in t,c=a in o,u=t[a],d=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,r.isValidElement)(u)&&(i[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:Cn(s,"exit",e),enter:Cn(s,"enter",e)})):i[a]=(0,r.cloneElement)(s,{in:!1}):i[a]=(0,r.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Cn(s,"exit",e),enter:Cn(s,"enter",e)})}})),i}var En=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},In=function(e){function t(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}kn(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,o,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,o=a,Sn(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:o.bind(null,e),in:!0,appear:Cn(e,"appear",n),enter:Cn(e,"enter",n),exit:Cn(e,"exit",n)})}))):Tn(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=Sn(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,Se.A)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,o=(0,Ce.A)(e,["component","childFactory"]),i=this.state.contextValue,a=En(this.state.children).map(n);return delete o.appear,delete o.enter,delete o.exit,null===t?r.createElement(An.Provider,{value:i},a):r.createElement(An.Provider,{value:i},r.createElement(t,o,a))},t}(r.Component);In.propTypes={},In.defaultProps={component:"div",childFactory:function(e){return e}};const _n=In;const jn=function(e){const{className:t,classes:n,pulsate:o=!1,rippleX:i,rippleY:a,rippleSize:s,in:l,onExited:c,timeout:u}=e,[d,h]=r.useState(!1),p=(0,vt.A)(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),f={width:s,height:s,top:-s/2+a,left:-s/2+i},m=(0,vt.A)(n.child,d&&n.childLeaving,o&&n.childPulsate);return l||d||h(!0),r.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,_e.jsx)("span",{className:p,style:f,children:(0,_e.jsx)("span",{className:m})})};const Nn=(0,kt.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Rn,Dn,Pn,Mn;const Fn=["center","classes","className"];let On,Ln,zn,Bn;const Un=Qe(On||(On=Rn||(Rn=yt(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Wn=Qe(Ln||(Ln=Dn||(Dn=yt(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Vn=Qe(zn||(zn=Pn||(Pn=yt(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),qn=(0,wt.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Hn=(0,wt.Ay)(jn,{name:"MuiTouchRipple",slot:"Ripple"})(Bn||(Bn=Mn||(Mn=yt(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Nn.rippleVisible,Un,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Nn.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),Nn.child,Nn.childLeaving,Wn,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Nn.childPulsate,Vn,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),Gn=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:a}=n,s=(0,Ce.A)(n,Fn),[l,c]=r.useState([]),u=r.useRef(0),d=r.useRef(null);r.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=r.useRef(!1),p=r.useRef(null),f=r.useRef(null),m=r.useRef(null);r.useEffect((()=>()=>{clearTimeout(p.current)}),[]);const g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:a}=e;c((e=>[...e,(0,_e.jsx)(Hn,{classes:{ripple:(0,vt.A)(i.ripple,Nn.ripple),rippleVisible:(0,vt.A)(i.rippleVisible,Nn.rippleVisible),ripplePulsate:(0,vt.A)(i.ripplePulsate,Nn.ripplePulsate),child:(0,vt.A)(i.child,Nn.child),childLeaving:(0,vt.A)(i.childLeaving,Nn.childLeaving),childPulsate:(0,vt.A)(i.childPulsate,Nn.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},u.current)])),u.current+=1,d.current=a}),[i]),y=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:i=o||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const s=a?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(i||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(i)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===f.current&&(f.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},p.current=setTimeout((()=>{f.current&&(f.current(),f.current=null)}),80)):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[o,g]),v=r.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=r.useCallback(((e,t)=>{if(clearTimeout(p.current),"touchend"===(null==e?void 0:e.type)&&f.current)return f.current(),f.current=null,void(p.current=setTimeout((()=>{b(e,t)})));f.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[]);return r.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,_e.jsx)(qn,(0,Se.A)({className:(0,vt.A)(Nn.root,i.root,a),ref:m},s,{children:(0,_e.jsx)(_n,{component:null,exit:!0,children:l})}))}));function Kn(e){return(0,At.Ay)("MuiButtonBase",e)}const Xn=(0,kt.A)("MuiButtonBase",["root","disabled","focusVisible"]),Yn=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Qn=(0,wt.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Xn.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),$n=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:p="a",onBlur:f,onClick:m,onContextMenu:g,onDragLeave:y,onFocus:v,onFocusVisible:b,onKeyDown:x,onKeyUp:w,onMouseDown:k,onMouseLeave:A,onMouseUp:S,onTouchEnd:C,onTouchMove:T,onTouchStart:E,tabIndex:I=0,TouchRippleProps:_,touchRippleRef:j,type:N}=n,R=(0,Ce.A)(n,Yn),D=r.useRef(null),P=r.useRef(null),M=(0,vn.A)(P,j),{isFocusVisibleRef:F,onFocus:O,onBlur:L,ref:z}=(0,xn.A)(),[B,U]=r.useState(!1);c&&B&&U(!1),r.useImperativeHandle(o,(()=>({focusVisible:()=>{U(!0),D.current.focus()}})),[]);const[W,V]=r.useState(!1);r.useEffect((()=>{V(!0)}),[]);const q=W&&!u&&!c;function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,bn.A)((r=>{t&&t(r);return!n&&P.current&&P.current[e](r),!0}))}r.useEffect((()=>{B&&h&&!u&&W&&P.current.pulsate()}),[u,h,B,W]);const G=H("start",k),K=H("stop",g),X=H("stop",y),Y=H("stop",S),Q=H("stop",(e=>{B&&e.preventDefault(),A&&A(e)})),$=H("start",E),J=H("stop",C),Z=H("stop",T),ee=H("stop",(e=>{L(e),!1===F.current&&U(!1),f&&f(e)}),!1),te=(0,bn.A)((e=>{D.current||(D.current=e.currentTarget),O(e),!0===F.current&&(U(!0),b&&b(e)),v&&v(e)})),ne=()=>{const e=D.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),oe=(0,bn.A)((e=>{h&&!re.current&&B&&P.current&&" "===e.key&&(re.current=!0,P.current.stop(e,(()=>{P.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),x&&x(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),ie=(0,bn.A)((e=>{h&&" "===e.key&&P.current&&B&&!e.defaultPrevented&&(re.current=!1,P.current.stop(e,(()=>{P.current.pulsate(e)}))),w&&w(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let ae=l;"button"===ae&&(R.href||R.to)&&(ae=p);const se={};"button"===ae?(se.type=void 0===N?"button":N,se.disabled=c):(R.href||R.to||(se.role="button"),c&&(se["aria-disabled"]=c));const le=(0,vn.A)(t,z,D);const ce=(0,Se.A)({},n,{centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:I,focusVisible:B}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:o}=e,i={root:["root",t&&"disabled",n&&"focusVisible"]},a=(0,bt.A)(i,Kn,o);return n&&r&&(a.root+=" ".concat(r)),a})(ce);return(0,_e.jsxs)(Qn,(0,Se.A)({as:ae,className:(0,vt.A)(ue.root,s),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:K,onFocus:te,onKeyDown:oe,onKeyUp:ie,onMouseDown:G,onMouseLeave:Q,onMouseUp:Y,onDragLeave:X,onTouchEnd:J,onTouchMove:Z,onTouchStart:$,ref:le,tabIndex:c?-1:I,type:N},se,R,{children:[a,q?(0,_e.jsx)(Gn,(0,Se.A)({ref:M,center:i},_)):null]}))}));function Jn(e){return(0,At.Ay)("MuiIconButton",e)}const Zn=(0,kt.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),er=["edge","children","className","color","disabled","disableFocusRipple","size"],tr=(0,wt.Ay)($n,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,xt.A)(n.color))],n.edge&&t["edge".concat((0,xt.A)(n.edge))],t["size".concat((0,xt.A)(n.size))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(e=>{let{theme:t,ownerState:n}=e;var r;const o=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,Se.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,Se.A)({color:null==o?void 0:o.main},!n.disableRipple&&{"&:hover":(0,Se.A)({},o&&{backgroundColor:t.vars?"rgba(".concat(o.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(o.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(Zn.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),nr=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:o,className:i,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,Ce.A)(n,er),d=(0,Se.A)({},n,{edge:r,color:a,disabled:s,disableFocusRipple:l,size:c}),h=(e=>{const{classes:t,disabled:n,color:r,edge:o,size:i}=e,a={root:["root",n&&"disabled","default"!==r&&"color".concat((0,xt.A)(r)),o&&"edge".concat((0,xt.A)(o)),"size".concat((0,xt.A)(i))]};return(0,bt.A)(a,Jn,t)})(d);return(0,_e.jsx)(tr,(0,Se.A)({className:(0,vt.A)(h.root,i),centerRipple:!0,focusRipple:!l,disabled:s,ref:t,ownerState:d},u,{children:o}))}));n(2086);var rr=n(2427);const or=r.createContext({});function ir(e){return(0,At.Ay)("MuiList",e)}(0,kt.A)("MuiList",["root","padding","dense","subheader"]);const ar=["children","className","component","dense","disablePadding","subheader"],sr=(0,wt.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),lr=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiList"}),{children:o,className:i,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=n,u=(0,Ce.A)(n,ar),d=r.useMemo((()=>({dense:s})),[s]),h=(0,Se.A)({},n,{component:a,dense:s,disablePadding:l}),p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:o}=e,i={root:["root",!n&&"padding",r&&"dense",o&&"subheader"]};return(0,bt.A)(i,ir,t)})(h);return(0,_e.jsx)(or.Provider,{value:d,children:(0,_e.jsxs)(sr,(0,Se.A)({as:a,className:(0,vt.A)(p.root,i),ref:t,ownerState:h},u,{children:[c,o]}))})}));function cr(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const ur=cr;var dr=n(5013);const hr=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function pr(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function fr(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function mr(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function gr(e,t,n,r,o,i){let a=!1,s=o(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&mr(s,i)&&!t)return s.focus(),!0;s=o(e,s,n)}return!1}const yr=r.forwardRef((function(e,t){const{actions:n,autoFocus:o=!1,autoFocusItem:i=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,Ce.A)(e,hr),p=r.useRef(null),f=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,dr.A)((()=>{o&&p.current.focus()}),[o]),r.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{const n=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&n){const n="".concat(ur((0,rr.A)(e)),"px");p.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,p.current.style.width="calc(100% + ".concat(n,")")}return p.current}})),[]);const m=(0,vn.A)(p,t);let g=-1;r.Children.forEach(a,((e,t)=>{r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=a.length&&(g=-1)))}));const y=r.Children.map(a,((e,t)=>{if(t===g){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),r.cloneElement(e,t)}return e}));return(0,_e.jsx)(lr,(0,Se.A)({role:"menu",ref:m,className:s,onKeyDown:e=>{const t=p.current,n=e.key,r=(0,rr.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),gr(t,r,c,l,pr);else if("ArrowUp"===n)e.preventDefault(),gr(t,r,c,l,fr);else if("Home"===n)e.preventDefault(),gr(t,null,c,l,pr);else if("End"===n)e.preventDefault(),gr(t,null,c,l,fr);else if(1===n.length){const o=f.current,i=n.toLowerCase(),a=performance.now();o.keys.length>0&&(a-o.lastTime>500?(o.keys=[],o.repeating=!0,o.previousKeyMatched=!0):o.repeating&&i!==o.keys[0]&&(o.repeating=!1)),o.lastTime=a,o.keys.push(i);const s=r&&!o.repeating&&mr(r,o);o.previousKeyMatched&&(s||gr(t,r,!1,l,pr,o))?e.preventDefault():o.previousKeyMatched=!1}u&&u(e)},tabIndex:o?0:-1},h,{children:y}))}));var vr=n(950),br=n(6078),xr=n(7950);const wr=!1;var kr="unmounted",Ar="exited",Sr="entering",Cr="entered",Tr="exiting",Er=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=Ar,r.appearStatus=Sr):o=Cr:o=t.unmountOnExit||t.mountOnEnter?kr:Ar,r.state={status:o},r.nextCallback=null,r}kn(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===kr?{status:Ar}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Sr&&n!==Cr&&(t=Sr):n!==Sr&&n!==Cr||(t=Tr)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Sr){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:xr.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ar&&this.setState({status:kr})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[xr.findDOMNode(this),r],i=o[0],a=o[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||wr?this.safeSetState({status:Cr},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,a),this.safeSetState({status:Sr},(function(){t.props.onEntering(i,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Cr},(function(){t.props.onEntered(i,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:xr.findDOMNode(this);t&&!wr?(this.props.onExit(r),this.safeSetState({status:Tr},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ar},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ar},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:xr.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=o[0],a=o[1];this.props.addEndListener(i,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===kr)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Ce.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(An.Provider,{value:null},"function"===typeof n?n(e,o):r.cloneElement(r.Children.only(n),o))},t}(r.Component);function Ir(){}Er.contextType=An,Er.propTypes={},Er.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ir,onEntering:Ir,onEntered:Ir,onExit:Ir,onExiting:Ir,onExited:Ir},Er.UNMOUNTED=kr,Er.EXITED=Ar,Er.ENTERING=Sr,Er.ENTERED=Cr,Er.EXITING=Tr;const _r=Er;function jr(){const e=(0,Je.A)(et.A);return e[Ue.A]||e}const Nr=e=>e.scrollTop;function Rr(e,t){var n,r;const{timeout:o,easing:i,style:a={}}=e;return{duration:null!=(n=a.transitionDuration)?n:"number"===typeof o?o:o[t.mode]||0,easing:null!=(r=a.transitionTimingFunction)?r:"object"===typeof i?i[t.mode]:i,delay:a.transitionDelay}}const Dr=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Pr(e){return"scale(".concat(e,", ").concat(e**2,")")}const Mr={entering:{opacity:1,transform:Pr(1)},entered:{opacity:1,transform:"none"}},Fr="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Or=r.forwardRef((function(e,t){const{addEndListener:n,appear:o=!0,children:i,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=_r}=e,y=(0,Ce.A)(e,Dr),v=r.useRef(),b=r.useRef(),x=jr(),w=r.useRef(null),k=(0,vn.A)(w,i.ref,t),A=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},S=A(u),C=A(((e,t)=>{Nr(e);const{duration:n,delay:r,easing:o}=Rr({style:f,timeout:m,easing:a},{mode:"enter"});let i;"auto"===m?(i=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=n,e.style.transition=[x.transitions.create("opacity",{duration:i,delay:r}),x.transitions.create("transform",{duration:Fr?i:.666*i,delay:r,easing:o})].join(","),l&&l(e,t)})),T=A(c),E=A(p),I=A((e=>{const{duration:t,delay:n,easing:r}=Rr({style:f,timeout:m,easing:a},{mode:"exit"});let o;"auto"===m?(o=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=o):o=t,e.style.transition=[x.transitions.create("opacity",{duration:o,delay:n}),x.transitions.create("transform",{duration:Fr?o:.666*o,delay:Fr?n:n||.333*o,easing:r})].join(","),e.style.opacity=0,e.style.transform=Pr(.75),d&&d(e)})),_=A(h);return r.useEffect((()=>()=>{clearTimeout(v.current)}),[]),(0,_e.jsx)(g,(0,Se.A)({appear:o,in:s,nodeRef:w,onEnter:C,onEntered:T,onEntering:S,onExit:I,onExited:_,onExiting:E,addEndListener:e=>{"auto"===m&&(v.current=setTimeout(e,b.current||0)),n&&n(w.current,e)},timeout:"auto"===m?null:m},y,{children:(e,t)=>r.cloneElement(i,(0,Se.A)({style:(0,Se.A)({opacity:0,transform:Pr(.75),visibility:"exited"!==e||s?void 0:"hidden"},Mr[e],f,i.props.style),ref:k},t))}))}));Or.muiSupportAuto=!0;const Lr=Or;var zr=n(3462),Br=n(1668),Ur=n(1782),Wr=n(2456),Vr=n(4440),qr=n(6564);const Hr=r.forwardRef((function(e,t){const{children:n,container:o,disablePortal:i=!1}=e,[a,s]=r.useState(null),l=(0,zr.A)(r.isValidElement(n)?n.ref:null,t);if((0,Vr.A)((()=>{i||s(function(e){return"function"===typeof e?e():e}(o)||document.body)}),[o,i]),(0,Vr.A)((()=>{if(a&&!i)return(0,qr.A)(t,a),()=>{(0,qr.A)(t,null)}}),[t,a,i]),i){if(r.isValidElement(n)){const e={ref:l};return r.cloneElement(n,e)}return(0,_e.jsx)(r.Fragment,{children:n})}return(0,_e.jsx)(r.Fragment,{children:a?xr.createPortal(n,a):a})}));var Gr=n(3940);function Kr(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Xr(e){return parseInt((0,Gr.A)(e).getComputedStyle(e).paddingRight,10)||0}function Yr(e,t,n,r,o){const i=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===i.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Kr(e,o)}))}function Qr(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function $r(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,Br.A)(e);return t.body===e?(0,Gr.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=cr((0,Br.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Xr(r)+e,"px");const t=(0,Br.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Xr(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,Br.A)(r).body;else{const t=r.parentElement,n=(0,Gr.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const Jr=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Zr(e){const t=[],n=[];return Array.from(e.querySelectorAll(Jr)).forEach(((e,r)=>{const o=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==o&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===o?t.push(e):n.push({documentOrder:r,tabIndex:o,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function eo(){return!0}const to=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:i=!1,getTabbable:a=Zr,isEnabled:s=eo,open:l}=e,c=r.useRef(!1),u=r.useRef(null),d=r.useRef(null),h=r.useRef(null),p=r.useRef(null),f=r.useRef(!1),m=r.useRef(null),g=(0,zr.A)(t.ref,m),y=r.useRef(null);r.useEffect((()=>{l&&m.current&&(f.current=!n)}),[n,l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,Br.A)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,Br.A)(m.current),t=t=>{const{current:n}=m;if(null!==n)if(e.hasFocus()&&!o&&s()&&!c.current){if(!n.contains(e.activeElement)){if(t&&p.current!==t.target||e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let o=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(o=a(m.current)),o.length>0){var r,i;const e=Boolean((null==(r=y.current)?void 0:r.shiftKey)&&"Tab"===(null==(i=y.current)?void 0:i.key)),t=o[0],n=o[o.length-1];"string"!==typeof t&&"string"!==typeof n&&(e?n.focus():t.focus())}else n.focus()}}else c.current=!1},n=t=>{y.current=t,!o&&s()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&t(null)}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}),[n,o,i,s,l,a]);const v=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:u,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,_e.jsx)("div",{tabIndex:l?0:-1,onFocus:v,ref:d,"data-testid":"sentinelEnd"})]})};function no(e){return(0,At.Ay)("MuiModal",e)}(0,kt.A)("MuiModal",["root","hidden","backdrop"]);function ro(e){return"string"===typeof e}function oo(e,t,n){return void 0===e||ro(e)?t:(0,Se.A)({},t,{ownerState:(0,Se.A)({},t.ownerState,n)})}function io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}function ao(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}function so(e,t){return"function"===typeof e?e(t):e}const lo=["elementType","externalSlotProps","ownerState"];function co(e){var t;const{elementType:n,externalSlotProps:r,ownerState:o}=e,i=(0,Ce.A)(e,lo),a=so(r,o),{props:s,internalRef:l}=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:o,className:i}=e;if(!t){const e=(0,vt.A)(null==o?void 0:o.className,null==r?void 0:r.className,i,null==n?void 0:n.className),t=(0,Se.A)({},null==n?void 0:n.style,null==o?void 0:o.style,null==r?void 0:r.style),a=(0,Se.A)({},n,o,r);return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=io((0,Se.A)({},o,r)),s=ao(r),l=ao(o),c=t(a),u=(0,vt.A)(null==c?void 0:c.className,null==n?void 0:n.className,i,null==o?void 0:o.className,null==r?void 0:r.className),d=(0,Se.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==o?void 0:o.style,null==r?void 0:r.style),h=(0,Se.A)({},c,n,l,s);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}((0,Se.A)({},i,{externalSlotProps:a})),c=(0,zr.A)(l,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref);return oo(n,(0,Se.A)({},s,{ref:c}),o)}const uo={disableDefaultClasses:!1},ho=r.createContext(uo);function po(e){const{disableDefaultClasses:t}=r.useContext(ho);return n=>t?"":e(n)}const fo=["children","closeAfterTransition","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];const mo=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Kr(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Yr(t,e.mount,e.modalRef,r,!0);const o=Qr(this.containers,(e=>e.container===t));return-1!==o?(this.containers[o].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=Qr(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=$r(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=Qr(this.containers,(t=>-1!==t.modals.indexOf(e))),o=this.containers[r];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),0===o.modals.length)o.restore&&o.restore(),e.modalRef&&Kr(e.modalRef,t),Yr(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=o.modals[o.modals.length-1];e.modalRef&&Kr(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},go=r.forwardRef((function(e,t){var n,o;const{children:i,closeAfterTransition:a=!1,container:s,disableAutoFocus:l=!1,disableEnforceFocus:c=!1,disableEscapeKeyDown:u=!1,disablePortal:d=!1,disableRestoreFocus:h=!1,disableScrollLock:p=!1,hideBackdrop:f=!1,keepMounted:m=!1,manager:g=mo,onBackdropClick:y,onClose:v,onKeyDown:b,open:x,onTransitionEnter:w,onTransitionExited:k,slotProps:A={},slots:S={}}=e,C=(0,Ce.A)(e,fo),T=g,[E,I]=r.useState(!x),_=r.useRef({}),j=r.useRef(null),N=r.useRef(null),R=(0,zr.A)(N,t),D=function(e){return!!e&&e.props.hasOwnProperty("in")}(i),P=null==(n=e["aria-hidden"])||n,M=()=>(_.current.modalRef=N.current,_.current.mountNode=j.current,_.current),F=()=>{T.mount(M(),{disableScrollLock:p}),N.current&&(N.current.scrollTop=0)},O=(0,Ur.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(s)||(0,Br.A)(j.current).body;T.add(M(),e),N.current&&F()})),L=r.useCallback((()=>T.isTopModal(M())),[T]),z=(0,Ur.A)((e=>{j.current=e,e&&N.current&&(x&&L()?F():Kr(N.current,P))})),B=r.useCallback((()=>{T.remove(M(),P)}),[T,P]);r.useEffect((()=>()=>{B()}),[B]),r.useEffect((()=>{x?O():D&&a||B()}),[x,B,D,a,O]);const U=(0,Se.A)({},e,{closeAfterTransition:a,disableAutoFocus:l,disableEnforceFocus:c,disableEscapeKeyDown:u,disablePortal:d,disableRestoreFocus:h,disableScrollLock:p,exited:E,hideBackdrop:f,keepMounted:m}),W=(e=>{const{open:t,exited:n}=e,r={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,bt.A)(r,po(no))})(U),V=()=>{I(!1),w&&w()},q=()=>{I(!0),k&&k(),a&&B()},H={};void 0===i.props.tabIndex&&(H.tabIndex="-1"),D&&(H.onEnter=(0,Wr.A)(V,i.props.onEnter),H.onExited=(0,Wr.A)(q,i.props.onExited));const G=null!=(o=S.root)?o:"div",K=co({elementType:G,externalSlotProps:A.root,externalForwardedProps:C,additionalProps:{ref:R,role:"presentation",onKeyDown:e=>{b&&b(e),"Escape"===e.key&&L()&&(u||(e.stopPropagation(),v&&v(e,"escapeKeyDown")))}},className:W.root,ownerState:U}),X=S.backdrop,Y=co({elementType:X,externalSlotProps:A.backdrop,additionalProps:{"aria-hidden":!0,onClick:e=>{e.target===e.currentTarget&&(y&&y(e),v&&v(e,"backdropClick"))},open:x},className:W.backdrop,ownerState:U});return m||x||D&&!E?(0,_e.jsx)(Hr,{ref:z,container:s,disablePortal:d,children:(0,_e.jsxs)(G,(0,Se.A)({},K,{children:[!f&&X?(0,_e.jsx)(X,(0,Se.A)({},Y)):null,(0,_e.jsx)(to,{disableEnforceFocus:c,disableAutoFocus:l,disableRestoreFocus:h,isEnabled:L,open:x,children:r.cloneElement(i,H)})]}))}):null})),yo=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],vo={entering:{opacity:1},entered:{opacity:1}},bo=r.forwardRef((function(e,t){const n=jr(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:y=o,TransitionComponent:v=_r}=e,b=(0,Ce.A)(e,yo),x=r.useRef(null),w=(0,vn.A)(x,s.ref,t),k=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},A=k(h),S=k(((e,t)=>{Nr(e);const r=Rr({style:g,timeout:y,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),C=k(d),T=k(m),E=k((e=>{const t=Rr({style:g,timeout:y,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),I=k(f);return(0,_e.jsx)(v,(0,Se.A)({appear:a,in:c,nodeRef:x,onEnter:S,onEntered:C,onEntering:A,onExit:E,onExited:I,onExiting:T,addEndListener:e=>{i&&i(x.current,e)},timeout:y},b,{children:(e,t)=>r.cloneElement(s,(0,Se.A)({style:(0,Se.A)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},vo[e],g,s.props.style),ref:w},t))}))}));function xo(e){return(0,At.Ay)("MuiBackdrop",e)}(0,kt.A)("MuiBackdrop",["root","invisible"]);const wo=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],ko=(0,wt.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Ao=r.forwardRef((function(e,t){var n,r,o;const i=(0,qe.A)({props:e,name:"MuiBackdrop"}),{children:a,className:s,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:p={},slots:f={},TransitionComponent:m=bo,transitionDuration:g}=i,y=(0,Ce.A)(i,wo),v=(0,Se.A)({},i,{component:l,invisible:d}),b=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,bt.A)(r,xo,t)})(v),x=null!=(n=p.root)?n:u.root;return(0,_e.jsx)(m,(0,Se.A)({in:h,timeout:g},y,{children:(0,_e.jsx)(ko,(0,Se.A)({"aria-hidden":!0},x,{as:null!=(r=null!=(o=f.root)?o:c.Root)?r:l,className:(0,vt.A)(b.root,s,null==x?void 0:x.className),ownerState:(0,Se.A)({},v,null==x?void 0:x.ownerState),classes:b,ref:t,children:a}))}))})),So=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","slotProps","slots","theme"],Co=(0,wt.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),To=(0,wt.Ay)(Ao,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Eo=r.forwardRef((function(e,t){var n,o,i,a,s,l;const c=(0,qe.A)({name:"MuiModal",props:e}),{BackdropComponent:u=To,BackdropProps:d,classes:h,className:p,closeAfterTransition:f=!1,children:m,container:g,component:y,components:v={},componentsProps:b={},disableAutoFocus:x=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:k=!1,disablePortal:A=!1,disableRestoreFocus:S=!1,disableScrollLock:C=!1,hideBackdrop:T=!1,keepMounted:E=!1,onBackdropClick:I,onClose:_,open:j,slotProps:N,slots:R,theme:D}=c,P=(0,Ce.A)(c,So),[M,F]=r.useState(!0),O={container:g,closeAfterTransition:f,disableAutoFocus:x,disableEnforceFocus:w,disableEscapeKeyDown:k,disablePortal:A,disableRestoreFocus:S,disableScrollLock:C,hideBackdrop:T,keepMounted:E,onBackdropClick:I,onClose:_,open:j},L=(0,Se.A)({},c,O,{exited:M}),z=null!=(n=null!=(o=null==R?void 0:R.root)?o:v.Root)?n:Co,B=null!=(i=null!=(a=null==R?void 0:R.backdrop)?a:v.Backdrop)?i:u,U=null!=(s=null==N?void 0:N.root)?s:b.root,W=null!=(l=null==N?void 0:N.backdrop)?l:b.backdrop;return(0,_e.jsx)(go,(0,Se.A)({slots:{root:z,backdrop:B},slotProps:{root:()=>(0,Se.A)({},so(U,L),!ro(z)&&{as:y,theme:D},{className:(0,vt.A)(p,null==U?void 0:U.className,null==h?void 0:h.root,!L.open&&L.exited&&(null==h?void 0:h.hidden))}),backdrop:()=>(0,Se.A)({},d,so(W,L),{className:(0,vt.A)(null==W?void 0:W.className,null==h?void 0:h.backdrop)})},onTransitionEnter:()=>F(!1),onTransitionExited:()=>F(!0),ref:t},P,O,{children:m}))}));function Io(e){return(0,At.Ay)("MuiPopover",e)}(0,kt.A)("MuiPopover",["root","paper"]);const _o=["onEntering"],jo=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function No(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Ro(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Do(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function Po(e){return"function"===typeof e?e():e}const Mo=(0,wt.Ay)(Eo,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Fo=(0,wt.Ay)(Gt,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Oo=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:l="anchorEl",children:c,className:u,container:d,elevation:h=8,marginThreshold:p=16,open:f,PaperProps:m={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:y=Lr,transitionDuration:v="auto",TransitionProps:{onEntering:b}={}}=n,x=(0,Ce.A)(n.TransitionProps,_o),w=(0,Ce.A)(n,jo),k=r.useRef(),A=(0,vn.A)(k,m.ref),S=(0,Se.A)({},n,{anchorOrigin:a,anchorReference:l,elevation:h,marginThreshold:p,PaperProps:m,transformOrigin:g,TransitionComponent:y,transitionDuration:v,TransitionProps:x}),C=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"],paper:["paper"]},Io,t)})(S),T=r.useCallback((()=>{if("anchorPosition"===l)return s;const e=Po(i),t=(e&&1===e.nodeType?e:(0,rr.A)(k.current).body).getBoundingClientRect();return{top:t.top+No(t,a.vertical),left:t.left+Ro(t,a.horizontal)}}),[i,a.horizontal,a.vertical,s,l]),E=r.useCallback((e=>({vertical:No(e,g.vertical),horizontal:Ro(e,g.horizontal)})),[g.horizontal,g.vertical]),I=r.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=E(t);if("none"===l)return{top:null,left:null,transformOrigin:Do(n)};const r=T();let o=r.top-n.vertical,a=r.left-n.horizontal;const s=o+t.height,c=a+t.width,u=(0,br.A)(Po(i)),d=u.innerHeight-p,h=u.innerWidth-p;if(o<p){const e=o-p;o-=e,n.vertical+=e}else if(s>d){const e=s-d;o-=e,n.vertical+=e}if(a<p){const e=a-p;a-=e,n.horizontal+=e}else if(c>h){const e=c-h;a-=e,n.horizontal+=e}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(a),"px"),transformOrigin:Do(n)}}),[i,l,T,E,p]),[_,j]=r.useState(f),N=r.useCallback((()=>{const e=k.current;if(!e)return;const t=I(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,j(!0)}),[I]);r.useEffect((()=>{f&&N()})),r.useImperativeHandle(o,(()=>f?{updatePosition:()=>{N()}}:null),[f,N]),r.useEffect((()=>{if(!f)return;const e=(0,vr.A)((()=>{N()})),t=(0,br.A)(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[i,f,N]);let R=v;"auto"!==v||y.muiSupportAuto||(R=void 0);const D=d||(i?(0,rr.A)(Po(i)).body:void 0);return(0,_e.jsx)(Mo,(0,Se.A)({BackdropProps:{invisible:!0},className:(0,vt.A)(C.root,u),container:D,open:f,ref:t,ownerState:S},w,{children:(0,_e.jsx)(y,(0,Se.A)({appear:!0,in:f,onEntering:(e,t)=>{b&&b(e,t),N()},onExited:()=>{j(!1)},timeout:R},x,{children:(0,_e.jsx)(Fo,(0,Se.A)({elevation:h},m,{ref:A,className:(0,vt.A)(C.paper,m.className)},_?void 0:{style:(0,Se.A)({},m.style,{opacity:0})},{ownerState:S,children:c}))}))}))}));function Lo(e){return(0,At.Ay)("MuiMenu",e)}(0,kt.A)("MuiMenu",["root","paper","list"]);const zo=["onEntering"],Bo=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Uo={vertical:"top",horizontal:"right"},Wo={vertical:"top",horizontal:"left"},Vo=(0,wt.Ay)(Oo,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qo=(0,wt.Ay)(Gt,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ho=(0,wt.Ay)(yr,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Go=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:i,disableAutoFocusItem:a=!1,MenuListProps:s={},onClose:l,open:c,PaperProps:u={},PopoverClasses:d,transitionDuration:h="auto",TransitionProps:{onEntering:p}={},variant:f="selectedMenu"}=n,m=(0,Ce.A)(n.TransitionProps,zo),g=(0,Ce.A)(n,Bo),y=jr(),v="rtl"===y.direction,b=(0,Se.A)({},n,{autoFocus:o,disableAutoFocusItem:a,MenuListProps:s,onEntering:p,PaperProps:u,transitionDuration:h,TransitionProps:m,variant:f}),x=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"],paper:["paper"],list:["list"]},Lo,t)})(b),w=o&&!a&&c,k=r.useRef(null);let A=-1;return r.Children.map(i,((e,t)=>{r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===f&&e.props.selected||-1===A)&&(A=t))})),(0,_e.jsx)(Vo,(0,Se.A)({onClose:l,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?Uo:Wo,PaperProps:(0,Se.A)({as:qo},u,{classes:(0,Se.A)({},u.classes,{root:x.paper})}),className:x.root,open:c,ref:t,transitionDuration:h,TransitionProps:(0,Se.A)({onEntering:(e,t)=>{k.current&&k.current.adjustStyleForScrollbar(e,y),p&&p(e,t)}},m),ownerState:b},g,{classes:d,children:(0,_e.jsx)(Ho,(0,Se.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:k,autoFocus:o&&(-1===A||a),autoFocusItem:w,variant:f},s,{className:(0,vt.A)(x.list,s.className),children:i}))}))}));function Ko(e){return(0,At.Ay)("MuiDivider",e)}const Xo=(0,kt.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Yo(e){return(0,At.Ay)("MuiListItemIcon",e)}const Qo=(0,kt.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function $o(e){return(0,At.Ay)("MuiListItemText",e)}const Jo=(0,kt.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Zo(e){return(0,At.Ay)("MuiMenuItem",e)}const ei=(0,kt.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ti=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],ni=(0,wt.Ay)($n,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(ei.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(ei.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(ei.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(ei.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(ei.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(Xo.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(Xo.inset)]:{marginLeft:52},["& .".concat(Jo.root)]:{marginTop:0,marginBottom:0},["& .".concat(Jo.inset)]:{paddingLeft:36},["& .".concat(Qo.root)]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,Se.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(Qo.root," svg")]:{fontSize:"1.25rem"}}))})),ri=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=n,p=(0,Ce.A)(n,ti),f=r.useContext(or),m=r.useMemo((()=>({dense:a||f.dense||!1,disableGutters:l})),[f.dense,a,l]),g=r.useRef(null);(0,dr.A)((()=>{o&&g.current&&g.current.focus()}),[o]);const y=(0,Se.A)({},n,{dense:m.dense,divider:s,disableGutters:l}),v=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:i,classes:a}=e,s={root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",i&&"selected"]},l=(0,bt.A)(s,Zo,a);return(0,Se.A)({},a,l)})(n),b=(0,vn.A)(g,t);let x;return n.disabled||(x=void 0!==d?d:-1),(0,_e.jsx)(or.Provider,{value:m,children:(0,_e.jsx)(ni,(0,Se.A)({ref:b,role:u,tabIndex:x,component:i,focusVisibleClassName:(0,vt.A)(v.focusVisible,c),className:(0,vt.A)(v.root,h)},p,{ownerState:y,classes:v}))})}));var oi=n(3030);function ii(e){return(0,At.Ay)("MuiButton",e)}const ai=(0,kt.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const si=r.createContext({}),li=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ci=e=>(0,Se.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),ui=(0,wt.Ay)($n,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,xt.A)(n.color))],t["size".concat((0,xt.A)(n.size))],t["".concat(n.variant,"Size").concat((0,xt.A)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,o;const i="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],a="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,Se.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,Se.A)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:a,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,Se.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(ai.focusVisible)]:(0,Se.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(ai.disabled)]:(0,Se.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Ut.X4)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(o=t.palette).getContrastText)?void 0:r.call(o,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(ai.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(ai.disabled)]:{boxShadow:"none"}}})),di=(0,wt.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat((0,xt.A)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},ci(t))})),hi=(0,wt.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat((0,xt.A)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},ci(t))})),pi=r.forwardRef((function(e,t){const n=r.useContext(si),o=(0,oi.A)(n,e),i=(0,qe.A)({props:o,name:"MuiButton"}),{children:a,color:s="primary",component:l="button",className:c,disabled:u=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:f,fullWidth:m=!1,size:g="medium",startIcon:y,type:v,variant:b="text"}=i,x=(0,Ce.A)(i,li),w=(0,Se.A)({},i,{color:s,component:l,disabled:u,disableElevation:d,disableFocusRipple:h,fullWidth:m,size:g,type:v,variant:b}),k=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:i,classes:a}=e,s={root:["root",i,"".concat(i).concat((0,xt.A)(t)),"size".concat((0,xt.A)(o)),"".concat(i,"Size").concat((0,xt.A)(o)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,xt.A)(o))],endIcon:["endIcon","iconSize".concat((0,xt.A)(o))]},l=(0,bt.A)(s,ii,a);return(0,Se.A)({},a,l)})(w),A=y&&(0,_e.jsx)(di,{className:k.startIcon,ownerState:w,children:y}),S=p&&(0,_e.jsx)(hi,{className:k.endIcon,ownerState:w,children:p});return(0,_e.jsxs)(ui,(0,Se.A)({ownerState:w,className:(0,vt.A)(n.className,k.root,c),component:l,disabled:u,focusRipple:!h,focusVisibleClassName:(0,vt.A)(k.focusVisible,f),ref:t,type:v},x,{classes:k,children:[A,a,S]}))}));function fi(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mi(e){return e instanceof fi(e).Element||e instanceof Element}function gi(e){return e instanceof fi(e).HTMLElement||e instanceof HTMLElement}function yi(e){return"undefined"!==typeof ShadowRoot&&(e instanceof fi(e).ShadowRoot||e instanceof ShadowRoot)}var vi=Math.max,bi=Math.min,xi=Math.round;function wi(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function ki(){return!/^((?!chrome|android).)*safari/i.test(wi())}function Ai(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&gi(e)&&(o=e.offsetWidth>0&&xi(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&xi(r.height)/e.offsetHeight||1);var a=(mi(e)?fi(e):window).visualViewport,s=!ki()&&n,l=(r.left+(s&&a?a.offsetLeft:0))/o,c=(r.top+(s&&a?a.offsetTop:0))/i,u=r.width/o,d=r.height/i;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function Si(e){var t=fi(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ci(e){return e?(e.nodeName||"").toLowerCase():null}function Ti(e){return((mi(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ei(e){return Ai(Ti(e)).left+Si(e).scrollLeft}function Ii(e){return fi(e).getComputedStyle(e)}function _i(e){var t=Ii(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function ji(e,t,n){void 0===n&&(n=!1);var r=gi(t),o=gi(t)&&function(e){var t=e.getBoundingClientRect(),n=xi(t.width)/e.offsetWidth||1,r=xi(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),i=Ti(t),a=Ai(e,o,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Ci(t)||_i(i))&&(s=function(e){return e!==fi(e)&&gi(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:Si(e);var t}(t)),gi(t)?((l=Ai(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=Ei(i))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Ni(e){var t=Ai(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Ri(e){return"html"===Ci(e)?e:e.assignedSlot||e.parentNode||(yi(e)?e.host:null)||Ti(e)}function Di(e){return["html","body","#document"].indexOf(Ci(e))>=0?e.ownerDocument.body:gi(e)&&_i(e)?e:Di(Ri(e))}function Pi(e,t){var n;void 0===t&&(t=[]);var r=Di(e),o=r===(null==(n=e.ownerDocument)?void 0:n.body),i=fi(r),a=o?[i].concat(i.visualViewport||[],_i(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(Pi(Ri(a)))}function Mi(e){return["table","td","th"].indexOf(Ci(e))>=0}function Fi(e){return gi(e)&&"fixed"!==Ii(e).position?e.offsetParent:null}function Oi(e){for(var t=fi(e),n=Fi(e);n&&Mi(n)&&"static"===Ii(n).position;)n=Fi(n);return n&&("html"===Ci(n)||"body"===Ci(n)&&"static"===Ii(n).position)?t:n||function(e){var t=/firefox/i.test(wi());if(/Trident/i.test(wi())&&gi(e)&&"fixed"===Ii(e).position)return null;var n=Ri(e);for(yi(n)&&(n=n.host);gi(n)&&["html","body"].indexOf(Ci(n))<0;){var r=Ii(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var Li="top",zi="bottom",Bi="right",Ui="left",Wi="auto",Vi=[Li,zi,Bi,Ui],qi="start",Hi="end",Gi="viewport",Ki="popper",Xi=Vi.reduce((function(e,t){return e.concat([t+"-"+qi,t+"-"+Hi])}),[]),Yi=[].concat(Vi,[Wi]).reduce((function(e,t){return e.concat([t,t+"-"+qi,t+"-"+Hi])}),[]),Qi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function $i(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function Ji(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Zi={placement:"bottom",modifiers:[],strategy:"absolute"};function ea(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function ta(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,i=void 0===o?Zi:o;return function(e,t,n){void 0===n&&(n=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zi,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:o,setOptions:function(n){var s="function"===typeof n?n(o.options):n;c(),o.options=Object.assign({},i,o.options,s),o.scrollParents={reference:mi(e)?Pi(e):e.contextElement?Pi(e.contextElement):[],popper:Pi(t)};var u=function(e){var t=$i(e);return Qi.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,o.options.modifiers)));return o.orderedModifiers=u.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"===typeof i){var s=i({state:o,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=o.elements,t=e.reference,n=e.popper;if(ea(t,n)){o.rects={reference:ji(t,Oi(n),"fixed"===o.options.strategy),popper:Ni(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var i=o.orderedModifiers[r],a=i.fn,c=i.options,u=void 0===c?{}:c,d=i.name;"function"===typeof a&&(o=a({state:o,options:u,name:d,instance:l})||o)}else o.reset=!1,r=-1}}},update:Ji((function(){return new Promise((function(e){l.forceUpdate(),e(o)}))})),destroy:function(){c(),s=!0}};if(!ea(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var na={passive:!0};function ra(e){return e.split("-")[0]}function oa(e){return e.split("-")[1]}function ia(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function aa(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?ra(o):null,a=o?oa(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(i){case Li:t={x:s,y:n.y-r.height};break;case zi:t={x:s,y:n.y+n.height};break;case Bi:t={x:n.x+n.width,y:l};break;case Ui:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=i?ia(i):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case qi:t[c]=t[c]-(n[u]/2-r[u]/2);break;case Hi:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var sa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function la(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,p=void 0===h?0:h,f=a.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=Ui,x=Li,w=window;if(c){var k=Oi(n),A="clientHeight",S="clientWidth";if(k===fi(n)&&"static"!==Ii(k=Ti(n)).position&&"absolute"===s&&(A="scrollHeight",S="scrollWidth"),o===Li||(o===Ui||o===Bi)&&i===Hi)x=zi,m-=(d&&k===w&&w.visualViewport?w.visualViewport.height:k[A])-r.height,m*=l?1:-1;if(o===Ui||(o===Li||o===zi)&&i===Hi)b=Bi,p-=(d&&k===w&&w.visualViewport?w.visualViewport.width:k[S])-r.width,p*=l?1:-1}var C,T=Object.assign({position:s},c&&sa),E=!0===u?function(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:xi(n*o)/o||0,y:xi(r*o)/o||0}}({x:p,y:m},fi(n)):{x:p,y:m};return p=E.x,m=E.y,l?Object.assign({},T,((C={})[x]=v?"0":"",C[b]=y?"0":"",C.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},T,((t={})[x]=v?m+"px":"",t[b]=y?p+"px":"",t.transform="",t))}var ca={left:"right",right:"left",bottom:"top",top:"bottom"};function ua(e){return e.replace(/left|right|bottom|top/g,(function(e){return ca[e]}))}var da={start:"end",end:"start"};function ha(e){return e.replace(/start|end/g,(function(e){return da[e]}))}function pa(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&yi(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fa(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ma(e,t,n){return t===Gi?fa(function(e,t){var n=fi(e),r=Ti(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var c=ki();(c||!c&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+Ei(e),y:l}}(e,n)):mi(t)?function(e,t){var n=Ai(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):fa(function(e){var t,n=Ti(e),r=Si(e),o=null==(t=e.ownerDocument)?void 0:t.body,i=vi(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=vi(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Ei(e),l=-r.scrollTop;return"rtl"===Ii(o||n).direction&&(s+=vi(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}(Ti(e)))}function ga(e,t,n,r){var o="clippingParents"===t?function(e){var t=Pi(Ri(e)),n=["absolute","fixed"].indexOf(Ii(e).position)>=0&&gi(e)?Oi(e):e;return mi(n)?t.filter((function(e){return mi(e)&&pa(e,n)&&"body"!==Ci(e)})):[]}(e):[].concat(t),i=[].concat(o,[n]),a=i[0],s=i.reduce((function(t,n){var o=ma(e,n,r);return t.top=vi(o.top,t.top),t.right=bi(o.right,t.right),t.bottom=bi(o.bottom,t.bottom),t.left=vi(o.left,t.left),t}),ma(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ya(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function va(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ba(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.strategy,a=void 0===i?e.strategy:i,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?Gi:c,d=n.elementContext,h=void 0===d?Ki:d,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=ya("number"!==typeof g?g:va(g,Vi)),v=h===Ki?"reference":Ki,b=e.rects.popper,x=e.elements[f?v:h],w=ga(mi(x)?x:x.contextElement||Ti(e.elements.popper),l,u,a),k=Ai(e.elements.reference),A=aa({reference:k,element:b,strategy:"absolute",placement:o}),S=fa(Object.assign({},b,A)),C=h===Ki?S:k,T={top:w.top-C.top+y.top,bottom:C.bottom-w.bottom+y.bottom,left:w.left-C.left+y.left,right:C.right-w.right+y.right},E=e.modifiersData.offset;if(h===Ki&&E){var I=E[o];Object.keys(T).forEach((function(e){var t=[Bi,zi].indexOf(e)>=0?1:-1,n=[Li,zi].indexOf(e)>=0?"y":"x";T[e]+=I[n]*t}))}return T}function xa(e,t,n){return vi(e,bi(t,n))}function wa(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ka(e){return[Li,Bi,zi,Ui].some((function(t){return e[t]>=0}))}var Aa=ta({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,l=fi(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",n.update,na)})),s&&l.addEventListener("resize",n.update,na),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",n.update,na)})),s&&l.removeEventListener("resize",n.update,na)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=aa({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,l=void 0===s||s,c={placement:ra(t.placement),variation:oa(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,la(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,la(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];gi(o)&&Ci(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});gi(r)&&Ci(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=Yi.reduce((function(e,n){return e[n]=function(e,t,n){var r=ra(e),o=[Ui,Li].indexOf(r)>=0?-1:1,i="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[Ui,Bi].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,i),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,y=ra(g),v=l||(y===g||!f?[ua(g)]:function(e){if(ra(e)===Wi)return[];var t=ua(e);return[ha(e),t,ha(t)]}(g)),b=[g].concat(v).reduce((function(e,n){return e.concat(ra(n)===Wi?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Yi:l,u=oa(r),d=u?s?Xi:Xi.filter((function(e){return oa(e)===u})):Vi,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=ba(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[ra(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=t.rects.reference,w=t.rects.popper,k=new Map,A=!0,S=b[0],C=0;C<b.length;C++){var T=b[C],E=ra(T),I=oa(T)===qi,_=[Li,zi].indexOf(E)>=0,j=_?"width":"height",N=ba(t,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=_?I?Bi:Ui:I?zi:Li;x[j]>w[j]&&(R=ua(R));var D=ua(R),P=[];if(i&&P.push(N[E]<=0),s&&P.push(N[R]<=0,N[D]<=0),P.every((function(e){return e}))){S=T,A=!1;break}k.set(T,P)}if(A)for(var M=function(e){var t=b.find((function(t){var n=k.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},F=f?3:1;F>0;F--){if("break"===M(F))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,f=n.tetherOffset,m=void 0===f?0:f,g=ba(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=ra(t.placement),v=oa(t.placement),b=!v,x=ia(y),w="x"===x?"y":"x",k=t.modifiersData.popperOffsets,A=t.rects.reference,S=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,T="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(k){if(i){var _,j="y"===x?Li:Ui,N="y"===x?zi:Bi,R="y"===x?"height":"width",D=k[x],P=D+g[j],M=D-g[N],F=p?-S[R]/2:0,O=v===qi?A[R]:S[R],L=v===qi?-S[R]:-A[R],z=t.elements.arrow,B=p&&z?Ni(z):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=U[j],V=U[N],q=xa(0,A[R],B[R]),H=b?A[R]/2-F-q-W-T.mainAxis:O-q-W-T.mainAxis,G=b?-A[R]/2+F+q+V+T.mainAxis:L+q+V+T.mainAxis,K=t.elements.arrow&&Oi(t.elements.arrow),X=K?"y"===x?K.clientTop||0:K.clientLeft||0:0,Y=null!=(_=null==E?void 0:E[x])?_:0,Q=D+G-Y,$=xa(p?bi(P,D+H-Y-X):P,D,p?vi(M,Q):M);k[x]=$,I[x]=$-D}if(s){var J,Z="x"===x?Li:Ui,ee="x"===x?zi:Bi,te=k[w],ne="y"===w?"height":"width",re=te+g[Z],oe=te-g[ee],ie=-1!==[Li,Ui].indexOf(y),ae=null!=(J=null==E?void 0:E[w])?J:0,se=ie?re:te-A[ne]-S[ne]-ae+T.altAxis,le=ie?te+A[ne]+S[ne]-ae-T.altAxis:oe,ce=p&&ie?function(e,t,n){var r=xa(e,t,n);return r>n?n:r}(se,te,le):xa(p?se:re,te,p?le:oe);k[w]=ce,I[w]=ce-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=ra(n.placement),l=ia(s),c=[Ui,Bi].indexOf(s)>=0?"height":"width";if(i&&a){var u=function(e,t){return ya("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:va(e,Vi))}(o.padding,n),d=Ni(i),h="y"===l?Li:Ui,p="y"===l?zi:Bi,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=Oi(i),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,b=u[h],x=y-d[c]-u[p],w=y/2-d[c]/2+v,k=xa(b,w,x),A=l;n.modifiersData[r]=((t={})[A]=k,t.centerOffset=k-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&pa(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=ba(t,{elementContext:"reference"}),s=ba(t,{altBoundary:!0}),l=wa(a,r),c=wa(s,o,i),u=ka(l),d=ka(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]});function Sa(e){return(0,At.Ay)("MuiPopper",e)}(0,kt.A)("MuiPopper",["root"]);const Ca=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Ta=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Ea(e){return"function"===typeof e?e():e}function Ia(e){return void 0!==e.nodeType}const _a={},ja=r.forwardRef((function(e,t){var n;const{anchorEl:o,children:i,direction:a,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:f={},TransitionProps:m}=e,g=(0,Ce.A)(e,Ca),y=r.useRef(null),v=(0,zr.A)(y,t),b=r.useRef(null),x=(0,zr.A)(b,h),w=r.useRef(x);(0,Vr.A)((()=>{w.current=x}),[x]),r.useImperativeHandle(h,(()=>b.current),[]);const k=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(u,a),[A,S]=r.useState(k),[C,T]=r.useState(Ea(o));r.useEffect((()=>{b.current&&b.current.forceUpdate()})),r.useEffect((()=>{o&&T(Ea(o))}),[o]),(0,Vr.A)((()=>{if(!C||!c)return;let e=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:t}=e;S(t.placement)}}];null!=l&&(e=e.concat(l)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const t=Aa(C,y.current,(0,Se.A)({placement:k},d,{modifiers:e}));return w.current(t),()=>{t.destroy(),w.current(null)}}),[C,s,l,c,d,k]);const E={placement:A};null!==m&&(E.TransitionProps=m);const I=(0,bt.A)({root:["root"]},po(Sa)),_=null!=(n=f.root)?n:"div",j=co({elementType:_,externalSlotProps:p.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:v},ownerState:e,className:I.root});return(0,_e.jsx)(_,(0,Se.A)({},j,{children:"function"===typeof i?i(E):i}))})),Na=r.forwardRef((function(e,t){const{anchorEl:n,children:o,container:i,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=_a,popperRef:p,style:f,transition:m=!1,slotProps:g={},slots:y={}}=e,v=(0,Ce.A)(e,Ta),[b,x]=r.useState(!0);if(!l&&!u&&(!m||b))return null;let w;if(i)w=i;else if(n){const e=Ea(n);w=e&&Ia(e)?(0,Br.A)(e).body:(0,Br.A)(null).body}const k=u||!l||m&&!b?void 0:"none",A=m?{in:u,onEnter:()=>{x(!1)},onExited:()=>{x(!0)}}:void 0;return(0,_e.jsx)(Hr,{disablePortal:s,container:w,children:(0,_e.jsx)(ja,(0,Se.A)({anchorEl:n,direction:a,disablePortal:s,modifiers:c,ref:t,open:m?!b:u,placement:d,popperOptions:h,popperRef:p,slotProps:g,slots:y},v,{style:(0,Se.A)({position:"fixed",top:0,left:0,display:k},f),TransitionProps:A,children:o}))})})),Ra=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Da=(0,wt.Ay)(Na,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Pa=r.forwardRef((function(e,t){var n;const r=(0,Re.A)(),o=(0,qe.A)({props:e,name:"MuiPopper"}),{anchorEl:i,component:a,components:s,componentsProps:l,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:y,slots:v,slotProps:b}=o,x=(0,Ce.A)(o,Ra),w=null!=(n=null==v?void 0:v.root)?n:null==s?void 0:s.Root,k=(0,Se.A)({anchorEl:i,container:c,disablePortal:u,keepMounted:d,modifiers:h,open:p,placement:f,popperOptions:m,popperRef:g,transition:y},x);return(0,_e.jsx)(Da,(0,Se.A)({as:a,direction:null==r?void 0:r.direction,slots:{root:w},slotProps:null!=b?b:l},k,{ref:t}))}));var Ma=n(5879),Fa=n(5420);function Oa(e){return(0,At.Ay)("MuiTooltip",e)}const La=(0,kt.A)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),za=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];const Ba=(0,wt.Ay)(Pa,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})((e=>{let{theme:t,ownerState:n,open:r}=e;return(0,Se.A)({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!n.disableInteractive&&{pointerEvents:"auto"},!r&&{pointerEvents:"none"},n.arrow&&{['&[data-popper-placement*="bottom"] .'.concat(La.arrow)]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},['&[data-popper-placement*="top"] .'.concat(La.arrow)]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},['&[data-popper-placement*="right"] .'.concat(La.arrow)]:(0,Se.A)({},n.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),['&[data-popper-placement*="left"] .'.concat(La.arrow)]:(0,Se.A)({},n.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})})),Ua=(0,wt.Ay)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t["tooltipPlacement".concat((0,xt.A)(n.placement.split("-")[0]))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:(0,Ut.X4)(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},n.arrow&&{position:"relative",margin:0},n.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:"".concat((r=16/14,Math.round(1e5*r)/1e5),"em"),fontWeight:t.typography.fontWeightRegular},{[".".concat(La.popper,'[data-popper-placement*="left"] &')]:(0,Se.A)({transformOrigin:"right center"},n.isRtl?(0,Se.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"}):(0,Se.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"})),[".".concat(La.popper,'[data-popper-placement*="right"] &')]:(0,Se.A)({transformOrigin:"left center"},n.isRtl?(0,Se.A)({marginRight:"14px"},n.touch&&{marginRight:"24px"}):(0,Se.A)({marginLeft:"14px"},n.touch&&{marginLeft:"24px"})),[".".concat(La.popper,'[data-popper-placement*="top"] &')]:(0,Se.A)({transformOrigin:"center bottom",marginBottom:"14px"},n.touch&&{marginBottom:"24px"}),[".".concat(La.popper,'[data-popper-placement*="bottom"] &')]:(0,Se.A)({transformOrigin:"center top",marginTop:"14px"},n.touch&&{marginTop:"24px"})});var r})),Wa=(0,wt.Ay)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})((e=>{let{theme:t}=e;return{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:(0,Ut.X4)(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}));let Va=!1,qa=null,Ha={x:0,y:0};function Ga(e,t){return n=>{t&&t(n),e(n)}}const Ka=r.forwardRef((function(e,t){var n,o,i,a,s,l,c,u,d,h,p,f,m,g,y,v,b,x,w;const k=(0,qe.A)({props:e,name:"MuiTooltip"}),{arrow:A=!1,children:S,components:C={},componentsProps:T={},describeChild:E=!1,disableFocusListener:I=!1,disableHoverListener:_=!1,disableInteractive:j=!1,disableTouchListener:N=!1,enterDelay:R=100,enterNextDelay:D=0,enterTouchDelay:P=700,followCursor:M=!1,id:F,leaveDelay:O=0,leaveTouchDelay:L=1500,onClose:z,onOpen:B,open:U,placement:W="bottom",PopperComponent:V,PopperProps:q={},slotProps:H={},slots:G={},title:K,TransitionComponent:X=Lr,TransitionProps:Y}=k,Q=(0,Ce.A)(k,za),$=jr(),J="rtl"===$.direction,[Z,ee]=r.useState(),[te,ne]=r.useState(null),re=r.useRef(!1),oe=j||M,ie=r.useRef(),ae=r.useRef(),se=r.useRef(),le=r.useRef(),[ce,ue]=(0,Fa.A)({controlled:U,default:!1,name:"Tooltip",state:"open"});let de=ce;const he=(0,Ma.A)(F),pe=r.useRef(),fe=r.useCallback((()=>{void 0!==pe.current&&(document.body.style.WebkitUserSelect=pe.current,pe.current=void 0),clearTimeout(le.current)}),[]);r.useEffect((()=>()=>{clearTimeout(ie.current),clearTimeout(ae.current),clearTimeout(se.current),fe()}),[fe]);const me=e=>{clearTimeout(qa),Va=!0,ue(!0),B&&!de&&B(e)},ge=(0,bn.A)((e=>{clearTimeout(qa),qa=setTimeout((()=>{Va=!1}),800+O),ue(!1),z&&de&&z(e),clearTimeout(ie.current),ie.current=setTimeout((()=>{re.current=!1}),$.transitions.duration.shortest)})),ye=e=>{re.current&&"touchstart"!==e.type||(Z&&Z.removeAttribute("title"),clearTimeout(ae.current),clearTimeout(se.current),R||Va&&D?ae.current=setTimeout((()=>{me(e)}),Va?D:R):me(e))},ve=e=>{clearTimeout(ae.current),clearTimeout(se.current),se.current=setTimeout((()=>{ge(e)}),O)},{isFocusVisibleRef:be,onBlur:xe,onFocus:we,ref:ke}=(0,xn.A)(),[,Ae]=r.useState(!1),Te=e=>{xe(e),!1===be.current&&(Ae(!1),ve(e))},Ee=e=>{Z||ee(e.currentTarget),we(e),!0===be.current&&(Ae(!0),ye(e))},Ie=e=>{re.current=!0;const t=S.props;t.onTouchStart&&t.onTouchStart(e)},je=ye,Ne=ve,Re=e=>{Ie(e),clearTimeout(se.current),clearTimeout(ie.current),fe(),pe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",le.current=setTimeout((()=>{document.body.style.WebkitUserSelect=pe.current,ye(e)}),P)},De=e=>{S.props.onTouchEnd&&S.props.onTouchEnd(e),fe(),clearTimeout(se.current),se.current=setTimeout((()=>{ge(e)}),L)};r.useEffect((()=>{if(de)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||ge(e)}}),[ge,de]);const Pe=(0,vn.A)(S.ref,ke,ee,t);K||0===K||(de=!1);const Me=r.useRef(),Fe={},Oe="string"===typeof K;E?(Fe.title=de||!Oe||_?null:K,Fe["aria-describedby"]=de?he:null):(Fe["aria-label"]=Oe?K:null,Fe["aria-labelledby"]=de&&!Oe?he:null);const Le=(0,Se.A)({},Fe,Q,S.props,{className:(0,vt.A)(Q.className,S.props.className),onTouchStart:Ie,ref:Pe},M?{onMouseMove:e=>{const t=S.props;t.onMouseMove&&t.onMouseMove(e),Ha={x:e.clientX,y:e.clientY},Me.current&&Me.current.update()}}:{});const ze={};N||(Le.onTouchStart=Re,Le.onTouchEnd=De),_||(Le.onMouseOver=Ga(je,Le.onMouseOver),Le.onMouseLeave=Ga(Ne,Le.onMouseLeave),oe||(ze.onMouseOver=je,ze.onMouseLeave=Ne)),I||(Le.onFocus=Ga(Ee,Le.onFocus),Le.onBlur=Ga(Te,Le.onBlur),oe||(ze.onFocus=Ee,ze.onBlur=Te));const Be=r.useMemo((()=>{var e;let t=[{name:"arrow",enabled:Boolean(te),options:{element:te,padding:4}}];return null!=(e=q.popperOptions)&&e.modifiers&&(t=t.concat(q.popperOptions.modifiers)),(0,Se.A)({},q.popperOptions,{modifiers:t})}),[te,q]),Ue=(0,Se.A)({},k,{isRtl:J,arrow:A,disableInteractive:oe,placement:W,PopperComponentProp:V,touch:re.current}),We=(e=>{const{classes:t,disableInteractive:n,arrow:r,touch:o,placement:i}=e,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",o&&"touch","tooltipPlacement".concat((0,xt.A)(i.split("-")[0]))],arrow:["arrow"]};return(0,bt.A)(a,Oa,t)})(Ue),Ve=null!=(n=null!=(o=G.popper)?o:C.Popper)?n:Ba,He=null!=(i=null!=(a=null!=(s=G.transition)?s:C.Transition)?a:X)?i:Lr,Ge=null!=(l=null!=(c=G.tooltip)?c:C.Tooltip)?l:Ua,Ke=null!=(u=null!=(d=G.arrow)?d:C.Arrow)?u:Wa,Xe=oo(Ve,(0,Se.A)({},q,null!=(h=H.popper)?h:T.popper,{className:(0,vt.A)(We.popper,null==q?void 0:q.className,null==(p=null!=(f=H.popper)?f:T.popper)?void 0:p.className)}),Ue),Ye=oo(He,(0,Se.A)({},Y,null!=(m=H.transition)?m:T.transition),Ue),Qe=oo(Ge,(0,Se.A)({},null!=(g=H.tooltip)?g:T.tooltip,{className:(0,vt.A)(We.tooltip,null==(y=null!=(v=H.tooltip)?v:T.tooltip)?void 0:y.className)}),Ue),$e=oo(Ke,(0,Se.A)({},null!=(b=H.arrow)?b:T.arrow,{className:(0,vt.A)(We.arrow,null==(x=null!=(w=H.arrow)?w:T.arrow)?void 0:x.className)}),Ue);return(0,_e.jsxs)(r.Fragment,{children:[r.cloneElement(S,Le),(0,_e.jsx)(Ve,(0,Se.A)({as:null!=V?V:Pa,placement:W,anchorEl:M?{getBoundingClientRect:()=>({top:Ha.y,left:Ha.x,right:Ha.x,bottom:Ha.y,width:0,height:0})}:Z,popperRef:Me,open:!!Z&&de,id:he,transition:!0},ze,Xe,{popperOptions:Be,children:e=>{let{TransitionProps:t}=e;return(0,_e.jsx)(He,(0,Se.A)({timeout:$.transitions.duration.shorter},t,Ye,{children:(0,_e.jsxs)(Ge,(0,Se.A)({},Qe,{children:[K,A?(0,_e.jsx)(Ke,(0,Se.A)({},$e,{ref:ne})):null]}))}))}}))]})}));var Xa=n(9662);const Ya=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Qa(e){return(0,At.Ay)("MuiAvatar",e)}(0,kt.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const $a=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Ja=(0,wt.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&(0,Se.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),Za=(0,wt.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),es=(0,wt.Ay)(Ya,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const ts=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiAvatar"}),{alt:o,children:i,className:a,component:s="div",imgProps:l,sizes:c,src:u,srcSet:d,variant:h="circular"}=n,p=(0,Ce.A)(n,$a);let f=null;const m=function(e){let{crossOrigin:t,referrerPolicy:n,src:o,srcSet:i}=e;const[a,s]=r.useState(!1);return r.useEffect((()=>{if(!o&&!i)return;s(!1);let e=!0;const r=new Image;return r.onload=()=>{e&&s("loaded")},r.onerror=()=>{e&&s("error")},r.crossOrigin=t,r.referrerPolicy=n,r.src=o,i&&(r.srcset=i),()=>{e=!1}}),[t,n,o,i]),a}((0,Se.A)({},l,{src:u,srcSet:d})),g=u||d,y=g&&"error"!==m,v=(0,Se.A)({},n,{colorDefault:!y,component:s,variant:h}),b=(e=>{const{classes:t,variant:n,colorDefault:r}=e,o={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,bt.A)(o,Qa,t)})(v);return f=y?(0,_e.jsx)(Za,(0,Se.A)({alt:o,src:u,srcSet:d,sizes:c,ownerState:v,className:b.img},l)):null!=i?i:g&&o?o[0]:(0,_e.jsx)(es,{ownerState:v,className:b.fallback}),(0,_e.jsx)(Ja,(0,Se.A)({as:s,ownerState:v,className:(0,vt.A)(b.root,a),ref:t},p,{children:f}))})),ns=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],rs=(0,wt.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,Ut.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,Se.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{ownerState:t}=e;return(0,Se.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),os=(0,wt.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),is=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:o,className:i,component:a=(o?"div":"hr"),flexItem:s=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==a?"separator":void 0),textAlign:d="center",variant:h="fullWidth"}=n,p=(0,Ce.A)(n,ns),f=(0,Se.A)({},n,{absolute:r,component:a,flexItem:s,light:l,orientation:c,role:u,textAlign:d,variant:h}),m=(e=>{const{absolute:t,children:n,classes:r,flexItem:o,light:i,orientation:a,textAlign:s,variant:l}=e,c={root:["root",t&&"absolute",l,i&&"light","vertical"===a&&"vertical",o&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,bt.A)(c,Ko,r)})(f);return(0,_e.jsx)(rs,(0,Se.A)({as:a,className:(0,vt.A)(m.root,i),role:u,ref:t,ownerState:f},p,{children:o?(0,_e.jsx)(os,{className:m.wrapper,ownerState:f,children:o}):null}))})),as=(0,Xa.A)((0,_e.jsx)("path",{d:"M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"}),"Games"),ss=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"}),"EmojiEvents"),ls=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications"),cs=(0,Xa.A)([(0,_e.jsx)("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6z"},"0"),(0,_e.jsx)("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12zm0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17z"},"1")],"AdminPanelSettings"),us=(0,Xa.A)([(0,_e.jsx)("path",{d:"M3.81 6.28C2.67 7.9 2 9.87 2 12s.67 4.1 1.81 5.72C6.23 16.95 8 14.68 8 12S6.23 7.05 3.81 6.28zm16.38 0C17.77 7.05 16 9.32 16 12s1.77 4.95 4.19 5.72C21.33 16.1 22 14.13 22 12s-.67-4.1-1.81-5.72z"},"0"),(0,_e.jsx)("path",{d:"M14 12c0-3.28 1.97-6.09 4.79-7.33C17.01 3.02 14.63 2 12 2S6.99 3.02 5.21 4.67C8.03 5.91 10 8.72 10 12s-1.97 6.09-4.79 7.33C6.99 20.98 9.37 22 12 22s5.01-1.02 6.79-2.67C15.97 18.09 14 15.28 14 12z"},"1")],"SportsBaseball"),ds=(0,Xa.A)((0,_e.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),hs=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),ps=(0,Xa.A)((0,_e.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");var fs=n(1288),ms=n(6032);const gs=(0,r.createContext)();function ys(){return(0,r.useContext)(gs)}function vs(e){let{children:t}=e;const[n,o]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);(0,r.useEffect)((()=>{let e=!0;const t=fs.auth.onAuthStateChanged((async t=>{try{if(t&&e){const n=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",t.uid));n.exists()&&e?(o((0,i.A)((0,i.A)({},t),n.data())),c("admin"===n.data().role)):e&&(o(t),c(!1))}else e&&(o(null),c(!1))}catch(u){console.error("Error in auth state change:",u),e&&(d(u.message),o(null),c(!1))}finally{e&&s(!1)}}));return()=>{e=!1,t()}}),[]);const h={currentUser:n,isAdmin:l,loading:a,error:u,login:async(e,t)=>{try{return d(null),await(0,fs.signIn)(e,t)}catch(u){throw d(u.message),u}},logout:async()=>{try{d(null),await(0,fs.signOut)(),o(null),c(!1)}catch(u){throw d(u.message),u}},loginWithGoogle:fs.signInWithGoogle,getUserRole:async e=>{try{d(null);const t=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",e));return t.exists()?t.data().role:"user"}catch(u){throw d(u.message),u}},refreshCurrentUser:async()=>{if(!fs.auth.currentUser)return;const e=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",fs.auth.currentUser.uid));e.exists()&&(o((0,i.A)((0,i.A)({},fs.auth.currentUser),e.data())),c("admin"===e.data().role))}};return(0,_e.jsx)(gs.Provider,{value:h,children:!a&&t})}var bs=n(5844);function xs(e){return(0,At.Ay)("MuiDialog",e)}const ws=(0,kt.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const ks=r.createContext({}),As=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ss=(0,wt.Ay)(Ao,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Cs=(0,wt.Ay)(Eo,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Ts=(0,wt.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat((0,xt.A)(n.scroll))]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Es=(0,wt.Ay)(Gt,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat((0,xt.A)(n.scroll))],t["paperWidth".concat((0,xt.A)(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit),["&.".concat(ws.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit),["&.".concat(ws.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(ws.paperScrollBody)]:{margin:0,maxWidth:"100%"}})})),Is=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDialog"}),o=jr(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClose:y,open:v,PaperComponent:b=Gt,PaperProps:x={},scroll:w="paper",TransitionComponent:k=bo,transitionDuration:A=i,TransitionProps:S}=n,C=(0,Ce.A)(n,As),T=(0,Se.A)({},n,{disableEscapeKeyDown:h,fullScreen:p,fullWidth:f,maxWidth:m,scroll:w}),E=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:o,fullScreen:i}=e,a={root:["root"],container:["container","scroll".concat((0,xt.A)(n))],paper:["paper","paperScroll".concat((0,xt.A)(n)),"paperWidth".concat((0,xt.A)(String(r))),o&&"paperFullWidth",i&&"paperFullScreen"]};return(0,bt.A)(a,xs,t)})(T),I=r.useRef(),_=(0,bs.A)(s),j=r.useMemo((()=>({titleId:_})),[_]);return(0,_e.jsx)(Cs,(0,Se.A)({className:(0,vt.A)(E.root,d),closeAfterTransition:!0,components:{Backdrop:Ss},componentsProps:{backdrop:(0,Se.A)({transitionDuration:A,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:v,ref:t,onClick:e=>{I.current&&(I.current=null,g&&g(e),y&&y(e,"backdropClick"))},ownerState:T},C,{children:(0,_e.jsx)(k,(0,Se.A)({appear:!0,in:v,timeout:A,role:"presentation"},S,{children:(0,_e.jsx)(Ts,{className:(0,vt.A)(E.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:T,children:(0,_e.jsx)(Es,(0,Se.A)({as:b,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":_},x,{className:(0,vt.A)(E.paper,x.className),ownerState:T,children:(0,_e.jsx)(ks.Provider,{value:j,children:u})}))})}))}))}));function _s(e){return(0,At.Ay)("MuiDialogTitle",e)}const js=(0,kt.A)("MuiDialogTitle",["root"]),Ns=["className","id"],Rs=(0,wt.Ay)(yn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),Ds=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDialogTitle"}),{className:o,id:i}=n,a=(0,Ce.A)(n,Ns),s=n,l=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},_s,t)})(s),{titleId:c=i}=r.useContext(ks);return(0,_e.jsx)(Rs,(0,Se.A)({component:"h2",className:(0,vt.A)(l.root,o),ownerState:s,ref:t,variant:"h6",id:null!=i?i:c},a))}));function Ps(e){return(0,At.Ay)("MuiDialogContent",e)}(0,kt.A)("MuiDialogContent",["root","dividers"]);const Ms=["className","dividers"],Fs=(0,wt.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(js.root," + &")]:{paddingTop:0}})})),Os=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDialogContent"}),{className:r,dividers:o=!1}=n,i=(0,Ce.A)(n,Ms),a=(0,Se.A)({},n,{dividers:o}),s=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,bt.A)(r,Ps,t)})(a);return(0,_e.jsx)(Fs,(0,Se.A)({className:(0,vt.A)(s.root,r),ownerState:a,ref:t},i))}));function Ls(e){return(0,At.Ay)("MuiAlert",e)}const zs=(0,kt.A)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),Bs=(0,Xa.A)((0,_e.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Us=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Ws=(0,Xa.A)((0,_e.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Vs=(0,Xa.A)((0,_e.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),qs=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Hs=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Gs=(0,wt.Ay)(Gt,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,xt.A)(n.color||n.severity))]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?Ut.e$:Ut.a,o="light"===t.palette.mode?Ut.a:Ut.e$,i=n.color||n.severity;return(0,Se.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},i&&"standard"===n.variant&&{color:t.vars?t.vars.palette.Alert["".concat(i,"Color")]:r(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(i,"StandardBg")]:o(t.palette[i].light,.9),["& .".concat(zs.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(i,"IconColor")]}:{color:t.palette[i].main}},i&&"outlined"===n.variant&&{color:t.vars?t.vars.palette.Alert["".concat(i,"Color")]:r(t.palette[i].light,.6),border:"1px solid ".concat((t.vars||t).palette[i].light),["& .".concat(zs.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(i,"IconColor")]}:{color:t.palette[i].main}},i&&"filled"===n.variant&&(0,Se.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(i,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(i,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[i].dark:t.palette[i].main,color:t.palette.getContrastText(t.palette[i].main)}))})),Ks=(0,wt.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Xs=(0,wt.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Ys=(0,wt.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Qs={success:(0,_e.jsx)(Bs,{fontSize:"inherit"}),warning:(0,_e.jsx)(Us,{fontSize:"inherit"}),error:(0,_e.jsx)(Ws,{fontSize:"inherit"}),info:(0,_e.jsx)(Vs,{fontSize:"inherit"})},$s=r.forwardRef((function(e,t){var n,r,o,i,a,s;const l=(0,qe.A)({props:e,name:"MuiAlert"}),{action:c,children:u,className:d,closeText:h="Close",color:p,components:f={},componentsProps:m={},icon:g,iconMapping:y=Qs,onClose:v,role:b="alert",severity:x="success",slotProps:w={},slots:k={},variant:A="standard"}=l,S=(0,Ce.A)(l,Hs),C=(0,Se.A)({},l,{color:p,severity:x,variant:A}),T=(e=>{const{variant:t,color:n,severity:r,classes:o}=e,i={root:["root","".concat(t).concat((0,xt.A)(n||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,bt.A)(i,Ls,o)})(C),E=null!=(n=null!=(r=k.closeButton)?r:f.CloseButton)?n:nr,I=null!=(o=null!=(i=k.closeIcon)?i:f.CloseIcon)?o:qs,_=null!=(a=w.closeButton)?a:m.closeButton,j=null!=(s=w.closeIcon)?s:m.closeIcon;return(0,_e.jsxs)(Gs,(0,Se.A)({role:b,elevation:0,ownerState:C,className:(0,vt.A)(T.root,d),ref:t},S,{children:[!1!==g?(0,_e.jsx)(Ks,{ownerState:C,className:T.icon,children:g||y[x]||Qs[x]}):null,(0,_e.jsx)(Xs,{ownerState:C,className:T.message,children:u}),null!=c?(0,_e.jsx)(Ys,{ownerState:C,className:T.action,children:c}):null,null==c&&v?(0,_e.jsx)(Ys,{ownerState:C,className:T.action,children:(0,_e.jsx)(E,(0,Se.A)({size:"small","aria-label":h,title:h,color:"inherit",onClick:v},_,{children:(0,_e.jsx)(I,(0,Se.A)({fontSize:"small"},j))}))}):null]}))}));function Js(e){return e.substring(2).toLowerCase()}const Zs=function(e){const{children:t,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:i,touchEvent:a="onTouchEnd"}=e,s=r.useRef(!1),l=r.useRef(null),c=r.useRef(!1),u=r.useRef(!1);r.useEffect((()=>(setTimeout((()=>{c.current=!0}),0),()=>{c.current=!1})),[]);const d=(0,zr.A)(t.ref,l),h=(0,Ur.A)((e=>{const t=u.current;u.current=!1;const r=(0,Br.A)(l.current);if(!c.current||!l.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(s.current)return void(s.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(l.current)>-1:!r.documentElement.contains(e.target)||l.current.contains(e.target),o||!n&&t||i(e)})),p=e=>n=>{u.current=!0;const r=t.props[e];r&&r(n)},f={ref:d};return!1!==a&&(f[a]=p(a)),r.useEffect((()=>{if(!1!==a){const e=Js(a),t=(0,Br.A)(l.current),n=()=>{s.current=!0};return t.addEventListener(e,h),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,h),t.removeEventListener("touchmove",n)}}}),[h,a]),!1!==o&&(f[o]=p(o)),r.useEffect((()=>{if(!1!==o){const e=Js(o),t=(0,Br.A)(l.current);return t.addEventListener(e,h),()=>{t.removeEventListener(e,h)}}}),[h,o]),(0,_e.jsx)(r.Fragment,{children:r.cloneElement(t,f)})};function el(e){return(0,At.Ay)("MuiSnackbarContent",e)}(0,kt.A)("MuiSnackbarContent",["root","message","action"]);const tl=["action","className","message","role"],nl=(0,wt.Ay)(Gt,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?.8:.98,r=(0,Ut.tL)(t.palette.background.default,n);return(0,Se.A)({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})})),rl=(0,wt.Ay)("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),ol=(0,wt.Ay)("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),il=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiSnackbarContent"}),{action:r,className:o,message:i,role:a="alert"}=n,s=(0,Ce.A)(n,tl),l=n,c=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"],action:["action"],message:["message"]},el,t)})(l);return(0,_e.jsxs)(nl,(0,Se.A)({role:a,square:!0,elevation:6,className:(0,vt.A)(c.root,o),ownerState:l,ref:t},s,{children:[(0,_e.jsx)(rl,{className:c.message,ownerState:l,children:i}),r?(0,_e.jsx)(ol,{className:c.action,ownerState:l,children:r}):null]}))}));function al(e){return(0,At.Ay)("MuiSnackbar",e)}(0,kt.A)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const sl=["onEnter","onExited"],ll=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],cl=(0,wt.Ay)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["anchorOrigin".concat((0,xt.A)(n.anchorOrigin.vertical)).concat((0,xt.A)(n.anchorOrigin.horizontal))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},"top"===n.anchorOrigin.vertical?{top:8}:{bottom:8},"left"===n.anchorOrigin.horizontal&&{justifyContent:"flex-start"},"right"===n.anchorOrigin.horizontal&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:(0,Se.A)({},"top"===n.anchorOrigin.vertical?{top:24}:{bottom:24},"center"===n.anchorOrigin.horizontal&&{left:"50%",right:"auto",transform:"translateX(-50%)"},"left"===n.anchorOrigin.horizontal&&{left:24,right:"auto"},"right"===n.anchorOrigin.horizontal&&{right:24,left:"auto"})})})),ul=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiSnackbar"}),o=jr(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:h,ContentProps:p,disableWindowBlurListener:f=!1,message:m,open:g,TransitionComponent:y=Lr,transitionDuration:v=i,TransitionProps:{onEnter:b,onExited:x}={}}=n,w=(0,Ce.A)(n.TransitionProps,sl),k=(0,Ce.A)(n,ll),A=(0,Se.A)({},n,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:f,TransitionComponent:y,transitionDuration:v}),S=(e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root","anchorOrigin".concat((0,xt.A)(n.vertical)).concat((0,xt.A)(n.horizontal))]};return(0,bt.A)(r,al,t)})(A),{getRootProps:C,onClickAway:T}=function(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:o,open:i,resumeHideDuration:a}=e,s=r.useRef();r.useEffect((()=>{if(i)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key&&"Esc"!==e.key||null==o||o(e,"escapeKeyDown")}}),[i,o]);const l=(0,Ur.A)(((e,t)=>{null==o||o(e,t)})),c=(0,Ur.A)((e=>{o&&null!=e&&(clearTimeout(s.current),s.current=setTimeout((()=>{l(null,"timeout")}),e))}));r.useEffect((()=>(i&&c(t),()=>{clearTimeout(s.current)})),[i,t,c]);const u=()=>{clearTimeout(s.current)},d=r.useCallback((()=>{null!=t&&c(null!=a?a:.5*t)}),[t,a,c]),h=e=>t=>{const n=e.onBlur;null==n||n(t),d()},p=e=>t=>{const n=e.onFocus;null==n||n(t),u()},f=e=>t=>{const n=e.onMouseEnter;null==n||n(t),u()},m=e=>t=>{const n=e.onMouseLeave;null==n||n(t),d()};return r.useEffect((()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}}),[n,d,i]),{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=io(e),r=(0,Se.A)({},n,t);return(0,Se.A)({role:"presentation"},r,{onBlur:h(r),onFocus:p(r),onMouseEnter:f(r),onMouseLeave:m(r)})},onClickAway:e=>{null==o||o(e,"clickaway")}}}((0,Se.A)({},A)),[E,I]=r.useState(!0),_=co({elementType:cl,getSlotProps:C,externalForwardedProps:k,ownerState:A,additionalProps:{ref:t},className:[S.root,d]});return!g&&E?null:(0,_e.jsx)(Zs,(0,Se.A)({onClickAway:T},h,{children:(0,_e.jsx)(cl,(0,Se.A)({},_,{children:(0,_e.jsx)(y,(0,Se.A)({appear:!0,in:g,timeout:v,direction:"top"===s?"down":"up",onEnter:(e,t)=>{I(!1),b&&b(e,t)},onExited:e=>{I(!0),x&&x(e)}},w,{children:u||(0,_e.jsx)(il,(0,Se.A)({message:m,action:a},p))}))}))}))}));var dl=n(7868),hl=n(3468);const pl=["onChange","maxRows","minRows","style","value"];function fl(e){return parseInt(e,10)||0}const ml={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function gl(e){return void 0===e||null===e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}const yl=r.forwardRef((function(e,t){const{onChange:n,maxRows:o,minRows:i=1,style:a,value:s}=e,l=(0,Ce.A)(e,pl),{current:c}=r.useRef(null!=s),u=r.useRef(null),d=(0,zr.A)(t,u),h=r.useRef(null),p=r.useRef(0),[f,m]=r.useState({outerHeightStyle:0}),g=r.useCallback((()=>{const t=u.current,n=(0,Gr.A)(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0};const r=h.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const a=n.boxSizing,s=fl(n.paddingBottom)+fl(n.paddingTop),l=fl(n.borderBottomWidth)+fl(n.borderTopWidth),c=r.scrollHeight;r.value="x";const d=r.scrollHeight;let p=c;i&&(p=Math.max(Number(i)*d,p)),o&&(p=Math.min(Number(o)*d,p)),p=Math.max(p,d);return{outerHeightStyle:p+("border-box"===a?s+l:0),overflow:Math.abs(p-c)<=1}}),[o,i,e.placeholder]),y=(e,t)=>{const{outerHeightStyle:n,overflow:r}=t;return p.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(p.current+=1,{overflow:r,outerHeightStyle:n}):e},v=r.useCallback((()=>{const e=g();gl(e)||m((t=>y(t,e)))}),[g]);r.useEffect((()=>{const e=(0,hl.A)((()=>{p.current=0,u.current&&(()=>{const e=g();gl(e)||xr.flushSync((()=>{m((t=>y(t,e)))}))})()}));let t;const n=u.current,r=(0,Gr.A)(n);return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),t.observe(n)),()=>{e.clear(),r.removeEventListener("resize",e),t&&t.disconnect()}})),(0,Vr.A)((()=>{v()})),r.useEffect((()=>{p.current=0}),[s]);return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)("textarea",(0,Se.A)({value:s,onChange:e=>{p.current=0,c||v(),n&&n(e)},ref:d,rows:i,style:(0,Se.A)({height:f.outerHeightStyle,overflow:f.overflow?"hidden":void 0},a)},l)),(0,_e.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:(0,Se.A)({},ml,a,{padding:0})})]})}));function vl(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const bl=r.createContext(void 0);function xl(){return r.useContext(bl)}function wl(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function kl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(wl(e.value)&&""!==e.value||t&&wl(e.defaultValue)&&""!==e.defaultValue)}function Al(e){return(0,At.Ay)("MuiInputBase",e)}const Sl=(0,kt.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Cl=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Tl=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,xt.A)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},El=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Il=(0,wt.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Tl})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(Sl.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,Se.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),_l=(0,wt.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:El})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,o=(0,Se.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},a=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,Se.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(Sl.formControl," &")]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},["&.".concat(Sl.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),jl=(0,_e.jsx)(tt,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Nl=r.forwardRef((function(e,t){var n;const o=(0,qe.A)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:p,endAdornment:f,fullWidth:m=!1,id:g,inputComponent:y="input",inputProps:v={},inputRef:b,maxRows:x,minRows:w,multiline:k=!1,name:A,onBlur:S,onChange:C,onClick:T,onFocus:E,onKeyDown:I,onKeyUp:_,placeholder:j,readOnly:N,renderSuffix:R,rows:D,slotProps:P={},slots:M={},startAdornment:F,type:O="text",value:L}=o,z=(0,Ce.A)(o,Cl),B=null!=v.value?v.value:L,{current:U}=r.useRef(null!=B),W=r.useRef(),V=r.useCallback((e=>{0}),[]),q=(0,vn.A)(W,b,v.ref,V),[H,G]=r.useState(!1),K=xl();const X=vl({props:o,muiFormControl:K,states:["color","disabled","error","hiddenLabel","size","required","filled"]});X.focused=K?K.focused:H,r.useEffect((()=>{!K&&h&&H&&(G(!1),S&&S())}),[K,h,H,S]);const Y=K&&K.onFilled,Q=K&&K.onEmpty,$=r.useCallback((e=>{kl(e)?Y&&Y():Q&&Q()}),[Y,Q]);(0,dr.A)((()=>{U&&$({value:B})}),[B,$,U]);r.useEffect((()=>{$(W.current)}),[]);let J=y,Z=v;k&&"input"===J&&(Z=D?(0,Se.A)({type:void 0,minRows:D,maxRows:D},Z):(0,Se.A)({type:void 0,maxRows:x,minRows:w},Z),J=yl);r.useEffect((()=>{K&&K.setAdornedStart(Boolean(F))}),[K,F]);const ee=(0,Se.A)({},o,{color:X.color||"primary",disabled:X.disabled,endAdornment:f,error:X.error,focused:X.focused,formControl:K,fullWidth:m,hiddenLabel:X.hiddenLabel,multiline:k,size:X.size,startAdornment:F,type:O}),te=(e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:i,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:p,type:f}=e,m={root:["root","color".concat((0,xt.A)(n)),r&&"disabled",o&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===h&&"sizeSmall",u&&"multiline",p&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",i&&"inputAdornedEnd",d&&"readOnly"]};return(0,bt.A)(m,Al,t)})(ee),ne=M.root||c.Root||Il,re=P.root||u.root||{},oe=M.input||c.Input||_l;return Z=(0,Se.A)({},Z,null!=(n=P.input)?n:u.input),(0,_e.jsxs)(r.Fragment,{children:[!p&&jl,(0,_e.jsxs)(ne,(0,Se.A)({},re,!ro(ne)&&{ownerState:(0,Se.A)({},ee,re.ownerState)},{ref:t,onClick:e=>{W.current&&e.currentTarget===e.target&&W.current.focus(),T&&!X.disabled&&T(e)}},z,{className:(0,vt.A)(te.root,re.className,l,N&&"MuiInputBase-readOnly"),children:[F,(0,_e.jsx)(bl.Provider,{value:null,children:(0,_e.jsx)(oe,(0,Se.A)({ownerState:ee,"aria-invalid":X.error,"aria-describedby":i,autoComplete:a,autoFocus:s,defaultValue:d,disabled:X.disabled,id:g,onAnimationStart:e=>{$("mui-auto-fill-cancel"===e.animationName?W.current:{value:"x"})},name:A,placeholder:j,readOnly:N,required:X.required,rows:D,value:B,onKeyDown:I,onKeyUp:_,type:O},Z,!ro(oe)&&{as:J,ownerState:(0,Se.A)({},ee,Z.ownerState)},{ref:q,className:(0,vt.A)(te.input,Z.className,N&&"MuiInputBase-readOnly"),onBlur:e=>{S&&S(e),v.onBlur&&v.onBlur(e),K&&K.onBlur?K.onBlur(e):G(!1)},onChange:function(e){if(!U){const t=e.target||W.current;if(null==t)throw new Error((0,dl.A)(1));$({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];v.onChange&&v.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{X.disabled?e.stopPropagation():(E&&E(e),v.onFocus&&v.onFocus(e),K&&K.onFocus?K.onFocus(e):G(!0))}}))}),f,R?R((0,Se.A)({},X,{startAdornment:F})):null]}))]})})),Rl=Nl;function Dl(e){return(0,At.Ay)("MuiInput",e)}const Pl=(0,Se.A)({},Sl,(0,kt.A)("MuiInput",["root","underline","input"])),Ml=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Fl=(0,wt.Ay)(Il,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Tl(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,Se.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Pl.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Pl.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Pl.disabled,", .").concat(Pl.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(Pl.disabled,":before")]:{borderBottomStyle:"dotted"}})})),Ol=(0,wt.Ay)(_l,{name:"MuiInput",slot:"Input",overridesResolver:El})({}),Ll=r.forwardRef((function(e,t){var n,r,o,i;const a=(0,qe.A)({props:e,name:"MuiInput"}),{disableUnderline:s,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:p,slots:f={},type:m="text"}=a,g=(0,Ce.A)(a,Ml),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},o=(0,bt.A)(r,Dl,t);return(0,Se.A)({},t,o)})(a),v={root:{ownerState:{disableUnderline:s}}},b=(null!=p?p:c)?(0,ct.A)(null!=p?p:c,v):v,x=null!=(n=null!=(r=f.root)?r:l.Root)?n:Fl,w=null!=(o=null!=(i=f.input)?i:l.Input)?o:Ol;return(0,_e.jsx)(Rl,(0,Se.A)({slots:{root:x,input:w},slotProps:b,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:y}))}));Ll.muiName="Input";const zl=Ll;function Bl(e){return(0,At.Ay)("MuiFilledInput",e)}const Ul=(0,Se.A)({},Sl,(0,kt.A)("MuiFilledInput",["root","underline","input"])),Wl=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Vl=(0,wt.Ay)(Il,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Tl(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const o="light"===t.palette.mode,i=o?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=o?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=o?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=o?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,Se.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a}},["&.".concat(Ul.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:a},["&.".concat(Ul.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Ul.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Ul.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main}},"&:before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):i),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Ul.disabled,", .").concat(Ul.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(Ul.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,Se.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),ql=(0,wt.Ay)(_l,{name:"MuiFilledInput",slot:"Input",overridesResolver:El})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})})),Hl=r.forwardRef((function(e,t){var n,r,o,i;const a=(0,qe.A)({props:e,name:"MuiFilledInput"}),{components:s={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:p={},type:f="text"}=a,m=(0,Ce.A)(a,Wl),g=(0,Se.A)({},a,{fullWidth:c,inputComponent:u,multiline:d,type:f}),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},o=(0,bt.A)(r,Bl,t);return(0,Se.A)({},t,o)})(a),v={root:{ownerState:g},input:{ownerState:g}},b=(null!=h?h:l)?(0,ct.A)(null!=h?h:l,v):v,x=null!=(n=null!=(r=p.root)?r:s.Root)?n:Vl,w=null!=(o=null!=(i=p.input)?i:s.Input)?o:ql;return(0,_e.jsx)(Rl,(0,Se.A)({slots:{root:x,input:w},componentsProps:b,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:f},m,{classes:y}))}));Hl.muiName="Input";const Gl=Hl;var Kl;const Xl=["children","classes","className","label","notched"],Yl=(0,wt.Ay)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Ql=(0,wt.Ay)("legend")((e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,Se.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function $l(e){return(0,At.Ay)("MuiOutlinedInput",e)}const Jl=(0,Se.A)({},Sl,(0,kt.A)("MuiOutlinedInput",["root","notchedOutline","input"])),Zl=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],ec=(0,wt.Ay)(Il,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Tl})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,Se.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(Jl.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(Jl.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(Jl.focused," .").concat(Jl.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(Jl.error," .").concat(Jl.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(Jl.disabled," .").concat(Jl.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,Se.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),tc=(0,wt.Ay)((function(e){const{className:t,label:n,notched:r}=e,o=(0,Ce.A)(e,Xl),i=null!=n&&""!==n,a=(0,Se.A)({},e,{notched:r,withLabel:i});return(0,_e.jsx)(Yl,(0,Se.A)({"aria-hidden":!0,className:t,ownerState:a},o,{children:(0,_e.jsx)(Ql,{ownerState:a,children:i?(0,_e.jsx)("span",{children:n}):Kl||(Kl=(0,_e.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),nc=(0,wt.Ay)(_l,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:El})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),rc=r.forwardRef((function(e,t){var n,o,i,a,s;const l=(0,qe.A)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:p=!1,notched:f,slots:m={},type:g="text"}=l,y=(0,Ce.A)(l,Zl),v=(e=>{const{classes:t}=e,n=(0,bt.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},$l,t);return(0,Se.A)({},t,n)})(l),b=xl(),x=vl({props:l,muiFormControl:b,states:["required"]}),w=(0,Se.A)({},l,{color:x.color||"primary",disabled:x.disabled,error:x.error,focused:x.focused,formControl:b,fullWidth:u,hiddenLabel:x.hiddenLabel,multiline:p,size:x.size,type:g}),k=null!=(n=null!=(o=m.root)?o:c.Root)?n:ec,A=null!=(i=null!=(a=m.input)?a:c.Input)?i:nc;return(0,_e.jsx)(Rl,(0,Se.A)({slots:{root:k,input:A},renderSuffix:e=>(0,_e.jsx)(tc,{ownerState:w,className:v.notchedOutline,label:null!=h&&""!==h&&x.required?s||(s=(0,_e.jsxs)(r.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof f?f:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:p,ref:t,type:g},y,{classes:(0,Se.A)({},v,{notchedOutline:null})}))}));rc.muiName="Input";const oc=rc;function ic(e){return(0,At.Ay)("MuiFormLabel",e)}const ac=(0,kt.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),sc=["children","className","color","component","disabled","error","filled","focused","required"],lc=(0,wt.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,Se.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(ac.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(ac.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(ac.error)]:{color:(t.vars||t).palette.error.main}})})),cc=(0,wt.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(ac.error)]:{color:(t.vars||t).palette.error.main}}})),uc=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiFormLabel"}),{children:r,className:o,component:i="label"}=n,a=(0,Ce.A)(n,sc),s=vl({props:n,muiFormControl:xl(),states:["color","required","focused","disabled","error","filled"]}),l=(0,Se.A)({},n,{color:s.color||"primary",component:i,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:o,error:i,filled:a,required:s}=e,l={root:["root","color".concat((0,xt.A)(n)),o&&"disabled",i&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]};return(0,bt.A)(l,ic,t)})(l);return(0,_e.jsxs)(lc,(0,Se.A)({as:i,ownerState:l,className:(0,vt.A)(c.root,o),ref:t},a,{children:[r,s.required&&(0,_e.jsxs)(cc,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))}));function dc(e){return(0,At.Ay)("MuiInputLabel",e)}(0,kt.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const hc=["disableAnimation","margin","shrink","variant","className"],pc=(0,wt.Ay)(uc,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(ac.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,Se.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,Se.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,Se.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),fc=r.forwardRef((function(e,t){const n=(0,qe.A)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:o,className:i}=n,a=(0,Ce.A)(n,hc),s=xl();let l=o;"undefined"===typeof l&&s&&(l=s.filled||s.focused||s.adornedStart);const c=vl({props:n,muiFormControl:s,states:["size","variant","required"]}),u=(0,Se.A)({},n,{disableAnimation:r,formControl:s,shrink:l,size:c.size,variant:c.variant,required:c.required}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:i,variant:a,required:s}=e,l={root:["root",n&&"formControl",!i&&"animated",o&&"shrink","small"===r&&"sizeSmall",a],asterisk:[s&&"asterisk"]},c=(0,bt.A)(l,dc,t);return(0,Se.A)({},t,c)})(u);return(0,_e.jsx)(pc,(0,Se.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,vt.A)(d.root,i)},a,{classes:d}))}));var mc=n(7328);function gc(e){return(0,At.Ay)("MuiFormControl",e)}(0,kt.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const yc=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],vc=(0,wt.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,Se.A)({},t.root,t["margin".concat((0,xt.A)(n.margin))],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),bc=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiFormControl"}),{children:o,className:i,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined"}=n,y=(0,Ce.A)(n,yc),v=(0,Se.A)({},n,{color:a,component:s,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:p,required:f,size:m,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,o={root:["root","none"!==n&&"margin".concat((0,xt.A)(n)),r&&"fullWidth"]};return(0,bt.A)(o,gc,t)})(v),[x,w]=r.useState((()=>{let e=!1;return o&&r.Children.forEach(o,(t=>{if(!(0,mc.A)(t,["Input","Select"]))return;const n=(0,mc.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[k,A]=r.useState((()=>{let e=!1;return o&&r.Children.forEach(o,(t=>{(0,mc.A)(t,["Input","Select"])&&(kl(t.props,!0)||kl(t.props.inputProps,!0))&&(e=!0)})),e})),[S,C]=r.useState(!1);l&&S&&C(!1);const T=void 0===u||l?S:u;let E;const I=r.useMemo((()=>({adornedStart:x,setAdornedStart:w,color:a,disabled:l,error:c,filled:k,focused:T,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{C(!1)},onEmpty:()=>{A(!1)},onFilled:()=>{A(!0)},onFocus:()=>{C(!0)},registerEffect:E,required:f,variant:g})),[x,a,l,c,k,T,d,h,E,f,m,g]);return(0,_e.jsx)(bl.Provider,{value:I,children:(0,_e.jsx)(vc,(0,Se.A)({as:s,ownerState:v,className:(0,vt.A)(b.root,i),ref:t},y,{children:o}))})}));function xc(e){return(0,At.Ay)("MuiFormHelperText",e)}const wc=(0,kt.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var kc;const Ac=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Sc=(0,wt.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat((0,xt.A)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(wc.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(wc.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),Cc=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiFormHelperText"}),{children:r,className:o,component:i="p"}=n,a=(0,Ce.A)(n,Ac),s=vl({props:n,muiFormControl:xl(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,Se.A)({},n,{component:i,contained:"filled"===s.variant||"outlined"===s.variant,variant:s.variant,size:s.size,disabled:s.disabled,error:s.error,filled:s.filled,focused:s.focused,required:s.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:o,error:i,filled:a,focused:s,required:l}=e,c={root:["root",o&&"disabled",i&&"error",r&&"size".concat((0,xt.A)(r)),n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return(0,bt.A)(c,xc,t)})(l);return(0,_e.jsx)(Sc,(0,Se.A)({as:i,ownerState:l,className:(0,vt.A)(c.root,o),ref:t},a,{children:" "===r?kc||(kc=(0,_e.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))}));function Tc(e){return(0,At.Ay)("MuiNativeSelect",e)}const Ec=(0,kt.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Ic=["className","disabled","error","IconComponent","inputRef","variant"],_c=e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,Se.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(Ec.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},jc=(0,wt.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:wt.ep,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(Ec.multiple)]:t.multiple}]}})(_c),Nc=e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(Ec.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Rc=(0,wt.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,xt.A)(n.variant))],n.open&&t.iconOpen]}})(Nc),Dc=r.forwardRef((function(e,t){const{className:n,disabled:o,error:i,IconComponent:a,inputRef:s,variant:l="standard"}=e,c=(0,Ce.A)(e,Ic),u=(0,Se.A)({},e,{disabled:o,variant:l,error:i}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e,s={select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon","icon".concat((0,xt.A)(n)),i&&"iconOpen",r&&"disabled"]};return(0,bt.A)(s,Tc,t)})(u);return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)(jc,(0,Se.A)({ownerState:u,className:(0,vt.A)(d.select,n),disabled:o,ref:s||t},c)),e.multiple?null:(0,_e.jsx)(Rc,{as:a,ownerState:u,className:d.icon})]})}));function Pc(e){return(0,At.Ay)("MuiSelect",e)}const Mc=(0,kt.A)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Fc;const Oc=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Lc=(0,wt.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(Mc.select)]:t.select},{["&.".concat(Mc.select)]:t[n.variant]},{["&.".concat(Mc.error)]:t.error},{["&.".concat(Mc.multiple)]:t.multiple}]}})(_c,{["&.".concat(Mc.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zc=(0,wt.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,xt.A)(n.variant))],n.open&&t.iconOpen]}})(Nc),Bc=(0,wt.Ay)("input",{shouldForwardProp:e=>(0,wt._n)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Uc(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Wc(e){return null==e||"string"===typeof e&&!e.trim()}const Vc=r.forwardRef((function(e,t){const{"aria-describedby":n,"aria-label":o,autoFocus:i,autoWidth:a,children:s,className:l,defaultOpen:c,defaultValue:u,disabled:d,displayEmpty:h,error:p=!1,IconComponent:f,inputRef:m,labelId:g,MenuProps:y={},multiple:v,name:b,onBlur:x,onChange:w,onClose:k,onFocus:A,onOpen:S,open:C,readOnly:T,renderValue:E,SelectDisplayProps:I={},tabIndex:_,value:j,variant:N="standard"}=e,R=(0,Ce.A)(e,Oc),[D,P]=(0,Fa.A)({controlled:j,default:u,name:"Select"}),[M,F]=(0,Fa.A)({controlled:C,default:c,name:"Select"}),O=r.useRef(null),L=r.useRef(null),[z,B]=r.useState(null),{current:U}=r.useRef(null!=C),[W,V]=r.useState(),q=(0,vn.A)(t,m),H=r.useCallback((e=>{L.current=e,e&&B(e)}),[]),G=null==z?void 0:z.parentNode;r.useImperativeHandle(q,(()=>({focus:()=>{L.current.focus()},node:O.current,value:D})),[D]),r.useEffect((()=>{c&&M&&z&&!U&&(V(a?null:G.clientWidth),L.current.focus())}),[z,a]),r.useEffect((()=>{i&&L.current.focus()}),[i]),r.useEffect((()=>{if(!g)return;const e=(0,rr.A)(L.current).getElementById(g);if(e){const t=()=>{getSelection().isCollapsed&&L.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[g]);const K=(e,t)=>{e?S&&S(t):k&&k(t),U||(V(a?null:G.clientWidth),F(e))},X=r.Children.toArray(s),Y=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(v){n=Array.isArray(D)?D.slice():[];const t=D.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),D!==n&&(P(n),w)){const r=t.nativeEvent||t,o=new r.constructor(r.type,r);Object.defineProperty(o,"target",{writable:!0,value:{value:n,name:b}}),w(o,e)}v||K(!1,t)}},Q=null!==z&&M;let $,J;delete R["aria-invalid"];const Z=[];let ee=!1,te=!1;(kl({value:D})||h)&&(E?$=E(D):ee=!0);const ne=X.map((e=>{if(!r.isValidElement(e))return null;let t;if(v){if(!Array.isArray(D))throw new Error((0,dl.A)(2));t=D.some((t=>Uc(t,e.props.value))),t&&ee&&Z.push(e.props.children)}else t=Uc(D,e.props.value),t&&ee&&(J=e.props.children);return t&&(te=!0),r.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Y(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ee&&($=v?0===Z.length?null:Z.reduce(((e,t,n)=>(e.push(t),n<Z.length-1&&e.push(", "),e)),[]):J);let re,oe=W;!a&&U&&z&&(oe=G.clientWidth),re="undefined"!==typeof _?_:d?null:0;const ie=I.id||(b?"mui-component-select-".concat(b):void 0),ae=(0,Se.A)({},e,{variant:N,value:D,open:Q,error:p}),se=(e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:a}=e,s={select:["select",n,r&&"disabled",o&&"multiple",a&&"error"],icon:["icon","icon".concat((0,xt.A)(n)),i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,bt.A)(s,Pc,t)})(ae);return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)(Lc,(0,Se.A)({ref:H,tabIndex:re,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[g,ie].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:d||T?null:e=>{0===e.button&&(e.preventDefault(),L.current.focus(),K(!0,e))},onBlur:e=>{!Q&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:D,name:b}}),x(e))},onFocus:A},I,{ownerState:ae,className:(0,vt.A)(I.className,se.select,l),id:ie,children:Wc($)?Fc||(Fc=(0,_e.jsx)("span",{className:"notranslate",children:"\u200b"})):$})),(0,_e.jsx)(Bc,(0,Se.A)({"aria-invalid":p,value:Array.isArray(D)?D.join(","):D,name:b,ref:O,"aria-hidden":!0,onChange:e=>{const t=X.find((t=>t.props.value===e.target.value));void 0!==t&&(P(t.props.value),w&&w(e,t))},tabIndex:-1,disabled:d,className:se.nativeInput,autoFocus:i,ownerState:ae},R)),(0,_e.jsx)(zc,{as:f,className:se.icon,ownerState:ae}),(0,_e.jsx)(Go,(0,Se.A)({id:"menu-".concat(b||""),anchorEl:G,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,Se.A)({"aria-labelledby":g,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:(0,Se.A)({},y.PaperProps,{style:(0,Se.A)({minWidth:oe},null!=y.PaperProps?y.PaperProps.style:null)}),children:ne}))]})})),qc=(0,Xa.A)((0,_e.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Hc=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Gc={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,wt.ep)(e)&&"variant"!==e,slot:"Root"},Kc=(0,wt.Ay)(zl,Gc)(""),Xc=(0,wt.Ay)(oc,Gc)(""),Yc=(0,wt.Ay)(Gl,Gc)(""),Qc=r.forwardRef((function(e,t){const n=(0,qe.A)({name:"MuiSelect",props:e}),{autoWidth:o=!1,children:i,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=qc,id:d,input:h,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:y=!1,native:v=!1,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:A,variant:S="outlined"}=n,C=(0,Ce.A)(n,Hc),T=v?Dc:Vc,E=vl({props:n,muiFormControl:xl(),states:["variant","error"]}),I=E.variant||S,_=(0,Se.A)({},n,{variant:I,classes:a}),j=(e=>{const{classes:t}=e;return t})(_),N=h||{standard:(0,_e.jsx)(Kc,{ownerState:_}),outlined:(0,_e.jsx)(Xc,{label:f,ownerState:_}),filled:(0,_e.jsx)(Yc,{ownerState:_})}[I],R=(0,vn.A)(t,N.ref);return(0,_e.jsx)(r.Fragment,{children:r.cloneElement(N,(0,Se.A)({inputComponent:T,inputProps:(0,Se.A)({children:i,error:E.error,IconComponent:u,variant:I,type:void 0,multiple:y},v?{id:d}:{autoWidth:o,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:(0,Se.A)({id:d},A)},p,{classes:p?(0,ct.A)(j,p.classes):j},h?h.props.inputProps:{})},y&&v&&"outlined"===I?{notched:!0}:{},{ref:R,className:(0,vt.A)(N.props.className,s)},!h&&{variant:I},C))})}));Qc.muiName="Select";const $c=Qc;function Jc(e){return(0,At.Ay)("MuiTextField",e)}(0,kt.A)("MuiTextField",["root"]);const Zc=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],eu={standard:zl,filled:Gl,outlined:oc},tu=(0,wt.Ay)(bc,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nu=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:o=!1,children:i,className:a,color:s="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:v,label:b,maxRows:x,minRows:w,multiline:k=!1,name:A,onBlur:S,onChange:C,onClick:T,onFocus:E,placeholder:I,required:_=!1,rows:j,select:N=!1,SelectProps:R,type:D,value:P,variant:M="outlined"}=n,F=(0,Ce.A)(n,Zc),O=(0,Se.A)({},n,{autoFocus:o,color:s,disabled:c,error:u,fullWidth:h,multiline:k,required:_,select:N,variant:M}),L=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},Jc,t)})(O);const z={};"outlined"===M&&(m&&"undefined"!==typeof m.shrink&&(z.notched=m.shrink),z.label=b),N&&(R&&R.native||(z.id=void 0),z["aria-describedby"]=void 0);const B=(0,bs.A)(f),U=p&&B?"".concat(B,"-helper-text"):void 0,W=b&&B?"".concat(B,"-label"):void 0,V=eu[M],q=(0,_e.jsx)(V,(0,Se.A)({"aria-describedby":U,autoComplete:r,autoFocus:o,defaultValue:l,fullWidth:h,multiline:k,name:A,rows:j,maxRows:x,minRows:w,type:D,value:P,id:B,inputRef:v,onBlur:S,onChange:C,onFocus:E,onClick:T,placeholder:I,inputProps:g},z,y));return(0,_e.jsxs)(tu,(0,Se.A)({className:(0,vt.A)(L.root,a),disabled:c,error:u,fullWidth:h,ref:t,required:_,color:s,variant:M,ownerState:O},F,{children:[null!=b&&""!==b&&(0,_e.jsx)(fc,(0,Se.A)({htmlFor:B,id:W},m,{children:b})),N?(0,_e.jsx)($c,(0,Se.A)({"aria-describedby":U,id:B,labelId:W,value:P,input:q},R,{children:i})):q,p&&(0,_e.jsx)(Cc,(0,Se.A)({id:U},d,{children:p}))]}))}));function ru(e){return(0,At.Ay)("MuiDialogActions",e)}(0,kt.A)("MuiDialogActions",["root","spacing"]);const ou=["className","disableSpacing"],iu=(0,wt.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),au=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:o=!1}=n,i=(0,Ce.A)(n,ou),a=(0,Se.A)({},n,{disableSpacing:o}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,bt.A)(r,ru,t)})(a);return(0,_e.jsx)(iu,(0,Se.A)({className:(0,vt.A)(s.root,r),ownerState:a,ref:t},i))})),su=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),lu=(0,Xa.A)((0,_e.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");var cu=n(52),uu=n(7700),du=n(8812);const hu="firebasestorage.googleapis.com",pu="storageBucket";class fu extends uu.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(bu(e),"Firebase Storage: ".concat(t," (").concat(bu(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fu.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var mu,gu,yu,vu;function bu(e){return"storage/"+e}function xu(){return new fu(mu.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wu(){return new fu(mu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ku(){return new fu(mu.CANCELED,"User canceled the upload/download.")}function Au(e){return new fu(mu.INVALID_ARGUMENT,e)}function Su(){return new fu(mu.APP_DELETED,"The Firebase app was deleted.")}(gu=mu||(mu={})).UNKNOWN="unknown",gu.OBJECT_NOT_FOUND="object-not-found",gu.BUCKET_NOT_FOUND="bucket-not-found",gu.PROJECT_NOT_FOUND="project-not-found",gu.QUOTA_EXCEEDED="quota-exceeded",gu.UNAUTHENTICATED="unauthenticated",gu.UNAUTHORIZED="unauthorized",gu.UNAUTHORIZED_APP="unauthorized-app",gu.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",gu.INVALID_CHECKSUM="invalid-checksum",gu.CANCELED="canceled",gu.INVALID_EVENT_NAME="invalid-event-name",gu.INVALID_URL="invalid-url",gu.INVALID_DEFAULT_BUCKET="invalid-default-bucket",gu.NO_DEFAULT_BUCKET="no-default-bucket",gu.CANNOT_SLICE_BLOB="cannot-slice-blob",gu.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",gu.NO_DOWNLOAD_URL="no-download-url",gu.INVALID_ARGUMENT="invalid-argument",gu.INVALID_ARGUMENT_COUNT="invalid-argument-count",gu.APP_DELETED="app-deleted",gu.INVALID_ROOT_OPERATION="invalid-root-operation",gu.INVALID_FORMAT="invalid-format",gu.INTERNAL_ERROR="internal-error",gu.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class Cu{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Cu.makeFromUrl(e,t)}catch(o){return new Cu(e,"")}if(""===n.path)return n;throw r=e,new fu(mu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const o=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===hu?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let o=r[t.indices.path];o||(o=""),n=new Cu(e,o),t.postModify(n);break}}if(null==n)throw function(e){return new fu(mu.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Tu{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Eu(e,t,n,r){if(r<t)throw Au("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Au("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Iu(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function _u(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),o=-1!==t.indexOf(e);return n||r||o}(vu=yu||(yu={}))[vu.NO_ERROR=0]="NO_ERROR",vu[vu.NETWORK_ERROR=1]="NETWORK_ERROR",vu[vu.ABORT=2]="ABORT";class ju{constructor(e,t,n,r,o,i,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Nu(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===yu.NO_ERROR,o=n.getStatus();if(!t||_u(o,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===yu.ABORT;return void e(!1,new Nu(!1,null,t))}const i=-1!==this.successCodes_.indexOf(o);e(!0,new Nu(i,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,o=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(o,o.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==o){const e=xu();e.serverResponse=o.getErrorText(),this.errorCallback_?r(this.errorCallback_(o,e)):r(e)}else if(t.canceled){r(this.appDelete_?Su():ku())}else{r(wu())}};this.canceled_?t(0,new Nu(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,o=null,i=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){o=setTimeout((()=>{o=null,e(p,l())}),t)}function h(){i&&clearTimeout(i)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),d(i)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==o?(e||(s=2),clearTimeout(o),d(0)):e||(s=1)))}return d(0),i=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nu{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ru(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Du{constructor(e,t){this._service=e,this._location=t instanceof Cu?t:Cu.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Du(e,t)}get root(){const e=new Cu(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ru(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Cu(this._location.bucket,e);return new Du(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new fu(mu.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Pu(e,t){const n=null===t||void 0===t?void 0:t[pu];return null==n?null:Cu.makeFromBucketSpec(n,e)}class Mu{constructor(e,t,n,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=hu,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Cu.makeFromBucketSpec(r,this._host):Pu(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Cu.makeFromBucketSpec(this._url,e):this._bucket=Pu(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Eu("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Eu("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Du(this,e)}_makeRequest(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Tu(Su());{const i=function(e,t,n,r,o,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=Iu(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new ju(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,o);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Fu="@firebase/storage",Ou="0.12.0",Lu="storage";function zu(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Mu(r,o,i,n,cu.MF)}function Bu(e){let{open:t,onClose:n,onProfileUpdated:o}=e;const{currentUser:a,refreshCurrentUser:s}=ys(),[l,c]=(0,r.useState)({open:!1,message:"",severity:"success"}),[u,d]=(0,r.useState)({firstName:"",lastName:"",phoneNumber:"",preferredLocation:"",photoURL:""}),h=u.photoURL||void 0,[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&(async()=>{if(null!==a&&void 0!==a&&a.uid)try{const e=await(0,fs.getUserData)(a.uid);e&&d({firstName:e.firstName||"",lastName:e.lastName||"",phoneNumber:e.phoneNumber||"",preferredLocation:e.preferredLocation||"",photoURL:e.photoURL||""})}catch(e){console.error("Error fetching user data:",e),g("Failed to load profile data")}})()}),[a,t]);const w=e=>{const{name:t,value:n}=e.target;d((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))),f(!0)};return(0,_e.jsxs)(Is,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:3}},children:[(0,_e.jsxs)(Ds,{sx:{m:0,p:2,bgcolor:"primary.main",color:"primary.contrastText",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(hs,{sx:{mr:1}}),(0,_e.jsx)(yn,{variant:"h6",children:"Edit Profile"})]}),(0,_e.jsx)(nr,{"aria-label":"close",onClick:n,sx:{color:"inherit","&:hover":{bgcolor:"primary.dark"}},children:(0,_e.jsx)(su,{})})]}),(0,_e.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(""),x(!1),v(!0);try{await(0,fs.updateUserProfile)(a.uid,u),x(!0),setTimeout((()=>{n()}),1500)}catch(t){g("Failed to update profile: "+t.message)}finally{v(!1)}},children:[(0,_e.jsxs)(Os,{dividers:!0,children:[m&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:m}),b&&(0,_e.jsx)($s,{severity:"success",sx:{mb:2},children:"Profile updated successfully!"}),(0,_e.jsx)(ul,{open:l.open,autoHideDuration:3e3,onClose:()=>c((0,i.A)((0,i.A)({},l),{},{open:!1})),message:l.message,anchorOrigin:{vertical:"top",horizontal:"center"}}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:2,mb:2},children:[(0,_e.jsx)(ts,{src:u.photoURL||void 0,sx:{width:64,height:64,bgcolor:"primary.main",mr:{xs:0,sm:2},mb:{xs:1,sm:0}},children:!u.photoURL&&u.firstName&&u.lastName?"".concat(u.firstName[0]).concat(u.lastName[0]).toUpperCase():!u.photoURL&&(0,_e.jsx)(hs,{})},h),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:1,alignItems:"center"},children:[(0,_e.jsxs)(pi,{variant:"contained",component:"label",disabled:y,startIcon:y?(0,_e.jsx)(Bt,{size:18}):null,children:[y?"Uploading...":"Upload Photo",(0,_e.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:async e=>{if(e.target.files&&e.target.files[0]){const r=e.target.files[0];if(!r.type.startsWith("image/"))return g("Please upload a valid image file (JPEG, PNG, etc)."),c({open:!0,message:"Please upload a valid image file (JPEG, PNG, etc).",severity:"error"}),void(e.target.value="");if(r.size>5242880)return g("File is too large. Please choose a file under 5MB."),c({open:!0,message:"File is too large. Please choose a file under 5MB.",severity:"error"}),void(e.target.value="");v(!0),g(""),x(!1);try{const n=new FormData;n.append("file",r),n.append("upload_preset","unsigned_preset");const l=await fetch("https://api.cloudinary.com/v1_1/df9ywgjv4/image/upload",{method:"POST",body:n}),h=await l.json();var t;if(!h.secure_url)throw new Error((null===(t=h.error)||void 0===t?void 0:t.message)||"Cloudinary upload failed");await(0,fs.updateUserProfile)(a.uid,(0,i.A)((0,i.A)({},u),{},{photoURL:h.secure_url})),d((e=>(0,i.A)((0,i.A)({},e),{},{photoURL:h.secure_url}))),f(!0),x(!0),c({open:!0,message:"Photo uploaded successfully!",severity:"success"}),"function"===typeof s&&await s(),"function"===typeof o&&o(),e.target.value=""}catch(n){const e=(null===n||void 0===n?void 0:n.message)||(null===n||void 0===n?void 0:n.toString())||"Failed to upload photo";g(e),c({open:!0,message:e,severity:"error"})}finally{v(!1)}}}})]}),(0,_e.jsx)(pi,{variant:"outlined",color:"error",sx:{ml:{xs:0,sm:2},mt:{xs:1,sm:0}},disabled:y||!u.photoURL,onClick:async()=>{v(!0),g(""),x(!1);try{await(0,fs.updateUserProfile)(a.uid,(0,i.A)((0,i.A)({},u),{},{photoURL:""})),d((e=>(0,i.A)((0,i.A)({},e),{},{photoURL:""}))),c({open:!0,message:"Avatar deleted successfully!",severity:"success"})}catch(e){g("Failed to delete avatar: "+e.message),c({open:!0,message:"Failed to delete avatar",severity:"error"})}finally{v(!1)}},children:"Delete Avatar"})]}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",sx:{mt:{xs:1,sm:0}},children:null===a||void 0===a?void 0:a.email})]})]}),(0,_e.jsx)(nu,{label:"First Name",name:"firstName",value:u.firstName,onChange:w,fullWidth:!0,required:!0}),(0,_e.jsx)(nu,{label:"Last Name",name:"lastName",value:u.lastName,onChange:w,fullWidth:!0,required:!0}),(0,_e.jsx)(nu,{label:"Phone Number",name:"phoneNumber",value:u.phoneNumber,onChange:w,fullWidth:!0,type:"tel"}),(0,_e.jsx)(nu,{label:"Preferred Location",name:"preferredLocation",value:u.preferredLocation,onChange:w,fullWidth:!0,placeholder:"e.g., Dubai Sports City"})]})]}),(0,_e.jsxs)(au,{sx:{p:2,bgcolor:"grey.50"},children:[(0,_e.jsx)(pi,{onClick:n,variant:"outlined",disabled:y,startIcon:(0,_e.jsx)(su,{}),children:"Cancel"}),(0,_e.jsx)(pi,{type:"submit",variant:"contained",color:"primary",startIcon:(0,_e.jsx)(lu,{}),disabled:y||!p,children:"Save Changes"})]})]})]})}(0,cu.om)(new du.uA(Lu,zu,"PUBLIC").setMultipleInstances(!0)),(0,cu.KO)(Fu,Ou,""),(0,cu.KO)(Fu,Ou,"esm2017");const Uu=e=>{const t=r.useRef({});return r.useEffect((()=>{t.current=e})),t.current};function Wu(e){return(0,At.Ay)("MuiBadge",e)}const Vu=(0,kt.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),qu=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Hu=(0,wt.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Gu=(0,wt.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t["anchorOrigin".concat((0,xt.A)(n.anchorOrigin.vertical)).concat((0,xt.A)(n.anchorOrigin.horizontal)).concat((0,xt.A)(n.overlap))],"default"!==n.color&&t["color".concat((0,xt.A)(n.color))],n.invisible&&t.invisible]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},"dot"===n.variant&&{borderRadius:4,height:8,minWidth:8,padding:0},"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(50%, 50%)"}},"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"rectangular"===n.overlap&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}},"top"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(50%, -50%)"}},"bottom"===n.anchorOrigin.vertical&&"right"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(50%, 50%)"}},"top"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(-50%, -50%)"}},"bottom"===n.anchorOrigin.vertical&&"left"===n.anchorOrigin.horizontal&&"circular"===n.overlap&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",["&.".concat(Vu.invisible)]:{transform:"scale(0) translate(-50%, 50%)"}},n.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})})),Ku=r.forwardRef((function(e,t){var n,r,o,i,a,s;const l=(0,qe.A)({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:u,component:d,components:h={},componentsProps:p={},children:f,overlap:m="rectangular",color:g="default",invisible:y=!1,max:v=99,badgeContent:b,slots:x,slotProps:w,showZero:k=!1,variant:A="standard"}=l,S=(0,Ce.A)(l,qu),{badgeContent:C,invisible:T,max:E,displayValue:I}=function(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:o=!1}=e,i=Uu({badgeContent:t,max:r});let a=n;!1!==n||0!==t||o||(a=!0);const{badgeContent:s,max:l=r}=a?i:e;return{badgeContent:s,invisible:a,max:l,displayValue:s&&Number(s)>l?"".concat(l,"+"):s}}({max:v,invisible:y,badgeContent:b,showZero:k}),_=Uu({anchorOrigin:c,color:g,overlap:m,variant:A,badgeContent:b}),j=T||null==C&&"dot"!==A,{color:N=g,overlap:R=m,anchorOrigin:D=c,variant:P=A}=j?_:l,M="dot"!==P?I:void 0,F=(0,Se.A)({},l,{badgeContent:C,invisible:j,max:E,displayValue:M,showZero:k,anchorOrigin:D,color:N,overlap:R,variant:P}),O=(e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:o,variant:i,classes:a={}}=e,s={root:["root"],badge:["badge",i,r&&"invisible","anchorOrigin".concat((0,xt.A)(n.vertical)).concat((0,xt.A)(n.horizontal)),"anchorOrigin".concat((0,xt.A)(n.vertical)).concat((0,xt.A)(n.horizontal)).concat((0,xt.A)(o)),"overlap".concat((0,xt.A)(o)),"default"!==t&&"color".concat((0,xt.A)(t))]};return(0,bt.A)(s,Wu,a)})(F),L=null!=(n=null!=(r=null==x?void 0:x.root)?r:h.Root)?n:Hu,z=null!=(o=null!=(i=null==x?void 0:x.badge)?i:h.Badge)?o:Gu,B=null!=(a=null==w?void 0:w.root)?a:p.root,U=null!=(s=null==w?void 0:w.badge)?s:p.badge,W=co({elementType:L,externalSlotProps:B,externalForwardedProps:S,additionalProps:{ref:t,as:d},ownerState:F,className:(0,vt.A)(null==B?void 0:B.className,O.root,u)}),V=co({elementType:z,externalSlotProps:U,ownerState:F,className:(0,vt.A)(O.badge,null==U?void 0:U.className)});return(0,_e.jsxs)(L,(0,Se.A)({},W,{children:[f,(0,_e.jsx)(z,(0,Se.A)({},V,{children:M}))]}))}));var Xu=n(5310),Yu=n(3471),Qu=n(4802),$u=n(3253);Math.pow(10,8);const Ju=6048e5,Zu=6e4,ed=36e5,td=43200,nd=Symbol.for("constructDateFrom");function rd(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&nd in e?e[nd](t):e instanceof Date?new e.constructor(t):new Date(t)}function od(e){return rd(e,Date.now())}const id={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ad(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const sd={date:ad({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ad({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ad({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ld={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function cd(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[o]||e.formattingValues[t]}else{const t=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function ud(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;const a=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(a))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(a)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}var dd;const hd={code:"en-US",formatDistance:(e,t,n)=>{let r;const o=id[e];return r="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:sd,formatRelative:(e,t,n,r)=>ld[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:cd({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:cd({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:cd({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:cd({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:cd({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(dd={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(dd.matchPattern);if(!n)return null;const r=n[0],o=e.match(dd.parsePattern);if(!o)return null;let i=dd.valueCallback?dd.valueCallback(o[0]):o[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:ud({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ud({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:ud({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ud({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ud({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let pd={};function fd(){return pd}function md(e,t){return rd(t||e,e)}function gd(e){const t=md(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function yd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=rd.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(o)}function vd(e,t){const n=+md(e)-+md(t);return n<0?-1:n>0?1:n}function bd(e,t,n){const[r,o]=yd(null===n||void 0===n?void 0:n.in,e,t);return 12*(r.getFullYear()-o.getFullYear())+(r.getMonth()-o.getMonth())}function xd(e,t){const n=md(e,null===t||void 0===t?void 0:t.in);return n.setHours(23,59,59,999),n}function wd(e,t){const n=md(e,null===t||void 0===t?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function kd(e,t){const n=md(e,null===t||void 0===t?void 0:t.in);return+xd(n,t)===+wd(n,t)}function Ad(e,t,n){const[r,o,i]=yd(null===n||void 0===n?void 0:n.in,e,e,t),a=vd(o,i),s=Math.abs(bd(o,i));if(s<1)return 0;1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-a*s);let l=vd(o,i)===-a;kd(r)&&1===s&&1===vd(r,i)&&(l=!1);const c=a*(s-+l);return 0===c?0:c}function Sd(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function Cd(e,t){return+md(e)-+md(t)}function Td(e,t,n){const r=Cd(e,t)/1e3;return Sd(null===n||void 0===n?void 0:n.roundingMethod)(r)}function Ed(e,t,n){var r,o;const i=fd(),a=null!==(r=null!==(o=null===n||void 0===n?void 0:n.locale)&&void 0!==o?o:i.locale)&&void 0!==r?r:hd,s=vd(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:null===n||void 0===n?void 0:n.addSuffix,comparison:s}),[c,u]=yd(null===n||void 0===n?void 0:n.in,...s>0?[t,e]:[e,t]),d=Td(u,c),h=(gd(u)-gd(c))/1e3,p=Math.round((d-h)/60);let f;if(p<2)return null!==n&&void 0!==n&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,l):d<10?a.formatDistance("lessThanXSeconds",10,l):d<20?a.formatDistance("lessThanXSeconds",20,l):d<40?a.formatDistance("halfAMinute",0,l):d<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):0===p?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",p,l);if(p<45)return a.formatDistance("xMinutes",p,l);if(p<90)return a.formatDistance("aboutXHours",1,l);if(p<1440){const e=Math.round(p/60);return a.formatDistance("aboutXHours",e,l)}if(p<2520)return a.formatDistance("xDays",1,l);if(p<td){const e=Math.round(p/1440);return a.formatDistance("xDays",e,l)}if(p<86400)return f=Math.round(p/td),a.formatDistance("aboutXMonths",f,l);if(f=Ad(u,c),f<12){const e=Math.round(p/td);return a.formatDistance("xMonths",e,l)}{const e=f%12,t=Math.trunc(f/12);return e<3?a.formatDistance("aboutXYears",t,l):e<9?a.formatDistance("overXYears",t,l):a.formatDistance("almostXYears",t+1,l)}}function Id(e,t){return Ed(e,od(e),t)}const _d=e=>{try{if(!e)return"Unknown date";const t=e.toDate?e.toDate():new Date(e);return isNaN(t.getTime())?(console.warn("Invalid timestamp:",e),"Invalid date"):Id(t,{addSuffix:!0})}catch(t){return console.error("Error formatting date:",t),"Date error"}},jd=new Set;function Nd(){J();const[e,t]=(0,r.useState)([]),[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),{currentUser:c}=ys();(0,r.useEffect)((()=>{if(!c)return void console.warn("No current user found. Skipping notification retrieval.");const{uid:e}=c;try{Promise.resolve().then(n.bind(n,1288)).then((r=>{let{db:o}=r;Promise.resolve().then(n.bind(n,6032)).then((n=>{let{collection:r,query:a,where:s,orderBy:l,onSnapshot:c,limit:u}=n;const d=c(a(r(o,"notifications"),s("userId","==",e),l("createdAt","desc"),u(50)),(n=>{if(n.empty)return console.log("No notifications found for user:",e),void t([]);const r=n.docs.map((e=>{const t=e.data();return(0,i.A)((0,i.A)({id:e.id},t),{},{formattedDate:_d(t.createdAt)})}));console.log("Fetched ".concat(r.length," notifications for user:"),e);const o=r.filter((e=>!0===e.showPopup&&!e.read&&!e.popupShown));if(o.length>0){console.log("Showing ".concat(o.length," popup notifications"));const e=new Set;o.forEach((t=>{m(t),e.add(t.id)})),t((t=>t.map((t=>e.has(t.id)?(0,i.A)((0,i.A)({},t),{},{popupShown:!0}):t))))}t(r)}),(e=>{switch(console.group("\ud83d\udea8 Notification Fetch Error"),console.error("Error fetching notifications:",e),console.error("Error Code:",e.code),console.error("Error Message:",e.message),e.code){case"failed-precondition":console.warn("\u26a0\ufe0f Composite index required. Please create the index in Firebase Console."),console.warn("Index URL: Firebase Console Firestore Indexes");break;case"permission-denied":console.error("Permission denied. Check Firestore security rules.");break;case"unavailable":console.warn("Firestore service is temporarily unavailable. Retrying...");break;default:console.error("Unexpected error in notification retrieval.")}console.groupEnd(),t([])}));return()=>d()})).catch((e=>{console.error("Error importing Firestore modules:",e)}))})).catch((e=>{console.error("Error importing Firebase service:",e)}))}catch(r){console.error("Error setting up notification retrieval:",r)}}),[c]);const u=()=>{a(null)},d=async e=>{if(c)try{const{db:r}=await Promise.resolve().then(n.bind(n,1288)),{doc:o,updateDoc:a}=await Promise.resolve().then(n.bind(n,6032)),s=o(r,"notifications",e);await a(s,{read:!0}),t((t=>t.map((t=>t.id===e?(0,i.A)((0,i.A)({},t),{},{read:!0}):t))))}catch(r){throw console.error("Error marking notification as read:",r),r}},h=async e=>{if(c)try{const{db:r}=await Promise.resolve().then(n.bind(n,1288)),{doc:o,deleteDoc:i}=await Promise.resolve().then(n.bind(n,6032)),a=o(r,"notifications",e);await i(a),t((t=>t.filter((t=>t.id!==e))))}catch(r){throw console.error("Error deleting notification:",r),r}},p=async()=>{if(c&&0!==e.length)try{const{db:r}=await Promise.resolve().then(n.bind(n,1288)),{writeBatch:o,doc:i}=await Promise.resolve().then(n.bind(n,6032)),a=o(r);e.forEach((e=>{const t=i(r,"notifications",e.id);a.delete(t)})),await a.commit(),t([])}catch(r){throw console.error("Error deleting all notifications:",r),r}},f=async()=>{if(!c)return;const r=e.filter((e=>!e.read));if(0!==r.length)try{const{db:e}=await Promise.resolve().then(n.bind(n,1288)),{writeBatch:o,doc:a}=await Promise.resolve().then(n.bind(n,6032)),s=o(e);r.forEach((t=>{const n=a(e,"notifications",t.id);s.update(n,{read:!0})})),await s.commit(),t((e=>e.map((e=>(0,i.A)((0,i.A)({},e),{},{read:!0})))))}catch(o){throw console.error("Error marking all notifications as read:",o),o}},m=e=>{try{var t;if(!("Notification"in window))return void console.warn("Browser notifications not supported");if("granted"!==Notification.permission)return void console.warn("Notification permission not granted");const n="".concat(e.id,"-").concat(e.title);if(jd.has(n))return void console.log("Skipping duplicate browser notification:",e.title);jd.add(n),console.log("Showing popup notification:",e);const r=e.title||"New Notification",o={body:e.body||"You have a new notification",icon:"/logo192.png",badge:"/logo192.png",tag:e.id||"notification",data:(0,i.A)((0,i.A)({},e.data||{}),{},{style:(null===(t=e.data)||void 0===t?void 0:t.style)||{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"}}),silent:!1,requireInteraction:!0,vibrate:[200,100,200]},a=new Notification(r,o);a.onclick=()=>{var t,n;console.log("Browser notification clicked:",e),a.close(),window.focus(),d(e.id).catch((e=>{console.error("Error marking notification as read:",e)}));const r=(null===(t=e.data)||void 0===t?void 0:t.url)||(null!==(n=e.data)&&void 0!==n&&n.gameId?"/games/".concat(e.data.gameId):null)||(e.gameId?"/games/".concat(e.gameId):null);r&&(window.location.href=r)}}catch(n){console.error("Error showing browser notification:",n)}},g=e.filter((e=>!e.read)).length;return console.log("Unread notifications count:",g),(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)(nr,{color:"inherit",onClick:e=>{a(e.currentTarget)},"aria-label":"".concat(g," new notifications"),children:(0,_e.jsx)(Ku,{badgeContent:g,color:"error",children:(0,_e.jsx)(Xu.A,{})})}),(0,_e.jsxs)(Go,{anchorEl:o,open:Boolean(o),onClose:u,PaperProps:{style:{maxHeight:400,width:"300px"}},children:[e.length>0&&[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",padding:"8px 16px",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,_e.jsx)(Ka,{title:"Mark all as read",children:(0,_e.jsx)(nr,{size:"small",onClick:async()=>{if(0!==e.filter((e=>!e.read)).length)try{await f(),console.log("All notifications marked as read")}catch(t){console.error("Error marking all notifications as read:",t)}},disabled:e.every((e=>e.read)),children:(0,_e.jsx)($u.A,{fontSize:"small"})})}),(0,_e.jsx)(Ka,{title:"Delete all notifications",children:(0,_e.jsx)(nr,{size:"small",onClick:async()=>{if(0!==e.length)try{await p(),console.log("All notifications deleted")}catch(t){console.error("Error deleting all notifications:",t)}},children:(0,_e.jsx)(Yu.A,{fontSize:"small"})})})]},"action-buttons")],0===e.length?(0,_e.jsx)(ri,{children:(0,_e.jsx)(yn,{children:"No notifications"})}):e.map((e=>{var t;return(0,_e.jsxs)(ri,{onClick:()=>(async e=>{var t,n;if(console.log("Notification clicked (full):",JSON.stringify(e,null,2)),!e.read)try{await d(e.id)}catch(o){console.error("Error marking notification as read:",o)}const r=e.link||(null===(t=e.data)||void 0===t?void 0:t.link)||(null!==(n=e.data)&&void 0!==n&&n.gameId?"/games/".concat(e.data.gameId):null);if(console.log("Extracted link:",r),r)try{window.location.href=r,u()}catch(o){console.error("Navigation error:",o)}else console.warn("No link found for notification")})(e),sx:{backgroundColor:e.read?"inherit":"action.hover",display:"block",whiteSpace:"pre-wrap",padding:"12px",position:"relative"},children:[(0,_e.jsx)(yn,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold",pr:4},children:e.title}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",sx:{whiteSpace:"pre-wrap",marginTop:"4px",marginBottom:"4px"},children:e.body}),(0,_e.jsx)(yn,{variant:"caption",color:"text.secondary",children:null!==(t=e.createdAt)&&void 0!==t&&t.toDate?_d(e.createdAt):"Just now"}),(0,_e.jsx)(nr,{size:"small",onClick:t=>(async(e,t)=>{e.stopPropagation();try{await h(t),console.log("Notification deleted:",t)}catch(n){console.error("Error deleting notification:",n)}})(t,e.id),sx:{position:"absolute",right:8,top:8,padding:"4px"},children:(0,_e.jsx)(Qu.A,{fontSize:"small"})})]},e.id)}))]}),(0,_e.jsx)(ul,{open:s,message:"Would you like to receive notifications for new games?",action:(0,_e.jsx)(pi,{color:"primary",size:"small",onClick:()=>l(!1),children:"Enable"})})]})}const Rd=(0,Xa.A)((0,_e.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"}),"Brightness7"),Dd=(0,Xa.A)((0,_e.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"}),"Brightness4");function Pd(){var e;const[t,n]=(0,r.useState)(null),[o,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),{currentUser:l,isAdmin:c}=ys(),{themeMode:u,toggleTheme:d}=Rb(),h=J(),p=()=>{n(null)},f=()=>{i(null)},m=[{text:"Games",icon:(0,_e.jsx)(as,{}),path:"/",show:!0},{text:"Tournaments",icon:(0,_e.jsx)(ss,{}),path:"/tournaments",show:!0},{text:"Notifications Settings",icon:(0,_e.jsx)(ls,{}),path:"/notifications",show:!0},{text:"Admin",icon:(0,_e.jsx)(cs,{}),path:"/admin",show:c}];return(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)($t,{position:"static",sx:{background:"dark"===u?"linear-gradient(45deg, #2A2A2A 30%, #333333 90%)":"linear-gradient(45deg, #1a237e 30%, #283593 90%)",boxShadow:"dark"===u?"0 4px 8px 2px rgba(0, 0, 0, 0.5)":"0 3px 5px 2px rgba(33, 33, 33, .3)",borderBottom:"dark"===u?"1px solid #444444":"none"},children:(0,_e.jsx)(sn,{maxWidth:"xl",sx:{px:{xs:1,sm:2}},children:(0,_e.jsxs)(dn,{disableGutters:!0,sx:{minHeight:{xs:"56px",sm:"64px"}},children:[(0,_e.jsx)(us,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,_e.jsx)(yn,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"dark"===u?"#FFFFFF":"inherit",textDecoration:"none",flexGrow:1,maxWidth:"350px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"EPPS PADELBOLT"}),(0,_e.jsxs)(gt,{sx:{display:{xs:"flex",md:"none"},marginLeft:"auto",marginRight:.5,flexShrink:0},children:[(0,_e.jsx)(nr,{size:"medium","aria-label":"menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{n(e.currentTarget)},color:"inherit",sx:{backgroundColor:"dark"===u?"rgba(120, 144, 240, 0.1)":"transparent",border:"dark"===u?"1px solid rgba(120, 144, 240, 0.2)":"none","&:hover":{backgroundColor:"dark"===u?"rgba(120, 144, 240, 0.2)":"rgba(255, 255, 255, 0.1)"}},children:(0,_e.jsx)(ds,{})}),(0,_e.jsx)(Go,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(t),onClose:p,sx:{display:{xs:"block",md:"none"},"& .MuiPaper-root":{backgroundColor:"dark"===u?"#222222":"white",borderRadius:2,mt:1,minWidth:"200px",boxShadow:"dark"===u?"0 4px 20px rgba(0,0,0,0.5)":"0 2px 10px rgba(0,0,0,0.1)",border:"dark"===u?"1px solid #444444":"none"}},children:m.filter((e=>e.show)).map((e=>(0,_e.jsx)(ri,{onClick:()=>{p(),h(e.path)},sx:{backgroundColor:"dark"===u?"#2A2A2A":"inherit","&:hover":{backgroundColor:"dark"===u?"#3A3A3A":"rgba(0, 0, 0, 0.04)"},my:.8,mx:.5,borderRadius:1,padding:"10px 16px",borderLeft:"dark"===u?"3px solid #7890F0":"none"},children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,_e.jsx)(gt,{sx:{color:"dark"===u?"#7890F0":"inherit",display:"flex",minWidth:"24px"},children:e.icon}),(0,_e.jsx)(yn,{sx:{ml:2,color:"dark"===u?"#FFFFFF":"inherit",fontWeight:"dark"===u?600:400,fontSize:"0.95rem",flexGrow:1},children:e.text})]})},e.text)))})]}),(0,_e.jsxs)(gt,{sx:{display:{xs:"flex",md:"none"},alignItems:"center",flexGrow:0,maxWidth:{xs:"30vw",sm:"40vw"}},children:[(0,_e.jsx)(us,{sx:{mr:.5,fontSize:{xs:"1.3rem",sm:"1.5rem"}}}),(0,_e.jsx)(yn,{variant:"h6",component:"a",href:"/",sx:{fontFamily:"monospace",fontWeight:700,letterSpacing:{xs:"0.05rem",sm:".1rem"},color:"dark"===u?"#FFFFFF":"inherit",textDecoration:"none",fontSize:{xs:"0.75rem",sm:"0.85rem"},lineHeight:1.1,textAlign:"left"},children:(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column"},children:[(0,_e.jsx)(gt,{sx:{fontWeight:800},children:"EPPS"}),(0,_e.jsx)(gt,{children:"PADELBOLT"})]})})]}),(0,_e.jsx)(gt,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:m.filter((e=>e.show)).map((e=>(0,_e.jsx)(pi,{onClick:()=>{p(),h(e.path)},sx:{my:2,mx:1,color:"#FFFFFF",display:"flex",alignItems:"center",borderRadius:"20px",px:3,fontWeight:600,backgroundColor:"dark"===u?"rgba(120, 144, 240, 0.15)":"transparent",border:"dark"===u?"1px solid rgba(120, 144, 240, 0.3)":"none",boxShadow:"dark"===u?"0 2px 4px rgba(0,0,0,0.2)":"none","&:hover":{backgroundColor:"dark"===u?"rgba(120, 144, 240, 0.25)":"rgba(255, 255, 255, 0.1)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"}},startIcon:e.icon,children:e.text},e.text)))}),l&&(0,_e.jsx)(gt,{sx:{mx:{xs:.5,sm:1},flexShrink:0},children:(0,_e.jsx)(Nd,{})}),(0,_e.jsx)(Ka,{title:"Switch to ".concat("dark"===u?"light":"dark"," mode"),children:(0,_e.jsx)(nr,{onClick:d,color:"inherit",sx:{ml:1,bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},transition:"all 0.3s",borderRadius:"50%",width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center"},children:"dark"===u?(0,_e.jsx)(Rd,{}):(0,_e.jsx)(Dd,{})})}),(0,_e.jsxs)(gt,{sx:{flexGrow:0,display:"flex",alignItems:"center",gap:{xs:.5,sm:1},flexShrink:0,ml:{xs:.5,sm:1}},children:[l&&(0,_e.jsx)(gt,{sx:{px:{xs:1,sm:2},py:.5,borderRadius:"999px",background:"linear-gradient(90deg, #43ea7b 0%, #19c37d 100%)",color:"#fff",fontWeight:700,fontSize:{xs:"0.75rem",sm:"0.9rem"},boxShadow:"0 2px 8px 0 rgba(25,195,125,0.15)",letterSpacing:{xs:"0.02em",sm:"0.05em"},border:"2px solid #19c37d",maxWidth:{xs:80,sm:180},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mr:{xs:.5,sm:1},display:{xs:"block",md:"block"}},"data-testid":"navbar-username-badge",children:l.firstName?l.firstName:(null===(e=l.email)||void 0===e?void 0:e.split("@")[0])||"User"}),(0,_e.jsx)(Ka,{title:"Open settings",children:(0,_e.jsx)(nr,{onClick:e=>{i(e.currentTarget)},sx:{p:0,ml:{xs:0,sm:.5},flexShrink:0},children:(0,_e.jsx)(ts,{src:(null===l||void 0===l?void 0:l.photoURL)||void 0,sx:{bgcolor:"secondary.main",width:{xs:32,sm:40},height:{xs:32,sm:40},border:"2px solid white"},children:null!==l&&void 0!==l&&l.photoURL||null===l||void 0===l||!l.firstName||null===l||void 0===l||!l.lastName?null!==l&&void 0!==l&&l.photoURL?null:(0,_e.jsx)(hs,{sx:{fontSize:{xs:16,sm:24}}}):"".concat(l.firstName[0]).concat(l.lastName[0]).toUpperCase()})})}),(0,_e.jsxs)(Go,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:f,PaperProps:{elevation:3,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1}}},children:[(0,_e.jsxs)(ri,{onClick:()=>{s(!0),f()},children:[(0,_e.jsx)(hs,{sx:{mr:1,fontSize:20}}),(0,_e.jsx)(yn,{children:"Edit Profile"})]}),(0,_e.jsx)(is,{}),(0,_e.jsxs)(ri,{onClick:async()=>{try{f(),await(0,fs.signOut)(),h("/login",{replace:!0})}catch(e){console.error("Failed to log out:",e)}},sx:{color:"error.main","&:hover":{backgroundColor:"error.light",color:"error.contrastText"}},children:[(0,_e.jsx)(ps,{sx:{mr:1,fontSize:20}}),(0,_e.jsx)(yn,{children:"Logout"})]})]})]})]})})}),(0,_e.jsx)(Bu,{open:a,onClose:()=>s(!1),onProfileUpdated:async()=>{"undefined"!==typeof window&&window.location.reload()}})]})}const Md=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Fd(e,t,n){var r;const o=function(e,t,n){const r=t.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),i=(0,br.A)(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const e=i.getComputedStyle(t);a=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,l=0;if(a&&"none"!==a&&"string"===typeof a){const e=a.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(o?o.right+s-r.left:i.innerWidth+s-r.left,"px)"):"right"===e?"translateX(-".concat(o?r.right-o.left-s:r.left+r.width-s,"px)"):"up"===e?"translateY(".concat(o?o.bottom+l-r.top:i.innerHeight+l-r.top,"px)"):"translateY(-".concat(o?r.top-o.top+r.height-l:r.top+r.height-l,"px)")}(e,t,"function"===typeof(r=n)?r():r);o&&(t.style.webkitTransform=o,t.style.transform=o)}const Od=r.forwardRef((function(e,t){const n=jr(),o={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:d=o,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:y,onExiting:v,style:b,timeout:x=i,TransitionComponent:w=_r}=e,k=(0,Ce.A)(e,Md),A=r.useRef(null),S=(0,vn.A)(l.ref,A,t),C=e=>t=>{e&&(void 0===t?e(A.current):e(A.current,t))},T=C(((e,t)=>{Fd(u,e,c),Nr(e),p&&p(e,t)})),E=C(((e,t)=>{const r=Rr({timeout:x,style:b,easing:d},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,Se.A)({},r)),e.style.transition=n.transitions.create("transform",(0,Se.A)({},r)),e.style.webkitTransform="none",e.style.transform="none",m&&m(e,t)})),I=C(f),_=C(v),j=C((e=>{const t=Rr({timeout:x,style:b,easing:d},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),Fd(u,e,c),g&&g(e)})),N=C((e=>{e.style.webkitTransition="",e.style.transition="",y&&y(e)})),R=r.useCallback((()=>{A.current&&Fd(u,A.current,c)}),[u,c]);return r.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=(0,vr.A)((()=>{A.current&&Fd(u,A.current,c)})),t=(0,br.A)(A.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),r.useEffect((()=>{h||R()}),[h,R]),(0,_e.jsx)(w,(0,Se.A)({nodeRef:A,onEnter:T,onEntered:I,onEntering:E,onExit:j,onExited:N,onExiting:_,addEndListener:e=>{a&&a(A.current,e)},appear:s,in:h,timeout:x},k,{children:(e,t)=>r.cloneElement(l,(0,Se.A)({ref:S,style:(0,Se.A)({visibility:"exited"!==e||h?void 0:"hidden"},b,l.props.style)},t))}))})),Ld=(0,Xa.A)((0,_e.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google"),zd=e=>{let{size:t=88}=e;return(0,_e.jsx)(gt,{sx:{width:{xs:"90vw",sm:t,md:t},maxWidth:{xs:"90vw",sm:300,md:300},height:"auto",display:"flex",alignItems:"center",justifyContent:"center",mb:2,mx:"auto"},"aria-label":"EPPS Logo",children:(0,_e.jsx)("img",{src:"/web-app-manifest-512x512.png",alt:"EPPS Logo",className:"splash-logo",style:{width:"50%",height:"auto",objectFit:"contain",borderRadius:16,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.13)"}})})};function Bd(){const e=J(),{currentUser:t}=ys(),[n,o]=(0,r.useState)(""),[i,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1);r.useEffect((()=>{t&&(l(!0),setTimeout((()=>{e("/games")}),500))}),[t,e]);const c=jr();return(0,_e.jsx)(bo,{in:!s,timeout:600,children:(0,_e.jsxs)(gt,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(145deg, #f5f5f5 0%, #e8f5fe 100%)",py:{xs:4,sm:6,md:8},position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"radial-gradient(circle at 25px 25px, rgba(0, 0, 0, 0.02) 2%, transparent 0%), radial-gradient(circle at 75px 75px, rgba(0, 0, 0, 0.02) 2%, transparent 0%)",backgroundSize:"100px 100px",opacity:.5,zIndex:1}},children:[(0,_e.jsx)(sn,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:{xs:2,sm:3}},children:(0,_e.jsx)(Od,{direction:"down",in:!s,timeout:600,children:(0,_e.jsxs)(Gt,{elevation:2,sx:{p:{xs:4,sm:5},width:"100%",maxWidth:"480px",borderRadius:3,background:"#ffffff",display:"flex",flexDirection:"column",alignItems:"center",position:"relative",overflow:"hidden",border:"1px solid rgba(0, 0, 0, 0.05)",zIndex:2,"&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"4px",background:"linear-gradient(90deg, #1976d2, #42a5f5)"}},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:4,mt:1,textAlign:"center"},children:[(0,_e.jsx)(zd,{size:88}),(0,_e.jsx)(yn,{variant:"h4",component:"h1",sx:{fontWeight:600,color:c.palette.text.primary,letterSpacing:"-0.5px",background:"linear-gradient(135deg, ".concat(c.palette.primary.dark,", ").concat(c.palette.primary.main,")"),WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",ml:0,pr:0}})]}),(0,_e.jsxs)(gt,{sx:{width:"100%",mb:4},children:[(0,_e.jsxs)(gt,{sx:{position:"relative",mb:4,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},children:[(0,_e.jsx)(gt,{sx:{position:"absolute",width:"120%",height:"100%",top:"10px",left:"50%",transform:"translateX(-50%)",background:"linear-gradient(90deg, \n                      ".concat((0,Ut.X4)(c.palette.primary.light,0),", \n                      ").concat((0,Ut.X4)(c.palette.primary.light,.1),", \n                      ").concat((0,Ut.X4)(c.palette.primary.light,0),")"),zIndex:0,borderRadius:"50%",filter:"blur(8px)"}}),(0,_e.jsx)(gt,{sx:{position:"absolute",width:"40px",height:"40px",top:"5px",left:"10%",background:"linear-gradient(135deg, #B5E61D 0%, #7AAD03 100%)",borderRadius:"50%",opacity:.7,zIndex:0,boxShadow:"0 0 10px rgba(181, 230, 29, 0.5)"}}),(0,_e.jsx)(gt,{sx:{position:"absolute",width:"25px",height:"25px",bottom:"10px",right:"15%",background:"linear-gradient(135deg, #B5E61D 0%, #7AAD03 100%)",borderRadius:"50%",opacity:.5,zIndex:0,boxShadow:"0 0 8px rgba(181, 230, 29, 0.4)"}}),(0,_e.jsx)(yn,{variant:"h3",align:"center",sx:{fontWeight:900,letterSpacing:"1px",lineHeight:1.2,position:"relative",zIndex:1,textTransform:"uppercase",padding:"15px 20px",background:"linear-gradient(135deg, \n                        #2196F3 0%, \n                        #64B5F6 25%, \n                        #1976D2 50%, \n                        #42A5F5 75%, \n                        #0D47A1 100%)",backgroundSize:"200% auto",color:"transparent",WebkitBackgroundClip:"text",backgroundClip:"text",textShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",animation:"shine 3s linear infinite","@keyframes shine":{to:{backgroundPosition:"200% center"}},"&::before":{content:'"EPPS Padel Champions"',position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:-1,color:(0,Ut.X4)(c.palette.primary.main,.1),textShadow:"none",padding:"15px 20px",transform:"translateY(2px) translateX(2px)",filter:"blur(4px)"}},children:"EPPS Padel Champions"}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",mt:1,position:"relative",zIndex:1},children:[(0,_e.jsx)(gt,{sx:{width:"30%",height:"3px",background:"linear-gradient(90deg, transparent, ".concat(c.palette.primary.main,")"),borderRadius:"2px"}}),(0,_e.jsx)(gt,{sx:{mx:1,display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"50%",background:c.palette.primary.main}}),(0,_e.jsx)(gt,{sx:{width:"30%",height:"3px",background:"linear-gradient(90deg, ".concat(c.palette.primary.main,", transparent)"),borderRadius:"2px"}})]})]}),(0,_e.jsx)(yn,{variant:"body1",align:"center",sx:{color:c.palette.text.secondary,mb:2,px:1,lineHeight:1.5,fontWeight:500},children:"Join EPPS ultimate padel experience"})]}),(0,_e.jsx)(pi,{variant:"contained",startIcon:i?(0,_e.jsx)(Bt,{size:20,color:"inherit"}):(0,_e.jsx)(Ld,{}),onClick:async()=>{try{o(""),a(!0),await(0,fs.signInWithGoogle)(),l(!0),setTimeout((()=>{e("/games")}),500)}catch(n){console.error("Error signing in:",n),o(n.message),a(!1)}},disabled:i||s,sx:{py:1.8,px:5,borderRadius:6,textTransform:"none",fontSize:"1.05rem",fontWeight:500,backgroundColor:c.palette.primary.main,boxShadow:"0 3px 10px rgba(0, 0, 0, 0.12)",transition:"all 0.25s ease","&:hover":{backgroundColor:c.palette.primary.dark,boxShadow:"0 6px 15px rgba(0, 0, 0, 0.18)",transform:"translateY(-2px)"},"&:active":{transform:"translateY(1px)"}},children:i?"Signing in...":"Sign in with Google"}),(0,_e.jsx)(gt,{sx:{mt:4,width:"100%"},children:(0,_e.jsx)(yn,{variant:"body2",align:"center",sx:{color:c.palette.text.secondary,fontSize:"0.85rem"},children:"By signing in, you agree to our Terms of Service and Privacy Policy"})}),(0,_e.jsx)(yn,{variant:"caption",sx:{mt:3,color:c.palette.primary.main,opacity:.9,fontWeight:500,fontSize:"0.75rem",letterSpacing:"0.5px",padding:"2px 8px",borderRadius:"4px",backgroundColor:(0,Ut.X4)(c.palette.primary.main,.1)},children:"Version 2 Beta"})]})})}),(0,_e.jsx)(ul,{open:!!n,autoHideDuration:6e3,onClose:()=>o(""),anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:Od,children:(0,_e.jsx)($s,{onClose:()=>o(""),severity:"error",variant:"filled",sx:{width:"100%",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:1},children:n})})]})})}let Ud;function Wd(){if(Ud)return Ud;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Ud="reverse",e.scrollLeft>0?Ud="default":(e.scrollLeft=1,0===e.scrollLeft&&(Ud="negative")),document.body.removeChild(e),Ud}function Vd(e,t){const n=e.scrollLeft;if("rtl"!==t)return n;switch(Wd()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function qd(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const Hd=["onChange"],Gd={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const Kd=(0,Xa.A)((0,_e.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Xd=(0,Xa.A)((0,_e.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Yd(e){return(0,At.Ay)("MuiTabScrollButton",e)}const Qd=(0,kt.A)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),$d=["className","slots","slotProps","direction","orientation","disabled"],Jd=(0,wt.Ay)($n,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({width:40,flexShrink:0,opacity:.8,["&.".concat(Qd.disabled)]:{opacity:0}},"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:"rotate(".concat(t.isRtl?-90:90,"deg)")}})})),Zd=r.forwardRef((function(e,t){var n,r;const o=(0,qe.A)({props:e,name:"MuiTabScrollButton"}),{className:i,slots:a={},slotProps:s={},direction:l}=o,c=(0,Ce.A)(o,$d),u="rtl"===jr().direction,d=(0,Se.A)({isRtl:u},o),h=(e=>{const{classes:t,orientation:n,disabled:r}=e,o={root:["root",n,r&&"disabled"]};return(0,bt.A)(o,Yd,t)})(d),p=null!=(n=a.StartScrollButtonIcon)?n:Kd,f=null!=(r=a.EndScrollButtonIcon)?r:Xd,m=co({elementType:p,externalSlotProps:s.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d}),g=co({elementType:f,externalSlotProps:s.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:d});return(0,_e.jsx)(Jd,(0,Se.A)({component:"div",className:(0,vt.A)(h.root,i),ref:t,role:null,ownerState:d,tabIndex:null},c,{children:"left"===l?(0,_e.jsx)(p,(0,Se.A)({},m)):(0,_e.jsx)(f,(0,Se.A)({},g))}))}));function eh(e){return(0,At.Ay)("MuiTabs",e)}const th=(0,kt.A)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),nh=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],rh=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,oh=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ih=(e,t,n)=>{let r=!1,o=n(e,t);for(;o;){if(o===e.firstChild){if(r)return;r=!0}const t=o.disabled||"true"===o.getAttribute("aria-disabled");if(o.hasAttribute("tabindex")&&!t)return void o.focus();o=n(e,o)}},ah=(0,wt.Ay)("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(th.scrollButtons)]:t.scrollButtons},{["& .".concat(th.scrollButtons)]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})((e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{["& .".concat(th.scrollButtons)]:{[n.breakpoints.down("sm")]:{display:"none"}}})})),sh=(0,wt.Ay)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),lh=(0,wt.Ay)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),ch=(0,wt.Ay)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})((e=>{let{ownerState:t,theme:n}=e;return(0,Se.A)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),uh=(0,wt.Ay)((function(e){const{onChange:t}=e,n=(0,Ce.A)(e,Hd),o=r.useRef(),i=r.useRef(null),a=()=>{o.current=i.current.offsetHeight-i.current.clientHeight};return(0,dr.A)((()=>{const e=(0,vr.A)((()=>{const e=o.current;a(),e!==o.current&&t(o.current)})),n=(0,br.A)(i.current);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}}),[t]),r.useEffect((()=>{a(),t(o.current)}),[t]),(0,_e.jsx)("div",(0,Se.A)({style:Gd,ref:i},n))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),dh={};const hh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTabs"}),o=jr(),i="rtl"===o.direction,{"aria-label":a,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:y=Zd,scrollButtons:v="auto",selectionFollowsFocus:b,slots:x={},slotProps:w={},TabIndicatorProps:k={},TabScrollButtonProps:A={},textColor:S="primary",value:C,variant:T="standard",visibleScrollbar:E=!1}=n,I=(0,Ce.A)(n,nh),_="scrollable"===T,j="vertical"===g,N=j?"scrollTop":"scrollLeft",R=j?"top":"left",D=j?"bottom":"right",P=j?"clientHeight":"clientWidth",M=j?"height":"width",F=(0,Se.A)({},n,{component:h,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:j,scrollButtons:v,textColor:S,variant:T,visibleScrollbar:E,fixed:!_,hideScrollbar:_&&!E,scrollableX:_&&!j,scrollableY:_&&j,centered:c&&!_,scrollButtonsHideMobile:!p}),O=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:o,scrollableY:i,centered:a,scrollButtonsHideMobile:s,classes:l}=e,c={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",o&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[o&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,bt.A)(c,eh,l)})(F),L=co({elementType:x.StartScrollButtonIcon,externalSlotProps:w.startScrollButtonIcon,ownerState:F}),z=co({elementType:x.EndScrollButtonIcon,externalSlotProps:w.endScrollButtonIcon,ownerState:F});const[B,U]=r.useState(!1),[W,V]=r.useState(dh),[q,H]=r.useState({start:!1,end:!1}),[G,K]=r.useState({overflow:"hidden",scrollbarWidth:0}),X=new Map,Y=r.useRef(null),Q=r.useRef(null),$=()=>{const e=Y.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollLeftNormalized:Vd(e,o.direction),scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==C){const e=Q.current.children;if(e.length>0){const t=e[X.get(C)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},J=(0,bn.A)((()=>{const{tabsMeta:e,tabMeta:t}=$();let n,r=0;if(j)n="top",t&&e&&(r=t.top-e.top+e.scrollTop);else if(n=i?"right":"left",t&&e){const o=i?e.scrollLeftNormalized+e.clientWidth-e.scrollWidth:e.scrollLeft;r=(i?-1:1)*(t[n]-e[n]+o)}const o={[n]:r,[M]:t?t[M]:0};if(isNaN(W[n])||isNaN(W[M]))V(o);else{const e=Math.abs(W[n]-o[n]),t=Math.abs(W[M]-o[M]);(e>=1||t>=1)&&V(o)}})),Z=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:i=qd,duration:a=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=r=>{if(c)return void o(new Error("Animation cancelled"));null===s&&(s=r);const u=Math.min(1,(r-s)/a);t[e]=i(u)*(n-l)+l,u>=1?requestAnimationFrame((()=>{o(null)})):requestAnimationFrame(d)};l===n?o(new Error("Element already at target position")):requestAnimationFrame(d)}(N,Y.current,e,{duration:o.transitions.duration.standard}):Y.current[N]=e},ee=e=>{let t=Y.current[N];j?t+=e:(t+=e*(i?-1:1),t*=i&&"reverse"===Wd()?-1:1),Z(t)},te=()=>{const e=Y.current[P];let t=0;const n=Array.from(Q.current.children);for(let r=0;r<n.length;r+=1){const o=n[r];if(t+o[P]>e){0===r&&(t=e);break}t+=o[P]}return t},ne=()=>{ee(-1*te())},re=()=>{ee(te())},oe=r.useCallback((e=>{K({overflow:null,scrollbarWidth:e})}),[]),ie=(0,bn.A)((e=>{const{tabsMeta:t,tabMeta:n}=$();if(n&&t)if(n[R]<t[R]){const r=t[N]+(n[R]-t[R]);Z(r,{animation:e})}else if(n[D]>t[D]){const r=t[N]+(n[D]-t[D]);Z(r,{animation:e})}})),ae=(0,bn.A)((()=>{if(_&&!1!==v){const{scrollTop:e,scrollHeight:t,clientHeight:n,scrollWidth:r,clientWidth:a}=Y.current;let s,l;if(j)s=e>1,l=e<t-n-1;else{const e=Vd(Y.current,o.direction);s=i?e<r-a-1:e>1,l=i?e>1:e<r-a-1}s===q.start&&l===q.end||H({start:s,end:l})}}));r.useEffect((()=>{const e=(0,vr.A)((()=>{Y.current&&(J(),ae())})),t=(0,br.A)(Y.current);let n;return t.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),Array.from(Q.current.children).forEach((e=>{n.observe(e)}))),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),[J,ae]);const se=r.useMemo((()=>(0,vr.A)((()=>{ae()}))),[ae]);r.useEffect((()=>()=>{se.clear()}),[se]),r.useEffect((()=>{U(!0)}),[]),r.useEffect((()=>{J(),ae()})),r.useEffect((()=>{ie(dh!==W)}),[ie,W]),r.useImperativeHandle(l,(()=>({updateIndicator:J,updateScrollButtons:ae})),[J,ae]);const le=(0,_e.jsx)(ch,(0,Se.A)({},k,{className:(0,vt.A)(O.indicator,k.className),ownerState:F,style:(0,Se.A)({},W,k.style)}));let ce=0;const ue=r.Children.map(u,(e=>{if(!r.isValidElement(e))return null;const t=void 0===e.props.value?ce:e.props.value;X.set(t,ce);const n=t===C;return ce+=1,r.cloneElement(e,(0,Se.A)({fullWidth:"fullWidth"===T,indicator:n&&!B&&le,selected:n,selectionFollowsFocus:b,onChange:m,textColor:S,value:t},1!==ce||!1!==C||e.props.tabIndex?{}:{tabIndex:0}))})),de=(()=>{const e={};e.scrollbarSizeListener=_?(0,_e.jsx)(uh,{onChange:oe,className:(0,vt.A)(O.scrollableX,O.hideScrollbar)}):null;const t=q.start||q.end,n=_&&("auto"===v&&t||!0===v);return e.scrollButtonStart=n?(0,_e.jsx)(y,(0,Se.A)({slots:{StartScrollButtonIcon:x.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:L},orientation:g,direction:i?"right":"left",onClick:ne,disabled:!q.start},A,{className:(0,vt.A)(O.scrollButtons,A.className)})):null,e.scrollButtonEnd=n?(0,_e.jsx)(y,(0,Se.A)({slots:{EndScrollButtonIcon:x.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:z},orientation:g,direction:i?"left":"right",onClick:re,disabled:!q.end},A,{className:(0,vt.A)(O.scrollButtons,A.className)})):null,e})();return(0,_e.jsxs)(ah,(0,Se.A)({className:(0,vt.A)(O.root,d),ownerState:F,ref:t,as:h},I,{children:[de.scrollButtonStart,de.scrollbarSizeListener,(0,_e.jsxs)(sh,{className:O.scroller,ownerState:F,style:{overflow:G.overflow,[j?"margin".concat(i?"Left":"Right"):"marginBottom"]:E?void 0:-G.scrollbarWidth},ref:Y,onScroll:se,children:[(0,_e.jsx)(lh,{"aria-label":a,"aria-labelledby":s,"aria-orientation":"vertical"===g?"vertical":null,className:O.flexContainer,ownerState:F,onKeyDown:e=>{const t=Q.current,n=(0,rr.A)(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",o="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&i&&(r="ArrowRight",o="ArrowLeft"),e.key){case r:e.preventDefault(),ih(t,n,oh);break;case o:e.preventDefault(),ih(t,n,rh);break;case"Home":e.preventDefault(),ih(t,null,rh);break;case"End":e.preventDefault(),ih(t,null,oh)}},ref:Q,role:"tablist",children:ue}),B&&le]}),de.scrollButtonEnd]}))}));function ph(e){return(0,At.Ay)("MuiTab",e)}const fh=(0,kt.A)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),mh=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],gh=(0,wt.Ay)($n,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat((0,xt.A)(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},n.label&&{flexDirection:"top"===n.iconPosition||"bottom"===n.iconPosition?"column":"row"},{lineHeight:1.25},n.icon&&n.label&&{minHeight:72,paddingTop:9,paddingBottom:9,["& > .".concat(fh.iconWrapper)]:(0,Se.A)({},"top"===n.iconPosition&&{marginBottom:6},"bottom"===n.iconPosition&&{marginTop:6},"start"===n.iconPosition&&{marginRight:t.spacing(1)},"end"===n.iconPosition&&{marginLeft:t.spacing(1)})},"inherit"===n.textColor&&{color:"inherit",opacity:.6,["&.".concat(fh.selected)]:{opacity:1},["&.".concat(fh.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"primary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,["&.".concat(fh.selected)]:{color:(t.vars||t).palette.primary.main},["&.".concat(fh.disabled)]:{color:(t.vars||t).palette.text.disabled}},"secondary"===n.textColor&&{color:(t.vars||t).palette.text.secondary,["&.".concat(fh.selected)]:{color:(t.vars||t).palette.secondary.main},["&.".concat(fh.disabled)]:{color:(t.vars||t).palette.text.disabled}},n.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},n.wrapped&&{fontSize:t.typography.pxToRem(12)})})),yh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTab"}),{className:o,disabled:i=!1,disableFocusRipple:a=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:y="inherit",value:v,wrapped:b=!1}=n,x=(0,Ce.A)(n,mh),w=(0,Se.A)({},n,{disabled:i,disableFocusRipple:a,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:s,textColor:y,wrapped:b}),k=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:o,icon:i,label:a,selected:s,disabled:l}=e,c={root:["root",i&&a&&"labelIcon","textColor".concat((0,xt.A)(n)),r&&"fullWidth",o&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,bt.A)(c,ph,t)})(w),A=l&&d&&r.isValidElement(l)?r.cloneElement(l,{className:(0,vt.A)(k.iconWrapper,l.props.className)}):l;return(0,_e.jsxs)(gh,(0,Se.A)({focusRipple:!a,className:(0,vt.A)(k.root,o),ref:t,role:"tab","aria-selected":m,disabled:i,onClick:e=>{!m&&h&&h(e,v),p&&p(e)},onFocus:e=>{g&&!m&&h&&h(e,v),f&&f(e)},ownerState:w,tabIndex:m?0:-1},x,{children:["top"===c||"start"===c?(0,_e.jsxs)(r.Fragment,{children:[A,d]}):(0,_e.jsxs)(r.Fragment,{children:[d,A]}),u]}))})),vh=(0,Xa.A)((0,_e.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");function bh(e){return(0,At.Ay)("MuiTableContainer",e)}(0,kt.A)("MuiTableContainer",["root"]);const xh=["className","component"],wh=(0,wt.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),kh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTableContainer"}),{className:r,component:o="div"}=n,i=(0,Ce.A)(n,xh),a=(0,Se.A)({},n,{component:o}),s=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},bh,t)})(a);return(0,_e.jsx)(wh,(0,Se.A)({ref:t,as:o,className:(0,vt.A)(s.root,r),ownerState:a},i))}));const Ah=r.createContext();function Sh(e){return(0,At.Ay)("MuiTable",e)}(0,kt.A)("MuiTable",["root","stickyHeader"]);const Ch=["className","component","padding","size","stickyHeader"],Th=(0,wt.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,Se.A)({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},n.stickyHeader&&{borderCollapse:"separate"})})),Eh="table",Ih=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTable"}),{className:o,component:i=Eh,padding:a="normal",size:s="medium",stickyHeader:l=!1}=n,c=(0,Ce.A)(n,Ch),u=(0,Se.A)({},n,{component:i,padding:a,size:s,stickyHeader:l}),d=(e=>{const{classes:t,stickyHeader:n}=e,r={root:["root",n&&"stickyHeader"]};return(0,bt.A)(r,Sh,t)})(u),h=r.useMemo((()=>({padding:a,size:s,stickyHeader:l})),[a,s,l]);return(0,_e.jsx)(Ah.Provider,{value:h,children:(0,_e.jsx)(Th,(0,Se.A)({as:i,role:i===Eh?null:"table",ref:t,className:(0,vt.A)(d.root,o),ownerState:u},c))})}));const _h=r.createContext();function jh(e){return(0,At.Ay)("MuiTableHead",e)}(0,kt.A)("MuiTableHead",["root"]);const Nh=["className","component"],Rh=(0,wt.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Dh={variant:"head"},Ph="thead",Mh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTableHead"}),{className:r,component:o=Ph}=n,i=(0,Ce.A)(n,Nh),a=(0,Se.A)({},n,{component:o}),s=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},jh,t)})(a);return(0,_e.jsx)(_h.Provider,{value:Dh,children:(0,_e.jsx)(Rh,(0,Se.A)({as:o,className:(0,vt.A)(s.root,r),ref:t,role:o===Ph?null:"rowgroup",ownerState:a},i))})}));function Fh(e){return(0,At.Ay)("MuiTableRow",e)}const Oh=(0,kt.A)("MuiTableRow",["root","selected","hover","head","footer"]),Lh=["className","component","hover","selected"],zh=(0,wt.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(Oh.hover,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(Oh.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}})),Bh="tr",Uh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTableRow"}),{className:o,component:i=Bh,hover:a=!1,selected:s=!1}=n,l=(0,Ce.A)(n,Lh),c=r.useContext(_h),u=(0,Se.A)({},n,{component:i,hover:a,selected:s,head:c&&"head"===c.variant,footer:c&&"footer"===c.variant}),d=(e=>{const{classes:t,selected:n,hover:r,head:o,footer:i}=e,a={root:["root",n&&"selected",r&&"hover",o&&"head",i&&"footer"]};return(0,bt.A)(a,Fh,t)})(u);return(0,_e.jsx)(zh,(0,Se.A)({as:i,ref:t,className:(0,vt.A)(d.root,o),role:i===Bh?null:"row",ownerState:u},l))}));function Wh(e){return(0,At.Ay)("MuiTableCell",e)}const Vh=(0,kt.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),qh=["align","className","component","padding","scope","size","sortDirection","variant"],Hh=(0,wt.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat((0,xt.A)(n.size))],"normal"!==n.padding&&t["padding".concat((0,xt.A)(n.padding))],"inherit"!==n.align&&t["align".concat((0,xt.A)(n.align))],n.stickyHeader&&t.stickyHeader]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?"1px solid ".concat(t.vars.palette.TableCell.border):"1px solid\n    ".concat("light"===t.palette.mode?(0,Ut.a)((0,Ut.X4)(t.palette.divider,1),.88):(0,Ut.e$)((0,Ut.X4)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===n.variant&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===n.variant&&{color:(t.vars||t).palette.text.primary},"footer"===n.variant&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===n.size&&{padding:"6px 16px",["&.".concat(Vh.paddingCheckbox)]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===n.padding&&{width:48,padding:"0 0 0 4px"},"none"===n.padding&&{padding:0},"left"===n.align&&{textAlign:"left"},"center"===n.align&&{textAlign:"center"},"right"===n.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===n.align&&{textAlign:"justify"},n.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})})),Gh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTableCell"}),{align:o="inherit",className:i,component:a,padding:s,scope:l,size:c,sortDirection:u,variant:d}=n,h=(0,Ce.A)(n,qh),p=r.useContext(Ah),f=r.useContext(_h),m=f&&"head"===f.variant;let g;g=a||(m?"th":"td");let y=l;"td"===g?y=void 0:!y&&m&&(y="col");const v=d||f&&f.variant,b=(0,Se.A)({},n,{align:o,component:g,padding:s||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:u,stickyHeader:"head"===v&&p&&p.stickyHeader,variant:v}),x=(e=>{const{classes:t,variant:n,align:r,padding:o,size:i,stickyHeader:a}=e,s={root:["root",n,a&&"stickyHeader","inherit"!==r&&"align".concat((0,xt.A)(r)),"normal"!==o&&"padding".concat((0,xt.A)(o)),"size".concat((0,xt.A)(i))]};return(0,bt.A)(s,Wh,t)})(b);let w=null;return u&&(w="asc"===u?"ascending":"descending"),(0,_e.jsx)(Hh,(0,Se.A)({as:g,ref:t,className:(0,vt.A)(x.root,i),"aria-sort":w,scope:y,ownerState:b},h))}));function Kh(e){return(0,At.Ay)("MuiTableBody",e)}(0,kt.A)("MuiTableBody",["root"]);const Xh=["className","component"],Yh=(0,wt.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),Qh={variant:"body"},$h="tbody",Jh=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiTableBody"}),{className:r,component:o=$h}=n,i=(0,Ce.A)(n,Xh),a=(0,Se.A)({},n,{component:o}),s=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},Kh,t)})(a);return(0,_e.jsx)(_h.Provider,{value:Qh,children:(0,_e.jsx)(Yh,(0,Se.A)({className:(0,vt.A)(s.root,r),as:o,ref:t,role:o===$h?null:"rowgroup",ownerState:a},i))})})),Zh=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");var ep=n(9751),tp=n(8604);const np=["component","direction","spacing","divider","children","className","useFlexGap"],rp=(0,tn.A)(),op=en("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function ip(e){return(0,Zt.A)({props:e,name:"MuiStack",defaultTheme:rp})}function ap(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,o,i)=>(e.push(o),i<n.length-1&&e.push(r.cloneElement(t,{key:"separator-".concat(i)})),e)),[])}const sp=e=>{let{ownerState:t,theme:n}=e,r=(0,Se.A)({display:"flex",flexDirection:"column"},(0,ep.NI)({theme:n},(0,ep.kW)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,tp.LX)(n),o=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),i=(0,ep.kW)({values:t.direction,base:o}),a=(0,ep.kW)({values:t.spacing,base:o});"object"===typeof i&&Object.keys(i).forEach(((e,t,n)=>{if(!i[e]){const r=t>0?i[n[t-1]]:"column";i[e]=r}}));const s=(n,r)=>{return t.useFlexGap?{gap:(0,tp._W)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((o=r?i[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]))]:(0,tp._W)(e,n)}};var o};r=(0,ct.A)(r,(0,ep.NI)({theme:n},a,s))}return r=(0,ep.iZ)(n.breakpoints,r),r};const lp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=op,useThemeProps:n=ip,componentName:o="MuiStack"}=e,i=t(sp);return r.forwardRef((function(e,t){const r=ht(n(e)),{component:a="div",direction:s="column",spacing:l=0,divider:c,children:u,className:d,useFlexGap:h=!1}=r,p=(0,Ce.A)(r,np),f={direction:s,spacing:l,useFlexGap:h},m=(0,bt.A)({root:["root"]},(e=>(0,At.Ay)(o,e)),{});return(0,_e.jsx)(i,(0,Se.A)({as:a,ownerState:f,ref:t,className:at(m.root,d)},p,{children:c?ap(u,c):u}))}))}({createStyledComponent:(0,wt.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,qe.A)({props:e,name:"MuiStack"})}),cp=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function up(e){return(0,At.Ay)("MuiChip",e)}const dp=(0,kt.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),hp=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],pp=(0,wt.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:o,clickable:i,onDelete:a,size:s,variant:l}=n;return[{["& .".concat(dp.avatar)]:t.avatar},{["& .".concat(dp.avatar)]:t["avatar".concat((0,xt.A)(s))]},{["& .".concat(dp.avatar)]:t["avatarColor".concat((0,xt.A)(r))]},{["& .".concat(dp.icon)]:t.icon},{["& .".concat(dp.icon)]:t["icon".concat((0,xt.A)(s))]},{["& .".concat(dp.icon)]:t["iconColor".concat((0,xt.A)(o))]},{["& .".concat(dp.deleteIcon)]:t.deleteIcon},{["& .".concat(dp.deleteIcon)]:t["deleteIcon".concat((0,xt.A)(s))]},{["& .".concat(dp.deleteIcon)]:t["deleteIconColor".concat((0,xt.A)(r))]},{["& .".concat(dp.deleteIcon)]:t["deleteIcon".concat((0,xt.A)(l),"Color").concat((0,xt.A)(r))]},t.root,t["size".concat((0,xt.A)(s))],t["color".concat((0,xt.A)(r))],i&&t.clickable,i&&"default"!==r&&t["clickableColor".concat((0,xt.A)(r),")")],a&&t.deletable,a&&"default"!==r&&t["deletableColor".concat((0,xt.A)(r))],t[l],t["".concat(l).concat((0,xt.A)(r))]]}})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[700]:t.palette.grey[300];return(0,Se.A)({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",["&.".concat(dp.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},["& .".concat(dp.avatar)]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:r,fontSize:t.typography.pxToRem(12)},["& .".concat(dp.avatarColorPrimary)]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},["& .".concat(dp.avatarColorSecondary)]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},["& .".concat(dp.avatarSmall)]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},["& .".concat(dp.icon)]:(0,Se.A)({marginLeft:5,marginRight:-6},"small"===n.size&&{fontSize:18,marginLeft:4,marginRight:-4},n.iconColor===n.color&&(0,Se.A)({color:t.vars?t.vars.palette.Chip.defaultIconColor:r},"default"!==n.color&&{color:"inherit"})),["& .".concat(dp.deleteIcon)]:(0,Se.A)({WebkitTapHighlightColor:"transparent",color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.26)"):(0,Ut.X4)(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / 0.4)"):(0,Ut.X4)(t.palette.text.primary,.4)}},"small"===n.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==n.color&&{color:t.vars?"rgba(".concat(t.vars.palette[n.color].contrastTextChannel," / 0.7)"):(0,Ut.X4)(t.palette[n.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].contrastText}})},"small"===n.size&&{height:24},"default"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].main,color:(t.vars||t).palette[n.color].contrastText},n.onDelete&&{["&.".concat(dp.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Ut.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},n.onDelete&&"default"!==n.color&&{["&.".concat(dp.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},n.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Ut.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},["&.".concat(dp.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.selectedChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Ut.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},n.clickable&&"default"!==n.color&&{["&:hover, &.".concat(dp.focusVisible)]:{backgroundColor:(t.vars||t).palette[n.color].dark}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},"outlined"===n.variant&&{backgroundColor:"transparent",border:t.vars?"1px solid ".concat(t.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[700]),["&.".concat(dp.clickable,":hover")]:{backgroundColor:(t.vars||t).palette.action.hover},["&.".concat(dp.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["& .".concat(dp.avatar)]:{marginLeft:4},["& .".concat(dp.avatarSmall)]:{marginLeft:2},["& .".concat(dp.icon)]:{marginLeft:4},["& .".concat(dp.iconSmall)]:{marginLeft:2},["& .".concat(dp.deleteIcon)]:{marginRight:5},["& .".concat(dp.deleteIconSmall)]:{marginRight:3}},"outlined"===n.variant&&"default"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.7)"):(0,Ut.X4)(t.palette[n.color].main,.7)),["&.".concat(dp.clickable,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity)},["&.".concat(dp.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.focusOpacity,")"):(0,Ut.X4)(t.palette[n.color].main,t.palette.action.focusOpacity)},["& .".concat(dp.deleteIcon)]:{color:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.7)"):(0,Ut.X4)(t.palette[n.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n.color].main}}})})),fp=(0,wt.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t["label".concat((0,xt.A)(r))]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===t.size&&{paddingLeft:8,paddingRight:8})}));function mp(e){return"Backspace"===e.key||"Delete"===e.key}const gp=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiChip"}),{avatar:o,className:i,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:p,onDelete:f,onKeyDown:m,onKeyUp:g,size:y="medium",variant:v="filled",tabIndex:b,skipFocusWhenDisabled:x=!1}=n,w=(0,Ce.A)(n,hp),k=r.useRef(null),A=(0,vn.A)(k,t),S=e=>{e.stopPropagation(),f&&f(e)},C=!(!1===a||!p)||a,T=C||f?$n:l||"div",E=(0,Se.A)({},n,{component:T,disabled:u,size:y,color:s,iconColor:r.isValidElement(d)&&d.props.color||s,onDelete:!!f,clickable:C,variant:v}),I=(e=>{const{classes:t,disabled:n,size:r,color:o,iconColor:i,onDelete:a,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled","size".concat((0,xt.A)(r)),"color".concat((0,xt.A)(o)),s&&"clickable",s&&"clickableColor".concat((0,xt.A)(o)),a&&"deletable",a&&"deletableColor".concat((0,xt.A)(o)),"".concat(l).concat((0,xt.A)(o))],label:["label","label".concat((0,xt.A)(r))],avatar:["avatar","avatar".concat((0,xt.A)(r)),"avatarColor".concat((0,xt.A)(o))],icon:["icon","icon".concat((0,xt.A)(r)),"iconColor".concat((0,xt.A)(i))],deleteIcon:["deleteIcon","deleteIcon".concat((0,xt.A)(r)),"deleteIconColor".concat((0,xt.A)(o)),"deleteIcon".concat((0,xt.A)(l),"Color").concat((0,xt.A)(o))]};return(0,bt.A)(c,up,t)})(E),_=T===$n?(0,Se.A)({component:l||"div",focusVisibleClassName:I.focusVisible},f&&{disableRipple:!0}):{};let j=null;f&&(j=c&&r.isValidElement(c)?r.cloneElement(c,{className:(0,vt.A)(c.props.className,I.deleteIcon),onClick:S}):(0,_e.jsx)(cp,{className:(0,vt.A)(I.deleteIcon),onClick:S}));let N=null;o&&r.isValidElement(o)&&(N=r.cloneElement(o,{className:(0,vt.A)(I.avatar,o.props.className)}));let R=null;return d&&r.isValidElement(d)&&(R=r.cloneElement(d,{className:(0,vt.A)(I.icon,d.props.className)})),(0,_e.jsxs)(pp,(0,Se.A)({as:T,className:(0,vt.A)(I.root,i),disabled:!(!C||!u)||void 0,onClick:p,onKeyDown:e=>{e.currentTarget===e.target&&mp(e)&&e.preventDefault(),m&&m(e)},onKeyUp:e=>{e.currentTarget===e.target&&(f&&mp(e)?f(e):"Escape"===e.key&&k.current&&k.current.blur()),g&&g(e)},ref:A,tabIndex:x&&u?-1:b,ownerState:E},_,w,{children:[N||R,(0,_e.jsx)(fp,{className:(0,vt.A)(I.label),ownerState:E,children:h}),j]}))})),yp=(0,Xa.A)((0,_e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),vp=(0,Xa.A)((0,_e.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event"),bp=(0,Xa.A)([(0,_e.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"0"),(0,_e.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),xp=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"LocationOn"),wp=(0,Xa.A)((0,_e.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");function kp(e){var t;let{open:n,game:o,onClose:a,onSuccess:s,clearPlayerCache:l,getPlayersData:c}=e;const[u,d]=(0,r.useState)({date:"",time:"",location:"",maxPlayers:4,status:"open",players:[],duration:1.5}),[h,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)({}),{currentUser:v}=ys();(0,r.useEffect)((()=>{o&&d({date:o.date||"",time:o.time||"",location:o.location||"",maxPlayers:o.maxPlayers||4,status:o.status||"open",players:o.players||[],duration:o.duration||1.5})}),[o]);const b=e=>{const{name:t,value:n}=e.target;d((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},x=e=>{const t=g[e];return t?t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.displayName?t.displayName:t.email?t.email.split("@")[0]:"Unknown Player":"Unknown Player"};(0,r.useEffect)((()=>{if(null===o||void 0===o||!o.players)return;l&&l();(async()=>{try{const e=new Set(o.players),t=await c(Array.from(e),null===v||void 0===v?void 0:v.uid);y(t)}catch(h){console.error("Error fetching player data:",h),p("Failed to load player data")}})()}),[null===o||void 0===o?void 0:o.players,v,l]);return(0,_e.jsxs)(Is,{open:n,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:3}},children:[(0,_e.jsxs)(Ds,{sx:{m:0,p:2,bgcolor:"primary.main",color:"primary.contrastText",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(yp,{sx:{mr:1}}),(0,_e.jsx)(yn,{variant:"h6",component:"div",children:"Edit Game"})]}),(0,_e.jsx)(nr,{"aria-label":"close",onClick:a,sx:{color:"inherit","&:hover":{bgcolor:"primary.dark"}},children:(0,_e.jsx)(su,{})})]}),(0,_e.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(""),m(!0);try{await(0,fs.updateGame)(o.id,(0,i.A)((0,i.A)({},u),{},{lastUpdated:(new Date).toISOString()})),s(),a()}catch(h){console.error("Error updating game:",h),p("Failed to update game")}m(!1)},children:[(0,_e.jsxs)(Os,{dividers:!0,children:[h&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:h}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,_e.jsx)(nu,{label:"Date",type:"date",name:"date",value:u.date,onChange:b,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,_e.jsx)(vp,{sx:{mr:1,color:"action.active"}})}}),(0,_e.jsx)(nu,{label:"Time",type:"time",name:"time",value:u.time,onChange:b,fullWidth:!0,required:!0,InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,_e.jsx)(bp,{sx:{mr:1,color:"action.active"}})}}),(0,_e.jsx)(nu,{label:"Location",name:"location",value:u.location,onChange:b,fullWidth:!0,required:!0,InputProps:{startAdornment:(0,_e.jsx)(xp,{sx:{mr:1,color:"action.active"}})}}),(0,_e.jsxs)(bc,{fullWidth:!0,children:[(0,_e.jsx)(fc,{children:"Maximum Players"}),(0,_e.jsx)($c,{name:"maxPlayers",value:u.maxPlayers,onChange:b,label:"Maximum Players",required:!0,startAdornment:(0,_e.jsx)(wp,{sx:{ml:1,mr:-.5,color:"action.active"}}),children:[2,3,4,5,6,8,10,12].map((e=>(0,_e.jsxs)(ri,{value:e,children:[e," players"]},e)))})]}),(0,_e.jsxs)(bc,{fullWidth:!0,children:[(0,_e.jsx)(fc,{children:"Match Duration (hours)"}),(0,_e.jsxs)($c,{name:"duration",value:u.duration||1.5,onChange:b,label:"Match Duration (hours)",required:!0,children:[(0,_e.jsx)(ri,{value:1,children:"1 hour"}),(0,_e.jsx)(ri,{value:1.5,children:"1.5 hours"}),(0,_e.jsx)(ri,{value:2,children:"2 hours"}),(0,_e.jsx)(ri,{value:2.5,children:"2.5 hours"}),(0,_e.jsx)(ri,{value:3,children:"3 hours"})]})]}),(0,_e.jsxs)(bc,{fullWidth:!0,children:[(0,_e.jsx)(fc,{children:"Status"}),(0,_e.jsxs)($c,{name:"status",value:u.status,onChange:b,label:"Status",required:!0,children:[(0,_e.jsx)(ri,{value:"open",children:"Open"}),(0,_e.jsx)(ri,{value:"closed",children:"Closed"})]})]}),(0,_e.jsx)(lp,{direction:"row",spacing:1,sx:{mt:2},children:null===(t=u.players)||void 0===t?void 0:t.map(((e,t)=>(0,_e.jsx)(gp,{label:x(e),onDelete:()=>(e=>{d((t=>(0,i.A)((0,i.A)({},t),{},{players:t.players.filter((t=>t!==e))})))})(e),color:"primary",variant:"outlined"},"player-".concat(e,"-").concat(t))))})]})]}),(0,_e.jsxs)(au,{sx:{p:2,bgcolor:"grey.50"},children:[(0,_e.jsx)(pi,{onClick:a,variant:"outlined",disabled:f,startIcon:(0,_e.jsx)(su,{}),children:"Cancel"}),(0,_e.jsx)(pi,{type:"submit",variant:"contained",disabled:f,startIcon:(0,_e.jsx)(yp,{}),children:"Save Changes"})]})]})]})}function Ap(e,t){var n;const r=()=>rd(null===t||void 0===t?void 0:t.in,NaN),o=null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2,i=function(e){const t={},n=e.split(Sp.dateTimeDelimiter);let r;if(n.length>2)return t;/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],Sp.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Sp.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length)));if(r){const e=Sp.timezone.exec(r);e?(t.time=r.replace(e[1],""),t.timezone=e[1]):t.time=r}return t}(e);let a;if(i.date){const e=function(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const o=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?o:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(i.date,o);a=function(e,t){if(null===t)return new Date(NaN);const n=e.match(Cp);if(!n)return new Date(NaN);const r=!!n[4],o=Ip(n[1]),i=Ip(n[2])-1,a=Ip(n[3]),s=Ip(n[4]),l=Ip(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const o=r.getUTCDay()||7,i=7*(t-1)+n+1-o;return r.setUTCDate(r.getUTCDate()+i),r}(t,s,l):new Date(NaN);{const e=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(jp[t]||(Np(e)?29:28))}(t,i,a)&&function(e,t){return t>=1&&t<=(Np(e)?366:365)}(t,o)?(e.setUTCFullYear(t,i,Math.max(o,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const s=+a;let l,c=0;if(i.time&&(c=function(e){const t=e.match(Tp);if(!t)return NaN;const n=_p(t[1]),r=_p(t[2]),o=_p(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,o))return NaN;return n*ed+r*Zu+1e3*o}(i.time),isNaN(c)))return r();if(!i.timezone){const e=new Date(s+c),n=md(0,null===t||void 0===t?void 0:t.in);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}return l=function(e){if("Z"===e)return 0;const t=e.match(Ep);if(!t)return 0;const n="+"===t[1]?-1:1,r=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return n*(r*ed+o*Zu)}(i.timezone),isNaN(l)?r():md(s+c+l,null===t||void 0===t?void 0:t.in)}const Sp={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cp=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Tp=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ep=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ip(e){return e?parseInt(e):1}function _p(e){return e&&parseFloat(e.replace(",","."))||0}const jp=[31,null,31,30,31,30,31,31,30,31,30,31];function Np(e){return e%400===0||e%4===0&&e%100!==0}function Rp(e,t){return+md(e)>+md(t)}const Dp=new Map,Pp=new Map,Mp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?Dp.delete(e):Dp.clear()},Fp=()=>{Pp.forEach((e=>e())),Pp.clear()},Op=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.group("\ud83d\udd0d Fetching Player Data: ".concat(e)),console.log("Current User ID:",t),(e=>{if(Pp.has(e))return;const t=(0,ms.doc)(fs.db,"users",e),n=(0,ms.onSnapshot)(t,(t=>{t.exists()&&(Dp.delete(e),Op(e))}));Pp.set(e,n)})(e),Dp.has(e))return console.log("\ud83d\udfe2 Cache Hit:",Dp.get(e)),console.groupEnd(),Dp.get(e);try{var n;const r=(0,ms.doc)(fs.db,"users",e),o=await(0,ms.getDoc)(r);if(!o.exists()){console.warn("\u26a0\ufe0f No user document found for: ".concat(e));const n={id:e,displayName:e===t?"You":"Unknown Player",email:null,photoURL:null,color:e===t?"primary":"default",initials:"?"};return Dp.set(e,n),console.log("\ud83d\udd34 Returning Default Data:",n),console.groupEnd(),n}const a=o.data();console.log("\ud83d\udce6 Raw Firestore User Data:",a);let s="";a.firstName&&a.lastName?s="".concat(a.firstName," ").concat(a.lastName):a.displayName?s=a.displayName:a.email&&(s=a.email.split("@")[0]);let l="";if(a.firstName&&a.lastName)l="".concat(a.firstName[0]).concat(a.lastName[0]).toUpperCase();else if(s){const e=s.split(" ").filter((e=>e.length>0));l=e.length>=2?"".concat(e[0][0]).concat(e[e.length-1][0]).toUpperCase():s.substring(0,2).toUpperCase()}e===t&&(s="You");const c=a.photoURL,u=c&&"string"===typeof c&&(c.startsWith("http://")||c.startsWith("https://")||c.startsWith("data:image")||c.startsWith("blob:")),d=(0,i.A)((0,i.A)({id:e},a),{},{displayName:s||"Unknown Player",color:e===t?"primary":"admin"===a.role?"secondary":"default",initials:l||"?",photoURL:u?c:null});return console.log("\u2705 Final Player Data:",(0,i.A)((0,i.A)({},d),{},{photoURLDetails:u?{original:c,protocol:c.split("://")[0],domain:null===(n=c.split("://")[1])||void 0===n?void 0:n.split("/")[0],length:c.length}:null})),u?console.log("\ud83d\uddbc\ufe0f Valid Avatar URL:",c):console.warn("\u26a0\ufe0f Invalid or Missing Avatar URL:",{rawPhotoURL:c,type:typeof c,isNull:null===c,isUndefined:void 0===c}),Dp.set(e,d),console.groupEnd(),d}catch(r){console.error("\ud83d\udd34 Error fetching player data for ".concat(e,":"),r);const n={id:e,displayName:e===t?"You":"Unknown Player",email:null,photoURL:null,color:e===t?"primary":"default",initials:"?"};return Dp.set(e,n),console.log("\ud83d\udea8 Returning Fallback Data:",n),console.groupEnd(),n}},Lp=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.group("\ud83d\udd0d Fetching Players Data"),console.log("Input Player IDs:",e),console.log("Current User ID:",t),!e||0===e.length)return console.warn("\u26a0\ufe0f No player IDs provided"),console.groupEnd(),{};const n=[...new Set(e)];console.log("Unique Player IDs:",n);try{const e=n.map((e=>(console.log("\ud83d\udd0e Fetching data for player: ".concat(e)),Op(e,t)))),r=await Promise.all(e);r.forEach(((e,t)=>{console.log("\ud83d\udcab Player ".concat(t+1," Data:"),{id:e.id,displayName:e.displayName,photoURL:e.photoURL?"Available":"Not Available"})}));const o=Object.fromEntries(r.map((e=>[e.id,e])));return console.log("\u2705 Final Players Data:",Object.keys(o)),console.groupEnd(),o}catch(r){return console.error("\ud83d\udd34 Error in getPlayersData:",r),console.groupEnd(),{}}};function zp(e,t){const n=md(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function Bp(e,t,n){const[r,o]=yd(null===n||void 0===n?void 0:n.in,e,t),i=zp(r),a=zp(o),s=+i-gd(i),l=+a-gd(a);return Math.round((s-l)/864e5)}function Up(e,t){const n=md(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Wp(e,t){const n=md(e,null===t||void 0===t?void 0:t.in);return Bp(n,Up(n))+1}function Vp(e,t){var n,r,o,i,a,s;const l=fd(),c=null!==(n=null!==(r=null!==(o=null!==(i=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==o?o:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,u=md(e,null===t||void 0===t?void 0:t.in),d=u.getDay(),h=(d<c?7:0)+d-c;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}function qp(e,t){return Vp(e,(0,i.A)((0,i.A)({},t),{},{weekStartsOn:1}))}function Hp(e,t){const n=md(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),o=rd(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const i=qp(o),a=rd(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const s=qp(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Gp(e,t){const n=Hp(e,t),r=rd((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),qp(r)}function Kp(e,t){const n=md(e,null===t||void 0===t?void 0:t.in),r=+qp(n)-+Gp(n);return Math.round(r/Ju)+1}function Xp(e,t){var n,r,o,i,a,s;const l=md(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),u=fd(),d=null!==(n=null!==(r=null!==(o=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,h=rd((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,d),h.setHours(0,0,0,0);const p=Vp(h,t),f=rd((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,d),f.setHours(0,0,0,0);const m=Vp(f,t);return+l>=+p?c+1:+l>=+m?c:c-1}function Yp(e,t){var n,r,o,i,a,s;const l=fd(),c=null!==(n=null!==(r=null!==(o=null!==(i=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(a=a.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==o?o:l.firstWeekContainsDate)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,u=Xp(e,t),d=rd((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(u,0,c),d.setHours(0,0,0,0);return Vp(d,t)}function Qp(e,t){const n=md(e,null===t||void 0===t?void 0:t.in),r=+Vp(n,t)-+Yp(n,t);return Math.round(r/Ju)+1}function $p(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Jp={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return $p("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):$p(n+1,2)},d:(e,t)=>$p(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>$p(e.getHours()%12||12,t.length),H:(e,t)=>$p(e.getHours(),t.length),m:(e,t)=>$p(e.getMinutes(),t.length),s:(e,t)=>$p(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return $p(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Zp="midnight",ef="noon",tf="morning",nf="afternoon",rf="evening",of="night",af={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Jp.y(e,t)},Y:function(e,t,n,r){const o=Xp(e,r),i=o>0?o:1-o;if("YY"===t){return $p(i%100,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):$p(i,t.length)},R:function(e,t){return $p(Hp(e),t.length)},u:function(e,t){return $p(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return $p(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return $p(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Jp.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return $p(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Qp(e,r);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):$p(o,t.length)},I:function(e,t,n){const r=Kp(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):$p(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Jp.d(e,t)},D:function(e,t,n){const r=Wp(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):$p(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return $p(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return $p(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=0===r?7:r;switch(t){case"i":return String(o);case"ii":return $p(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(o=12===r?ef:0===r?Zp:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(o=r>=17?rf:r>=12?nf:r>=4?tf:of,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Jp.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Jp.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):$p(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):$p(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Jp.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Jp.s(e,t)},S:function(e,t){return Jp.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return lf(r);case"XXXX":case"XX":return cf(r);default:return cf(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return lf(r);case"xxxx":case"xx":return cf(r);default:return cf(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sf(r,":");default:return"GMT"+cf(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sf(r,":");default:return"GMT"+cf(r,":")}},t:function(e,t,n){return $p(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return $p(+e,t.length)}};function sf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),i=r%60;return 0===i?n+String(o):n+String(o)+t+$p(i,2)}function lf(e,t){if(e%60===0){return(e>0?"-":"+")+$p(Math.abs(e)/60,2)}return cf(e,t)}function cf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+$p(Math.trunc(r/60),2)+t+$p(r%60,2)}const uf=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},df=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},hf={p:df,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return uf(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",uf(r,t)).replace("{{time}}",df(o,t))}},pf=/^D+$/,ff=/^Y+$/,mf=["D","DD","YY","YYYY"];function gf(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function yf(e){return!(!gf(e)&&"number"!==typeof e||isNaN(+md(e)))}const vf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xf=/^'([^]*?)'?$/,wf=/''/g,kf=/[a-zA-Z]/;function Af(e,t,n){var r,o,i,a,s,l,c,u,d,h,p,f,m,g;const y=fd(),v=null!==(r=null!==(o=null===n||void 0===n?void 0:n.locale)&&void 0!==o?o:y.locale)&&void 0!==r?r:hd,b=null!==(i=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:y.firstWeekContainsDate)&&void 0!==a?a:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==i?i:1,x=null!==(d=null!==(h=null!==(p=null!==(f=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==f?f:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,w=md(e,null===n||void 0===n?void 0:n.in);if(!yf(w))throw new RangeError("Invalid time value");let k=t.match(bf).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,hf[t])(e,v.formatLong)}return e})).join("").match(vf).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Sf(e)};if(af[t])return{isToken:!0,value:e};if(t.match(kf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));v.localize.preprocessor&&(k=v.localize.preprocessor(w,k));const A={firstWeekContainsDate:b,weekStartsOn:x,locale:v};return k.map((r=>{if(!r.isToken)return r.value;const o=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return ff.test(e)}(o))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return pf.test(e)}(o))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),mf.includes(e))throw new RangeError(r)}(o,t,String(e));return(0,af[o[0]])(w,o,v.localize,A)})).join("")}function Sf(e){const t=e.match(xf);return t?t[1].replace(wf,"'"):e}class Cf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";this.status=e,this.text=t}}const Tf={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!==typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},Ef=e=>e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},If=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await fetch(Tf.origin+e,{method:"POST",headers:n,body:t}),o=await r.text(),i=new Cf(r.status,o);if(r.ok)return i;throw i},_f=(e,t,n)=>{if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},jf=e=>e.webdriver||!e.languages||0===e.languages.length,Nf=()=>new Cf(451,"Unavailable For Headless Browser"),Rf=(e,t)=>{if((e=>{var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(r=t,o=e.watchVariable,r instanceof FormData?r.get(o):r[o]);var r,o;return"string"===typeof n&&e.list.includes(n)},Df=()=>new Cf(403,"Forbidden"),Pf=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,o=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return o>0||(await n.set(r,Date.now().toString()),!1)},Mf=()=>new Cf(429,"Too Many Requests"),Ff=async(e,t,n,r)=>{const o=Ef(r),a=o.publicKey||Tf.publicKey,s=o.blockHeadless||Tf.blockHeadless,l=o.storageProvider||Tf.storageProvider,c=(0,i.A)((0,i.A)({},Tf.blockList),o.blockList),u=(0,i.A)((0,i.A)({},Tf.limitRate),o.limitRate);if(s&&jf(navigator))return Promise.reject(Nf());if(_f(a,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&Rf(c,n))return Promise.reject(Df());if(await Pf(location.pathname,u,l))return Promise.reject(Mf());const d={lib_version:"4.4.1",user_id:a,service_id:e,template_id:t,template_params:n};return If("/api/v1.0/email/send",JSON.stringify(d),{"Content-type":"application/json"})},Of=async e=>{try{var t;const n=(0,ms.doc)(fs.db,"games",e),r=await(0,ms.getDoc)(n);if(!r.exists())throw new Error("Game not found");const o=(0,i.A)({id:e},r.data());if("closed"===o.status&&(!o.pairs||0===o.pairs.length)){const e=await Promise.all((o.players||[]).map((async e=>{const t="string"===typeof e?e:e.id;if(!t)return null;try{const e=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",t));if(e.exists()){var n;const r=e.data();return{id:t,name:r.firstName&&r.lastName?"".concat(r.firstName," ").concat(r.lastName):r.displayName||(null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Unknown Player",email:r.email,skillLevel:r.skillLevel||5}}}catch(r){console.error("Error fetching player ".concat(t,":"),r)}return null}))),t=(e=>{e.sort(((e,t)=>e.skillLevel-t.skillLevel));const t=[];for(let n=0;n<e.length;n+=2)t.push({player1:e[n],player2:e[n+1]||null});return t})(e.filter((e=>null!==e)));await(0,ms.updateDoc)(n,{pairs:t}),o.pairs=t}const a=await Promise.all((o.players||[]).map((async e=>{const t="string"===typeof e?e:e.id;if(!t)return null;try{const e=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",t));if(e.exists()){var n;const r=e.data();return{id:t,name:r.firstName&&r.lastName?"".concat(r.firstName," ").concat(r.lastName):r.displayName||(null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Unknown Player",email:r.email}}}catch(r){console.error("Error fetching player ".concat(t,":"),r)}return null})));o.players=a.filter((e=>null!==e)),o.pairs&&(o.pairs=o.pairs.map((e=>{const t=e.player1?o.players.find((t=>t.id===e.player1.id)):null,n=e.player2?o.players.find((t=>t.id===e.player2.id)):null;return(0,i.A)((0,i.A)({},e),{},{player1:t,player2:n})})));const s=(await(0,ms.getDocs)((0,ms.query)((0,ms.collection)(fs.db,"users"),(0,ms.where)("role","==","admin")))).docs.map((e=>e.data().email)).filter(Boolean),l=o.players.map((e=>e.email)).filter(Boolean),c=[...new Set([...s,...l])];if(0===c.length)throw new Error("No recipient emails found");const u=()=>o.pairs&&0!==o.pairs.length?o.pairs.map(((e,t)=>{var n;return'<div style="padding: 12px; margin: 8px 0; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #1a73e8;">\n          <div style="color: #1a73e8; font-weight: bold; margin-bottom: 4px;">\n            <span style="background: #1a73e8; color: white; padding: 4px 8px; border-radius: 4px; font-size: 14px;">\n              \ud83c\udfc6 Team '.concat(t+1,'\n            </span>\n          </div>\n          <div style="margin-top: 8px;">\n            <span style="color: #2196f3;">\ud83d\udc64 ').concat((null===(n=e.player1)||void 0===n?void 0:n.name)||"TBD","</span>\n            ").concat(e.player2?' - <span style="color: #4caf50;">\ud83d\udc64 '.concat(e.player2.name,"</span>"):"","\n          </div>\n         </div>")})).join(""):'<p style="color: #666;">No teams distributed yet</p>',d='\n      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">\n        <div style="background: #1a73e8; color: white; padding: 20px; border-radius: 8px 8px 0 0;">\n          <h1 style="margin: 0; font-size: 24px;">\n            <span style="margin-right: 10px;">\ud83c\udfbe</span>\n            Game Report '.concat(o.emailSent?"(Updated)":"",'\n          </h1>\n        </div>\n        \n        <div style="padding: 20px; border: 1px solid #e0e0e0; border-top: none; border-radius: 0 0 8px 8px;">\n          <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; margin-bottom: 20px;">\n            <h2 style="margin: 0 0 15px 0; color: #1a73e8; font-size: 18px;">\n              <span style="margin-right: 8px;">\ud83d\udccb</span>\n              Game Details\n            </h2>\n            <table style="width: 100%; border-collapse: collapse;">\n              <tr>\n                <td style="padding: 8px 0; color: #666;">\n                  <span style="margin-right: 8px;">\ud83d\udcc5</span>\n                  Date:\n                </td>\n                <td style="padding: 8px 0;"><strong>').concat(o.date?Af(new Date(o.date),"PPP"):"Not set",'</strong></td>\n              </tr>\n              <tr>\n                <td style="padding: 8px 0; color: #666;">\n                  <span style="margin-right: 8px;">\u23f0</span>\n                  Time:\n                </td>\n                <td style="padding: 8px 0;"><strong>').concat(o.time||"Not set",'</strong></td>\n              </tr>\n              <tr>\n                <td style="padding: 8px 0; color: #666;">\n                  <span style="margin-right: 8px;">\ud83d\udccd</span>\n                  Location:\n                </td>\n                <td style="padding: 8px 0;"><strong>').concat(o.location||"Not set",'</strong></td>\n              </tr>\n              <tr>\n                <td style="padding: 8px 0; color: #666;">\n                  <span style="margin-right: 8px;">\ud83c\udfae</span>\n                  Status:\n                </td>\n                <td style="padding: 8px 0;">\n                  <span style="background: ').concat(o.isOpen?"#4caf50":"#f44336",'; color: white; padding: 4px 8px; border-radius: 4px; font-size: 14px;">\n                    ').concat(o.isOpen?"\ud83d\udfe2 Open":"\ud83d\udd34 Closed",'\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td style="padding: 8px 0; color: #666;">\n                  <span style="margin-right: 8px;">\ud83d\udc65</span>\n                  Total Players:\n                </td>\n                <td style="padding: 8px 0;"><strong>').concat((null===(t=o.players)||void 0===t?void 0:t.length)||0,'</strong></td>\n              </tr>\n            </table>\n          </div>\n\n          <div style="margin-bottom: 20px;">\n            <h2 style="color: #1a73e8; font-size: 18px;">\n              <span style="margin-right: 8px;">\ud83c\udfc6</span>\n              Teams Distribution\n            </h2>\n            ').concat(u(),'\n          </div>\n\n          <div style="margin-top: 30px; padding-top: 15px; border-top: 1px solid #e0e0e0; color: #666; font-size: 12px; text-align: center;">\n            <span style="margin-right: 5px;">\u23f1\ufe0f</span>\n            Generated on: ').concat(Af(new Date,"PPP p"),"\n          </div>\n        </div>\n      </div>\n    "),h={to_email:c.join(","),game_id:"".concat(o.location," - ").concat(Af(new Date(o.date),"PP")," at ").concat(o.time).concat(o.emailSent?" (Updated)":""),game_details:d},p=await Ff("service_7tyowsa","template_jbxo9ua",h,"nQmOlke0ZSm9wxLuH");if(200!==p.status)throw new Error("Failed to send email");return await(0,ms.updateDoc)(n,{emailSent:!0,emailSentAt:(new Date).toISOString(),reopenCount:(o.reopenCount||0)+(o.emailSent?1:0)}),p}catch(n){throw console.error("Error sending game report email:",n),n}};function Lf(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Lf(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const zf=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Lf(e))&&(r&&(r+=" "),r+=t);return r},Bf=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var Uf=e=>"number"==typeof e&&!isNaN(e),Wf=e=>"string"==typeof e,Vf=e=>"function"==typeof e,qf=e=>Wf(e)||Vf(e)?e:null,Hf=(e,t)=>!1===e||Uf(e)&&e>0?e:t,Gf=e=>(0,r.isValidElement)(e)||Wf(e)||Vf(e)||Uf(e);function Kf(e){let{enter:t,exit:n,appendPosition:o=!1,collapse:i=!0,collapseDuration:a=300}=e;return function(e){let{children:s,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:p}=e,f=o?"".concat(t,"--").concat(l):t,m=o?"".concat(n,"--").concat(l):n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)((()=>{let e=d.current,t=f.split(" "),n=r=>{r.target===d.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,r.useEffect)((()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:o}=e;requestAnimationFrame((()=>{o.minHeight="initial",o.height=r+"px",o.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(t,n)}))}))}(e,u,a):u()};h||(c?t():(g.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[h]),r.createElement(r.Fragment,null,s)}}function Xf(e,t){return{content:Yf(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.isValidElement)(e)&&!Wf(e.type)?(0,r.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):Vf(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function Qf(e){let{delay:t,isRunning:n,closeToast:o,type:a="default",hide:s,className:l,controlledProgress:c,progress:u,rtl:d,isIn:h,theme:p}=e,f=s||c&&0===u,m={animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused"};c&&(m.transform="scaleX(".concat(u,")"));let g=zf("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":d}),y=Vf(l)?l({rtl:d,type:a,defaultClassName:g}):zf(g,l),v={[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{h&&o()}};return r.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},r.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(p," Toastify__progress-bar--").concat(a)}),r.createElement("div",(0,i.A)({role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:y,style:m},v)))}var $f=1,Jf=()=>"".concat($f++);function Zf(e,t,n){let r=1,o=0,a=[],s=[],l=t,c=new Map,u=new Set,d=()=>{s=Array.from(c.values()),u.forEach((e=>e()))},h=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},p=e=>{if(null==e)c.forEach(h);else{let t=c.get(e);t&&h(t)}d()},f=e=>{var t,r;let{toastId:o,updateId:i}=e.props,a=null==i;e.staleId&&c.delete(e.staleId),e.isActive=!0,c.set(o,e),d(),n(Xf(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:l,observe:e=>(u.add(e),()=>u.delete(e)),toggle:(e,t)=>{c.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:p,toasts:c,clearQueue:()=>{o-=a.length,a=[]},buildToast:(t,s)=>{if((t=>{let{containerId:n,toastId:r,updateId:o}=t,i=n?n!==e:1!==e,a=c.has(r)&&null==o;return i||a})(s))return;let{toastId:u,updateId:h,data:m,staleId:g,delay:y}=s,v=null==h;v&&o++;let b=(0,i.A)((0,i.A)((0,i.A)({},l),{},{style:l.toastStyle,key:r++},Object.fromEntries(Object.entries(s).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:u,updateId:h,data:m,isIn:!1,className:qf(s.className||l.toastClassName),progressClassName:qf(s.progressClassName||l.progressClassName),autoClose:!s.isLoading&&Hf(s.autoClose,l.autoClose),closeToast(e){c.get(u).removalReason=e,p(u)},deleteToast(){let e=c.get(u);if(null!=e){if(n(Xf(e,"removed")),c.delete(u),o--,o<0&&(o=0),a.length>0)return void f(a.shift());d()}}});b.closeButton=l.closeButton,!1===s.closeButton||Gf(s.closeButton)?b.closeButton=s.closeButton:!0===s.closeButton&&(b.closeButton=!Gf(l.closeButton)||l.closeButton);let x={content:t,props:b,staleId:g};l.limit&&l.limit>0&&o>l.limit&&v?a.push(x):Uf(y)?setTimeout((()=>{f(x)}),y):f(x)},setProps(e){l=e},setToggle:(e,t)=>{let n=c.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=c.get(e))?void 0:t.isActive},getSnapshot:()=>s}}var em=new Map,tm=[],nm=new Set,rm=e=>nm.forEach((t=>t(e))),om=()=>em.size>0;function im(e,t){var n;if(t)return!(null==(n=em.get(t))||!n.isToastActive(e));let r=!1;return em.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function am(e){if(om()){if(null==e||(e=>Wf(e)||Uf(e))(e))em.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=em.get(e.containerId);t?t.removeToast(e.id):em.forEach((t=>{t.removeToast(e.id)}))}}else tm=tm.filter((t=>null!=e&&t.options.toastId!==e))}function sm(e,t){Gf(e)&&(om()||tm.push({content:e,options:t}),em.forEach((n=>{n.buildToast(e,t)})))}function lm(e,t){em.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function cm(e){let t=e.containerId||1;return{subscribe(n){let r=Zf(t,e,rm);em.set(t,r);let o=r.observe(n);return tm.forEach((e=>sm(e.content,e.options))),tm=[],()=>{o(),em.delete(t)}},setProps(e){var n;null==(n=em.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=em.get(t))?void 0:e.getSnapshot()}}}function um(e){return e&&(Wf(e.toastId)||Uf(e.toastId))?e.toastId:Jf()}function dm(e,t){return sm(e,t),t.toastId}function hm(e,t){return(0,i.A)((0,i.A)({},t),{},{type:t&&t.type||e,toastId:um(t)})}function pm(e){return(t,n)=>dm(t,hm(e,n))}function fm(e,t){return dm(e,hm("default",t))}function mm(e){let[t,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),a=(0,r.useRef)(null),s=(0,r.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function p(){n(!0)}function f(){n(!1)}function m(n){let r=a.current;if(s.canDrag&&r){s.didMove=!0,t&&f(),"x"===e.draggableDirection?s.delta=n.clientX-s.start:s.delta=n.clientY-s.start,s.start!==n.clientX&&(s.canCloseOnClick=!1);let o="x"===e.draggableDirection?"".concat(s.delta,"px, var(--y)"):"0, calc(".concat(s.delta,"px + var(--y))");r.style.transform="translate3d(".concat(o,",0)"),r.style.opacity="".concat(1-Math.abs(s.delta/s.removalDistance))}}function g(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);let t=a.current;if(s.canDrag&&s.didMove&&t){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=em.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,r.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",p),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",f)}}),[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){s.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",g);let n=a.current;s.canCloseOnClick=!0,s.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(s.start=t.clientX,s.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(s.start=t.clientY,s.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:o,right:i}=a.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=o&&t.clientX<=i&&t.clientY>=n&&t.clientY<=r?f():p()}};return l&&c&&(y.onMouseEnter=f,e.stacked||(y.onMouseLeave=p)),h&&(y.onClick=e=>{d&&d(e),s.canCloseOnClick&&u(!0)}),{playToast:p,pauseToast:f,isRunning:t,preventExitTransition:o,toastRef:a,eventHandlers:y}}fm.loading=(e,t)=>dm(e,hm("default",(0,i.A)({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),fm.promise=function(e,t,n){let r,{pending:o,error:a,success:s}=t;o&&(r=Wf(o)?fm.loading(o,n):fm.loading(o.render,(0,i.A)((0,i.A)({},n),o)));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,o)=>{if(null==t)return void fm.dismiss(r);let a=(0,i.A)((0,i.A)((0,i.A)({type:e},l),n),{},{data:o}),s=Wf(t)?{render:t}:t;return r?fm.update(r,(0,i.A)((0,i.A)({},a),s)):fm(s.render,(0,i.A)((0,i.A)({},a),s)),o},u=Vf(e)?e():e;return u.then((e=>c("success",s,e))).catch((e=>c("error",a,e))),u},fm.success=pm("success"),fm.info=pm("info"),fm.error=pm("error"),fm.warning=pm("warning"),fm.warn=fm.warning,fm.dark=(e,t)=>dm(e,hm("default",(0,i.A)({theme:"dark"},t))),fm.dismiss=function(e){am(e)},fm.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};em.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},fm.isActive=im,fm.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=em.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:o}=n,a=(0,i.A)((0,i.A)((0,i.A)({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Jf()});a.toastId!==e&&(a.staleId=e);let s=a.render||o;delete a.render,dm(s,a)}},fm.done=e=>{fm.update(e,{progress:1})},fm.onChange=function(e){return nm.add(e),()=>{nm.delete(e)}},fm.play=e=>lm(!0,e),fm.pause=e=>lm(!1,e);var gm="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,ym=e=>{let{theme:t,type:n,isLoading:o}=e,a=function(e,t){if(null==e)return{};var n,r,o=(0,Ce.A)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Bf);return r.createElement("svg",(0,i.A)({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},a))};var vm={info:function(e){return r.createElement(ym,(0,i.A)({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(ym,(0,i.A)({},e),r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(ym,(0,i.A)({},e),r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(ym,(0,i.A)({},e),r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function bm(e){let{theme:t,type:n,isLoading:o,icon:a}=e,s=null,l={theme:t,type:n};return!1===a||(Vf(a)?s=a((0,i.A)((0,i.A)({},l),{},{isLoading:o})):(0,r.isValidElement)(a)?s=(0,r.cloneElement)(a,l):o?s=vm.spinner():(e=>e in vm)(n)&&(s=vm[n](l))),s}var xm=e=>{let{isRunning:t,preventExitTransition:n,toastRef:o,eventHandlers:a,playToast:s}=mm(e),{closeButton:l,children:c,autoClose:u,onClick:d,type:h,hideProgressBar:p,closeToast:f,transition:m,position:g,className:y,style:v,progressClassName:b,updateId:x,role:w,progress:k,rtl:A,toastId:S,deleteToast:C,isIn:T,isLoading:E,closeOnClick:I,theme:_,ariaLabel:j}=e,N=zf("Toastify__toast","Toastify__toast-theme--".concat(_),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":I}),R=Vf(y)?y({rtl:A,position:g,type:h,defaultClassName:N}):zf(N,y),D=bm(e),P=!!k||!u,M={closeToast:f,type:h,theme:_},F=null;return!1===l||(F=Vf(l)?l(M):(0,r.isValidElement)(l)?(0,r.cloneElement)(l,M):function(e){let{closeToast:t,theme:n,ariaLabel:o="close"}=e;return r.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":o},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),r.createElement(m,{isIn:T,done:C,position:g,preventExitTransition:n,nodeRef:o,playToast:s},r.createElement("div",(0,i.A)((0,i.A)({id:S,tabIndex:0,onClick:d,"data-in":T,className:R},a),{},{style:v,ref:o},T&&{role:w,"aria-label":j}),null!=D&&r.createElement("div",{className:zf("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},D),Yf(c,e,!t),F,!e.customProgressBar&&r.createElement(Qf,(0,i.A)((0,i.A)({},x&&!P?{key:"p-".concat(x)}:{}),{},{rtl:A,theme:_,delay:u,isRunning:t,isIn:T,closeToast:f,hide:p,type:h,className:b,controlledProgress:P,progress:k||0}))))},wm=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},km=Kf(wm("bounce",!0)),Am=(Kf(wm("slide",!0)),Kf(wm("zoom")),Kf(wm("flip")),{position:"top-right",transition:km,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Sm(e){let t=(0,i.A)((0,i.A)({},Am),e),n=e.stacked,[o,a]=(0,r.useState)(!0),s=(0,r.useRef)(null),{getToastToRender:l,isToastActive:c,count:u}=function(e){var t;let{subscribe:n,getSnapshot:o,setProps:i}=(0,r.useRef)(cm(e)).current;i(e);let a=null==(t=(0,r.useSyncExternalStore)(n,o,o))?void 0:t.slice();return{getToastToRender:function(t){if(!a)return[];let n=new Map;return e.newestOnTop&&a.reverse(),a.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:im,count:null==a?void 0:a.length}}(t),{className:d,style:h,rtl:p,containerId:f,hotKeys:m}=t;function g(e){let t=zf("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":p});return Vf(d)?d({position:e,rtl:p,defaultClassName:t}):zf(t,qf(d))}function y(){n&&(a(!0),fm.play())}return gm((()=>{var e;if(n){let n=s.current.querySelectorAll('[data-in="true"]'),r=12,i=null==(e=t.position)?void 0:e.includes("top"),a=0,l=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(o)),n.dataset.pos||(n.dataset.pos=i?"top":"bot");let s=a*(o?.2:1)+(o?0:r*t);n.style.setProperty("--y","".concat(i?s:-1*s,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s","".concat(1-(o?l:0))),a+=n.offsetHeight,l+=.025}))}}),[o,u,n]),(0,r.useEffect)((()=>{function e(e){var t;let n=s.current;m(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),a(!1),fm.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(a(!0),fm.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[m]),r.createElement("section",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(a(!1),fm.pause())},onMouseLeave:y,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l(((e,t)=>{let o=t.length?(0,i.A)({},h):(0,i.A)((0,i.A)({},h),{},{pointerEvents:"none"});return r.createElement("div",{tabIndex:-1,className:g(e),"data-stacked":n,style:o,key:"c-".concat(e)},t.map((e=>{let{content:t,props:o}=e;return r.createElement(xm,(0,i.A)((0,i.A)({},o),{},{stacked:n,collapseAll:y,isIn:c(o.toastId,o.containerId),key:"t-".concat(o.key)}),t)})))})))}function Cm(e){let{players:t,playersData:n,onRemove:r,gameId:o}=e;return Array.isArray(t)&&0!==t.length?(0,_e.jsx)(lp,{direction:"row",spacing:1,children:t.map(((e,t)=>{const i=n[e];let a="Unknown Player";return i&&(i.firstName&&i.lastName?a="".concat(i.firstName," ").concat(i.lastName):i.displayName?a=i.displayName:i.email&&(a=i.email.split("@")[0])),(0,_e.jsx)(gp,{label:a,onDelete:r?()=>r(o,e):void 0,color:"primary",variant:"outlined",sx:{mb:.5}},o?"".concat(o,"-").concat(e,"-").concat(t):"".concat(e,"-").concat(t))}))}):(0,_e.jsx)(yn,{variant:"body2",color:"textSecondary",children:"No players"})}const Tm=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility"),Em=(0,Xa.A)((0,_e.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),Im=(0,Xa.A)((0,_e.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");function _m(e){let{game:t,onView:n,onEdit:r,onDelete:o,onEmail:i,sendingEmail:a}=e;return(0,_e.jsxs)(lp,{direction:"row",spacing:1,children:[(0,_e.jsx)(Ka,{title:"View Game",children:(0,_e.jsx)(pi,{variant:"contained",color:"info",size:"small",startIcon:(0,_e.jsx)(Tm,{}),onClick:()=>n(t),sx:{borderRadius:2,boxShadow:1,textTransform:"none",fontWeight:500},children:"View"})}),(0,_e.jsx)(Ka,{title:"Edit Game",children:(0,_e.jsx)(pi,{variant:"outlined",color:"primary",size:"small",startIcon:(0,_e.jsx)(yp,{}),onClick:()=>r(t),sx:{borderRadius:2,fontWeight:500},children:"Edit"})}),(0,_e.jsx)(Ka,{title:"Delete Game",children:(0,_e.jsx)(pi,{variant:"contained",color:"error",size:"small",startIcon:(0,_e.jsx)(Em,{}),onClick:()=>o(t),sx:{borderRadius:2,fontWeight:500},children:"Delete"})}),(0,_e.jsx)(Ka,{title:"Send Email Report",children:(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",size:"small",startIcon:(0,_e.jsx)(Im,{}),onClick:()=>i(t),disabled:a,sx:{borderRadius:2,fontWeight:500},children:"Email"})})]})}function jm(e){let{game:t,playersData:n,onView:r,onEdit:o,onDelete:i,onEmail:a,sendingEmail:s,onRemovePlayer:l,getGameStatus:c}=e;return(0,_e.jsxs)(Uh,{children:[(0,_e.jsx)(Gh,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(vp,{color:"action",fontSize:"small"}),t.date]})}),(0,_e.jsx)(Gh,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(bp,{color:"action",fontSize:"small"}),t.time]})}),(0,_e.jsx)(Gh,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(xp,{color:"action",fontSize:"small"}),t.location]})}),(0,_e.jsx)(Gh,{children:(0,_e.jsx)(gp,{label:c(t).label,color:c(t).color,size:"small"})}),(0,_e.jsx)(Gh,{children:(0,_e.jsx)(Cm,{players:t.players,playersData:n,onRemove:l,gameId:t.id})}),(0,_e.jsx)(Gh,{children:(0,_e.jsx)(_m,{game:t,onView:r,onEdit:o,onDelete:i,onEmail:a,sendingEmail:s})})]})}function Nm(e){return(0,At.Ay)("MuiDrawer",e)}(0,kt.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Rm=["BackdropProps"],Dm=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Pm=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},Mm=(0,wt.Ay)(Eo,{name:"MuiDrawer",slot:"Root",overridesResolver:Pm})((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}})),Fm=(0,wt.Ay)("div",{shouldForwardProp:wt.ep,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Pm})({flex:"0 0 auto"}),Om=(0,wt.Ay)(Gt,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["paperAnchor".concat((0,xt.A)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,xt.A)(n.anchor))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})})),Lm={left:"right",right:"left",top:"down",bottom:"up"};const zm=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDrawer"}),o=jr(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:s,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:h}={},onClose:p,open:f=!1,PaperProps:m={},SlideProps:g,TransitionComponent:y=Od,transitionDuration:v=i,variant:b="temporary"}=n,x=(0,Ce.A)(n.ModalProps,Rm),w=(0,Ce.A)(n,Dm),k=r.useRef(!1);r.useEffect((()=>{k.current=!0}),[]);const A=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?Lm[t]:t}(o,a),S=a,C=(0,Se.A)({},n,{anchor:S,elevation:u,open:f,variant:b},w),T=(e=>{const{classes:t,anchor:n,variant:r}=e,o={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,xt.A)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,xt.A)(n))]};return(0,bt.A)(o,Nm,t)})(C),E=(0,_e.jsx)(Om,(0,Se.A)({elevation:"temporary"===b?u:0,square:!0},m,{className:(0,vt.A)(T.paper,m.className),ownerState:C,children:l}));if("permanent"===b)return(0,_e.jsx)(Fm,(0,Se.A)({className:(0,vt.A)(T.root,T.docked,c),ownerState:C,ref:t},w,{children:E}));const I=(0,_e.jsx)(y,(0,Se.A)({in:f,direction:Lm[A],timeout:v,appear:k.current},g,{children:E}));return"persistent"===b?(0,_e.jsx)(Fm,(0,Se.A)({className:(0,vt.A)(T.root,T.docked,c),ownerState:C,ref:t},w,{children:I})):(0,_e.jsx)(Mm,(0,Se.A)({BackdropProps:(0,Se.A)({},s,h,{transitionDuration:v}),className:(0,vt.A)(T.root,T.modal,c),open:f,ownerState:C,onClose:p,hideBackdrop:d,ref:t},w,x,{children:I}))}));function Bm(e){let{open:t,game:n,playersData:r,onClose:o,onEdit:i,onDelete:a,onEmail:s,sendingEmail:l}=e;return n?(0,_e.jsx)(zm,{anchor:"right",open:t,onClose:o,children:(0,_e.jsxs)(gt,{sx:{width:350,p:3,position:"relative"},children:[(0,_e.jsx)(nr,{onClick:o,sx:{position:"absolute",top:8,right:8},children:(0,_e.jsx)(su,{})}),(0,_e.jsx)(yn,{variant:"h6",gutterBottom:!0,children:"Game Details"}),(0,_e.jsx)(is,{sx:{mb:2}}),(0,_e.jsx)(yn,{variant:"subtitle2",children:"Date"}),(0,_e.jsx)(yn,{sx:{mb:1},children:n.date}),(0,_e.jsx)(yn,{variant:"subtitle2",children:"Time"}),(0,_e.jsx)(yn,{sx:{mb:1},children:n.time}),(0,_e.jsx)(yn,{variant:"subtitle2",children:"Location"}),(0,_e.jsx)(yn,{sx:{mb:1},children:n.location}),(0,_e.jsx)(yn,{variant:"subtitle2",children:"Status"}),(0,_e.jsx)(gp,{label:n.status||"N/A",color:"primary",sx:{mb:2}}),(0,_e.jsx)(yn,{variant:"subtitle2",children:"Players"}),(0,_e.jsx)(Cm,{players:n.players,playersData:r,gameId:n.id}),(0,_e.jsx)(is,{sx:{my:2}}),(0,_e.jsxs)(lp,{direction:"row",spacing:2,children:[(0,_e.jsx)(Ka,{title:"Edit Game",children:(0,_e.jsx)(nr,{color:"primary",onClick:()=>i(n),children:(0,_e.jsx)(yp,{})})}),(0,_e.jsx)(Ka,{title:"Delete Game",children:(0,_e.jsx)(nr,{color:"error",onClick:()=>a(n),children:(0,_e.jsx)(Em,{})})}),(0,_e.jsx)(Ka,{title:"Send Email Report",children:(0,_e.jsx)(nr,{color:"primary",onClick:()=>s(n),disabled:l,children:(0,_e.jsx)(Im,{})})})]})]})}):null}function Um(e){return(0,At.Ay)("MuiInputAdornment",e)}const Wm=(0,kt.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Vm;const qm=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Hm=(0,wt.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat((0,xt.A)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{["&.".concat(Wm.positionStart,"&:not(.").concat(Wm.hiddenLabel,")")]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),Gm=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiInputAdornment"}),{children:o,className:i,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=n,d=(0,Ce.A)(n,qm),h=xl()||{};let p=u;u&&h.variant,h&&!p&&(p=h.variant);const f=(0,Se.A)({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:c,variant:p}),m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:o,size:i,variant:a}=e,s={root:["root",n&&"disablePointerEvents",o&&"position".concat((0,xt.A)(o)),a,r&&"hiddenLabel",i&&"size".concat((0,xt.A)(i))]};return(0,bt.A)(s,Um,t)})(f);return(0,_e.jsx)(bl.Provider,{value:null,children:(0,_e.jsx)(Hm,(0,Se.A)({as:a,ownerState:f,className:(0,vt.A)(m.root,i),ref:t},d,{children:"string"!==typeof o||l?(0,_e.jsxs)(r.Fragment,{children:["start"===c?Vm||(Vm=(0,_e.jsx)("span",{className:"notranslate",children:"\u200b"})):null,o]}):(0,_e.jsx)(yn,{color:"text.secondary",children:o})}))})}));var Km=n(6360);function Xm(){const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),h=J(),{currentUser:p}=ys(),[f,m]=(0,r.useState)({}),[g,y]=(0,r.useState)("all"),[v,b]=(0,r.useState)(""),[x,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(null),S="dark"===jr().palette.mode;(0,r.useEffect)((()=>{if(!p)return;Mp();const e=(0,ms.query)((0,ms.collection)(fs.db,"games"),(0,ms.orderBy)("date","desc")),n=(0,ms.onSnapshot)(e,(async e=>{try{const n=e.docs.map((e=>(0,i.A)({id:e.id},e.data()))),r=new Set;n.forEach((e=>{e.players&&Array.isArray(e.players)&&e.players.forEach((e=>{"string"===typeof e&&r.add(e)}))}));const a=await Lp(Array.from(r),null===p||void 0===p?void 0:p.uid);m(a),t(n),o(!1)}catch(a){console.error("Error fetching games:",a),s("Failed to load games"),o(!1)}}),(e=>{console.error("Error subscribing to games:",e),s("Failed to load games"),o(!1)}));return()=>n()}),[p]);const C=e=>{var t;if(!e.date||!e.time||"string"!==typeof e.date||"string"!==typeof e.time)return{label:"Invalid Date",color:"default"};const n=Ap("".concat(e.date,"T").concat(e.time));if(!n||isNaN(n.getTime()))return{label:"Invalid Date",color:"default"};return Rp(new Date,n)?{label:"Past",color:"default"}:e.isOpen?(null===(t=e.players)||void 0===t?void 0:t.length)>=(e.maxPlayers||4)?{label:"Full",color:"warning"}:{label:"Open",color:"success"}:{label:"Closed",color:"error"}},T=async(e,t)=>{try{const n=(0,ms.doc)(fs.db,"games",e),r=await(0,ms.getDoc)(n);if(!r.exists())return void console.error("Game not found");const o=(r.data().players||[]).filter((e=>e!==t));await(0,ms.updateDoc)(n,{players:o,lastUpdated:(0,ms.serverTimestamp)()}),fm.success("Player removed successfully")}catch(a){console.error("Error removing player:",a),fm.error("Failed to remove player")}};if(n)return(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,_e.jsx)(Bt,{})});const E=e=>{A(e),w(!0)},I=e=>c(e),_=e=>(async e=>{if(window.confirm("Are you sure you want to delete this game?"))try{await(0,fs.deleteGame)(e),fm.success("Game deleted successfully")}catch(t){console.error("Error deleting game:",t),s("Failed to delete game: "+t.message)}})(e.id),j=e=>(async e=>{d(!0);try{await Of(e),fm.success("Game report sent successfully! \ud83d\udce7")}catch(a){console.error("Error sending email:",a),fm.error("Failed to send email report")}finally{d(!1)}})(e.id),N=(e=>{let t=e;const n=new Date;if("upcoming"===g&&(t=t.filter((e=>{const t=e.date&&e.time?Ap("".concat(e.date,"T").concat(e.time)):null;return t&&t>n}))),"past"===g&&(t=t.filter((e=>{const t=e.date&&e.time?Ap("".concat(e.date,"T").concat(e.time)):null;return t&&t<=n}))),"tournaments"===g&&(t=t.filter((e=>e.isTournament))),v.trim()){const e=v.trim().toLowerCase();t=t.filter((t=>t.location&&t.location.toLowerCase().includes(e)||t.players&&t.players.some((t=>{const n=f[t];return!!n&&(n.firstName&&n.firstName.toLowerCase().includes(e)||n.lastName&&n.lastName.toLowerCase().includes(e)||n.displayName&&n.displayName.toLowerCase().includes(e)||n.email&&n.email.toLowerCase().includes(e))}))))}return t})(e);return(0,_e.jsxs)(gt,{sx:{p:{xs:1,sm:3},background:e=>"dark"===e.palette.mode?"linear-gradient(120deg, ".concat((0,Ut.X4)(e.palette.background.default,.9)," 0%, ").concat((0,Ut.X4)(e.palette.background.paper,.8)," 100%)"):"linear-gradient(120deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh"},children:[(0,_e.jsxs)(gt,{sx:{mb:2,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"}},children:[(0,_e.jsx)(yn,{variant:"h5",component:"h2",sx:{mb:{xs:1,sm:0},color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold",textShadow:S?"0 1px 2px rgba(0,0,0,0.3)":"none"},children:"Games Management"}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",startIcon:(0,_e.jsx)(Zh,{}),onClick:()=>h("/create-game"),sx:{width:{xs:"100%",sm:"auto"}},children:"Create Game"})]}),(0,_e.jsxs)(hh,{value:g,onChange:(e,t)=>y(t),sx:{mb:2,"& .MuiTabs-indicator":{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,height:3,borderRadius:"3px 3px 0 0",boxShadow:e=>"dark"===e.palette.mode?"0 0 8px rgba(0, 0, 0, 0.3)":"none"}},variant:"scrollable",scrollButtons:"auto",children:[(0,_e.jsx)(yh,{value:"all",label:"All",sx:{color:e=>"dark"===e.palette.mode&&"all"===g?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"}}}),(0,_e.jsx)(yh,{value:"upcoming",label:"Upcoming",sx:{color:e=>"dark"===e.palette.mode&&"upcoming"===g?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"}}}),(0,_e.jsx)(yh,{value:"past",label:"Past",sx:{color:e=>"dark"===e.palette.mode&&"past"===g?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"}}}),(0,_e.jsx)(yh,{value:"tournaments",label:"Tournaments",sx:{color:e=>"dark"===e.palette.mode&&"tournaments"===g?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"}}})]}),(0,_e.jsx)(nu,{value:v,onChange:e=>b(e.target.value),placeholder:"Search by location or player...",size:"small",sx:{mb:2,width:{xs:"100%",sm:350},"& .MuiOutlinedInput-root":{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.8):void 0,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.5):void 0},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0}},"& .MuiInputLabel-root":{color:e=>"dark"===e.palette.mode?e.palette.text.secondary:void 0},"& .MuiSvgIcon-root":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0}},InputProps:{startAdornment:(0,_e.jsx)(Gm,{position:"start",children:(0,_e.jsx)(Km.A,{})}),sx:{color:e=>"dark"===e.palette.mode?e.palette.text.primary:void 0}}}),a&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:a}),(0,_e.jsx)(kh,{component:Gt,sx:{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.8):e.palette.background.paper,boxShadow:e=>"dark"===e.palette.mode?"0 8px 32px rgba(0, 0, 0, 0.3)":void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",borderRadius:2,overflow:"auto",maxWidth:"100%",overflowX:"auto","&::-webkit-scrollbar":{height:"12px",width:"12px",display:"block"},"&::-webkit-scrollbar-track":{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.5):(0,Ut.X4)(e.palette.grey[200],.5),borderRadius:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.7):(0,Ut.X4)(e.palette.primary.main,.4),borderRadius:"6px",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.9):(0,Ut.X4)(e.palette.primary.main,.6)}}},children:(0,_e.jsxs)(Ih,{size:"small",sx:{"& .MuiTableCell-root":{borderColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.divider,.5):e.palette.divider}},children:[(0,_e.jsx)(Mh,{sx:{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.15):(0,Ut.X4)(e.palette.primary.main,.05)},children:(0,_e.jsxs)(Uh,{children:[(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Date"}),(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Time"}),(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Location"}),(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Status"}),(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Players"}),(0,_e.jsx)(Gh,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold"},children:"Actions"})]})}),(0,_e.jsx)(Jh,{children:0===N.length?(0,_e.jsx)(Uh,{children:(0,_e.jsx)(Gh,{colSpan:6,align:"center",children:(0,_e.jsx)(yn,{variant:"body2",color:"textSecondary",children:"No games found"})})}):N.map((e=>(0,_e.jsx)(jm,{game:e,playersData:f,onView:E,onEdit:I,onDelete:_,onEmail:j,sendingEmail:u,onRemovePlayer:T,getGameStatus:C},e.id)))})]})}),(0,_e.jsx)(Bm,{open:x,game:k,playersData:f,onClose:()=>w(!1),onEdit:I,onDelete:_,onEmail:j,sendingEmail:u}),l&&(0,_e.jsx)(kp,{open:!!l,game:l,onClose:()=>c(null),onSuccess:()=>{c(null)},clearPlayerCache:Mp,getPlayersData:Lp})]})}var Ym=n(2177);const Qm=(0,r.forwardRef)(((e,t)=>{var n;let{photoURL:r,name:o,size:a=32,email:s}=e;console.group("\ud83d\uddbc\ufe0f PlayerAvatar AGGRESSIVE DEBUG"),console.log("\ud83d\udd0d FULL INPUT DETAILS:",{photoURL:{value:r,type:typeof r,length:r?r.length:"N/A",startsWith:r?{http:r.startsWith("http://"),https:r.startsWith("https://"),data:r.startsWith("data:image"),blob:r.startsWith("blob:")}:"N/A"},name:{value:o,type:typeof o,trimmed:o?o.trim():"N/A"},size:{value:a,type:typeof a},email:{value:s,type:typeof s}});let l="";try{if(o&&"string"===typeof o){const e=o.trim().split(/\s+/).filter((e=>e.length>0));e.length>=2?l="".concat(e[0][0]).concat(e[e.length-1][0]).toUpperCase():1===e.length&&(l=e[0][0].toUpperCase())}}catch(d){console.error("\u26a0\ufe0f CRITICAL INITIALS ERROR:",d)}const c=r&&"string"===typeof r&&(r.startsWith("http://")||r.startsWith("https://")||r.startsWith("data:image")||r.startsWith("blob:"));console.log("\ud83d\udd75\ufe0f VALIDATION RESULTS:",{initials:l||"NO INITIALS",isValidPhotoURL:c,photoURLDetails:c?{fullURL:r,protocol:r.split("://")[0],domain:null===(n=r.split("://")[1])||void 0===n?void 0:n.split("/")[0]}:null});const u=c?null:l?l.toUpperCase():(0,_e.jsx)(Ym.A,{fontSize:"small"});return console.groupEnd(),(0,_e.jsx)(Ka,{title:o||s||"",children:(0,_e.jsx)(ts,{ref:t,src:c?r:void 0,alt:o||"Player Avatar",sx:(0,i.A)({width:a,height:a,bgcolor:"primary.main",fontSize:.45*a,color:"white"},u?{border:"2px solid red",backgroundColor:"rgba(255,0,0,0.1)"}:{}),imgProps:{onError:e=>{console.error("\ud83d\udea8 AVATAR IMAGE LOAD ERROR:",{src:r,event:e}),e.target.style.display="none"}},children:u})})}));function $m(e){return(0,At.Ay)("MuiFab",e)}const Jm=(0,kt.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Zm=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],eg=(0,wt.Ay)($n,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat((0,xt.A)(n.size))],"inherit"===n.color&&t.colorInherit,t[(0,xt.A)(n.size)],t[n.color]]}})((e=>{let{theme:t,ownerState:n}=e;var r,o;return(0,Se.A)({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(r=(o=t.palette).getContrastText)?void 0:r.call(o,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},["&.".concat(Jm.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]}},"small"===n.size&&{width:40,height:40},"medium"===n.size&&{width:48,height:48},"extended"===n.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===n.variant&&"small"===n.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===n.variant&&"medium"===n.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===n.color&&{color:"inherit"})}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({},"inherit"!==n.color&&"default"!==n.color&&null!=(t.vars||t).palette[n.color]&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}})}),(e=>{let{theme:t}=e;return{["&.".concat(Jm.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}})),tg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiFab"}),{children:r,className:o,color:i="default",component:a="button",disabled:s=!1,disableFocusRipple:l=!1,focusVisibleClassName:c,size:u="large",variant:d="circular"}=n,h=(0,Ce.A)(n,Zm),p=(0,Se.A)({},n,{color:i,component:a,disabled:s,disableFocusRipple:l,size:u,variant:d}),f=(e=>{const{color:t,variant:n,classes:r,size:o}=e,i={root:["root",n,"size".concat((0,xt.A)(o)),"inherit"===t?"colorInherit":t]},a=(0,bt.A)(i,$m,r);return(0,Se.A)({},r,a)})(p);return(0,_e.jsx)(eg,(0,Se.A)({className:(0,vt.A)(f.root,o),component:a,disabled:s,focusRipple:!l,focusVisibleClassName:(0,vt.A)(f.focusVisible,c),ownerState:p,ref:t},h,{classes:f,children:r}))}));function ng(e){let{open:t,user:n,onDelete:o,onClose:i,loading:a}=e;const[s,l]=(0,r.useState)("");return(0,_e.jsxs)(Is,{open:t,onClose:i,maxWidth:"xs",fullWidth:!0,children:[(0,_e.jsx)(Ds,{children:"Delete User"}),(0,_e.jsxs)(Os,{children:[s&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:s}),(0,_e.jsxs)(yn,{children:["Are you sure you want to delete user ",(0,_e.jsx)("b",{children:null===n||void 0===n?void 0:n.email}),"? This action cannot be undone."]})]}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:i,disabled:a,children:"Cancel"}),(0,_e.jsx)(pi,{color:"error",variant:"contained",onClick:async()=>{l("");try{await o(n)}catch(e){l("Failed to delete user: "+e.message)}},disabled:a,startIcon:a?(0,_e.jsx)(Bt,{size:18}):null,children:a?"Deleting...":"Delete"})]})]})}function rg(){const[e,t]=(0,r.useState)(!1),[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[p,f]=(0,r.useState)(""),[m,g]=(0,r.useState)(null),[y,v]=(0,r.useState)({role:"",firstName:"",lastName:""}),[b,x]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)({email:"",name:"",role:"user"});(0,r.useEffect)((()=>{(async()=>{h(!0);try{const e=(0,ms.collection)(fs.db,"users"),t=await(0,ms.getDocs)(e),n=[];for(const r of t.docs){const e=await Op(r.id);n.push((0,i.A)({id:r.id},e))}u(n)}catch(p){console.error("Error fetching users:",p),f("Failed to load users")}finally{h(!1)}})();const e=(0,ms.collection)(fs.db,"users"),t=(0,ms.onSnapshot)(e,(async e=>{const t=e.docChanges();for(const n of t)if("modified"===n.type){const e=await Op(n.doc.id);u((t=>t.map((t=>t.id===n.doc.id?(0,i.A)((0,i.A)({},t),e):t))))}}));return()=>{t(),Fp()}}),[]);const C=e=>{const{name:t,value:n}=e.target;v((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},T=e=>{const{name:t,value:n}=e.target;S((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},E=e=>e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.displayName?e.displayName:e.email?e.email.split("@")[0]:"Unknown User";return d?(0,_e.jsx)(sn,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,_e.jsx)(Bt,{})}):(0,_e.jsxs)(sn,{maxWidth:"md",sx:{mt:4},children:[(0,_e.jsx)(Gt,{elevation:3,children:(0,_e.jsxs)(gt,{sx:{p:3},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,_e.jsx)(yn,{variant:"h5",children:"User Management"}),(0,_e.jsx)(tg,{color:"primary",size:"small",onClick:()=>k(!0),children:(0,_e.jsx)(Zh,{})})]}),p&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:p}),(0,_e.jsx)(kh,{children:(0,_e.jsxs)(Ih,{children:[(0,_e.jsx)(Mh,{children:(0,_e.jsxs)(Uh,{children:[(0,_e.jsx)(Gh,{children:(0,_e.jsx)(gt,{sx:{display:"flex",alignItems:"center"},children:(0,_e.jsx)(yn,{variant:"body1",children:"Name"})})}),(0,_e.jsx)(Gh,{children:"Email"}),(0,_e.jsx)(Gh,{children:"Role"}),(0,_e.jsx)(Gh,{children:"Actions"})]})}),(0,_e.jsxs)(Jh,{children:[c.map((e=>(0,_e.jsxs)(Uh,{children:[(0,_e.jsx)(Gh,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(ts,{sx:{bgcolor:e.color||"primary.main"},children:e.initials||"?"}),(0,_e.jsxs)(gt,{children:[(0,_e.jsx)(yn,{variant:"body1",children:E(e)}),(0,_e.jsx)(yn,{variant:"caption",color:"text.secondary",children:e.email})]})]})}),(0,_e.jsx)(Gh,{children:e.email}),(0,_e.jsx)(Gh,{children:(0,_e.jsx)(gp,{label:e.role||"user",color:"admin"===e.role?"primary":"default",size:"small"})}),(0,_e.jsxs)(Gh,{children:[(0,_e.jsx)(nr,{size:"small",onClick:()=>(e=>{g(e),v({role:e.role||"user",firstName:e.firstName||"",lastName:e.lastName||""})})(e),title:"Edit",children:(0,_e.jsx)(yp,{})}),(0,_e.jsx)(nr,{size:"small",color:"error",onClick:()=>{a(e),t(!0)},title:"Delete",disabled:"admin"===e.role,children:(0,_e.jsx)(Em,{})})]})]},e.id))),0===c.length&&(0,_e.jsx)(Uh,{children:(0,_e.jsx)(Gh,{colSpan:4,align:"center",children:"No users found"})})]})]})})]})}),(0,_e.jsx)(ng,{open:e,user:o,onDelete:async e=>{l(!0);try{const{deleteDoc:r,doc:o}=await Promise.resolve().then(n.bind(n,6032));await r(o(fs.db,"users",e.id)),u((t=>t.filter((t=>t.id!==e.id)))),t(!1),a(null)}catch(r){f("Failed to delete user: "+r.message)}finally{l(!1)}},onClose:()=>{t(!1),a(null)},loading:s}),(0,_e.jsxs)(Is,{open:Boolean(m),onClose:()=>g(null),maxWidth:"sm",fullWidth:!0,children:[(0,_e.jsx)(Ds,{children:"Edit User"}),(0,_e.jsx)(Os,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,_e.jsx)(nu,{label:"First Name",name:"firstName",value:y.firstName,onChange:C,fullWidth:!0}),(0,_e.jsx)(nu,{label:"Last Name",name:"lastName",value:y.lastName,onChange:C,fullWidth:!0}),(0,_e.jsxs)(bc,{fullWidth:!0,children:[(0,_e.jsx)(fc,{children:"Role"}),(0,_e.jsxs)($c,{name:"role",value:y.role,label:"Role",onChange:C,children:[(0,_e.jsx)(ri,{value:"user",children:"User"}),(0,_e.jsx)(ri,{value:"admin",children:"Admin"})]})]})]})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>g(null),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{try{const e=(0,ms.doc)(fs.db,"users",m.id);await(0,ms.updateDoc)(e,{role:y.role,firstName:y.firstName.trim(),lastName:y.lastName.trim()}),Mp(m.id);const t=await Op(m.id);u((e=>e.map((e=>e.id===m.id?(0,i.A)((0,i.A)({},e),t):e)))),g(null)}catch(e){f("Failed to update user: "+e.message)}},variant:"contained",disabled:!y.role,children:"Save Changes"})]})]}),(0,_e.jsxs)(Is,{open:w,onClose:()=>k(!1),children:[(0,_e.jsx)(Ds,{children:"Add New User"}),(0,_e.jsx)(Os,{children:(0,_e.jsxs)(gt,{sx:{minWidth:300,mt:2},children:[(0,_e.jsx)(nu,{name:"email",label:"Email",value:A.email,onChange:T,fullWidth:!0,required:!0,sx:{mb:2}}),(0,_e.jsx)(nu,{name:"name",label:"Name",value:A.name,onChange:T,fullWidth:!0,required:!0,sx:{mb:2}}),(0,_e.jsxs)(bc,{fullWidth:!0,children:[(0,_e.jsx)(fc,{children:"Role"}),(0,_e.jsxs)($c,{name:"role",value:A.role,label:"Role",onChange:T,children:[(0,_e.jsx)(ri,{value:"user",children:"User"}),(0,_e.jsx)(ri,{value:"admin",children:"Admin"})]})]})]})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>k(!1),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{try{if(!A.email||!A.name)throw new Error("Please fill in all required fields");k(!1),S({email:"",name:"",role:"user"})}catch(e){f("Failed to create user: "+e.message)}},variant:"contained",children:"Add User"})]})]})]})}const og=()=>{const e=J(),t=Q(),n="dark"===jr().palette.mode,r=t.pathname.split("/").pop();return(0,_e.jsx)(sn,{maxWidth:"lg",children:(0,_e.jsx)(gt,{sx:{mt:4},children:(0,_e.jsxs)(Gt,{elevation:n?6:3,sx:{p:3,bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.8):e.palette.background.paper,boxShadow:e=>"dark"===e.palette.mode?"0 8px 32px rgba(0, 0, 0, 0.3)":void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",borderRadius:2},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,_e.jsx)(yn,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold",textShadow:n?"0 1px 2px rgba(0,0,0,0.3)":"none",mb:0},children:"Admin Dashboard"}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",startIcon:(0,_e.jsx)(ls,{}),onClick:()=>e("/send-notification"),sx:{backgroundColor:"#2A2A2A",color:"#FFFFFF","&:hover":{backgroundColor:"#4caf50"}},children:"Notification Center"})]}),(0,_e.jsx)(is,{sx:{mb:3,borderColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.divider,.5):e.palette.divider}}),(0,_e.jsxs)(hh,{value:"users"===r?"users":"games",onChange:(t,n)=>{e("/admin/".concat(n))},sx:{mb:3,"& .MuiTabs-indicator":{backgroundColor:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,height:3,borderRadius:"3px 3px 0 0",boxShadow:e=>"dark"===e.palette.mode?"0 0 8px rgba(0, 0, 0, 0.3)":"none"}},children:[(0,_e.jsx)(yh,{value:"games",label:"Games Management",icon:(0,_e.jsx)(us,{}),iconPosition:"start",sx:{color:e=>"dark"===e.palette.mode&&"users"!==r?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"},"& .MuiSvgIcon-root":{color:e=>"dark"===e.palette.mode&&"users"!==r?e.palette.primary.light:void 0}}}),(0,_e.jsx)(yh,{value:"users",label:"Users Management",icon:(0,_e.jsx)(vh,{}),iconPosition:"start",sx:{color:e=>"dark"===e.palette.mode&&"users"===r?e.palette.primary.light:void 0,"&.Mui-selected":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0,fontWeight:"bold"},"& .MuiSvgIcon-root":{color:e=>"dark"===e.palette.mode&&"users"===r?e.palette.primary.light:void 0}}})]}),(0,_e.jsxs)(ge,{children:[(0,_e.jsx)(fe,{path:"games",element:(0,_e.jsx)(Xm,{})}),(0,_e.jsx)(fe,{path:"users",element:(0,_e.jsx)(rg,{})}),(0,_e.jsx)(fe,{path:"*",element:(0,_e.jsx)(Xm,{})})]})]})})})};function ig(e,t,n){const[r,o]=yd(null===n||void 0===n?void 0:n.in,e,t),i=ag(r,o),a=Math.abs(Bp(r,o));r.setDate(r.getDate()-i*a);const s=i*(a-Number(ag(r,o)===-i));return 0===s?0:s}function ag(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function sg(e,t,n){const[r,o]=yd(null===n||void 0===n?void 0:n.in,e,t),i=(+r-+o)/ed;return Sd(null===n||void 0===n?void 0:n.roundingMethod)(i)}function lg(e,t,n){const r=Cd(e,t)/Zu;return Sd(null===n||void 0===n?void 0:n.roundingMethod)(r)}const cg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMMM d, yyyy",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Date not set";try{if(!e)return n;let r=e;return"string"===typeof e?r=Ap(e):e.toDate&&"function"===typeof e.toDate&&(r=e.toDate()),isNaN(r.getTime())?(console.warn("Invalid date:",e),n):Af(r,t)}catch(r){return console.error("Error formatting date:",r,e),n}},ug=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{addSuffix:!0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Date not set";try{if(!e)return n;let r=e;return"string"===typeof e?r=Ap(e):e.toDate&&"function"===typeof e.toDate&&(r=e.toDate()),isNaN(r.getTime())?(console.warn("Invalid date for distance calculation:",e),n):Id(r,t)}catch(r){return console.error("Error calculating time distance:",r,e),n}},dg=(e,t)=>{try{if(!e||!t)return null;const n=Ap("".concat(e,"T").concat(t));return isNaN(n.getTime())?(console.warn("Invalid date/time strings:",e,t),null):n}catch(n){return console.error("Error creating date from strings:",n,e,t),null}};const hg=r.createContext();function pg(e){return(0,At.Ay)("MuiGrid",e)}const fg=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],mg=(0,kt.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>"spacing-xs-".concat(e))),...["column-reverse","column","row-reverse","row"].map((e=>"direction-xs-".concat(e))),...["nowrap","wrap-reverse","wrap"].map((e=>"wrap-xs-".concat(e))),...fg.map((e=>"grid-xs-".concat(e))),...fg.map((e=>"grid-sm-".concat(e))),...fg.map((e=>"grid-md-".concat(e))),...fg.map((e=>"grid-lg-".concat(e))),...fg.map((e=>"grid-xl-".concat(e)))]),gg=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function yg(e){const t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function vg(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const o=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return o.slice(0,o.indexOf(r))}const bg=(0,wt.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:o,item:i,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]];const r=[];return t.forEach((t=>{const o=e[t];Number(o)>0&&r.push(n["spacing-".concat(t,"-").concat(String(o))])})),r}(a,c,t));const d=[];return c.forEach((e=>{const r=n[e];r&&d.push(t["grid-".concat(e,"-").concat(String(r))])})),[t.root,r&&t.container,i&&t.item,l&&t.zeroMinWidth,...u,"row"!==o&&t["direction-xs-".concat(String(o))],"wrap"!==s&&t["wrap-xs-".concat(String(s))],...d]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){let{theme:t,ownerState:n}=e;const r=(0,ep.kW)({values:n.direction,breakpoints:t.breakpoints.values});return(0,ep.NI)({theme:t},r,(e=>{const t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(mg.item)]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:o}=n;let i={};if(r&&0!==o){const e=(0,ep.kW)({values:o,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=vg({breakpoints:t.breakpoints.values,values:e})),i=(0,ep.NI)({theme:t},e,((e,r)=>{var o;const i=t.spacing(e);return"0px"!==i?{marginTop:"-".concat(yg(i)),["& > .".concat(mg.item)]:{paddingTop:yg(i)}}:null!=(o=n)&&o.includes(r)?{}:{marginTop:0,["& > .".concat(mg.item)]:{paddingTop:0}}}))}return i}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:o}=n;let i={};if(r&&0!==o){const e=(0,ep.kW)({values:o,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=vg({breakpoints:t.breakpoints.values,values:e})),i=(0,ep.NI)({theme:t},e,((e,r)=>{var o;const i=t.spacing(e);return"0px"!==i?{width:"calc(100% + ".concat(yg(i),")"),marginLeft:"-".concat(yg(i)),["& > .".concat(mg.item)]:{paddingLeft:yg(i)}}:null!=(o=n)&&o.includes(r)?{}:{width:"100%",marginLeft:0,["& > .".concat(mg.item)]:{paddingLeft:0}}}))}return i}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,o)=>{let i={};if(r[o]&&(t=r[o]),!t)return e;if(!0===t)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=(0,ep.kW)({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[o]:a;if(void 0===s||null===s)return e;const l="".concat(Math.round(t/s*1e8)/1e6,"%");let c={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t="calc(".concat(l," + ").concat(yg(e),")");c={flexBasis:t,maxWidth:t}}}i=(0,Se.A)({flexBasis:l,flexGrow:0,maxWidth:l},c)}return 0===n.breakpoints.values[o]?Object.assign(e,i):e[n.breakpoints.up(o)]=i,e}),{})}));const xg=e=>{const{classes:t,container:n,direction:r,item:o,spacing:i,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return["spacing-xs-".concat(String(e))];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e="spacing-".concat(t,"-").concat(String(r));n.push(e)}})),n}(i,l));const u=[];l.forEach((t=>{const n=e[t];n&&u.push("grid-".concat(t,"-").concat(String(n)))}));const d={root:["root",n&&"container",o&&"item",s&&"zeroMinWidth",...c,"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==a&&"wrap-xs-".concat(String(a)),...u]};return(0,bt.A)(d,pg,t)};const wg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiGrid"}),{breakpoints:o}=jr(),i=ht(n),{className:a,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:h=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1}=i,y=(0,Ce.A)(i,gg),v=p||f,b=l||f,x=r.useContext(hg),w=u?s||12:x,k={},A=(0,Se.A)({},y);o.keys.forEach((e=>{null!=y[e]&&(k[e]=y[e],delete A[e])}));const S=(0,Se.A)({},i,{columns:w,container:u,direction:d,item:h,rowSpacing:v,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f},k,{breakpoints:o.keys}),C=xg(S);return(0,_e.jsx)(hg.Provider,{value:w,children:(0,_e.jsx)(bg,(0,Se.A)({ownerState:S,className:(0,vt.A)(C.root,a),as:c,ref:t},A))})}));function kg(e){return(0,At.Ay)("MuiCard",e)}(0,kt.A)("MuiCard",["root"]);const Ag=["className","raised"],Sg=(0,wt.Ay)(Gt,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),Cg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiCard"}),{className:r,raised:o=!1}=n,i=(0,Ce.A)(n,Ag),a=(0,Se.A)({},n,{raised:o}),s=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},kg,t)})(a);return(0,_e.jsx)(Sg,(0,Se.A)({className:(0,vt.A)(s.root,r),elevation:o?8:void 0,ref:t,ownerState:a},i))}));function Tg(e){return(0,At.Ay)("MuiCardContent",e)}(0,kt.A)("MuiCardContent",["root"]);const Eg=["className","component"],Ig=(0,wt.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),_g=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiCardContent"}),{className:r,component:o="div"}=n,i=(0,Ce.A)(n,Eg),a=(0,Se.A)({},n,{component:o}),s=(e=>{const{classes:t}=e;return(0,bt.A)({root:["root"]},Tg,t)})(a);return(0,_e.jsx)(Ig,(0,Se.A)({as:o,className:(0,vt.A)(s.root,r),ownerState:a,ref:t},i))}));function jg(e){return(0,At.Ay)("MuiCardActions",e)}(0,kt.A)("MuiCardActions",["root","spacing"]);const Ng=["disableSpacing","className"],Rg=(0,wt.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Dg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:o}=n,i=(0,Ce.A)(n,Ng),a=(0,Se.A)({},n,{disableSpacing:r}),s=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,bt.A)(r,jg,t)})(a);return(0,_e.jsx)(Rg,(0,Se.A)({className:(0,vt.A)(s.root,o),ownerState:a,ref:t},i))})),Pg=["className"],Mg=(0,wt.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),Fg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiListItemIcon"}),{className:o}=n,i=(0,Ce.A)(n,Pg),a=r.useContext(or),s=(0,Se.A)({},n,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,bt.A)(r,Yo,n)})(s);return(0,_e.jsx)(Mg,(0,Se.A)({className:(0,vt.A)(l.root,o),ownerState:s,ref:t},i))})),Og=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Lg=(0,wt.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Jo.primary)]:t.primary},{["& .".concat(Jo.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})})),zg=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiListItemText"}),{children:o,className:i,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=n,h=(0,Ce.A)(n,Og),{dense:p}=r.useContext(or);let f=null!=l?l:o,m=u;const g=(0,Se.A)({},n,{disableTypography:a,inset:s,primary:!!f,secondary:!!m,dense:p}),y=(e=>{const{classes:t,inset:n,primary:r,secondary:o,dense:i}=e,a={root:["root",n&&"inset",i&&"dense",r&&o&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,bt.A)(a,$o,t)})(g);return null==f||f.type===yn||a||(f=(0,_e.jsx)(yn,(0,Se.A)({variant:p?"body2":"body1",className:y.primary,component:null!=c&&c.variant?void 0:"span",display:"block"},c,{children:f}))),null==m||m.type===yn||a||(m=(0,_e.jsx)(yn,(0,Se.A)({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},d,{children:m}))),(0,_e.jsxs)(Lg,(0,Se.A)({className:(0,vt.A)(y.root,i),ownerState:g,ref:t},h,{children:[f,m]}))}));var Bg=n(6115),Ug=n(9669),Wg=n(9778),Vg=n(7412),qg=n(9299),Hg=n(7991);const Gg=(0,Xa.A)((0,_e.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),Kg=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen"),Xg=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Yg=(0,Xa.A)((0,_e.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share"),Qg=e=>{let{value:t,unit:n}=e;return(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mx:.3,minWidth:28,background:e=>"linear-gradient(135deg, ".concat(e.palette.primary.dark," 0%, ").concat(e.palette.primary.main," 100%)"),borderRadius:10,px:1,py:.3,boxShadow:"0 2px 8px 0 rgba(92, 107, 192, 0.4)",transition:"all 0.2s",border:"1px solid rgba(255, 255, 255, 0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(92, 107, 192, 0.5)"}},children:[(0,_e.jsx)(yn,{variant:"body2",color:"#fff",sx:{fontFamily:"monospace",fontWeight:700,fontSize:"0.85rem",lineHeight:1.2,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:t<10?"0".concat(t):t}),(0,_e.jsx)(yn,{variant:"caption",color:"#fff",sx:{fontSize:"0.6rem",lineHeight:1,opacity:.8,fontWeight:500,textTransform:"uppercase",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:n})]})},$g=e=>{let{deadline:t,deadlineTime:n,gameId:o}=e;const[i,a]=(0,r.useState)(c()),[s,l]=(0,r.useState)(!1);function c(){try{const e=Ap("".concat(t,"T").concat(n)),r=Cd(e,new Date);return r<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(r/864e5),hours:Math.floor(r/36e5%24),minutes:Math.floor(r/1e3/60%60),seconds:Math.floor(r/1e3%60)}}catch(e){return console.error("Error calculating time left:",e),{days:0,hours:0,minutes:0,seconds:0}}}(0,r.useEffect)((()=>{const e=setInterval((()=>{const e=c();a(e);Object.values(e).every((e=>e<=0))&&!s&&(l(!0),Jg(o))}),1e3);return()=>clearInterval(e)}),[t,n,o,s]);const u=Object.values(i).every((e=>e<=0))?"error.main":i.hours<=1?"warning.main":"text.secondary";return Object.values(i).every((e=>e<=0))?null:(0,_e.jsx)(gt,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:.5,"& > *":{minWidth:"auto"}},children:[i.days>0&&(0,_e.jsx)(Qg,{value:i.days,unit:"d",color:u}),(0,_e.jsx)(Qg,{value:i.hours,unit:"h",color:u}),(0,_e.jsx)(Qg,{value:i.minutes,unit:"m",color:u}),(0,_e.jsx)(Qg,{value:i.seconds,unit:"s",color:u})]})})},Jg=async e=>{try{const t=(0,ms.doc)(fs.db,"games",e);await(0,ms.updateDoc)(t,{status:"closed",isOpen:!1,registrationOpen:!1,closedAt:(new Date).toISOString(),closedByTimer:!0}),await Of(e)}catch(t){console.error("Error closing expired game:",t)}};function Zg(){var e,t,n,o,a,s,l,c;const[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(null),[S,C]=(0,r.useState)({}),[T,E]=(0,r.useState)(!1),[I,_]=(0,r.useState)(!1),[j,N]=(0,r.useState)({open:!1,gameId:null}),[R,D]=(0,r.useState)(!1),[P,M]=(0,r.useState)(null),[F,O]=(0,r.useState)([]),[L,z]=(0,r.useState)(null),{currentUser:B,isAdmin:U}=ys(),W=J();(0,r.useEffect)((()=>{if(!B)return;p(!0),m("");const e=(0,ms.query)((0,ms.collection)(fs.db,"games")),t=(0,ms.onSnapshot)(e,(async e=>{try{const t=new Set,n=[];e.forEach((e=>{const r=e.data();r.players&&r.players.forEach((e=>t.add(e))),n.push((0,i.A)({id:e.id},r))}));const r=await Lp(Array.from(t),null===B||void 0===B?void 0:B.uid);C(r),d(n),p(!1),m("")}catch(f){console.error("Error fetching games:",f),m("Failed to load games"),p(!1)}}),(e=>{console.error("Error in games subscription:",e),m("Failed to load games"),p(!1)}));return()=>t()}),[B]);const V=()=>{y(null)},q=e=>{try{if("closed"===e.status||!e.isOpen||!1===e.registrationOpen)return!0;const t=Ap("".concat(e.deadline,"T").concat(e.deadlineTime));return Rp(new Date,t)}catch(f){return console.error("Error checking registration status:",f),!0}},H=e=>{var t;return null===(t=e.players)||void 0===t?void 0:t.includes(B.uid)},G=e=>{if("object"===typeof e&&null!==e){if(e.name)return e.name;if(e.firstName&&e.lastName)return"".concat(e.firstName," ").concat(e.lastName);if(e.displayName)return e.displayName;if(e.email)return e.email.split("@")[0]}if("string"===typeof e){const t=S[e];if(!t)return e===(null===B||void 0===B?void 0:B.uid)?"You":"Player";if(t.firstName&&t.lastName)return"".concat(t.firstName," ").concat(t.lastName);if(t.displayName)return t.displayName;if(t.email)return t.email.split("@")[0]}return"Player"},K={Rounds:(0,_e.jsx)(Bg.A,{color:"primary",fontSize:"large",sx:{mb:1}}),Matches:(0,_e.jsx)(Ug.A,{color:"info",fontSize:"large",sx:{mb:1}}),Completed:(0,_e.jsx)(Wg.A,{color:"success",fontSize:"large",sx:{mb:1}}),"Avg Score":(0,_e.jsx)(Vg.A,{color:"warning",fontSize:"large",sx:{mb:1}}),"Highest Score":(0,_e.jsx)(qg.A,{color:"error",fontSize:"large",sx:{mb:1}})},X=e=>{try{if("closed"===e.status||!e.isOpen)return"";const t=Ap("".concat(e.deadline,"T").concat(e.deadlineTime)),n=new Date;if(Rp(n,t))return"Registration is closed";const r=ig(t,n),o=sg(t,n)%24,i=lg(t,n)%60;return r>0?"".concat(r," day").concat(r>1?"s":""," left to register"):o>0?"".concat(o," hour").concat(o>1?"s":""," left to register"):i>0?"".concat(i," minute").concat(i>1?"s":""," left to register"):"Less than a minute left to register"}catch(t){return console.error("Error formatting deadline:",t),""}};return h?(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,_e.jsx)(Bt,{})}):(0,_e.jsxs)(gt,{sx:{p:3},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},mb:3,gap:{xs:2,sm:0}},children:[(0,_e.jsx)(yn,{variant:"h4",component:"h1",sx:{mb:{xs:2,sm:0}},children:"Games"}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2},width:{xs:"100%",sm:"auto"}},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",bgcolor:e=>(0,Ut.X4)(e.palette.primary.main,.08),borderRadius:"50px",px:2,py:.5,border:e=>"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.15)),boxShadow:e=>"dark"===e.palette.mode?"0 2px 8px rgba(0, 0, 0, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.05)",transition:"all 0.3s ease"},children:[(0,_e.jsx)(yn,{variant:"body2",sx:{fontWeight:600,color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main,mr:1.5},children:T?"Open Games Only":"All Games"}),(0,_e.jsxs)(gt,{sx:{position:"relative",display:"inline-flex",alignItems:"center",cursor:"pointer"},children:[(0,_e.jsx)(gt,{onClick:()=>E(!T),sx:{width:42,height:22,borderRadius:11,position:"relative",transition:"background-color 0.3s",bgcolor:e=>T?"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.9):e.palette.primary.main:"dark"===e.palette.mode?(0,Ut.X4)(e.palette.grey[600],.5):(0,Ut.X4)(e.palette.grey[400],.5),"&:hover":{bgcolor:e=>T?"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,1):e.palette.primary.dark:"dark"===e.palette.mode?(0,Ut.X4)(e.palette.grey[600],.7):(0,Ut.X4)(e.palette.grey[500],.7)},boxShadow:e=>"dark"===e.palette.mode?"0 2px 4px rgba(0, 0, 0, 0.3) inset":"0 1px 3px rgba(0, 0, 0, 0.1) inset"},children:(0,_e.jsx)(gt,{sx:{position:"absolute",top:2,left:T?"calc(100% - 20px)":"2px",width:18,height:18,borderRadius:"50%",transition:"left 0.3s, box-shadow 0.3s",bgcolor:"#fff",boxShadow:T?"0 1px 5px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",justifyContent:"center","&::before":{content:'""',position:"absolute",width:14,height:14,borderRadius:"50%",transition:"opacity 0.3s",opacity:.1,bgcolor:e=>T?e.palette.primary.main:"transparent"}}})}),(0,_e.jsx)(Ka,{title:T?"Show all games":"Show open games only",children:(0,_e.jsx)(gt,{sx:{ml:1,display:"flex",color:e=>e.palette.text.secondary},children:T?(0,_e.jsx)(Kg,{fontSize:"small"}):(0,_e.jsx)(wp,{fontSize:"small"})})})]})]}),(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",startIcon:(0,_e.jsx)(ss,{}),onClick:()=>W("/tournaments"),sx:{width:{xs:"100%",sm:"auto"}},children:"View Tournaments"}),U&&(0,_e.jsx)(pi,{variant:"contained",startIcon:(0,_e.jsx)(Zh,{}),onClick:()=>W("/create-game"),sx:{width:{xs:"100%",sm:"auto"}},children:"Create Game"})]})]}),f&&(0,_e.jsx)($s,{severity:I?"success":"error",sx:{mb:2},onClose:()=>m(""),children:f}),(0,_e.jsxs)(wg,{container:!0,spacing:3,children:[u.filter((e=>!T||"closed"!==e.status&&!1!==e.isOpen)).map((e=>{var t,n,r,o,i,a,s;(e=>{var t;"closed"!==e.status&&e.isOpen&&(q(e)||(null===(t=e.players)||void 0===t||t.length,e.maxPlayers))})(e);const l=ug(dg(e.date,e.time),{addSuffix:!0},"Date not set");H(e),e.id;return(0,_e.jsx)(wg,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,_e.jsxs)(Cg,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"visible",boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.5)",background:e=>"linear-gradient(135deg, \n                    ".concat(e.palette.background.card," 0%, \n                    ").concat((0,Ut.X4)(e.palette.primary.dark,.15)," 100%)"),"&:hover":{boxShadow:"0 8px 25px 0 rgba(0, 0, 0, 0.6)",transform:"translateY(-4px)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out",background:e=>"linear-gradient(135deg, \n                      ".concat(e.palette.background.card," 0%, \n                      ").concat((0,Ut.X4)(e.palette.primary.dark,.25)," 100%)")},mb:{xs:2,sm:0},borderRadius:{xs:2,sm:3},minWidth:0,border:"1px solid rgba(255, 255, 255, 0.08)"},children:[(0,_e.jsxs)(_g,{sx:{flexGrow:1,p:{xs:2,sm:3}},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,width:"100%"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(us,{color:"primary"}),(0,_e.jsx)(yn,{variant:"h6",component:"div",sx:{fontWeight:700,letterSpacing:1},children:"Padel Game"}),U&&(0,_e.jsx)(Ka,{title:"Game Actions",arrow:!0,children:(0,_e.jsx)(nr,{size:"small",onClick:t=>((e,t)=>{y(e.currentTarget),b(t)})(t,e),sx:{ml:1,flexShrink:0},"aria-label":"Game actions menu",children:(0,_e.jsx)(Xg,{})})})]}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:{xs:.5,sm:1.5},flexWrap:{xs:"wrap",sm:"nowrap"},minWidth:0,ml:"auto",position:"relative",zIndex:2},children:["closed"!==e.status&&e.isOpen?e.isOpen&&(null===(t=e.players)||void 0===t?void 0:t.length)>=e.maxPlayers?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)($g,{deadline:e.deadline,deadlineTime:e.deadlineTime,gameId:e.id}),(0,_e.jsx)(gp,{label:"Full",color:"warning",size:"small",icon:(0,_e.jsx)(wp,{}),sx:{fontWeight:"medium",ml:1,"& .MuiChip-icon":{fontSize:16},background:e=>"linear-gradient(135deg, ".concat(e.palette.warning.dark," 30%, ").concat(e.palette.warning.main," 90%)"),boxShadow:"0 2px 6px 0 rgba(255, 167, 38, 0.4)",border:"1px solid rgba(255, 167, 38, 0.5)"}})]}):e.isOpen?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)($g,{deadline:e.deadline,deadlineTime:e.deadlineTime,gameId:e.id}),(0,_e.jsx)(gp,{label:"Open",color:"success",size:"small",icon:(0,_e.jsx)(Kg,{}),sx:{fontWeight:"medium",ml:1,"& .MuiChip-icon":{fontSize:16},background:e=>"linear-gradient(135deg, ".concat(e.palette.success.dark," 30%, ").concat(e.palette.success.main," 90%)"),boxShadow:"0 2px 6px 0 rgba(102, 187, 106, 0.4)",border:"1px solid rgba(102, 187, 106, 0.5)"}})]}):(0,_e.jsx)($g,{deadline:e.deadline,deadlineTime:e.deadlineTime,gameId:e.id}):(0,_e.jsx)(gp,{label:"Closed",color:"error",size:"small",icon:(0,_e.jsx)(Gg,{}),sx:{fontWeight:"medium","& .MuiChip-icon":{fontSize:16},background:e=>"linear-gradient(135deg, ".concat(e.palette.error.dark," 30%, ").concat(e.palette.error.main," 90%)"),boxShadow:"0 2px 6px 0 rgba(244, 67, 54, 0.4)",border:"1px solid rgba(244, 67, 54, 0.5)"}}),e.isTournament&&(0,_e.jsx)(gp,{label:"Ongoing Tournament",color:"secondary",size:"small",icon:(0,_e.jsx)(ss,{}),sx:{mr:1}})]})]}),(0,_e.jsxs)(wg,{container:!0,spacing:2,children:[(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:6,children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,_e.jsx)(vp,{sx:{mr:1,fontSize:20,color:"text.secondary"}}),(0,_e.jsx)(yn,{variant:"body2",children:cg(dg(e.date,e.time),"EEEE, MMMM d, yyyy","Date not set")})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:6,children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,_e.jsx)(bp,{sx:{mr:1,fontSize:20,color:"text.secondary"}}),(0,_e.jsxs)(yn,{variant:"body2",children:[e.time," (",l,")"]})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:6,children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,_e.jsx)(xp,{sx:{mr:1,fontSize:20,color:"text.secondary"}}),(0,_e.jsx)(yn,{variant:"body2",children:e.location})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:6,children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,_e.jsx)(bp,{sx:{mr:1,fontSize:20,color:q(e)?"error.main":"text.secondary"}}),(0,_e.jsx)(yn,{variant:"body2",color:q(e)?"error.main":"text.secondary",children:X(e)})]})})]}),(0,_e.jsx)(is,{sx:{my:1}}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:{xs:.5,sm:1},mt:1,mb:1,overflowX:{xs:"auto",sm:"visible"}},children:[(0,_e.jsx)(wp,{sx:{color:"primary.main",mr:1}}),(0,_e.jsx)(yn,{variant:"subtitle2",sx:{fontWeight:600,mr:1},children:"Players:"}),0===(null===(n=e.players)||void 0===n?void 0:n.length)&&(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",children:"No players yet"}),null===(r=e.players)||void 0===r?void 0:r.map(((e,t)=>{const n=S[e]||{},r=G(e),o=e===(null===B||void 0===B?void 0:B.uid);return(0,_e.jsx)(Ka,{title:r,placement:"top",children:(0,_e.jsx)(Qm,{photoURL:n.photoURL,name:r,size:28,email:n.email,style:{border:o?"2px solid #1976d2":void 0,marginRight:4}})},e)})),(0,_e.jsxs)(yn,{variant:"caption",color:"text.secondary",sx:{ml:1},children:["(",(null===(o=e.players)||void 0===o?void 0:o.length)||0,"/",e.maxPlayers,")"]})]}),(0,_e.jsx)(is,{sx:{my:1}}),(0,_e.jsx)(gt,{sx:{display:"flex",flexDirection:"column",gap:1,mt:1},children:null===(i=e.players)||void 0===i?void 0:i.map(((e,t)=>{const n=S[e]||{},r=G(e),o=e===(null===B||void 0===B?void 0:B.uid);return(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(Qm,{photoURL:n.photoURL,name:r,size:24,email:n.email,style:{border:o?"2px solid #1976d2":void 0}}),(0,_e.jsx)(yn,{variant:"body2",sx:{fontWeight:600},children:r})]},e)}))})]}),(0,_e.jsxs)(Dg,{sx:{p:{xs:1,sm:2},pt:0,flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:1},alignItems:{xs:"stretch",sm:"center"}},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",width:"100%",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0},alignItems:{xs:"stretch",sm:"center"},justifyContent:"space-between"},children:[(0,_e.jsx)(pi,{variant:H(e)?"outlined":"contained",color:"primary",onClick:()=>H(e)?(async e=>{try{await(0,fs.leaveGame)(e,B.uid)}catch(f){m(f.message),setTimeout((()=>m("")),5e3)}})(e.id):(async e=>{try{const t=u.find((t=>t.id===e));if(!t)throw new Error("Game not found");if(q(t))throw new Error("Registration is closed for this game");await(0,fs.joinGame)(e,B.uid)}catch(f){m(f.message),setTimeout((()=>m("")),5e3)}})(e.id),disabled:q(e)||!H(e)&&(null===(a=e.players)||void 0===a?void 0:a.length)>=e.maxPlayers||"closed"===e.status,sx:{flexGrow:1,mb:{xs:1,sm:0},width:{xs:"100%",sm:"auto"},background:t=>H(e)?"transparent":"linear-gradient(135deg, ".concat(t.palette.primary.main," 30%, ").concat(t.palette.primary.dark," 90%)"),color:t=>H(e)?"dark"===t.palette.mode?"#7986cb":t.palette.primary.main:"#ffffff",borderWidth:t=>"dark"===t.palette.mode&&H(e)?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,letterSpacing:e=>"dark"===e.palette.mode?"0.5px":"inherit","&:hover":{background:t=>H(e)?"dark"===t.palette.mode?"rgba(121, 134, 203, 0.15)":"rgba(92, 107, 192, 0.12)":"linear-gradient(135deg, ".concat(t.palette.primary.light," 30%, ").concat(t.palette.primary.main," 90%)"),transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(121, 134, 203, 0.5)"},boxShadow:"0 2px 8px 0 rgba(121, 134, 203, 0.4)"},children:H(e)?"Leave Game":(null===(s=e.players)||void 0===s?void 0:s.length)>=e.maxPlayers?"Full (Join Disabled)":"Join Game"}),(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",onClick:()=>(e=>{const t="".concat(window.location.origin,"/games/").concat(e);navigator.clipboard.writeText(t).then((()=>{_(!0),m("Game link copied to clipboard!"),setTimeout((()=>{_(!1),m("")}),3e3)})).catch((e=>{console.error("Failed to copy link:",e),m("Failed to copy link. Please try again.")}))})(e.id),sx:{ml:{xs:0,sm:1},mb:{xs:1,sm:0},width:{xs:"100%",sm:"auto"},borderColor:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,color:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,borderWidth:e=>"dark"===e.palette.mode?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,"&:hover":{borderColor:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.dark,color:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.dark,transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(100, 181, 246, 0.4)",backgroundColor:e=>"dark"===e.palette.mode?"rgba(100, 181, 246, 0.1)":"rgba(33, 150, 243, 0.08)"}},startIcon:(0,_e.jsx)(Yg,{}),children:"Share"}),(0,_e.jsx)(pi,{variant:"outlined",color:"info",size:"small",startIcon:(0,_e.jsx)("span",{role:"img","aria-label":"View Details",children:(0,_e.jsxs)("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_e.jsx)("circle",{cx:"10",cy:"10",r:"9"}),(0,_e.jsx)("circle",{cx:"10",cy:"10",r:"3"}),(0,_e.jsx)("path",{d:"M10 1v2m0 14v2m9-9h-2M3 10H1"})]})}),onClick:()=>W("/games/".concat(e.id)),sx:{ml:{xs:0,sm:1},width:{xs:"100%",sm:"auto"},borderColor:e=>"dark"===e.palette.mode?"#29b6f6":e.palette.info.main,color:e=>"dark"===e.palette.mode?"#29b6f6":e.palette.info.main,borderWidth:e=>"dark"===e.palette.mode?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,"&:hover":{borderColor:e=>"dark"===e.palette.mode?"#73e8ff":e.palette.info.dark,color:e=>"dark"===e.palette.mode?"#73e8ff":e.palette.info.dark,transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(41, 182, 246, 0.4)",backgroundColor:e=>"dark"===e.palette.mode?"rgba(41, 182, 246, 0.1)":"rgba(3, 169, 244, 0.08)"}},children:"View Details"}),e.tournamentData&&(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",size:"small",startIcon:(0,_e.jsx)(ss,{}),onClick:()=>(e=>{M(e),O((e=>{const t=e.rounds||[],n=t.length,r=t.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0),o=[{icon:"fas fa-list-ol",label:"Rounds",value:n},{icon:"fas fa-sort-amount-down",label:"Matches",value:r},{icon:"fas fa-check-circle",label:"Completed",value:t.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0)}];if("League"===e.format){const e=r>0?(t.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.reduce(((e,t)=>e+(null!=t.score1&&null!=t.score2?t.score1+t.score2:0)),0))||0)}),0)/r).toFixed(2):0;let n=null,i=-1/0;t.forEach((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.forEach((e=>{const t=e.score1||0,r=e.score2||0;t+r>i&&(i=t+r,n=e)}))}));const a=n?"".concat(n.team1.name," ").concat(n.score1," - ").concat(n.score2," ").concat(n.team2.name):"N/A";o.push({icon:"fas fa-star",label:"Avg Score",value:e},{icon:"fas fa-bomb",label:"Highest Score",value:a})}return o})(e.tournamentData)),z((e=>{var t,n;if(null===(t=e.rounds)||void 0===t||!t.length)return null;if("League"===e.format)return null;const r=null===(n=e.rounds[e.rounds.length-1].matches)||void 0===n?void 0:n[0];return null!==r&&void 0!==r&&r.winner?"team1"===r.winner?r.team1:r.team2:null})(e.tournamentData)),D(!0)})(e),sx:{color:e=>"dark"===e.palette.mode?"#FFFFFF":e.palette.secondary.main,borderColor:e=>"dark"===e.palette.mode?"#90CAF9":e.palette.secondary.main,borderWidth:e=>"dark"===e.palette.mode?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,backgroundColor:e=>"dark"===e.palette.mode?"rgba(25, 118, 210, 0.15)":void 0,"&:hover":{borderColor:e=>"dark"===e.palette.mode?"#BBDEFB":e.palette.secondary.dark,color:e=>"dark"===e.palette.mode?"#BBDEFB":e.palette.secondary.dark,transform:"translateY(-2px)",boxShadow:e=>"dark"===e.palette.mode?"0 4px 12px 0 rgba(144, 202, 249, 0.5)":"0 4px 12px 0 rgba(100, 181, 246, 0.4)",backgroundColor:e=>"dark"===e.palette.mode?"rgba(25, 118, 210, 0.25)":"rgba(33, 150, 243, 0.08)"}},children:"View Tournament"})]}),U&&!e.isTournament&&(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",onClick:()=>{return t=e.id,void N({open:!0,gameId:t});var t},startIcon:(0,_e.jsx)(ss,{}),fullWidth:!0,sx:{mt:2,borderStyle:"dashed",borderColor:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,color:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,borderWidth:e=>"dark"===e.palette.mode?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,"&:hover":{backgroundColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.secondary.main,.15):(0,Ut.X4)(e.palette.secondary.main,.08),borderStyle:"solid",borderColor:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.dark,color:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.dark,transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(100, 181, 246, 0.4)"}},children:"Convert to Tournament"})]})]})},e.id)})),0===u.length&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(yn,{variant:"body1",color:"text.secondary",align:"center",children:"No upcoming games available"})})]}),(0,_e.jsx)(Go,{anchorEl:g,open:Boolean(g),onClose:V,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:U&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)(ri,{onClick:()=>{w(!0),V()},children:[(0,_e.jsx)(Fg,{children:(0,_e.jsx)(yp,{fontSize:"small",color:"primary"})}),(0,_e.jsx)(zg,{primary:"Edit Game",secondary:"Modify game details"})]}),(0,_e.jsxs)(ri,{onClick:async()=>{if(v)try{const e="closed"===v.status,t=e?"open":"closed";await(0,ms.updateDoc)((0,ms.doc)(fs.db,"games",v.id),(0,i.A)({status:t,isOpen:e,registrationOpen:e},e?{closedAt:null}:{closedAt:(new Date).toISOString()})),m("")}catch(e){m("Failed to update game status: "+e.message)}V()},children:[(0,_e.jsx)(Fg,{children:"closed"===(null===v||void 0===v?void 0:v.status)?(0,_e.jsx)(Kg,{fontSize:"small",color:"success"}):(0,_e.jsx)(Gg,{fontSize:"small",color:"warning"})}),(0,_e.jsx)(zg,{primary:"closed"===(null===v||void 0===v?void 0:v.status)?"Reopen Game":"Close Game",secondary:"closed"===(null===v||void 0===v?void 0:v.status)?"Allow players to join":"Prevent new joins"})]}),(0,_e.jsxs)(ri,{onClick:async()=>{if(v&&window.confirm("Are you sure you want to delete this game?"))try{await(0,ms.deleteDoc)((0,ms.doc)(fs.db,"games",v.id)),m("")}catch(e){m("Failed to delete game: "+e.message)}V()},children:[(0,_e.jsx)(Fg,{children:(0,_e.jsx)(Em,{fontSize:"small",color:"error"})}),(0,_e.jsx)(zg,{primary:"Delete Game",secondary:"Permanently remove game",sx:{color:"error.main"}})]})]})}),v&&x&&(0,_e.jsx)(kp,{open:x,game:v,onClose:()=>{w(!1),b(null)},onSuccess:()=>{w(!1),b(null),m("")},clearPlayerCache:Mp,getPlayersData:Lp}),(0,_e.jsxs)(Is,{open:j.open,onClose:()=>N({open:!1,gameId:null}),children:[(0,_e.jsx)(Ds,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{mr:1,color:"secondary.main"}}),"Convert to Tournament"]})}),(0,_e.jsxs)(Os,{children:[(0,_e.jsx)(yn,{variant:"body1",paragraph:!0,children:"Are you sure you want to convert this game to a tournament? This will:"}),(0,_e.jsxs)(gt,{component:"ul",sx:{pl:2},children:[(0,_e.jsx)(yn,{component:"li",children:"Close registration for new players"}),(0,_e.jsx)(yn,{component:"li",children:"Create a tournament bracket with the current players"}),(0,_e.jsx)(yn,{component:"li",children:"Allow tracking of matches and winners"})]}),(0,_e.jsx)(yn,{variant:"body2",sx:{mt:2,color:"text.secondary"},children:"You'll be able to customize the tournament settings in the next step."})]}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>N({open:!1,gameId:null}),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:()=>(()=>{const e=j.gameId;e&&(N({open:!1,gameId:null}),W("/games/".concat(e,"?convertToTournament=true")))})(),variant:"contained",color:"secondary",startIcon:(0,_e.jsx)(ss,{}),children:"Convert"})]})]}),P&&(0,_e.jsxs)(Is,{open:R,onClose:()=>D(!1),fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,overflow:"hidden",backgroundImage:"linear-gradient(to bottom, rgba(255,255,255,0.95), rgba(255,255,255,0.98)), url(https://www.transparenttextures.com/patterns/cubes.png)"}},children:[(0,_e.jsxs)(Ds,{sx:{p:0,position:"relative",overflow:"hidden",height:180,backgroundImage:e=>"dark"===e.palette.mode?"linear-gradient(135deg, #1a237e 0%, #0d47a1 100%)":"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)"},children:[(0,_e.jsx)(gt,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,backgroundImage:"url(https://www.transparenttextures.com/patterns/sport.png)",backgroundSize:"cover"}}),(0,_e.jsxs)(gt,{sx:{position:"absolute",top:10,right:10,display:"flex",alignItems:"center",gap:1,color:"white",bgcolor:"rgba(0,0,0,0.2)",p:1,borderRadius:1},children:[(0,_e.jsx)(vp,{fontSize:"small"}),(0,_e.jsx)(yn,{variant:"caption",children:Af(new Date(P.date||new Date),"MMM d, yyyy")})]}),(0,_e.jsxs)(gt,{sx:{p:3,zIndex:2,width:"100%"},children:[(0,_e.jsx)(yn,{variant:"h4",sx:{color:"white",fontWeight:700,textShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:(null===(e=P.tournamentData)||void 0===e?void 0:e.name)||P.location||"Tournament"}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mt:1,gap:2},children:[(0,_e.jsx)(gp,{icon:(0,_e.jsx)(xp,{sx:{color:e=>"dark"===e.palette.mode?"#FFFFFF !important":"white !important"}}),label:P.location||"Unknown location",size:"small",sx:{bgcolor:e=>"dark"===e.palette.mode?"rgba(25, 118, 210, 0.4)":"rgba(255,255,255,0.2)",color:e=>"dark"===e.palette.mode?"#FFFFFF":"white",border:e=>"dark"===e.palette.mode?"1px solid rgba(144, 202, 249, 0.5)":"none",fontWeight:e=>"dark"===e.palette.mode?600:400}}),(0,_e.jsx)(gp,{icon:(0,_e.jsx)(ss,{sx:{color:e=>"dark"===e.palette.mode?"#FFFFFF !important":"white !important"}}),label:(null===(t=P.tournamentData)||void 0===t?void 0:t.format)||"Knockout",size:"small",sx:{bgcolor:e=>"dark"===e.palette.mode?"rgba(25, 118, 210, 0.4)":"rgba(255,255,255,0.2)",color:e=>"dark"===e.palette.mode?"#FFFFFF":"white",border:e=>"dark"===e.palette.mode?"1px solid rgba(144, 202, 249, 0.5)":"none",fontWeight:e=>"dark"===e.palette.mode?600:400}})]})]})]}),(0,_e.jsxs)(Os,{sx:{p:3},children:[(0,_e.jsxs)(gt,{sx:{mb:4},children:[(0,_e.jsxs)(yn,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1,color:e=>"dark"===e.palette.mode?"#000000":e.palette.text.primary,fontWeight:600},children:[(0,_e.jsx)(Ug.A,{sx:{color:e=>"dark"===e.palette.mode?"#000000":e.palette.primary.main}}),"Tournament Stats"]}),(0,_e.jsx)(wg,{container:!0,spacing:2,children:F.map(((e,t)=>(0,_e.jsx)(wg,{item:!0,xs:6,sm:4,md:2.4,children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:2,display:"flex",flexDirection:"column",alignItems:"center",height:"100%",background:e=>"dark"===e.palette.mode?"#1E1E1E":"white",borderRadius:2,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s","&:hover":{transform:"translateY(-5px)",boxShadow:e=>"dark"===e.palette.mode?"0 8px 24px rgba(0, 0, 0, 0.6)":"0 8px 16px rgba(0,0,0,0.1)"}},children:[K[e.label]||null,(0,_e.jsx)(yn,{variant:"subtitle2",sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.text.secondary,fontWeight:600},children:e.label}),(0,_e.jsx)(yn,{variant:"h5",sx:{fontWeight:700,mt:1,color:e=>"dark"===e.palette.mode?"#FFFFFF":e.palette.text.primary},children:e.value})]})},t)))})]}),(null===(n=P.tournamentData)||void 0===n||null===(o=n.rounds)||void 0===o?void 0:o.length)>0&&(0,_e.jsxs)(gt,{sx:{mb:4},children:[(0,_e.jsxs)(yn,{variant:"subtitle1",sx:{mb:1,display:"flex",alignItems:"center",gap:1,color:e=>"dark"===e.palette.mode?"#000000":e.palette.text.primary,fontWeight:600},children:[(0,_e.jsx)(Wg.A,{sx:{color:e=>"dark"===e.palette.mode?"#000000":e.palette.success.main},fontSize:"small"}),"Tournament Progress"]}),(0,_e.jsx)(gt,{sx:{position:"relative",height:8,bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.2):"#edf2f7",borderRadius:4,overflow:"hidden",border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.3)):"none"},children:(()=>{const e=P.tournamentData.rounds.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0),t=P.tournamentData.rounds.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0),n=e>0?t/e*100:0;return(0,_e.jsx)(gt,{sx:{position:"absolute",left:0,top:0,height:"100%",width:"".concat(n,"%"),background:"linear-gradient(90deg, #48bb78 0%, #38b2ac 100%)"}})})()}),(0,_e.jsxs)(yn,{variant:"caption",sx:{display:"block",textAlign:"right",mt:.5,color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.text.secondary,fontWeight:e=>"dark"===e.palette.mode?600:400,fontSize:"0.85rem"},children:[(0,_e.jsx)(gt,{component:"span",sx:{fontWeight:"bold",color:e=>"dark"===e.palette.mode?"#FFFFFF":e.palette.text.primary},children:P.tournamentData.rounds.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0)})," / ",P.tournamentData.rounds.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0)," matches completed"]})]}),(0,_e.jsxs)(wg,{container:!0,spacing:3,children:[L&&(0,_e.jsx)(wg,{item:!0,xs:12,md:4,children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,borderRadius:2,position:"relative",overflow:"hidden",background:e=>"dark"===e.palette.mode?"linear-gradient(135deg, #b78628 0%, #8A6E2F 50%, #c69320 100%)":"linear-gradient(135deg, #f6d365 0%, #fda085 100%)",height:"100%",border:e=>"dark"===e.palette.mode?"1px solid #FFD700":"none",boxShadow:e=>"dark"===e.palette.mode?"0 8px 32px rgba(255, 215, 0, 0.2)":"0 8px 32px rgba(253, 160, 133, 0.2)"},children:[(0,_e.jsx)(gt,{sx:{position:"absolute",top:-15,right:-15,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.2)"}}),(0,_e.jsx)(gt,{sx:{position:"absolute",bottom:-20,left:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)"}}),(0,_e.jsxs)(gt,{sx:{textAlign:"center",position:"relative",zIndex:2},children:[(0,_e.jsx)(ss,{sx:{fontSize:48,color:"#FFD700",filter:"drop-shadow(0 2px 5px rgba(0,0,0,0.2))"}}),(0,_e.jsx)(yn,{variant:"h5",sx:{mt:2,mb:1,fontWeight:700,color:e=>"dark"===e.palette.mode?"#000000":"#7D4B32",textShadow:e=>"dark"===e.palette.mode?"0 2px 4px rgba(255,215,0,0.3)":"none"},children:"Champion"}),(0,_e.jsx)(yn,{variant:"h6",sx:{fontWeight:600,color:e=>"dark"===e.palette.mode?"#FFD700":"#7D4B32"},children:L.name}),(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:1,mt:2},children:null===(a=L.players)||void 0===a?void 0:a.map(((e,t)=>(0,_e.jsx)(gp,{avatar:(0,_e.jsx)(ts,{sx:{bgcolor:e=>"dark"===e.palette.mode?"#FFD700":"#7D4B32",color:e=>"dark"===e.palette.mode?"#000000":"#FFFFFF",fontWeight:"bold"},children:G(e)[0]}),label:G(e),sx:{bgcolor:e=>"dark"===e.palette.mode?"rgba(25, 118, 210, 0.2)":"rgba(255,255,255,0.7)",color:e=>"dark"===e.palette.mode?"#FFFFFF":"inherit",fontWeight:500,border:e=>"dark"===e.palette.mode?"1px solid rgba(255, 215, 0, 0.3)":"none"}},t)))})]})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,md:L?8:12,children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,borderRadius:2,bgcolor:e=>"dark"===e.palette.mode?"#1E1E1E":e.palette.background.paper,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,_e.jsxs)(yn,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1,color:e=>"dark"===e.palette.mode?"#FFFFFF":e.palette.text.primary,fontWeight:600},children:[(0,_e.jsx)(Hg.A,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main}}),"Teams & Players"]}),(0,_e.jsx)(wg,{container:!0,spacing:2,children:null===(s=P.tournamentData.teams)||void 0===s?void 0:s.map(((e,t)=>{const n=L&&(e.id===L.id||e.name===L.name),r="League"===P.tournamentData.format?{played:e.played||0,won:e.won||0,drawn:e.drawn||0,lost:e.lost||0,points:e.points||0}:null;return(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:4,children:(0,_e.jsxs)(Gt,{elevation:n?4:1,sx:{p:2,position:"relative",border:e=>n?(e.palette.mode,"2px solid #FFD700"):"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none",bgcolor:e=>n?"dark"===e.palette.mode?"rgba(255, 215, 0, 0.15)":"rgba(255, 215, 0, 0.05)":"dark"===e.palette.mode?"#2A2A2A":"white",boxShadow:e=>"dark"===e.palette.mode?"0 4px 12px rgba(0, 0, 0, 0.3)":void 0},children:[n&&(0,_e.jsx)(gt,{sx:{position:"absolute",top:-10,right:-10},children:(0,_e.jsx)(ss,{sx:{color:"#FFD700",fontSize:20}})}),(0,_e.jsx)(yn,{variant:"subtitle1",sx:{fontWeight:600,color:e=>n?"dark"===e.palette.mode?"#FFD700":e.palette.text.primary:"dark"===e.palette.mode?"#FFFFFF":e.palette.text.primary},children:e.name||"Team ".concat(t+1)}),r&&(0,_e.jsxs)(gt,{sx:{display:"flex",gap:1,mt:1,mb:1},children:[(0,_e.jsx)(gp,{size:"small",label:"".concat(r.points," pts"),sx:{bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.3):void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,fontWeight:e=>"dark"===e.palette.mode?600:400,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.5)):void 0},color:"primary"}),(0,_e.jsx)(gp,{size:"small",label:"".concat(r.won,"W-").concat(r.drawn,"D-").concat(r.lost,"L"),sx:{bgcolor:e=>"dark"===e.palette.mode?"#1A1A1A":void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.grey[500],.3)):void 0}})]}),(0,_e.jsx)(gt,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:(e.players||[]).map(((e,t)=>{const n=e===(null===B||void 0===B?void 0:B.uid);return(0,_e.jsx)(gp,{avatar:(0,_e.jsx)(ts,{sx:{bgcolor:n?e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.8):e.palette.primary.main:e=>"dark"===e.palette.mode?"#333333":void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,fontWeight:"bold"},children:G(e)[0]}),label:G(e),size:"small",sx:{bgcolor:e=>{if("dark"===e.palette.mode)return n?(0,Ut.X4)(e.palette.primary.main,.3):"#2A2A2A"},color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,border:e=>{if("dark"===e.palette.mode)return"1px solid ".concat(n?(0,Ut.X4)(e.palette.primary.main,.7):(0,Ut.X4)(e.palette.grey[400],.5))}},color:n?"primary":"default",variant:n?"filled":"outlined"},t)}))})]})},t)}))})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,borderRadius:2,bgcolor:e=>"dark"===e.palette.mode?"#1E1E1E":e.palette.background.paper,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,_e.jsxs)(yn,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1,color:e=>"dark"===e.palette.mode?"#FFFFFF":e.palette.text.primary,fontWeight:600},children:[(0,_e.jsx)(Ug.A,{sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:e.palette.primary.main}}),"Recent Results"]}),(0,_e.jsxs)(gt,{sx:{maxHeight:300,overflow:"auto"},children:[null===(l=P.tournamentData.rounds)||void 0===l?void 0:l.flatMap(((e,t)=>(e.matches||[]).filter((e=>e.completed||e.winner)).map(((n,r)=>{var o,i,a,s;return(0,_e.jsxs)(Gt,{elevation:1,sx:{p:2,mb:2,display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",justifyContent:"space-between",gap:2,bgcolor:e=>"dark"===e.palette.mode?"#1A1A1A":e.palette.background.paper,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 2px 8px rgba(0, 0, 0, 0.3)":void 0},children:[(0,_e.jsx)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,_e.jsx)(gp,{size:"small",label:e.name,sx:{bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.secondary.main,.3):void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,fontWeight:e=>"dark"===e.palette.mode?600:400,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.secondary.main,.5)):void 0},color:"secondary"})}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:{xs:1,md:3},flexGrow:1,justifyContent:"center"},children:[(0,_e.jsx)(gt,{sx:{textAlign:"right",width:"40%"},children:(0,_e.jsx)(yn,{variant:"subtitle2",sx:{fontWeight:"team1"===n.winner?700:500,color:e=>"dark"===e.palette.mode?"team1"===n.winner?e.palette.success.light:"#FFFFFF":"team1"===n.winner?e.palette.success.main:e.palette.text.primary},children:(null===(o=n.team1)||void 0===o?void 0:o.name)||"TBD"})}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1,px:2,py:1,borderRadius:1,bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.1):"grey.100",border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none"},children:[(0,_e.jsx)(yn,{variant:"h6",sx:{fontWeight:700,color:e=>"dark"===e.palette.mode?"team1"===n.winner?e.palette.success.light:"#FFFFFF":"team1"===n.winner?e.palette.success.main:e.palette.text.primary},children:null!=n.score1?n.score1:"-"}),(0,_e.jsx)(yn,{variant:"body2",sx:{px:1,color:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.common.white,.7):e.palette.text.secondary},children:"vs"}),(0,_e.jsx)(yn,{variant:"h6",sx:{fontWeight:700,color:e=>"dark"===e.palette.mode?"team2"===n.winner?e.palette.success.light:"#FFFFFF":"team2"===n.winner?e.palette.success.main:e.palette.text.primary},children:null!=n.score2?n.score2:"-"})]}),(0,_e.jsx)(gt,{sx:{textAlign:"left",width:"40%"},children:(0,_e.jsx)(yn,{variant:"subtitle2",sx:{fontWeight:"team2"===n.winner?700:500,color:e=>"dark"===e.palette.mode?"team2"===n.winner?e.palette.success.light:"#FFFFFF":"team2"===n.winner?e.palette.success.main:e.palette.text.primary},children:(null===(i=n.team2)||void 0===i?void 0:i.name)||"TBD"})})]}),(0,_e.jsx)(gt,{children:n.winner&&(0,_e.jsx)(gp,{icon:(0,_e.jsx)(ss,{fontSize:"small",sx:{color:e=>"dark"===e.palette.mode?"#FFD700":void 0}}),label:"".concat("team1"===n.winner?null===(a=n.team1)||void 0===a?void 0:a.name:null===(s=n.team2)||void 0===s?void 0:s.name," won"),size:"small",color:"success",sx:{bgcolor:e=>"dark"===e.palette.mode?"#2A2A2A":void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,fontWeight:600,border:e=>"dark"===e.palette.mode?"1px solid #FFD700":void 0}})})]},"".concat(t,"-").concat(r))})))),!(null!==(c=P.tournamentData.rounds)&&void 0!==c&&c.some((e=>(e.matches||[]).some((e=>e.completed||e.winner)))))&&(0,_e.jsx)(yn,{variant:"body2",sx:{textAlign:"center",py:3,color:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.common.white,.7):e.palette.text.secondary,fontStyle:"italic"},children:"No completed matches yet"})]})]})})]})]}),(0,_e.jsxs)(au,{sx:{px:3,py:2,borderTop:"1px solid",borderColor:"divider"},children:[(0,_e.jsx)(pi,{onClick:()=>D(!1),variant:"outlined",children:"Close"}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",startIcon:(0,_e.jsx)(ss,{}),onClick:()=>{D(!1),W("/tournaments/".concat(P.id))},children:"View Full Tournament"})]})]})]})}var ey=n(1947);const ty=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let r={title:"",body:"",type:"game",showPopup:!0,data:{gameId:t.id,url:"/games/".concat(t.id),type:"game",action:"join"}};switch(e){case"gameCreated":r.title="New Game Available",r.body="A new game has been created at ".concat(t.location," on ").concat(t.formattedDate||t.date," at ").concat(t.time,"."),r.type="game_created",r.data.type="game";break;case"gameJoined":case"gameConfirmation":r.title="Game Registration Confirmed",r.body="You are registered for the game at ".concat(t.location," on ").concat(t.formattedDate||t.date," at ").concat(t.time,". See you on the court!"),r.type="gameConfirmation",r.data.type="game";break;case"gameClosed":r.title="Game Registration Closed",r.body="Registration for the game at ".concat(t.location," on ").concat(t.formattedDate||t.date," is now closed."),r.type="game_closed",r.data.type="game";break;case"gameClosingSoon":r.title="Game Closing Soon",r.body="Registration for the game at ".concat(t.location," on ").concat(t.formattedDate||t.date," closes in ").concat(t.hoursRemaining," hours"),r.type="game_closing_soon",r.data.type="game";break;default:throw new Error("Unknown notification type: ".concat(e))}let o=[];const i=(0,ms.collection)(fs.db,"users");let a;if(n&&n.length>0)o=n;else{a=(0,ms.query)(i,(0,ms.where)("notificationSettings.gameCreated","!=",!1));o=(await(0,ms.getDocs)(a)).docs.map((e=>e.id))}if(0===o.length)return console.log("No users found to notify"),!1;console.log("Sending notifications to ".concat(o.length," users"));const s=(0,ms.collection)(fs.db,"notifications"),l=o.map((async e=>{try{return await(0,ms.addDoc)(s,{userId:e,title:r.title,body:r.body,type:r.type,data:{gameId:t.id,location:t.location,date:t.date,time:t.time,url:"/games/".concat(t.id),type:"game",action:"join",style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"}},read:!1,createdAt:(0,ms.serverTimestamp)(),showPopup:r.showPopup})}catch(n){return console.error("Error creating notification for user ".concat(e,":"),n),null}}));o.length>0&&await(async(e,t)=>{try{const n=[];for(const t of e){const e=(0,ms.doc)(fs.db,"userTokens",t),r=await(0,ms.getDoc)(e);r.exists()&&r.data().fcmToken&&n.push(r.data().fcmToken)}if(0===n.length)return void console.log("No valid FCM tokens found");const r=await fetch("https://us-central1-padelbolt-5d9a2.cloudfunctions.net/sendNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokens:n,notification:{title:t.title,body:t.body,icon:"/logo192.png",data:t.data||{}}})}),o=await r.json();return console.log("FCM notification sent:",o),o}catch(n){throw console.error("Error sending FCM notification:",n),n}})(o,{title:r.title,body:r.body,data:r.data});const c=(await Promise.all(l)).filter((e=>null!==e)).length;return console.log("Successfully sent ".concat(e," notifications to ").concat(c," users")),!0}catch(r){return console.error("Error sending ".concat(e," notifications:"),r),!1}},ny=async e=>{try{const r=(0,ms.doc)(fs.db,"games",e),o=await(0,ms.getDoc)(r);if(!o.exists())throw new Error("Game not found");const a=o.data(),s="closed"===a.status,l=s?"open":"closed";if(await(0,ms.updateDoc)(r,(0,i.A)({status:l,isOpen:s,registrationOpen:s,lastUpdated:(new Date).toISOString()},s?{closedAt:null,reopenCount:(a.reopenCount||0)+1}:{closedAt:(new Date).toISOString()})),!s){try{await Of(e)}catch(t){console.error("Error sending email:",t)}try{const t=await(0,ms.getDoc)(r);if(t.exists()){const n=(0,i.A)({id:e},t.data());await(async e=>{if(!Array.isArray(e.players)||0===e.players.length)return;"You are registered for the game at ".concat(e.location," on ").concat(e.date," at ").concat(e.time,". See you on the court!");for(const t of e.players);})(n)}}catch(n){console.error("Error notifying players on game close:",n)}}return{success:!0,isOpen:s}}catch(r){throw console.error("Error toggling game status:",r),r}},ry=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},oy=e=>(console.log("Calculating skill level for player:",e),e?"string"===typeof e?5:e.skillLevel||e.rating||5:5),iy=e=>e?"string"===typeof e?{id:e,name:"Unknown Player"}:"object"===typeof e?{id:e.id,name:e.name||e.displayName||"Unknown Player",email:e.email||null}:null:null,ay=(0,Xa.A)((0,_e.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumbered"),sy=(0,Xa.A)((0,_e.jsx)("path",{d:"M11 6H9V4h2v2zm4-2h-2v2h2V4zM9 14h2v-2H9v2zm10-4V8h-2v2h2zm0 4v-2h-2v2h2zm-6 0h2v-2h-2v2zm6-10h-2v2h2V4zm-6 4V6h-2v2h2zm-6 2V8h2V6H7V4H5v16h2v-8h2v-2H7zm8 2h2v-2h-2v2zm-4-2v2h2v-2h-2zM9 8v2h2V8H9zm4 2h2V8h-2v2zm2-4v2h2V6h-2z"}),"SportsScore"),ly=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),cy=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),uy=(0,Xa.A)((0,_e.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"}),"Whatshot"),dy=(0,Xa.A)((0,_e.jsx)("path",{d:"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z"}),"ScreenRotation"),hy=(0,Xa.A)((0,_e.jsx)("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit"),py=(0,Xa.A)((0,_e.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen"),fy="\n  .player-pair {\n    display: flex;\n    flex-direction: column;\n    margin-left: 5px;\n  }\n  \n  .player {\n    font-size: 11px;\n    margin: 2px 0;\n    display: flex;\n    align-items: center;\n  }\n  \n  .player i {\n    font-size: 10px;\n    margin-right: 5px;\n    opacity: 0.7;\n  }\n  \n  .winner-ribbon {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    color: #FFEB3B;  /* strong yellow for trophy */\n    font-size: 16px;\n    filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));\n  }\n  \n  .champion-players {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-top: 10px;\n  }\n  \n  .champion-player {\n    margin: 3px 0;\n    display: flex;\n    align-items: center;\n    font-size: 1.1rem;\n  }\n  \n  .champion-player i {\n    margin-right: 8px;\n    color: gold;\n  }\n  \n  .team-details {\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n  }\n  \n  .team-name-league {\n    font-weight: bold;\n    font-size: 14px;\n  }\n  \n  .team-players-league {\n    font-size: 11px;\n    color: #666;\n    margin-top: 2px;\n  }\n  \n  /* Knockout vertical bracket styles */\n  .tournament-bracket-vertical {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n    width: 100%;\n    padding: 16px 0;\n  }\n  .vertical-round {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    margin-bottom: 24px;\n  }\n  .vertical-round-title {\n    font-weight: bold;\n    text-align: center;\n    margin-bottom: 8px;\n    font-size: 1rem;\n    padding: 6px 12px;\n    border-radius: 4px;\n  }\n  .vertical-round-title i {\n    margin-right: 8px;\n  }\n  .vertical-round-title.semi-final {\n    background: linear-gradient(135deg, #f39c12, #e67e22);\n    color: #fff;\n    width: 140px;\n  }\n  .vertical-round-title.final {\n    background: linear-gradient(135deg, #e74c3c, #c0392b);\n    color: #fff;\n    width: 140px;\n  }\n  .vertical-matches {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 12px;\n  }\n  .vertical-match {\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    padding: 8px;\n    background: #fafafa;\n    width: clamp(200px, 90vw, 400px);\n    margin: 8px auto;\n  }\n  .vertical-match-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n    font-size: 0.9rem;\n  }\n  .vertical-match-status.completed i {\n    color: green;\n  }\n  .vertical-teams {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n  }\n  .vertical-team {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    position: relative;\n  }\n  .vertical-team-avatar {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.9rem;\n  }\n  .vertical-team-info {\n    flex: 1;\n  }\n  .vertical-team-name {\n    font-weight: bold;\n  }\n  .vertical-team-players {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n  }\n  .vertical-player {\n    font-size: 10px;\n  }\n  .vertical-match-score {\n    display: flex;\n    justify-content: center;\n    padding-top: 8px;\n    font-weight: bold;\n  }\n",my=e=>{const t="League"===e.format,n=e.rounds||[],r=e.teams||[],o=e.displayDate||"",i=e.displayTime||"";e.currentUserEmail;let a=null,s=[],l=!1;if(t){const e=by(r,n);e.sort(((e,t)=>t.points-e.points||t.goalsFor-t.goalsAgainst-(e.goalsFor-e.goalsAgainst)||t.goalsFor-e.goalsFor));const t=n.reduce(((e,t)=>e+(t.matches?t.matches.length:0)),0),o=n.reduce(((e,t)=>e+(t.matches?t.matches.filter((e=>e.completed||e.winner)).length:0)),0);t>0&&o===t&&(a=e[0],s=a.players?a.players.map((e=>(null===e||void 0===e?void 0:e.name)||"TBC")):[],l=!0)}else if(n.length>0&&n[n.length-1].matches.length>0){const e=n[n.length-1].matches[0];e&&e.winner&&(a="team1"===e.winner?e.team1:e.team2,s=a.players?a.players.map((e=>"object"===typeof e&&e&&e.name?e.name:"string"===typeof e?e:"TBC")):[],l=!0)}return'\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Tournament Visualization</title>\n        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />\n        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />\n        <style>\n            body {\n                font-family: \'Roboto\', sans-serif;\n                margin: 0;\n                padding: 20px;\n                background-color: #f9fafb;\n                color: #333;\n            }\n            .container {\n                max-width: 1200px;\n                margin: 0 auto;\n                background-color: white;\n                padding: 20px;\n                border-radius: 12px;\n                box-shadow: 0 4px 20px rgba(0,0,0,0.1);\n            }\n            .tournament-header {\n                background: linear-gradient(135deg, #1976d2, #0d47a1);\n                color: white;\n                padding: 15px 20px;\n                border-radius: 8px;\n                margin-bottom: 20px;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                box-shadow: 0 4px 10px rgba(0,0,0,0.1);\n                flex-wrap: wrap;\n            }\n            .tournament-meta {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 10px;\n                margin-top: 10px;\n                width: 100%;\n            }\n            .tournament-info {\n                display: flex;\n                align-items: center;\n                background-color: rgba(255, 255, 255, 0.15);\n                padding: 4px 12px;\n                border-radius: 20px;\n                font-size: 0.85rem;\n            }\n            .tournament-info i {\n                margin-right: 6px;\n            }\n            .tournament-info {\n                display: flex;\n                align-items: center;\n                margin-top: 8px;\n                background-color: rgba(255, 255, 255, 0.15);\n                padding: 4px 12px;\n                border-radius: 20px;\n                font-size: 0.85rem;\n                margin-right: 10px;\n            }\n            .tournament-info i {\n                margin-right: 6px;\n            }\n            .tournament-title {\n                display: flex;\n                align-items: center;\n                font-size: 1.5rem;\n                font-weight: 600;\n            }\n            .tournament-title i {\n                margin-right: 10px;\n                font-size: 1.8rem;\n            }\n            .tournament-status {\n                background-color: rgba(255, 255, 255, 0.2);\n                padding: 5px 12px;\n                border-radius: 20px;\n                font-size: 0.8rem;\n                display: flex;\n                align-items: center;\n            }\n            .tournament-status i {\n                margin-right: 5px;\n            }\n            .tournament-bracket {\n                display: flex;\n                flex-direction: column;\n                padding: 30px 10px;\n                background: linear-gradient(to bottom, #f9f9f9, #ffffff);\n                border-radius: 8px;\n                position: relative;\n                margin-bottom: 20px;\n                box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n                width: 100%;\n                max-width: 100vw;\n                overflow-x: auto;\n            }\n            .round {\n                display: flex;\n                flex-direction: row;\n                min-width: unset;\n                margin-bottom: 24px;\n                margin-right: 0;\n                position: relative;\n                width: 100%;\n                justify-content: flex-start;\n                flex-wrap: wrap;\n            }\n            .round:last-child {\n                margin-bottom: 0;\n            }\n            .round-title {\n                background: linear-gradient(135deg, #1976d2, #0d47a1);\n                color: white;\n                padding: 12px 15px;\n                text-align: center;\n                border-radius: 8px 8px 0 0;\n                font-weight: bold;\n                margin-bottom: 25px;\n                box-shadow: 0 4px 10px rgba(0,0,0,0.1);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n            .round-title i {\n                margin-right: 8px;\n            }\n            .match {\n                border: none;\n                border-radius: 10px;\n                padding: 0;\n                margin-bottom: 30px;\n                background-color: white;\n                box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n                position: relative;\n                transition: transform 0.2s ease, box-shadow 0.2s ease;\n                overflow: hidden;\n            }\n            .match:hover {\n                transform: translateY(-3px);\n                box-shadow: 0 8px 20px rgba(0,0,0,0.12);\n            }\n            .match.completed {\n                border-left: 5px solid #4caf50;\n            }\n            .match-header {\n                background: linear-gradient(to right, #f5f5f5, #eeeeee);\n                padding: 8px 12px;\n                font-size: 0.85rem;\n                color: #555;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                border-bottom: 1px solid #eee;\n            }\n            .match-status {\n                display: inline-flex;\n                align-items: center;\n                background-color: #e0e0e0;\n                color: #555;\n                padding: 3px 8px;\n                border-radius: 12px;\n                font-size: 0.7rem;\n            }\n            .match-status.completed {\n                background-color: #4caf50;\n                color: white;\n            }\n            .match-status i {\n                margin-right: 4px;\n            }\n            .team {\n                display: flex;\n                align-items: center;\n                padding: 12px 15px;\n                border-bottom: 1px solid #f0f0f0;\n                position: relative;\n                transition: background-color 0.2s ease;\n            }\n            .team:last-child {\n                border-bottom: none;\n            }\n            .team:hover {\n                background-color: #f9f9f9;\n            }\n            .team.winner {\n                background-color: rgba(76, 175, 80, 0.05);\n            }\n            .team.winner::after {\n                content: \'\ud83c\udfc6\';\n                position: absolute;\n                top: 5px;\n                right: 5px;\n                font-size: 16px;\n            }\n            .team-avatar {\n                width: 36px;\n                height: 36px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-weight: bold;\n                margin-right: 12px;\n                box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n            }\n            .team-info {\n                flex: 1;\n            }\n            .team-name {\n                font-weight: 600;\n                margin-bottom: 3px;\n                display: flex;\n                align-items: center;\n            }\n            .team-players {\n                font-size: 12px;\n                color: #757575;\n                display: flex;\n                align-items: center;\n            }\n            .team-players i {\n                margin-right: 4px;\n                font-size: 10px;\n                color: #9e9e9e;\n            }\n            .team-score {\n                font-weight: bold;\n                font-size: 18px;\n                min-width: 30px;\n                height: 30px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 15px;\n                background-color: #f5f5f5;\n                margin-left: 10px;\n            }\n            .winner .team-score {\n                background-color: #4caf50;\n                color: white;\n            }\n            .connector {\n                position: absolute;\n                right: -25px;\n                width: 25px;\n                height: 2px;\n                background-color: #e0e0e0;\n                top: 50%;\n                transform: translateY(-50%);\n            }\n            .connector.active {\n                background-color: #4caf50;\n                color: white;\n            }\n            .trophy {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                margin-top: 20px;\n                padding: 20px;\n                background: linear-gradient(135deg, #f9fbe7, #f0f4c3);\n                border-radius: 10px;\n                box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n            }\n            .trophy-icon {\n                font-size: 60px;\n                color: #ffc107;\n                margin-bottom: 10px;\n                text-shadow: 0 2px 5px rgba(0,0,0,0.2);\n            }\n            .winner-label {\n                font-size: 1.2rem;\n                color: #555;\n                margin-bottom: 5px;\n            }\n            .winner-name {\n                font-size: 1.8rem;\n                font-weight: bold;\n                color: #1a237e;\n                margin-bottom: 10px;\n            }\n            .winner-players {\n                font-size: 1rem;\n                color: #555;\n            }\n            .league-table-container {\n                margin-top: 30px;\n                border-radius: 10px;\n                overflow: hidden;\n                box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n            }\n            .league-table {\n                width: 100%;\n                border-collapse: collapse;\n                background-color: white;\n            }\n            .league-table th, .league-table td {\n                padding: 12px 15px;\n                text-align: center;\n            }\n            .league-table th {\n                background: linear-gradient(135deg, #1976d2, #0d47a1);\n                color: white;\n                font-weight: 500;\n                text-transform: uppercase;\n                font-size: 0.85rem;\n                letter-spacing: 0.5px;\n                border: none;\n            }\n            .league-table td {\n                border-bottom: 1px solid #f0f0f0;\n            }\n            .league-table tr:last-child td {\n                border-bottom: none;\n            }\n            .league-table tr:nth-child(even) {\n                background-color: #fafafa;\n            }\n            .league-table tr:hover {\n                background-color: #f5f5f5;\n            }\n            .team-position {\n                font-weight: bold;\n                width: 40px;\n            }\n            .team-position.top {\n                color: #4caf50;\n            }\n            .team-position.bottom {\n                color: #f44336;\n            }\n            .team-cell {\n                text-align: left;\n                font-weight: 500;\n                display: flex;\n                align-items: center;\n            }\n            .team-cell .team-avatar {\n                width: 28px;\n                height: 28px;\n                font-size: 12px;\n                margin-right: 10px;\n            }\n            .points-cell {\n                font-weight: bold;\n                font-size: 1.1rem;\n            }\n            .winner-banner {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                width: 480px;\n                height: 480px;\n                background: #fffbe6;\n                border-radius: 24px;\n                padding: 24px 18px 18px 18px;\n                margin: 0 auto 28px auto;\n                box-shadow: 0 6px 18px rgba(255, 193, 7, 0.18), 0 1px 4px rgba(0,0,0,0.08);\n                border: 5px solid #ffd600;\n                animation: popin 0.8s cubic-bezier(.6,-0.28,.74,.05) 1;\n                position: relative;\n                overflow: hidden;\n            }\n            .trophy-spotlight {\n                margin-bottom: 18px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                filter: drop-shadow(0 0 24px #ffe082);\n            }\n            .animated-trophy {\n                color: #ffc107;\n                text-shadow: 0 0 16px #fff59d, 0 0 32px #ffe082;\n                animation: trophy-bounce 1.6s infinite cubic-bezier(.5,0.2,.7,1.1);\n            }\n            @keyframes trophy-bounce {\n                0% { transform: scale(1) translateY(0); }\n                20% { transform: scale(1.08) translateY(-12px); }\n                40% { transform: scale(0.98) translateY(2px); }\n                60% { transform: scale(1.04) translateY(-6px); }\n                80% { transform: scale(1) translateY(0); }\n                100% { transform: scale(1) translateY(0); }\n            }\n            .winner-label {\n                font-size: 2.2rem;\n                font-weight: 800;\n                color: #ff9800;\n                margin-bottom: 12px;\n                letter-spacing: 1px;\n                text-shadow: 0 2px 8px #fffde7;\n            }\n            .winner-name {\n                font-size: 1.5rem;\n                font-weight: bold;\n                color: #37474f;\n                margin-bottom: 8px;\n            }\n            .winner-players {\n                font-size: 1.1rem;\n                color: #6d4c41;\n                margin-bottom: 18px;\n                text-align: center;\n            }\n            .share-btn {\n                background: linear-gradient(90deg, #ff9800, #ffc107);\n                color: #fff;\n                border: none;\n                border-radius: 30px;\n                font-size: 1.15rem;\n                font-weight: 700;\n                padding: 14px 38px;\n                margin-top: 10px;\n                box-shadow: 0 4px 16px rgba(255, 193, 7, 0.18);\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                cursor: pointer;\n                transition: background 0.2s, transform 0.2s, box-shadow 0.2s;\n            }\n            .share-btn:hover {\n                background: linear-gradient(90deg, #ffa726, #ffd54f);\n                color: #fffde7;\n                transform: translateY(-2px) scale(1.03);\n                box-shadow: 0 8px 24px rgba(255, 193, 7, 0.28);\n            }\n            .share-btn i {\n                font-size: 1.4em;\n                margin-right: 8px;\n            }\n        </style>\n    </head>\n    <body>\n        <div class="container">\n          \x3c!-- Enhanced Winner Banner & Card --\x3e\n        '.concat(l&&a?'\n          <div class="winner-banner" id="winner-card">\n            <div class="trophy-spotlight">\n              <i class="fas fa-trophy fa-5x animated-trophy"></i>\n            </div>\n            <div class="winner-label">\ud83c\udfc6 Tournament Winner \ud83c\udfc6</div>\n            <div class="winner-name">'.concat(a.name,'</div>\n\n            <div class="winner-players" style="margin-bottom: 2px;">\n              ').concat(s.map((e=>"object"===typeof e?e.name||e.displayName||e.email?"<span>".concat(e.photoURL?"<img src='".concat(e.photoURL,"' class='tournament-avatar' style='width:32px;height:32px;border-radius:50%;object-fit:cover;margin-right:6px;vertical-align:middle;' />"):'<span style="display:inline-block;width:18px;height:18px;border-radius:50%;background:#bbb;color:#fff;text-align:center;font-size:11px;line-height:18px;vertical-align:middle;">'.concat(null!==e&&void 0!==e&&e.name?e.name.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"?","</span>"),"\n                  <span>").concat((null===e||void 0===e?void 0:e.name)||"TBC","</span>\n                </span>"):"<span><i class='fas fa-user'></i> TBC</span>":e?"<span><i class='fas fa-user'></i> ".concat(e,"</span>"):"<span><i class='fas fa-user'></i> TBC</span>")).join("<br/>"),'\n            </div>\n\n            <div class="winner-meta" style="margin-top: 20px; text-align: center; color: #7c6f3f; font-size: 1.04rem; font-weight: 600; background: #fffde7; border-radius: 12px; padding: 8px 0 4px 0; width: 100%; max-width: 98%; display: flex; flex-direction: column; align-items: center;">\n              <div>\n                ').concat(e.location?"<span style='margin-right: 12px;'><i class='fas fa-map-marker-alt'></i> ".concat(e.location,"</span>"):"","\n                ").concat(o?"<span style='margin-right: 8px;'><i class='fas fa-calendar-alt'></i> ".concat(o,"</span>"):"","\n                ").concat(i?"<span><i class='fas fa-clock'></i> ".concat(i,"</span>"):"","\n              </div>\n            </div>\n            <button id=\"share-btn\" class=\"share-btn\" onclick=\"downloadWinnerCard()\">\n              <i class=\"fas fa-share-alt\"></i> Share Winner\n            </button>\n          </div>\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js\"><\/script>\n          <script>\n            window.downloadWinnerCard = function() {\n               const card = document.getElementById('winner-card');\n               const shareBtn = document.getElementById('share-btn');\n               if (!card) return;\n               if (shareBtn) shareBtn.style.display = 'none';\n               html2canvas(card).then(canvas => {\n                 if (shareBtn) shareBtn.style.display = '';\n                 const link = document.createElement('a');\n                 link.download = 'tournament-winner.png';\n                 link.href = canvas.toDataURL();\n                 link.click();\n               });\n             };\n          <\/script>\n        "):"","\n            ").concat(t?yy(e):gy(e),"\n        </div>\n    </body>\n    </html>\n  ")},gy=e=>{const t=e.rounds||[],n=e.displayDate||"",r=e.displayTime||"";if(!t.length){const t=(e.teams||[]).map((e=>'<span style="display:inline-block;background:'.concat(e.color,';color:#fff;padding:6px 12px;border-radius:16px;margin:4px;font-size:0.9rem;">').concat(e.name,"</span>"))).join("");return'\n      <div style="max-width:600px;margin:40px auto;padding:24px;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);text-align:center;">\n        <h2 style="margin-bottom:12px;color:#333;">Awaiting Matches</h2>\n        <p style="color:#555;margin-bottom:20px;">Matches will appear here once scheduled.</p>\n        <div style="margin-bottom:20px;">'.concat(t||'<em style="color:#999;">No participants yet</em>','</div>\n        <div style="text-align:left;max-width:400px;margin:0 auto 20px;">\n          <h3 style="margin-bottom:8px;color:#444;">Upcoming Matches</h3>\n          <ul style="list-style:none;padding:0;margin:0;color:#777;"><li>No matches scheduled</li></ul>\n        </div>\n        <div style="color:#777;font-size:0.9rem;">\n          ').concat(e.location?'<div><i class="fas fa-map-marker-alt"></i> '.concat(e.location,"</div>"):"","\n          ").concat(n?'<div><i class="fas fa-calendar-alt"></i> '.concat(n,"</div>"):"","\n          ").concat(r?'<div><i class="fas fa-clock"></i> '.concat(r,"</div>"):"","\n        </div>\n      </div>\n    ")}const o=t.length>0&&t[t.length-1].matches.length>0&&t[t.length-1].matches[0].winner;o&&("team1"===t[t.length-1].matches[0].winner?t[t.length-1].matches[0].team1:t[t.length-1].matches[0].team2);let i='\n    <div class="tournament-header">\n      <div class="tournament-title">\n        <i class="fas fa-trophy"></i>\n        Knockout Tournament\n      </div>\n      <div class="tournament-status">\n        <i class="'.concat(o?"fas fa-check-circle":"fas fa-clock",'"></i>\n        ').concat(o?"Completed":"In Progress",'\n      </div>\n      <div class="tournament-meta">\n        ').concat(n?'\n        <div class="tournament-info">\n          <i class="fas fa-calendar-alt"></i>\n          '.concat(n,"\n        </div>"):"","\n        ").concat(r?'\n        <div class="tournament-info">\n          <i class="fas fa-clock"></i>\n          '.concat(r,"\n        </div>"):"",'\n      </div>\n    </div>\n    \n    <div class="tournament-bracket-vertical">\n  ');return t.forEach(((e,n)=>{let r="fas fa-flag";0===n?r="fas fa-play":n===t.length-1?r="fas fa-trophy":n===t.length-2&&(r="fas fa-medal"),i+='\n      <div class="vertical-round">\n        <div class="vertical-round-title '.concat(n===t.length-2?"semi-final":n===t.length-1?"final":"",'"><i class="').concat(r,'"></i> ').concat(e.name,'</div>\n        <div class="vertical-matches">\n    '),e.matches.forEach(((e,t)=>{var n,r,o,a,s,l,c,u,d,h,p,f,m,g;const y="team1"===e.winner,v="team2"===e.winner,b=e.completed||y||v,x=y?"background: linear-gradient(135deg, #A5D6A7, #81C784); border-left: 4px solid #66BB6A;":"background: #fafafa;",w=v?"background: linear-gradient(135deg, #A5D6A7, #81C784); border-left: 4px solid #66BB6A;":"background: #fafafa;";i+='\n        <div class="vertical-match '.concat(b?"completed":"",'">\n          <div class="vertical-match-header">\n            <span>Match ').concat(t+1,'</span>\n            <span class="vertical-match-status ').concat(b?"completed":"",'">\n              <i class="').concat(b?"fas fa-check-circle":"fas fa-clock",'"></i>\n              ').concat(b?"Completed":"Pending",'\n            </span>\n          </div>\n          <div class="vertical-teams">\n            <div class="vertical-team ').concat(y?"winner":"",'" style="').concat(x,'">\n              <div class="vertical-team-avatar" style="background: linear-gradient(135deg, #1976d2, #0d47a1); color: white;">\n                ').concat((null===(n=e.team1)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.substring(0,2))||"?",'\n              </div>\n              <div class="vertical-team-info">\n                <div class="vertical-team-name">').concat((null===(o=e.team1)||void 0===o?void 0:o.name)||"TBD",'</div>\n                <div class="vertical-team-players">\n                  <i class="fas fa-user-friends"></i>\n                  <div class="player-pair">\n                    ').concat(null!==(a=e.team1)&&void 0!==a&&a.players&&e.team1.players.length>=1?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(s=e.team1.players[0])||void 0===s?void 0:s.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>',"\n                    ").concat(null!==(l=e.team1)&&void 0!==l&&l.players&&e.team1.players.length>=2?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(c=e.team1.players[1])||void 0===c?void 0:c.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>','\n                  </div>\n                </div>\n              </div>\n              <div class="vertical-match-score">').concat(void 0!==e.score1&&null!==e.score1?e.score1:"-","</div>\n              ").concat(y?'<div class="winner-ribbon"><i class="fas fa-award"></i></div>':"",'\n            </div>\n            <div class="vertical-team ').concat(v?"winner":"",'" style="').concat(w,'">\n              <div class="vertical-team-avatar" style="background: linear-gradient(135deg, #e91e63, #ad1457); color: white;">\n                ').concat((null===(u=e.team2)||void 0===u||null===(d=u.name)||void 0===d?void 0:d.substring(0,2))||"?",'\n              </div>\n              <div class="vertical-team-info">\n                <div class="vertical-team-name">').concat((null===(h=e.team2)||void 0===h?void 0:h.name)||"TBD",'</div>\n                <div class="vertical-team-players">\n                  <i class="fas fa-user-friends"></i>\n                  <div class="player-pair">\n                    ').concat(null!==(p=e.team2)&&void 0!==p&&p.players&&e.team2.players.length>=1?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(f=e.team2.players[0])||void 0===f?void 0:f.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>',"\n                    ").concat(null!==(m=e.team2)&&void 0!==m&&m.players&&e.team2.players.length>=2?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(g=e.team2.players[1])||void 0===g?void 0:g.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>','\n                  </div>\n                </div>\n              </div>\n              <div class="vertical-match-score">').concat(void 0!==e.score2&&null!==e.score2?e.score2:"-","</div>\n              ").concat(v?'<div class="winner-ribbon"><i class="fas fa-award"></i></div>':"","\n            </div>\n          </div>\n        </div>\n      ")})),i+="\n        </div>\n      </div>\n    "})),i+="\n    </div>\n  ",i},yy=e=>{const t=e.rounds||[],n=e.teams||[];if(!t.length){const t=(n||[]).map((e=>'<span style="display:inline-block;background:'.concat(e.color,';color:#fff;padding:6px 12px;border-radius:16px;margin:4px;font-size:0.9rem;">').concat(e.name,"</span>"))).join("");return'\n      <div style="max-width:600px;margin:40px auto;padding:24px;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);text-align:center;">\n        <h2 style="margin-bottom:12px;color:#333;">League Ready</h2>\n        <p style="color:#555;margin-bottom:20px;">Standings will appear here once matches are played.</p>\n        <div style="margin-bottom:20px;">'.concat(t||'<em style="color:#999;">No participants yet</em>','</div>\n        <div style="text-align:left;max-width:400px;margin:0 auto 20px;">\n          <h3 style="margin-bottom:8px;color:#444;">Upcoming Fixtures</h3>\n          <ul style="list-style:none;padding:0;margin:0;color:#777;"><li>No fixtures scheduled</li></ul>\n        </div>\n        <div style="color:#777;font-size:0.9rem;">\n          ').concat(e.location?'<div><i class="fas fa-map-marker-alt"></i> '.concat(e.location,"</div>"):"","\n          ").concat(e.displayDate?'<div><i class="fas fa-calendar-alt"></i> '.concat(e.displayDate,"</div>"):"","\n          ").concat(e.displayTime?'<div><i class="fas fa-clock"></i> '.concat(e.displayTime,"</div>"):"","\n        </div>\n      </div>\n    ")}const r=by(n,t);r.sort(((e,t)=>{if(t.points!==e.points)return t.points-e.points;const n=e.goalsFor-e.goalsAgainst,r=t.goalsFor-t.goalsAgainst;return r!==n?r-n:t.goalsFor-e.goalsFor}));let o='\n    <div class="tournament-header">\n      <div class="tournament-title">\n        <i class="fas fa-table"></i>\n        League Tournament\n      </div>\n      <div class="tournament-status">\n        <i class="fas fa-users"></i>\n        '.concat(n.length,' Teams\n      </div>\n    </div>\n    \n    <div class="league-table-container">\n      <table class="league-table">\n        <thead>\n          <tr>\n            <th>Pos</th>\n            <th style="text-align: left;">Team</th>\n            <th>P</th>\n            <th>W</th>\n            <th>L</th>\n            <th>Pts</th>\n          </tr>\n        </thead>\n        <tbody>\n  ');return r.forEach(((e,t)=>{var n;const i=t+1,a=i<=2,s=i>=r.length-1&&r.length>2,l=a?"top":s?"bottom":"";e.goalsFor,e.goalsAgainst;o+='\n      <tr>\n        <td class="team-position '.concat(l,'">').concat(i,'</td>\n        <td>\n          <div class="team-cell">\n            <div class="team-avatar" style="background: linear-gradient(135deg, ').concat(e.color||"#3f51b5",", ").concat(e.color?vy(e.color,-30):"#1a237e",'); color: white;">\n              ').concat((null===(n=e.name)||void 0===n?void 0:n.substring(0,2))||"?",'\n            </div>\n            <div class="team-details">\n              <div class="team-name-league">').concat(e.name,'</div>\n              <div class="team-players-league">\n                ').concat(e.players&&e.players.length>0?e.players.map((e=>'<span class="player" style="display: inline-flex; align-items: center; gap: 4px; margin-right: 8px;">\n      '.concat(null!==e&&void 0!==e&&e.photoURL?'<img src="'.concat(e.photoURL,'" alt="avatar" style="width:18px;height:18px;border-radius:50%;object-fit:cover;margin-right:6px;vertical-align:middle;" />'):'<span style="display:inline-block;width:18px;height:18px;border-radius:50%;background:#bbb;color:#fff;text-align:center;font-size:11px;line-height:18px;vertical-align:middle;">'.concat(null!==e&&void 0!==e&&e.name?e.name.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"?","</span>"),"\n      <span>").concat((null===e||void 0===e?void 0:e.name)||"TBC","</span>\n    </span>"))).join(" & "):"TBC","\n              </div>\n            </div>\n          </div>\n        </td>\n        <td>").concat(e.played,"</td>\n        <td>").concat(e.won,"</td>\n        <td>").concat(e.lost,'</td>\n        <td class="points-cell">').concat(e.points,"</td>\n      </tr>\n    ")})),o+='\n        </tbody>\n      </table>\n    </div>\n    \n    <h3 style="margin-top: 30px;">Matches</h3>\n  ',t.forEach(((e,t)=>{o+='\n      <div style="margin-bottom: 20px;">\n        <h4 style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">\n          <i class="fas fa-calendar-day"></i> '.concat(e.name,'\n        </h4>\n        <div style="display: flex; flex-wrap: wrap; gap: 15px;">\n    '),e.matches.forEach(((e,t)=>{var n,r,i,a,s,l,c,u,d,h,p,f,m,g;const y="team1"===e.winner,v="team2"===e.winner,b=e.completed||y||v;o+='\n        <div class="match '.concat(b?"completed":"",'" style="flex: 1; min-width: 300px; max-width: 400px;">\n          <div class="match-header">\n            <span>Match ').concat(t+1,'</span>\n            <span class="match-status ').concat(b?"completed":"",'">\n              <i class="').concat(b?"fas fa-check-circle":"fas fa-clock",'"></i>\n              ').concat(b?"Completed":"Pending",'\n            </span>\n          </div>\n          <div class="team ').concat(y?"winner":"",'" style="background: linear-gradient(to right, rgba(25, 118, 210, 0.05), rgba(13, 71, 161, 0.1)); border-left: 4px solid #1976d2;">\n            <div class="team-avatar" style="background: linear-gradient(135deg, #1976d2, #0d47a1); color: white;">\n              ').concat((null===(n=e.team1)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.substring(0,2))||"?",'\n            </div>\n            <div class="team-info">\n              <div class="team-name">').concat((null===(i=e.team1)||void 0===i?void 0:i.name)||"TBD",'</div>\n              <div class="team-players">\n                <i class="fas fa-user-friends"></i>\n                <div class="player-pair">\n                  ').concat(null!==(a=e.team1)&&void 0!==a&&a.players&&e.team1.players.length>=1?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(s=e.team1.players[0])||void 0===s?void 0:s.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>',"\n                  ").concat(null!==(l=e.team1)&&void 0!==l&&l.players&&e.team1.players.length>=2?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(c=e.team1.players[1])||void 0===c?void 0:c.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>','\n                </div>\n              </div>\n            </div>\n            <div class="team-score">').concat(void 0!==e.score1&&null!==e.score1?e.score1:"-","</div>\n            ").concat(y?'<div class="winner-ribbon"><i class="fas fa-award"></i></div>':"",'\n          </div>\n          <div class="team ').concat(v?"winner":"",'" style="background: linear-gradient(to right, rgba(233, 30, 99, 0.05), rgba(173, 20, 87, 0.1)); border-left: 4px solid #e91e63;">\n            <div class="team-avatar" style="background: linear-gradient(135deg, #e91e63, #ad1457); color: white;">\n              ').concat((null===(u=e.team2)||void 0===u||null===(d=u.name)||void 0===d?void 0:d.substring(0,2))||"?",'\n            </div>\n            <div class="team-info">\n              <div class="team-name">').concat((null===(h=e.team2)||void 0===h?void 0:h.name)||"TBD",'</div>\n              <div class="team-players">\n                <i class="fas fa-user-friends"></i>\n                <div class="player-pair">\n                  ').concat(null!==(p=e.team2)&&void 0!==p&&p.players&&e.team2.players.length>=1?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(f=e.team2.players[0])||void 0===f?void 0:f.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>',"\n                  ").concat(null!==(m=e.team2)&&void 0!==m&&m.players&&e.team2.players.length>=2?'<span class="player"><i class="fas fa-user"></i> '.concat((null===(g=e.team2.players[1])||void 0===g?void 0:g.name)||"TBC","</span>"):'<span class="player"><i class="fas fa-user"></i> TBC</span>','\n                </div>\n              </div>\n            </div>\n            <div class="team-score">').concat(void 0!==e.score2&&null!==e.score2?e.score2:"-","</div>\n            ").concat(v?'<div class="winner-ribbon"><i class="fas fa-award"></i></div>':"","\n          </div>\n        </div>\n      ")})),o+="\n        </div>\n      </div>\n    "})),o},vy=(e,t)=>{e=e.replace("#","");let n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return n=Math.max(0,Math.min(255,n+t)),r=Math.max(0,Math.min(255,r+t)),o=Math.max(0,Math.min(255,o+t)),"#"+((1<<24)+(n<<16)+(r<<8)+o).toString(16).slice(1)},by=(e,t)=>{const n=e.map((e=>(0,i.A)((0,i.A)({},e),{},{points:0,played:0,won:0,lost:0})));return t&&t.length>0&&t.forEach((e=>{e.matches&&e.matches.length>0&&e.matches.forEach((e=>{if((e.completed||!!e.winner)&&e.team1&&e.team2){const t=n.findIndex((t=>t.id===e.team1.id)),r=n.findIndex((t=>t.id===e.team2.id));t>=0&&r>=0&&(n[t].played++,n[r].played++,void 0!==e.score1&&void 0!==e.score2&&null!==e.score1&&null!==e.score2&&(isNaN(parseInt(e.score1))||(n[t].goalsFor=(n[t].goalsFor||0)+parseInt(e.score1)),isNaN(parseInt(e.score2))||(n[t].goalsAgainst=(n[t].goalsAgainst||0)+parseInt(e.score2)),isNaN(parseInt(e.score2))||(n[r].goalsFor=(n[r].goalsFor||0)+parseInt(e.score2)),isNaN(parseInt(e.score1))||(n[r].goalsAgainst=(n[r].goalsAgainst||0)+parseInt(e.score1))),e.winner?"team1"===e.winner?(n[t].won++,n[t].points+=3,n[r].lost++):"team2"===e.winner?(n[r].won++,n[r].points+=3,n[t].lost++):"draw"===e.winner&&("undefined"===typeof n[t].drawn&&(n[t].drawn=0),"undefined"===typeof n[r].drawn&&(n[r].drawn=0),n[t].drawn++,n[r].drawn++,n[t].points+=1,n[r].points+=1):void 0!==e.score1&&void 0!==e.score2&&null!==e.score1&&null!==e.score2&&(e.score1>e.score2?(n[t].won++,n[t].points+=3,n[r].lost++):e.score1<e.score2?(n[r].won++,n[r].points+=3,n[t].lost++):("undefined"===typeof n[t].drawn&&(n[t].drawn=0),"undefined"===typeof n[r].drawn&&(n[r].drawn=0),n[t].drawn++,n[r].drawn++,n[t].points+=1,n[r].points+=1)))}}))})),n},xy=e=>{var t;let{rounds:n,teams:o,format:a,displayDate:s,displayTime:l,currentUserEmail:c,isDarkMode:u}=e;const d=jr(),h=void 0!==u?u:"dark"===d.palette.mode,p=(0,r.useRef)(null),[f,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!0),[x,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(!n)return;const e=n.length,t=n.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0),r=n.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0),i=[{icon:(0,_e.jsx)(ay,{}),label:"Rounds",value:e},{icon:(0,_e.jsx)(sy,{}),label:"Matches",value:t},{icon:(0,_e.jsx)(ly,{}),label:"Completed",value:r}];if("League"===a){const e=t>0?(n.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.reduce(((e,t)=>e+(null!=t.score1&&null!=t.score2?t.score1+t.score2:0)),0))||0)}),0)/t).toFixed(2):0;let r=null,o=-1/0;n.forEach((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.forEach((e=>{const t=e.score1||0,n=e.score2||0;t+n>o&&(o=t+n,r=e)}))}));const a=r?"".concat(r.team1.name," ").concat(r.score1," - ").concat(r.score2," ").concat(r.team2.name):"N/A";i.push({icon:(0,_e.jsx)(cy,{}),label:"Avg Score",value:e},{icon:(0,_e.jsx)(uy,{}),label:"Highest Score",value:a})}let s=null;if("League"===a){if(o&&o.length>0){const e=[...o].sort(((e,t)=>(t.points||0)-(e.points||0)||(t.goalsFor||0)-(t.goalsAgainst||0)-((e.goalsFor||0)-(e.goalsAgainst||0))));r===t&&r>0&&(s=e[0])}}else if(n.length>0){const e=n[n.length-1];if(e.matches&&e.matches.length>0){const t=e.matches[0];t.winner&&(s="team1"===t.winner?t.team1:t.team2)}}y(s),m(i)}),[n,o,a]),(0,r.useEffect)((()=>{if("League"!==a)return void b(!1);if(!n||!p.current)return;b(!0);const e=p.current,t=e.contentDocument||e.contentWindow.document,r=my({rounds:n,teams:o,format:a,displayDate:s,displayTime:l,currentUserEmail:c});t.open(),t.write(r),t.close();const i=t.createElement("style");i.textContent=fy,t.head.appendChild(i),e.onload=()=>b(!1)}),[n,o,a,s,l,c]),n?(0,_e.jsxs)(gt,{sx:{width:"100%",mt:2,bgcolor:e=>h?(0,Ut.X4)(e.palette.background.paper,.4):"transparent",borderRadius:2,p:2,border:e=>h?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",boxShadow:e=>h?"0 4px 20px rgba(0, 0, 0, 0.2)":"none"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:{xs:"wrap",sm:"nowrap"},gap:{xs:2,sm:0}},children:[(0,_e.jsx)(yn,{variant:"h5",component:"h2",sx:{color:e=>h?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold",textShadow:h?"0 1px 2px rgba(0,0,0,0.3)":"none"},children:"Tournament Bracket"}),(0,_e.jsxs)(gt,{sx:{display:"flex",gap:1},children:[(0,_e.jsx)(Ka,{title:"Rotate screen for better view",children:(0,_e.jsx)(Gt,{elevation:h?4:2,sx:{bgcolor:e=>h?(0,Ut.X4)(e.palette.primary.main,.2):(0,Ut.X4)(e.palette.primary.main,.1),"&:hover":{bgcolor:e=>h?(0,Ut.X4)(e.palette.primary.main,.3):(0,Ut.X4)(e.palette.primary.main,.2)},display:{xs:"flex",md:"flex"},p:1,borderRadius:2,cursor:"pointer",border:e=>h?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.3)):"none"},onClick:()=>{w(!x),x||localStorage.getItem("rotationMessageShown")||(alert("The tournament bracket view has been optimized for landscape viewing. You can toggle back to normal view by clicking the button again."),localStorage.setItem("rotationMessageShown","true"))},children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(dy,{sx:{color:e=>h?e.palette.primary.light:e.palette.primary.main}}),(0,_e.jsx)(yn,{variant:"body2",sx:{color:e=>h?e.palette.primary.light:e.palette.primary.main,fontWeight:"bold",display:{xs:"none",sm:"block"}},children:"Rotate View"})]})})}),(0,_e.jsx)(Ka,{title:k?"Exit fullscreen":"View fullscreen",children:(0,_e.jsx)(Gt,{elevation:h?4:2,sx:{bgcolor:e=>h?(0,Ut.X4)(e.palette.primary.main,.2):(0,Ut.X4)(e.palette.primary.main,.1),"&:hover":{bgcolor:e=>h?(0,Ut.X4)(e.palette.primary.main,.3):(0,Ut.X4)(e.palette.primary.main,.2)},display:"flex",p:1,borderRadius:2,cursor:"pointer",border:e=>h?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.3)):"none"},onClick:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen().then((()=>{A(!1)})).catch((e=>{console.error("Error attempting to exit fullscreen:",e)})):document.documentElement.requestFullscreen().then((()=>{A(!0)})).catch((e=>{console.error("Error attempting to enable fullscreen:",e)}))},children:k?(0,_e.jsx)(hy,{}):(0,_e.jsx)(py,{})})})]})]}),(0,_e.jsx)("div",{style:(0,i.A)({transition:"all 0.3s ease-in-out"},x&&{height:"80vh",display:"flex",alignItems:"center",justifyContent:"center"}),children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,mb:4,borderRadius:2,background:e=>u?(0,Ut.X4)(e.palette.background.paper,.8):"linear-gradient(to right, #f6f9fc, #ffffff)",position:"relative",overflow:"hidden"},children:[(0,_e.jsx)(gt,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(25, 118, 210, 0.05)"}}),(0,_e.jsx)(gt,{sx:{position:"absolute",bottom:-30,left:-30,width:150,height:150,borderRadius:"50%",background:"rgba(25, 118, 210, 0.03)"}}),(0,_e.jsxs)(yn,{variant:"h5",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(ss,{sx:{color:"#FFEB3B"}})," Tournament Highlights"]}),(0,_e.jsxs)(wg,{container:!0,spacing:3,direction:{xs:"column",md:"row"},children:[(0,_e.jsx)(wg,{item:!0,xs:12,md:8,sx:{mb:{xs:2,md:0}},children:(0,_e.jsx)(wg,{container:!0,spacing:2,children:null===f||void 0===f?void 0:f.map(((e,t)=>(0,_e.jsx)(wg,{item:!0,xs:6,sm:4,sx:{minWidth:0},children:(0,_e.jsx)("div",{children:(0,_e.jsx)(Cg,{elevation:2,sx:{height:"100%",transition:"all 0.3s","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 20px rgba(0,0,0,0.1)"}},children:(0,_e.jsxs)(_g,{sx:{textAlign:"center"},children:[(0,_e.jsx)(gt,{sx:{color:"primary.main",mb:1,display:"flex",justifyContent:"center"},children:r.cloneElement(e.icon,{fontSize:"large"})}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",children:e.label}),(0,_e.jsx)(yn,{variant:"h6",sx:{fontWeight:"bold",mt:1},children:(e.value,e.value)})]})})})},t)))})}),(0,_e.jsx)(wg,{item:!0,xs:12,md:4,children:(0,_e.jsx)("div",{children:(0,_e.jsx)(Cg,{elevation:3,sx:{height:"100%",background:g?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",color:g?"#7D4B32":"text.primary",position:"relative",overflow:"hidden"},children:(0,_e.jsxs)(_g,{sx:{textAlign:"center",position:"relative",zIndex:2},children:[(0,_e.jsx)(ss,{sx:{fontSize:40,color:g?"#FFEB3B":"#BBB",filter:"drop-shadow(0 2px 5px rgba(0,0,0,0.2))"}}),(0,_e.jsx)(yn,{variant:"h6",sx:{mt:2,fontWeight:"bold"},children:g?"Champion":"Tournament in Progress"}),g?(0,_e.jsxs)(gt,{sx:{mt:2},children:[(0,_e.jsx)(yn,{variant:"subtitle1",sx:{fontWeight:"bold"},children:g.name}),(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:1,mt:1},children:null===(t=g.players)||void 0===t?void 0:t.map(((e,t)=>(0,_e.jsx)(gp,{size:"small",label:"object"===typeof e&&e.name||"Player",sx:{bgcolor:"rgba(255,255,255,0.7)",fontWeight:"bold",color:"#7D4B32"}},t)))})]}):(0,_e.jsx)(yn,{variant:"body2",sx:{mt:2,opacity:.7},children:"Complete all matches to determine the champion"})]})})})})]}),n.length>0&&(0,_e.jsxs)(gt,{sx:{mt:3},children:[(0,_e.jsxs)(yn,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,_e.jsx)(ly,{fontSize:"small",color:"success"})," Tournament Progress"]}),(0,_e.jsx)(gt,{sx:{position:"relative",height:8,bgcolor:"#edf2f7",borderRadius:4,overflow:"hidden"},children:(()=>{const e=n.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0),t=n.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0),r=e>0?t/e*100:0;return(0,_e.jsx)("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:"".concat(r,"%"),background:"linear-gradient(90deg, #48bb78 0%, #38b2ac 100%)"}})})()}),(0,_e.jsxs)(yn,{variant:"caption",sx:{display:"block",textAlign:"right",mt:.5},children:[n.reduce(((e,t)=>{var n,r;return e+((null===(n=t.matches)||void 0===n||null===(r=n.filter((e=>e.completed||e.winner)))||void 0===r?void 0:r.length)||0)}),0)," / ",n.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0)," matches completed"]})]})]})}),(0,_e.jsx)("div",{children:(0,_e.jsxs)(Gt,{elevation:h?6:3,sx:{width:"100%",height:"knockout"===a?600:"auto",minHeight:400,overflow:"hidden",position:"relative",borderRadius:2,mb:3,bgcolor:e=>h?"dark"===e.palette.mode?"#121212":(0,Ut.X4)(e.palette.background.default,.9):e.palette.background.paper,border:e=>h?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.2)):"none",boxShadow:e=>h?"0 8px 32px rgba(0, 0, 0, 0.3)":e.shadows[3]},children:["League"===a&&v&&(0,_e.jsx)(gt,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(255,255,255,0.8)",zIndex:10},children:(0,_e.jsx)(Bt,{})}),"League"===a?(0,_e.jsx)("iframe",{ref:p,title:"Tournament Visualization",style:{width:"100%",height:"800px",border:"none",overflow:"hidden"}}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("style",{dangerouslySetInnerHTML:{__html:fy}}),(0,_e.jsx)("div",{style:{width:"100%",overflow:"visible"},dangerouslySetInnerHTML:{__html:gy({rounds:n,teams:o,displayDate:s,displayTime:l})}})]})]})})]}):(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,_e.jsx)(Bt,{})})};function wy(e){return(0,At.Ay)("MuiListItem",e)}const ky=(0,kt.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const Ay=(0,kt.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Sy(e){return(0,At.Ay)("MuiListItemSecondaryAction",e)}(0,kt.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const Cy=["className"],Ty=(0,wt.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})})),Ey=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiListItemSecondaryAction"}),{className:o}=n,i=(0,Ce.A)(n,Cy),a=r.useContext(or),s=(0,Se.A)({},n,{disableGutters:a.disableGutters}),l=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,bt.A)(r,Sy,n)})(s);return(0,_e.jsx)(Ty,(0,Se.A)({className:(0,vt.A)(l.root,o),ownerState:s,ref:t},i))}));Ey.muiName="ListItemSecondaryAction";const Iy=Ey,_y=["className"],jy=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ny=(0,wt.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,Se.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(Ay.root)]:{paddingRight:48}},{["&.".concat(ky.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(ky.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(ky.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(ky.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(ky.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,Ut.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})})),Ry=(0,wt.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Dy=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiListItem"}),{alignItems:o="center",autoFocus:i=!1,button:a=!1,children:s,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:h="li",ContainerProps:{className:p}={},dense:f=!1,disabled:m=!1,disableGutters:g=!1,disablePadding:y=!1,divider:v=!1,focusVisibleClassName:b,secondaryAction:x,selected:w=!1,slotProps:k={},slots:A={}}=n,S=(0,Ce.A)(n.ContainerProps,_y),C=(0,Ce.A)(n,jy),T=r.useContext(or),E=r.useMemo((()=>({dense:f||T.dense||!1,alignItems:o,disableGutters:g})),[o,T.dense,f,g]),I=r.useRef(null);(0,dr.A)((()=>{i&&I.current&&I.current.focus()}),[i]);const _=r.Children.toArray(s),j=_.length&&(0,mc.A)(_[_.length-1],["ListItemSecondaryAction"]),N=(0,Se.A)({},n,{alignItems:o,autoFocus:i,button:a,dense:E.dense,disabled:m,disableGutters:g,disablePadding:y,divider:v,hasSecondaryAction:j,selected:w}),R=(e=>{const{alignItems:t,button:n,classes:r,dense:o,disabled:i,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e,d={root:["root",o&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",i&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,bt.A)(d,wy,r)})(N),D=(0,vn.A)(I,t),P=A.root||u.Root||Ny,M=k.root||d.root||{},F=(0,Se.A)({className:(0,vt.A)(R.root,M.className,l),disabled:m},C);let O=c||"li";return a&&(F.component=c||"div",F.focusVisibleClassName=(0,vt.A)(ky.focusVisible,b),O=$n),j?(O=F.component||c?O:"div","li"===h&&("li"===O?O="div":"li"===F.component&&(F.component="div")),(0,_e.jsx)(or.Provider,{value:E,children:(0,_e.jsxs)(Ry,(0,Se.A)({as:h,className:(0,vt.A)(R.container,p),ref:D,ownerState:N},S,{children:[(0,_e.jsx)(P,(0,Se.A)({},M,!ro(P)&&{as:O,ownerState:(0,Se.A)({},N,M.ownerState)},F,{children:_})),_.pop()]}))})):(0,_e.jsx)(or.Provider,{value:E,children:(0,_e.jsxs)(P,(0,Se.A)({},M,{as:O,ref:D},!ro(P)&&{ownerState:(0,Se.A)({},N,M.ownerState)},F,{children:[_,x&&(0,_e.jsx)(Iy,{children:x})]}))})})),Py=(0,Xa.A)((0,_e.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),"CalendarToday"),My=(0,Xa.A)((0,_e.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM13 14h-2V8h2v6z"}),"Timer"),Fy=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}),"Groups"),Oy=(0,Xa.A)((0,_e.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonAdd"),Ly=(0,Xa.A)((0,_e.jsx)("path",{d:"M10.59 9.17 5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"}),"Shuffle"),zy=new Set,By=e=>{try{"serviceWorker"in navigator&&"getRegistrations"in navigator.serviceWorker&&navigator.serviceWorker.getRegistrations().then((t=>{t.forEach((t=>{t.active&&t.active.postMessage({command:"clearNotifications",title:e})}))}))}catch(t){console.error("Error clearing existing notifications:",t)}},Uy=async e=>{try{if(console.log("Attempting to show notification:",e),!("Notification"in window))return console.error("This browser does not support notifications"),!1;if("granted"!==Notification.permission){console.log("Requesting notification permission...");if("granted"!==await Notification.requestPermission())return console.log("Notification permission denied"),!1;console.log("Notification permission granted!")}await By(e.title);const t=JSON.stringify(e);if(zy.has(t))return console.log("Duplicate notification prevented:",e.title),!1;zy.add(t);new Notification(e.title,{body:e.body,icon:"/logo192.png",tag:e.title,data:e.data||{}});return console.log("Notification created successfully:",e.title),setTimeout((()=>{zy.delete(t)}),5e3),!0}catch(t){return console.error("Error showing direct notification:",t),!1}},Wy=e=>{Uy({title:"New Game Available",body:"A new game has been created at ".concat(e.location," on ").concat(e.formattedDate||e.date," at ").concat(e.time,"."),data:{gameId:e.id,url:"/games/".concat(e.id)}})},Vy=()=>{const e=Math.floor(360*Math.random());return"hsl(".concat(e,", 70%, 45%)")};function qy(e){let{open:t,onClose:n,game:o}=e;const[a,s]=(0,r.useState)({name:o?"".concat(o.location," Tournament"):"",format:"Knockout",description:""}),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[h,p]=(0,r.useState)({}),{currentUser:f}=ys();function m(e,t){if(e){if(e.firstName&&e.lastName)return"".concat(e.firstName," ").concat(e.lastName);if(e.displayName)return e.displayName;if(e.email)return e.email.split("@")[0]}return"Player ".concat(t.substring(0,4))}(0,r.useEffect)((()=>{if(t&&null!==o&&void 0!==o&&o.players){(async()=>{try{console.log("Loading player data for players:",o.players);const t={};for(const n of o.players){const r="string"===typeof n?n:n.id;if(r)try{const e=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",r));e.exists()?(t[r]=e.data(),console.log("Loaded player data for ".concat(r,":"),e.data())):console.log("No player document found for ".concat(r))}catch(e){console.error("Error loading data for player ".concat(r,":"),e)}}p(t),console.log("All player data loaded:",t)}catch(e){console.error("Error loading player data:",e)}})()}}),[t,o]);const g=e=>{const{name:t,value:n}=e.target;s((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))},y=async e=>{if(e.preventDefault(),o){c(!0),d("");try{("closed"!==o.status||o.isOpen)&&await b(o.id),await v();const e=()=>{const e=[...o.players||[]];console.log("All players:",e);const t=[...e].sort((()=>Math.random()-.5));console.log("Shuffled players:",t);const n=[],r=["Wolves","Eagles","Tigers","Lions","Bears","Hawks","Sharks","Panthers","Jaguars","Falcons"];for(let o=0;o<t.length;o+=2){const e=t[o],i=o+1<t.length?t[o+1]:null,a=m(h[e]||{},e),s=i?h[i]||{}:null,l=i?m(s,i):"TBC";console.log("Team player 1: ".concat(e," -> ").concat(a)),i&&console.log("Team player 2: ".concat(i," -> ").concat(l));const c=r[o/2%r.length],u=Vy();n.push({id:"team-".concat(o/2+1),name:c,players:[{id:e,name:a},i?{id:i,name:l}:{id:"tbc",name:"TBC"}],color:u})}return console.log("Created teams with player names:",n),n},s=e(),l=[...s].sort((()=>Math.random()-.5));console.log("Creating tournament with ".concat(l.length," teams:"),l);const c=[];if("League"===a.format){const e=l.length%2===1?[...l,{id:"team-bye",name:"BYE",players:[],color:"#cccccc"}]:[...l],t=e.length-1,n=e.length/2,r=[...e],o=r.shift();for(let i=0;i<t;i++){const e=[];e.push({team1:o,team2:r[i%r.length],score1:null,score2:null,completed:!1,winner:null,matchDate:null});for(let t=1;t<n;t++){const n=(i+t)%r.length,o=(i+r.length-t)%r.length;e.push({team1:r[n],team2:r[o],score1:null,score2:null,completed:!1,winner:null,matchDate:null})}c.push({name:"Round ".concat(i+1),matches:e})}}else{const e=l.length;console.log("Number of teams for knockout format:",e);let n=Math.ceil(Math.log2(e));console.log("Number of rounds needed:",n),n=Math.max(1,n);for(let o=0;o<n;o++){const i=Math.pow(2,n-o-1);console.log("Round ".concat(o+1,": Creating ").concat(i," matches"));const a=[];if(0===o){const o=Math.pow(2,n),s=o-e;console.log("Full bracket size: ".concat(o,", Byes needed: ").concat(s));for(let e=0;e<i;e++){var t,r;const n=2*e,o=2*e+1,i={score1:null,score2:null,completed:!1,winner:null,matchDate:null};n<l.length?i.team1=l[n]:i.team1=null,o<l.length?i.team2=l[o]:i.team1?i.team2={id:"team-bye",name:"BYE",players:[],color:"#cccccc"}:i.team2=null,console.log("Match ".concat(e+1,": ").concat((null===(t=i.team1)||void 0===t?void 0:t.name)||"TBD"," vs ").concat((null===(r=i.team2)||void 0===r?void 0:r.name)||"TBD")),a.push(i)}}else for(let e=0;e<i;e++)a.push({team1:null,team2:null,score1:null,score2:null,completed:!1,winner:null,matchDate:null});let s="";s=o===n-1?"Final":o===n-2?"Semi-Finals":o===n-3?"Quarter-Finals":"Round ".concat(o+1),c.push({name:s,matches:a})}}const u={name:a.name||"Tournament",format:a.format||"Knockout",description:a.description||"",startDate:o.date||(new Date).toISOString().split("T")[0],startTime:o.time||"12:00",location:o.location||"Default Location",status:"active",teams:s.map((e=>(0,i.A)((0,i.A)({},e),{},{points:0,played:0,won:0,drawn:0,lost:0,goalsFor:0,goalsAgainst:0})))||[],rounds:c||[],createdAt:(new Date).toISOString(),createdBy:{id:(null===f||void 0===f?void 0:f.uid)||"anonymous",name:(null===f||void 0===f?void 0:f.displayName)||"Anonymous",email:(null===f||void 0===f?void 0:f.email)||"no-email@example.com"}},d=e=>{if(null===e||void 0===e)return null;if("object"!==typeof e)return e;if(Array.isArray(e))return e.map((e=>d(e))).filter((e=>void 0!==e));const t={};for(const n in e){const r=d(e[n]);void 0!==r&&(t[n]=r)}return t},p=d(u);console.log("Tournament data prepared:",p);const g=(0,ms.doc)(fs.db,"games",o.id);await(0,ms.updateDoc)(g,{isTournament:!0,tournamentFormat:a.format||"Knockout",tournamentData:p,isConvertedToTournament:!0,status:"tournament",isOpen:!1}),console.log("Game updated with tournament data:",{format:a.format||"Knockout",tournamentData:p}),console.log("Game updated with tournament data"),n(o.id)}catch(s){console.error("Error creating tournament:",s),"permission-denied"===s.code?d("Permission denied. You may not have admin rights to create tournaments."):d("Failed to create tournament: "+s.message)}c(!1)}else d("No game data provided")},v=async()=>{try{if(f){var e,t;const n=(0,ms.doc)(fs.db,"admins",f.uid);await(0,ms.setDoc)(n,{userId:f.uid,email:f.email,name:f.displayName||(null===(e=f.email)||void 0===e?void 0:e.split("@")[0])||"Admin User",createdAt:(new Date).toISOString()},{merge:!0});const r=(0,ms.doc)(fs.db,"users",f.uid);await(0,ms.setDoc)(r,{email:f.email,role:"admin",name:f.displayName||(null===(t=f.email)||void 0===t?void 0:t.split("@")[0])||"Admin User",updatedAt:(new Date).toISOString()},{merge:!0}),console.log("User admin status updated")}}catch(u){console.error("Error ensuring admin rights:",u)}},b=async e=>{try{console.log("Closing game before tournament conversion:",e);const t=(0,ms.doc)(fs.db,"games",e);return await(0,ms.updateDoc)(t,{status:"closed",isOpen:!1,registrationOpen:!1,closedAt:(new Date).toISOString(),closedForTournament:!0}),await new Promise((e=>setTimeout(e,1e3))),console.log("Game closed successfully"),!0}catch(u){throw console.error("Error closing game:",u),new Error("Failed to close game before tournament conversion: "+u.message)}};return(0,_e.jsxs)(Is,{open:t,onClose:()=>!l&&n(),maxWidth:"sm",fullWidth:!0,children:[(0,_e.jsxs)(Ds,{sx:{bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{mr:1}}),(0,_e.jsx)(yn,{variant:"h6",children:"Convert Game to Tournament"})]}),(0,_e.jsx)(nr,{onClick:n,size:"small",sx:{color:"white"},children:(0,_e.jsx)(su,{})})]}),o&&"closed"!==o.status&&(0,_e.jsx)($s,{severity:"info",sx:{mx:3,mt:1},children:"Note: Converting to tournament will automatically close game registration."}),(0,_e.jsxs)(Os,{children:[u&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:u}),o&&"closed"!==o.status&&(0,_e.jsx)($s,{severity:"info",sx:{mb:2},children:"Note: Converting to tournament will automatically close game registration."}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Convert this game into a tournament or league. Players will be randomly paired into teams of 2, and teams will be randomly distributed in the tournament bracket."}),(0,_e.jsxs)("form",{onSubmit:y,children:[(0,_e.jsx)(nu,{name:"name",label:"Tournament Name",value:a.name,onChange:g,fullWidth:!0,required:!0,margin:"normal"}),(0,_e.jsxs)(bc,{fullWidth:!0,margin:"normal",children:[(0,_e.jsx)(fc,{children:"Tournament Format"}),(0,_e.jsxs)($c,{name:"format",value:a.format,onChange:g,label:"Tournament Format",children:[(0,_e.jsx)(ri,{value:"Knockout",children:"Knockout Tournament"}),(0,_e.jsx)(ri,{value:"League",children:"League (Round Robin)"})]})]}),(0,_e.jsx)(nu,{name:"description",label:"Description",value:a.description,onChange:g,fullWidth:!0,multiline:!0,rows:3,margin:"normal"}),(0,_e.jsxs)(gt,{sx:{mt:2},children:[(0,_e.jsx)(yn,{variant:"subtitle1",gutterBottom:!0,children:"Player Information"}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",paragraph:!0,children:"This will convert the current game into a tournament. All current players will be automatically added to the tournament."}),o&&o.players&&o.players.length>0&&(0,_e.jsxs)(gt,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:[(0,_e.jsx)(yn,{variant:"subtitle2",gutterBottom:!0,children:"Players in this tournament:"}),(0,_e.jsx)(wg,{container:!0,spacing:1,children:o.players.map(((e,t)=>{const n="string"===typeof e?e:e.id,r=m(h[n]||{},n);return(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:4,children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",p:1,bgcolor:"action.hover",borderRadius:1,border:"1px solid rgba(0,0,0,0.1)","&:hover":{bgcolor:"action.selected"}},children:[(0,_e.jsx)(ts,{sx:{mr:1,bgcolor:"hsl(".concat(37*t%360,", 70%, 45%)"),width:32,height:32},children:r.charAt(0)}),(0,_e.jsx)(yn,{variant:"body2",children:r})]})},n||t)}))})]})]})]})]}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:n,disabled:l,children:"Cancel"}),(0,_e.jsx)(pi,{onClick:y,variant:"contained",color:"primary",disabled:l,startIcon:l?(0,_e.jsx)(Bt,{size:20}):(0,_e.jsx)(ss,{}),children:l?"Creating...":"Create Tournament"})]})]})}const Hy=e=>{var t;let{game:n,timeUntilGame:r}=e;const o=jr();return(0,_e.jsx)(Cg,{sx:{mb:3},children:(0,_e.jsx)(_g,{children:(0,_e.jsxs)(wg,{container:!0,spacing:2,children:[(0,_e.jsxs)(wg,{item:!0,xs:12,md:6,children:[(0,_e.jsx)(yn,{variant:"h4",component:"h1",gutterBottom:!0,children:n.location}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,_e.jsxs)(gt,{display:"flex",alignItems:"center",gap:1,children:[(0,_e.jsx)(Py,{color:"primary"}),(0,_e.jsx)(yn,{children:Af(new Date(n.date),"MMMM do, yyyy")})]}),(0,_e.jsxs)(gt,{display:"flex",alignItems:"center",gap:1,children:[(0,_e.jsx)(My,{color:"primary"}),(0,_e.jsxs)(yn,{children:[n.time," (",r,")"]})]}),(0,_e.jsxs)(gt,{display:"flex",alignItems:"center",gap:1,children:[(0,_e.jsx)(xp,{color:"primary"}),(0,_e.jsx)(yn,{children:n.location})]})]})]}),(0,_e.jsx)(wg,{item:!0,xs:12,md:6,children:(0,_e.jsx)(gt,{sx:{display:"flex",gap:2,justifyContent:{md:"flex-end"}},children:n.isOpen&&(null===(t=n.players)||void 0===t?void 0:t.length)>=(n.maxPlayers||4)?(0,_e.jsxs)(yn,{variant:"subtitle1",sx:{bgcolor:o.palette.warning.main,color:"white",px:2,py:.5,borderRadius:1,display:"inline-flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(wp,{}),"Full"]}):(0,_e.jsxs)(yn,{variant:"subtitle1",sx:{bgcolor:n.isOpen?o.palette.success.main:o.palette.error.main,color:"white",px:2,py:.5,borderRadius:1,display:"inline-flex",alignItems:"center",gap:1},children:[n.isOpen?(0,_e.jsx)(Kg,{}):(0,_e.jsx)(Gg,{}),n.isOpen?"Open":"Closed"]})})})]})})})},Gy=e=>{let{players:t,pairs:n,currentUser:r,onJoinLeave:o,loading:i,isOpen:a,playersData:s,loadingPlayers:l,maxPlayers:c}=e;const u=jr(),d=e=>{const t=s[e];return t?t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.displayName?t.displayName:t.email?t.email.split("@")[0]:"Unknown Player":"Loading..."},h=e=>{if(e===(null===r||void 0===r?void 0:r.uid))return u.palette.primary.main;const t=s[e];return t?t.color||(e=>{const t=["#FFB6C1","#98FB98","#87CEFA","#DDA0DD","#F0E68C","#E6E6FA","#FFE4B5","#B0C4DE","#98FF98","#FFA07A","#AFEEEE","#D8BFD8","#FFDAB9","#B0E0E6","#FFB6C1"];let n=0;for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t[Math.abs(n)%t.length]})(e):u.palette.grey[300]},p=null===t||void 0===t?void 0:t.includes(null===r||void 0===r?void 0:r.uid);return(0,_e.jsx)(Cg,{children:(0,_e.jsxs)(_g,{children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,_e.jsxs)(yn,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(Fy,{})," Players (",(null===t||void 0===t?void 0:t.length)||0,")",l&&(0,_e.jsx)(Bt,{size:16,sx:{ml:1}})]}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",onClick:o,disabled:i||!r||!a,size:"small",startIcon:p?(0,_e.jsx)(hs,{}):(0,_e.jsx)(Oy,{}),children:i?(0,_e.jsx)(Bt,{size:24}):p?"Leave Game":"Join Game"})]}),n?(0,_e.jsx)(wg,{container:!0,spacing:2,children:n.map(((e,t)=>{var n,o;return(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:2,backgroundColor:u.palette.background.default,borderLeft:"4px solid ".concat(u.palette.primary.main)},children:[(0,_e.jsxs)(yn,{variant:"subtitle1",gutterBottom:!0,children:["Team ",t+1]}),(0,_e.jsx)(lr,{dense:!0,children:[null===(n=e.player1)||void 0===n?void 0:n.id,null===(o=e.player2)||void 0===o?void 0:o.id].filter(Boolean).map((e=>{var t;return(0,_e.jsx)(Dy,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(Qm,{photoURL:null===(t=s[e])||void 0===t?void 0:t.photoURL,name:d(e),size:32}),(0,_e.jsx)(zg,{primary:d(e),sx:{"& .MuiListItemText-primary":{color:h(e),fontWeight:e===(null===r||void 0===r?void 0:r.uid)?600:400}}})]})},e)}))})]})},t)}))}):(0,_e.jsxs)(lr,{dense:!0,children:[null===t||void 0===t?void 0:t.map((e=>{var t,n;return(0,_e.jsx)(Dy,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[null!==(t=s[e])&&void 0!==t&&t.photoURL?(0,_e.jsx)(Qm,{photoURL:null===(n=s[e])||void 0===n?void 0:n.photoURL,name:d(e),size:32}):null,(0,_e.jsx)(zg,{primary:d(e),sx:{"& .MuiListItemText-primary":{color:h(e),fontWeight:e===(null===r||void 0===r?void 0:r.uid)?600:400}}}),a&&(e===(null===r||void 0===r?void 0:r.uid)?(0,_e.jsx)(pi,{variant:"outlined",color:"primary",size:"small",disabled:i,onClick:o,sx:{ml:2},children:"Leave Game"}):null)]})},e)})),a&&!(null!==t&&void 0!==t&&t.includes(null===r||void 0===r?void 0:r.uid))&&(null===t||void 0===t?void 0:t.length)<c&&(0,_e.jsxs)(Dy,{children:[(0,_e.jsx)(zg,{primary:""}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",size:"small",disabled:i,onClick:o,sx:{ml:2},children:"Join Game"})]}),a&&!(null!==t&&void 0!==t&&t.includes(null===r||void 0===r?void 0:r.uid))&&(null===t||void 0===t?void 0:t.length)>=c&&(0,_e.jsxs)(Dy,{children:[(0,_e.jsx)(zg,{primary:""}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",size:"small",disabled:!0,sx:{ml:2},children:"Full (Join Disabled)"})]})]})]})})},Ky=e=>{let{game:t,onDistribute:n,onToggleStatus:o,onEmail:i,loading:a,onAddPlayer:s,onConvertToTournament:l,setConvertToTournamentOpen:c}=e;const[u,d]=(0,r.useState)({open:!1,action:null}),[h,p]=(0,r.useState)(!1);return(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)(Cg,{children:(0,_e.jsxs)(_g,{children:[(0,_e.jsx)(yn,{variant:"h6",gutterBottom:!0,children:"Admin Actions"}),(0,_e.jsx)(gt,{sx:{display:"flex",flexDirection:"column",gap:2,"& .MuiButton-root":{height:"48px",width:"100%",fontSize:"1rem",fontWeight:500,textTransform:"none",justifyContent:"flex-start",paddingLeft:"20px"}},children:(0,_e.jsxs)(gt,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:1},children:[(0,_e.jsx)(pi,{variant:"outlined",color:"primary",onClick:()=>d({open:!0,action:"distribute"}),disabled:a||!t.players||t.players.length<2,startIcon:(0,_e.jsx)(Ly,{}),children:"Distribute Players"}),(0,_e.jsx)(pi,{variant:"outlined",color:"primary",onClick:()=>d({open:!0,action:"status"}),disabled:a,startIcon:"closed"===t.status?(0,_e.jsx)(Kg,{}):(0,_e.jsx)(Gg,{}),children:"closed"===t.status?"Open Game":"Close Game"}),(0,_e.jsx)(pi,{variant:"outlined",color:"primary",onClick:()=>d({open:!0,action:"email"}),disabled:a||!t.players||0===t.players.length,startIcon:(0,_e.jsx)(Im,{}),children:"Email Players"}),(0,_e.jsx)(pi,{variant:"outlined",color:"primary",onClick:()=>p(!0),disabled:a||"closed"===t.status,startIcon:(0,_e.jsx)(Oy,{}),children:"Add Player"}),(0,_e.jsx)(pi,{variant:"contained",color:"secondary",onClick:()=>c(!0),disabled:a||t.isTournament,startIcon:(0,_e.jsx)(ss,{}),sx:{ml:"auto"},children:"Convert to Tournament"})]})})]})}),(0,_e.jsxs)(Is,{open:u.open,onClose:()=>d({open:!1,action:null}),children:[(0,_e.jsx)(Ds,{children:"distribute"===u.action?"Distribute Teams":"email"===u.action?"Send Email Report":"closed"===t.status?"Open Game":"Close Game"}),(0,_e.jsx)(Os,{children:(0,_e.jsx)(yn,{children:"distribute"===u.action?"This will randomly distribute all players into teams.":"email"===u.action?"This will send an email report to all players.":"closed"===t.status?"This will open the game for new players to join.":"This will close the game and send an email to all players."})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>d({open:!1,action:null}),disabled:a,children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{try{switch(u.action){case"distribute":await n(),fm.success("Teams distributed successfully! \ud83c\udfbe",{style:{background:"#4caf50",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\ud83c\udfaf"});break;case"toggle":await o();break;case"email":await i(),fm.success("Game report sent to all players! \ud83d\udce7",{style:{background:"#1a73e8",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\u2709\ufe0f"})}}catch(e){console.error("Error:",e)}finally{d({open:!1,action:null})}},color:"primary",disabled:a,children:a?(0,_e.jsx)(Bt,{size:24}):"Confirm"})]})]}),(0,_e.jsx)(Xy,{open:h,onClose:()=>p(!1),onAddPlayer:async e=>{try{await s(e)}catch(t){console.error("Error:",t)}},loading:a,currentPlayers:(null===t||void 0===t?void 0:t.players)||[]})]})},Xy=e=>{let{open:t,onClose:n,onAddPlayer:o,loading:i,currentPlayers:a}=e;const[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&(async()=>{f(!0);try{const t=(0,ms.collection)(fs.db,"users"),n=await(0,ms.getDocs)(t),r=[];for(const o of n.docs){const t=o.data();var e;null!==a&&void 0!==a&&a.includes(o.id)||r.push({id:o.id,name:t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.displayName||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])||"Unknown Player",email:t.email})}u(r)}catch(t){console.error("Error fetching players:",t)}finally{f(!1)}})()}),[t,a]);const m=()=>{l(""),h(""),n()},g=c.filter((e=>{var t;return e.name.toLowerCase().includes(d.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))}));return(0,_e.jsxs)(Is,{open:t,onClose:m,maxWidth:"sm",fullWidth:!0,children:[(0,_e.jsx)(Ds,{children:"Add Player to Game"}),(0,_e.jsxs)(Os,{children:[(0,_e.jsx)(nu,{autoFocus:!0,margin:"dense",label:"Search Players",type:"text",fullWidth:!0,variant:"outlined",value:d,onChange:e=>h(e.target.value),sx:{mb:2}}),(0,_e.jsx)(lr,{sx:{width:"100%",bgcolor:"background.paper"},children:p?(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,_e.jsx)(Bt,{})}):0===g.length?(0,_e.jsx)(yn,{color:"text.secondary",align:"center",sx:{p:2},children:"No players found"}):g.map((e=>(0,_e.jsx)(Dy,{button:!0,selected:s===e.id,onClick:()=>l(e.id),children:(0,_e.jsx)(zg,{primary:e.name,secondary:e.email})},e.id)))})]}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:m,children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{s&&(await o(s),m())},disabled:!s||i,variant:"contained",children:i?(0,_e.jsx)(Bt,{size:24}):"Add Player"})]})]})},Yy=e=>{const t=["#f44336","#9c27b0","#ff9800","#4caf50","#2196f3","#607d8b","#795548","#009688","#e91e63","#3f51b5"];return t[e%t.length]},Qy=e=>{if(!e||!e.rounds||0===e.rounds.length)return[];const t=["Wolves","Eagles","Tigers","Bears","Dolphins","Sharks","Lions","Panthers","Hawks","Falcons","Jaguars","Rhinos","Cobras","Vipers","Dragons"],n=new Map;return e.rounds.forEach((e=>{e.matches.forEach((e=>{e.team1&&e.team1.id&&n.set(e.team1.id,e.team1),e.team2&&e.team2.id&&n.set(e.team2.id,e.team2)}))})),Array.from(n.values()).map(((e,n)=>({id:e.id,name:e.name||t[n%t.length],color:e.color||Yy(n),players:e.players&&e.players.length>0?e.players.map((e=>({id:e.id||"p".concat(n),name:e.name||"TBC"}))):[{id:"p".concat(n,"a"),name:"TBC"},{id:"p".concat(n,"b"),name:"TBC"}]})))},$y=()=>{var e;const{id:t}=Z(),{currentUser:n}=ys(),o=(J(),Q()),a=new URLSearchParams(o.search),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null),[w,k]=(0,r.useState)({}),[A,S]=(0,r.useState)(!1),[C,T]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[_,j]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if("true"===a.get("convertToTournament")&&d&&s&&!s.isTournament){const e=window.location.pathname;window.history.replaceState({},"",e),T(!0)}}),[a,d,s]),(0,r.useEffect)((()=>{(async()=>{if(n)try{const e=await(async e=>{try{if(!e)return!1;const t=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",e));if(!t.exists())return!1;const n=t.data();return"admin"===(null===n||void 0===n?void 0:n.role)}catch(t){return console.error("Error checking admin status:",t),!1}})(n.uid);console.log("Admin status check result:",e),h(e)}catch(e){console.error("Error checking admin status:",e),h(!0)}})()}),[n]),(0,r.useEffect)((()=>{if(null===s||void 0===s||!s.date||null===s||void 0===s||!s.time)return;const e=()=>{const e=dg(s.date,s.time);if(!e)return void f("Date not set");const t=new Date;f(e>t?ug(e,{addSuffix:!0}):"Game has started")};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[null===s||void 0===s?void 0:s.date,null===s||void 0===s?void 0:s.time]),(0,r.useEffect)((()=>{if(!t)return;u(!0);const e=(0,ms.onSnapshot)((0,ms.doc)(fs.db,"games",t),(e=>{if(e.exists()){const t=(0,i.A)({id:e.id},e.data());if(console.log("Game data updated:",t),l(t),t.isTournament||t.tournamentId)if(v(!0),t.tournamentData)x(t.tournamentData);else if(t.tournamentId){const n=async()=>{try{const n=await(0,ms.getDoc)(e(fs.db,"tournaments",t.tournamentId));if(n.exists()){const e=(0,i.A)({id:n.id},n.data());x(e)}}catch(n){console.error("Error fetching tournament data:",n)}};n()}u(!1)}else console.log("Game not found"),u(!1)}));return()=>e()}),[t]),(0,r.useEffect)((()=>{if(null!==s&&void 0!==s&&s.players){const e=async()=>{try{I(!0);const e=await Lp(s.players,null===n||void 0===n?void 0:n.uid);k(e),I(!1)}catch(e){console.error("Error loading players:",e),console.log("Failed to load player details"),I(!1)}};e()}}),[null===s||void 0===s?void 0:s.players,null===n||void 0===n?void 0:n.uid]),(0,r.useEffect)((()=>()=>{Fp()}),[]);const N=()=>{S(!1),T(!0)},R=(e,n,r)=>{if(!d)return;const o=(0,i.A)({},b),a=o.rounds[e].matches[n];if(a.winner===r)a.winner=null,a.completed=!1;else if(a.winner=r,a.completed=!0,e<o.rounds.length-1){const t=e+1,i=Math.floor(n/2),s=n%2===0,l=o.rounds[t].matches[i],c=a[r];s?l.team1=c:l.team2=c}x(o);const s=(0,ms.doc)(fs.db,"games",t);(0,ms.updateDoc)(s,{tournamentData:o}).catch((e=>{console.error("Error updating tournament data:",e),fm.error("Failed to update tournament data")}))};return s?(0,_e.jsxs)(gt,{sx:{maxWidth:1200,mx:"auto",p:3},children:[(0,_e.jsx)(Hy,{game:s,timeUntilGame:p}),y&&(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,mb:4,borderRadius:2,overflow:"hidden"},children:[(0,_e.jsxs)(gt,{sx:{p:2,mb:3,background:"linear-gradient(45deg, #1976d2 30%, #21CBF3 90%)",color:"white",borderRadius:"8px 8px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{mr:1}}),(0,_e.jsx)(yn,{variant:"h5",component:"h2",children:b.name||"Tournament"})]}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,_e.jsx)(Ka,{title:"Share Tournament Link",children:(0,_e.jsx)(nr,{size:"small",onClick:()=>(e=>{const t="".concat(window.location.origin,"/games/").concat(e);navigator.clipboard.writeText(t).then((()=>{j(!0),fm.success("Tournament link copied to clipboard!",{style:{background:"#4caf50",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\ud83d\udd17"})})).catch((e=>{console.error("Failed to copy link:",e),fm.error("Failed to copy link. Please try again.",{style:{background:"#f44336",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\u274c"})}))})(t),sx:{color:"white"},children:(0,_e.jsx)(Yg,{})})}),(0,_e.jsx)(gp,{label:b.format||"Knockout",color:"secondary",size:"small",sx:{fontWeight:"bold"}})]})]}),b.rounds&&b.rounds.length>0?(0,_e.jsxs)(gt,{children:[(0,_e.jsx)(xy,{rounds:b.rounds,teams:Qy(b),format:b.format||"knockout"}),d&&(0,_e.jsxs)(gt,{sx:{mt:4,p:3,bgcolor:"background.paper",borderRadius:2,border:"1px dashed rgba(0,0,0,0.2)"},children:[(0,_e.jsxs)(yn,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(yp,{sx:{mr:1,color:"primary.main"}}),"Admin Controls"]}),(0,_e.jsx)(is,{sx:{my:2}}),(0,_e.jsx)(yn,{variant:"subtitle2",gutterBottom:!0,children:"Update Match Results:"}),(0,_e.jsx)(wg,{container:!0,spacing:3,children:b.rounds.map(((e,t)=>(0,_e.jsx)(wg,{item:!0,xs:12,md:6,lg:4,children:(0,_e.jsxs)(Gt,{elevation:1,sx:{p:2,borderRadius:2},children:[(0,_e.jsx)(yn,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:e.name}),e.matches.map(((e,n)=>{var r,o,i,a;return(0,_e.jsxs)(gt,{sx:{mb:2,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid rgba(0,0,0,0.08)"},children:[(0,_e.jsxs)(yn,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:["Match ",n+1,": ",(null===(r=e.team1)||void 0===r?void 0:r.name)||"Team 1"," vs ",(null===(o=e.team2)||void 0===o?void 0:o.name)||"Team 2"]}),(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,_e.jsxs)(pi,{variant:"team1"===e.winner?"contained":"outlined",color:"primary",size:"small",onClick:()=>R(t,n,"team1"),sx:{borderRadius:"20px",px:2,fontSize:"0.7rem",boxShadow:"team1"===e.winner?3:0,"&:hover":{transform:"scale(1.05)"},transition:"all 0.2s ease"},children:[(null===(i=e.team1)||void 0===i?void 0:i.name)||"Team 1"," Win"]}),(0,_e.jsxs)(pi,{variant:"team2"===e.winner?"contained":"outlined",color:"secondary",size:"small",onClick:()=>R(t,n,"team2"),sx:{borderRadius:"20px",px:2,fontSize:"0.7rem",boxShadow:"team2"===e.winner?3:0,"&:hover":{transform:"scale(1.05)"},transition:"all 0.2s ease"},children:[(null===(a=e.team2)||void 0===a?void 0:a.name)||"Team 2"," Win"]})]})]},n)}))]})},t)))})]})]}):(0,_e.jsx)($s,{severity:"info",sx:{mt:2},children:"Tournament bracket not yet generated"}),(0,_e.jsxs)(gt,{sx:{mt:2,p:2,bgcolor:"background.paper",borderRadius:1,border:"1px solid rgba(0,0,0,0.1)"},children:[(0,_e.jsx)(yn,{variant:"subtitle2",gutterBottom:!0,children:"Tournament Teams:"}),(0,_e.jsx)(wg,{container:!0,spacing:2,children:b.rounds&&null!==(e=b.rounds[0])&&void 0!==e&&e.matches?b.rounds[0].matches.flatMap((e=>[e.team1,e.team2])).filter(((e,t,n)=>e&&e.id&&n.findIndex((t=>t&&t.id===e.id))===t&&"team-bye"!==e.id)).map(((e,t)=>(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:4,children:(0,_e.jsxs)(Gt,{elevation:1,sx:{p:1.5,borderLeft:"4px solid ".concat(e.color||"#1976d2")},children:[(0,_e.jsx)(yn,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:"bold",color:e.color},children:e.name}),(0,_e.jsx)(gt,{sx:{display:"flex",flexDirection:"column",gap:.5},children:e.players&&e.players.length>0?(0,_e.jsx)(yn,{variant:"body2",children:e.players.map((e=>e.name||"TBC")).join(" & ")}):(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",children:"No players"})})]})},e&&e.id||t))):(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(yn,{variant:"body2",children:"No teams available"})})})]})]}),(0,_e.jsxs)(wg,{container:!0,spacing:{xs:2,sm:3},children:[(0,_e.jsx)(wg,{item:!0,xs:12,md:8,children:(0,_e.jsx)(Gy,{players:s.players,pairs:s.pairs,currentUser:n,onJoinLeave:async()=>{if(n&&s){u(!0);try{var e,r;const a=null===(e=s.players)||void 0===e?void 0:e.some((e=>(e.id||e)===(null===n||void 0===n?void 0:n.uid)));if(!a&&(null===(r=s.players)||void 0===r?void 0:r.length)>=s.maxPlayers)return void u(!1);if(a)await(0,fs.leaveGame)(t,n.uid),fm.info("You have left the game.",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83d\udc4b"});else{await(0,fs.joinGame)(t,n.uid);try{const e={id:t,location:s.location,date:s.date,time:s.time,formattedDate:Af(new Date(s.date),"MMMM do, yyyy")};await ty("gameConfirmation",e,[n.uid]),Uy({title:"Game Registration Confirmed",body:"You are registered for the game at ".concat((o=e).location," on ").concat(o.formattedDate||o.date," at ").concat(o.time,". See you on the court!"),data:{gameId:o.id,url:"/games/".concat(o.id)}}),fm.success("Game joined successfully!",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83c\udfae"})}catch(i){console.error("Error sending confirmation notification:",i),fm.success("Game joined successfully!",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83c\udfae"})}}}catch(a){console.error("Error:",a),console.log(a.message||"Failed to join/leave game")}finally{u(!1)}var o}},loading:c,isOpen:s.isOpen,playersData:w,loadingPlayers:E,maxPlayers:s.maxPlayers})}),d&&(0,_e.jsx)(wg,{item:!0,xs:12,md:4,children:(0,_e.jsx)(Ky,{game:s,onDistribute:async()=>{try{if(u(!0),console.log(""),!s.players||s.players.length<2)return void console.log("Not enough players to distribute teams");const e=(e=>{if(console.log("Starting team distribution with players:",JSON.stringify(e,null,2)),!e||0===e.length)return console.warn("No players provided for team distribution"),[];const t=e.filter((e=>{if(console.log("Validating player:",e),!e)return console.log("Player is null/undefined"),!1;if("string"===typeof e)return console.log("Player is string ID:",e),!0;const t="object"===typeof e&&(e.id||e.email);return console.log("Player validation result:",t,e),t}));if(console.log("Valid players after filtering:",JSON.stringify(t,null,2)),t.length<2)return console.warn("Not enough players to create teams"),[];const n=ry(t);console.log("Shuffled players:",JSON.stringify(n,null,2));const r=[...n].sort(((e,t)=>oy(t)-oy(e)));console.log("Sorted players:",JSON.stringify(r,null,2));const o=Math.floor(t.length/2),i=[];for(let l=0;l<o;l++){const e=r[l],t=r[r.length-1-l];console.log("Creating pair with players:",JSON.stringify(e,null,2),JSON.stringify(t,null,2));const n={player1:iy(e),player2:iy(t),score:0};console.log("Created pair:",JSON.stringify(n,null,2)),i.push(n)}const a=t.length%2===1?r[o]:null;if(a){console.log("Handling remaining player:",JSON.stringify(a,null,2));const e={player1:iy(a),player2:null,score:0};console.log("Created pair for remaining player:",JSON.stringify(e,null,2)),i.push(e)}console.log("Final pairs before shuffle:",JSON.stringify(i,null,2));const s=ry(i);return console.log("Final shuffled pairs:",JSON.stringify(s,null,2)),s})([...s.players].sort((()=>Math.random()-.5))),n=(0,ms.doc)(fs.db,"games",t);await(0,ms.updateDoc)(n,{pairs:e,lastDistributed:(new Date).toISOString()}),l((t=>(0,i.A)((0,i.A)({},t),{},{pairs:e,lastDistributed:(new Date).toISOString()}))),console.log("")}catch(e){console.error("Error distributing teams:",e),console.log("Failed to distribute teams: "+e.message)}finally{u(!1)}},onToggleStatus:async()=>{u(!0);try{const n=(0,ms.doc)(fs.db,"games",t),r=(await(0,ms.getDoc)(n)).data(),o=r.isOpen;if(await ny(t),o){const n={id:t,location:r.location,date:Af(new Date(r.date),"yyyy-MM-dd"),time:r.time,formattedDate:Af(new Date(r.date),"MMMM do, yyyy")};await ty("gameClosed",n,r.players),Uy({title:"Game Registration Closed",body:"Registration for the game at ".concat((e=n).location," on ").concat(e.formattedDate||e.date," is now closed."),data:{gameId:e.id,url:"/games/".concat(e.id)}}),fm.success("Game closed and notifications sent to all participants",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83d\udcaa"})}else fm.success("Game is now open for registration",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83d\udd13"})}catch(n){console.error("Error:",n),console.log(n.message||"Failed to toggle game status")}finally{u(!1)}var e},onEmail:async()=>{u(!0);try{200===(await Of(t)).status&&fm.success("Game report sent successfully! \ud83d\udce7",{style:{background:"#1a73e8",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\u2709\ufe0f"})}catch(e){console.error("Error:",e),fm.error(e.message||"Failed to send email",{style:{background:"#f44336",color:"#fff",borderRadius:"8px",padding:"16px"},icon:"\u274c"})}finally{u(!1)}},onAddPlayer:async e=>{try{u(!0),await(async(e,t)=>{try{var n;const r=(0,ms.doc)(fs.db,"games",e),o=await(0,ms.getDoc)(r);if(!o.exists())throw new Error("Game not found");const i=o.data();if(i.players&&i.players.includes(t))throw new Error("Player is already in this game");if(((null===(n=i.players)||void 0===n?void 0:n.length)||0)>=i.maxPlayers)throw new Error("Cannot add player: This game is already full. Remove a player or increase the maximum allowed players to add more.");const a=[...i.players||[],t];return await(0,ms.updateDoc)(r,{players:a,lastUpdated:(new Date).toISOString()}),await ty("gameConfirmation",{id:e,location:i.location,date:i.date,time:i.time},[t]),a.length>=i.maxPlayers&&(await(0,ms.updateDoc)(r,{isOpen:!1,status:"closed"}),await ty("gameClosed",{id:e,location:i.location,date:i.date},a)),!0}catch(r){throw console.error("Error adding player to game:",r),r}})(t,e);const n=await(0,ms.getDoc)((0,ms.doc)(fs.db,"games",t));l((0,i.A)({id:n.id},n.data()))}catch(n){console.log(n.message)}finally{u(!1)}},onConvertToTournament:N,loading:c,setConvertToTournamentOpen:S})})]}),(0,_e.jsxs)(Is,{open:A,onClose:()=>S(!1),children:[(0,_e.jsx)(Ds,{children:"Convert to Tournament"}),(0,_e.jsx)(Os,{children:(0,_e.jsx)(yn,{children:"Are you sure you want to convert this game to a tournament?"})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>S(!1),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:N,color:"primary",children:"Confirm"})]})]}),(0,_e.jsx)(qy,{open:C,onClose:e=>{T(!1),e&&(v(!0),fm.success("Tournament created successfully!"))},game:s})]}):(0,_e.jsx)(gt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 64px)",children:(0,_e.jsx)(Bt,{})})};var Jy=n(2505);function Zy(){const e=J(),{currentUser:t}=ys(),[n,o]=(0,r.useState)({date:"",time:"",location:"",maxPlayers:4,deadline:"",deadlineTime:"",description:"",duration:1.5}),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),u=e=>{const{name:t,value:n}=e.target;o((e=>(0,i.A)((0,i.A)({},e),{},{[t]:n})))};return(0,_e.jsx)(sn,{maxWidth:"sm",sx:{mt:4},children:(0,_e.jsxs)(Gt,{sx:{p:4},children:[(0,_e.jsx)(yn,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Create New Game"}),a&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:a}),(0,_e.jsxs)(gt,{component:"form",onSubmit:async r=>{r.preventDefault(),s(""),c(!0);try{const r=new Date(n.date+"T"+n.time);if(new Date(n.deadline+"T"+n.deadlineTime)>=r)return s("Deadline must be before the game start time"),void c(!1);const o={date:n.date,time:n.time,location:n.location,maxPlayers:parseInt(n.maxPlayers),players:[],deadline:n.deadline,deadlineTime:n.deadlineTime,description:n.description,duration:parseFloat(n.duration),isOpen:!0,status:"open",createdAt:(new Date).toISOString(),createdBy:{id:t.uid,name:t.displayName||"Anonymous",email:t.email}},i=await(0,ms.addDoc)((0,ms.collection)(fs.db,"games"),o),a={id:i.id,location:o.location,date:Af(new Date(o.date),"yyyy-MM-dd"),time:o.time,formattedDate:Af(new Date(o.date),"MMMM do, yyyy")};await ty("gameCreated",a),Wy(a),fm.success("Game created successfully!",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:"\ud83c\udfae"}),e("/admin/games")}catch(o){console.error("Error creating game:",o),s("Failed to create game. Please try again.")}c(!1)},sx:{mt:2},children:[(0,_e.jsx)(nu,{required:!0,fullWidth:!0,label:"Date",type:"date",name:"date",value:n.date,onChange:u,InputLabelProps:{shrink:!0},sx:{mb:2}}),(0,_e.jsx)(nu,{required:!0,fullWidth:!0,label:"Time",type:"time",name:"time",value:n.time,onChange:u,InputLabelProps:{shrink:!0},sx:{mb:2}}),(0,_e.jsx)(nu,{required:!0,fullWidth:!0,label:"Location",name:"location",value:n.location,onChange:u,sx:{mb:2}}),(0,_e.jsxs)(bc,{fullWidth:!0,sx:{mb:2},children:[(0,_e.jsx)(fc,{children:"Maximum Players"}),(0,_e.jsxs)($c,{value:n.maxPlayers,label:"Maximum Players",name:"maxPlayers",onChange:u,children:[(0,_e.jsx)(ri,{value:2,children:"2"}),(0,_e.jsx)(ri,{value:4,children:"4"}),(0,_e.jsx)(ri,{value:6,children:"6"}),(0,_e.jsx)(ri,{value:8,children:"8"}),(0,_e.jsx)(ri,{value:10,children:"10"}),(0,_e.jsx)(ri,{value:12,children:"12"})]})]}),(0,_e.jsxs)(bc,{fullWidth:!0,sx:{mb:2},children:[(0,_e.jsx)(fc,{children:"Match Duration (hours)"}),(0,_e.jsxs)($c,{value:n.duration,label:"Match Duration (hours)",name:"duration",onChange:u,children:[(0,_e.jsx)(ri,{value:1,children:"1"}),(0,_e.jsx)(ri,{value:1.5,children:"1.5"}),(0,_e.jsx)(ri,{value:2,children:"2"}),(0,_e.jsx)(ri,{value:2.5,children:"2.5"}),(0,_e.jsx)(ri,{value:3,children:"3"})]})]}),(0,_e.jsx)(nu,{required:!0,fullWidth:!0,label:"Registration Deadline Date",type:"date",name:"deadline",value:n.deadline,onChange:u,InputLabelProps:{shrink:!0},sx:{mb:2}}),(0,_e.jsx)(nu,{required:!0,fullWidth:!0,label:"Registration Deadline Time",type:"time",name:"deadlineTime",value:n.deadlineTime,onChange:u,InputLabelProps:{shrink:!0},sx:{mb:2}}),(0,_e.jsx)(nu,{fullWidth:!0,label:"Description",name:"description",value:n.description,onChange:u,multiline:!0,rows:4,sx:{mb:2}}),(0,_e.jsxs)(gt,{sx:{mt:3,display:"flex",justifyContent:"space-between"},children:[(0,_e.jsx)(pi,{type:"button",variant:"outlined",color:"secondary",onClick:async()=>{const e={id:"test-game-id",location:"Test Location",date:Af(new Date,"yyyy-MM-dd"),time:"18:00",formattedDate:Af(new Date,"MMMM do, yyyy")},t=await Wy(e);fm.info(t?"Test notification sent successfully!":"Please enable notifications in your browser settings",{style:{background:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",padding:"16px"},icon:t?"\u2705":"\u26a0\ufe0f"})},startIcon:(0,_e.jsx)(Xu.A,{}),sx:{backgroundColor:e=>"dark"===e.palette.mode?"#2A2A2A":void 0,color:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,borderColor:e=>"dark"===e.palette.mode?"#FFFFFF":void 0,"&:hover":{backgroundColor:e=>"dark"===e.palette.mode?"#3A3A3A":void 0}},children:"Test Notification"}),(0,_e.jsx)(pi,{type:"submit",variant:"contained",color:"primary",disabled:l,startIcon:l?(0,_e.jsx)(Bt,{size:24}):(0,_e.jsx)(Jy.A,{}),sx:{color:"#FFFFFF"},children:l?"Creating...":"Create Game"})]})]})]})})}function ev(e){return(0,At.Ay)("PrivateSwitchBase",e)}(0,kt.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const tv=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],nv=(0,wt.Ay)($n)((e=>{let{ownerState:t}=e;return(0,Se.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),rv=(0,wt.Ay)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ov=r.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:o,className:i,defaultChecked:a,disabled:s,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:p,name:f,onBlur:m,onChange:g,onFocus:y,readOnly:v,required:b=!1,tabIndex:x,type:w,value:k}=e,A=(0,Ce.A)(e,tv),[S,C]=(0,Fa.A)({controlled:r,default:Boolean(a),name:"SwitchBase",state:"checked"}),T=xl();let E=s;T&&"undefined"===typeof E&&(E=T.disabled);const I="checkbox"===w||"radio"===w,_=(0,Se.A)({},e,{checked:S,disabled:E,disableFocusRipple:l,edge:c}),j=(e=>{const{classes:t,checked:n,disabled:r,edge:o}=e,i={root:["root",n&&"checked",r&&"disabled",o&&"edge".concat((0,xt.A)(o))],input:["input"]};return(0,bt.A)(i,ev,t)})(_);return(0,_e.jsxs)(nv,(0,Se.A)({component:"span",className:(0,vt.A)(j.root,i),centerRipple:!0,focusRipple:!l,disabled:E,tabIndex:null,role:void 0,onFocus:e=>{y&&y(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{m&&m(e),T&&T.onBlur&&T.onBlur(e)},ownerState:_,ref:t},A,{children:[(0,_e.jsx)(rv,(0,Se.A)({autoFocus:n,checked:r,defaultChecked:a,className:j.input,disabled:E,id:I?d:void 0,name:f,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;C(t),g&&g(e,t)},readOnly:v,ref:p,required:b,ownerState:_,tabIndex:x,type:w},"checkbox"===w&&void 0===k?{}:{value:k},h)),S?o:u]}))})),iv=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),av=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),sv=(0,Xa.A)((0,_e.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function lv(e){return(0,At.Ay)("MuiCheckbox",e)}const cv=(0,kt.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),uv=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],dv=(0,wt.Ay)(ov,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,xt.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(cv.checked,", &.").concat(cv.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(cv.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),hv=(0,_e.jsx)(av,{}),pv=(0,_e.jsx)(iv,{}),fv=(0,_e.jsx)(sv,{}),mv=r.forwardRef((function(e,t){var n,o;const i=(0,qe.A)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=hv,color:s="primary",icon:l=pv,indeterminate:c=!1,indeterminateIcon:u=fv,inputProps:d,size:h="medium",className:p}=i,f=(0,Ce.A)(i,uv),m=c?u:l,g=c?u:a,y=(0,Se.A)({},i,{color:s,indeterminate:c,size:h}),v=(e=>{const{classes:t,indeterminate:n,color:r}=e,o={root:["root",n&&"indeterminate","color".concat((0,xt.A)(r))]},i=(0,bt.A)(o,lv,t);return(0,Se.A)({},t,i)})(y);return(0,_e.jsx)(dv,(0,Se.A)({type:"checkbox",inputProps:(0,Se.A)({"data-indeterminate":c},d),icon:r.cloneElement(m,{fontSize:null!=(n=m.props.fontSize)?n:h}),checkedIcon:r.cloneElement(g,{fontSize:null!=(o=g.props.fontSize)?o:h}),ownerState:y,ref:t,className:(0,vt.A)(v.root,p)},f,{classes:v}))}));function gv(e){return(0,At.Ay)("MuiListItemAvatar",e)}(0,kt.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const yv=["className"],vv=(0,wt.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),bv=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiListItemAvatar"}),{className:o}=n,i=(0,Ce.A)(n,yv),a=r.useContext(or),s=(0,Se.A)({},n,{alignItems:a.alignItems}),l=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,bt.A)(r,gv,n)})(s);return(0,_e.jsx)(vv,(0,Se.A)({className:(0,vt.A)(l.root,o),ownerState:s,ref:t},i))})),xv=(0,Xa.A)((0,_e.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh"),wv=(0,Xa.A)((0,_e.jsx)("path",{d:"M19.52 2.49C17.18.15 12.9.62 9.97 3.55c-1.6 1.6-2.52 3.87-2.54 5.46-.02 1.58.26 3.89-1.35 5.5l-4.24 4.24 1.42 1.42 4.24-4.24c1.61-1.61 3.92-1.33 5.5-1.35s3.86-.94 5.46-2.54c2.92-2.93 3.4-7.21 1.06-9.55zm-9.2 9.19c-1.53-1.53-1.05-4.61 1.06-6.72s5.18-2.59 6.72-1.06c1.53 1.53 1.05 4.61-1.06 6.72s-5.18 2.59-6.72 1.06zM18 17c.53 0 1.04.21 1.41.59.78.78.78 2.05 0 2.83-.37.37-.88.58-1.41.58s-1.04-.21-1.41-.59c-.78-.78-.78-2.05 0-2.83.37-.37.88-.58 1.41-.58m0-2c-1.02 0-2.05.39-2.83 1.17-1.56 1.56-1.56 4.09 0 5.66.78.78 1.81 1.17 2.83 1.17s2.05-.39 2.83-1.17c1.56-1.56 1.56-4.09 0-5.66C20.05 15.39 19.02 15 18 15z"}),"SportsTennis");function kv(){const[e,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)([]),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null),{currentUser:w,isAdmin:k}=ys(),A=J();(0,r.useEffect)((()=>{(async()=>{try{o(!0),a("");const n=(0,ms.query)((0,ms.collection)(fs.db,"games"),(0,ms.where)("isTournament","==",!0));try{const e=await(0,ms.getDocs)(n),r=e.docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"Game Tournament",format:t.tournamentFormat||"Knockout",location:t.location,startDate:t.date,startTime:t.time,status:t.status,createdAt:t.createdAt,tournamentData:t.tournamentData,source:"games"}})).sort(((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(0);return(t.createdAt?new Date(t.createdAt):new Date(0))-n}));t(r),o(!1)}catch(e){console.error("Error fetching game tournaments:",e),a("Failed to load tournaments. Please try again later."),o(!1)}}catch(e){console.error("Error in tournament list:",e),a("Failed to load tournaments. Please try again later."),o(!1)}})()}),[]),(0,r.useEffect)((()=>{d&&(async()=>{try{const e=(0,ms.query)((0,ms.collection)(fs.db,"games"),(0,ms.where)("isTournament","==",!1)),t=(await(0,ms.getDocs)(e)).docs.map((e=>{const t=e.data();return{id:e.id,location:t.location||"Unnamed Game",date:t.date,time:t.time,players:t.players||[],pairs:t.pairs||[]}})),n=new Date;n.setHours(0,0,0,0);const r=t.filter((e=>!e.date||new Date(e.date)>=n)).sort(((e,t)=>(e.date?new Date(e.date):new Date(0))-(t.date?new Date(t.date):new Date(0))));f(r)}catch(e){console.error("Error fetching available games:",e)}})()}),[d]);const S=e=>{g(e);const t=p.find((t=>t.id===e));x(t)};return(0,_e.jsxs)(gt,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},mb:3,gap:{xs:2,sm:0}},children:[(0,_e.jsxs)(yn,{variant:"h4",component:"h1",gutterBottom:!1,sx:{mb:{xs:2,sm:0}},children:[(0,_e.jsx)(ss,{sx:{mr:1,verticalAlign:"middle"}}),"Tournaments"]}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2},width:{xs:"100%",sm:"auto"}},children:[(0,_e.jsx)(pi,{variant:"outlined",color:"primary",startIcon:(0,_e.jsx)(xv,{}),onClick:()=>{o(!0),(async()=>{try{o(!0),a("");const n=(0,ms.query)((0,ms.collection)(fs.db,"games"),(0,ms.where)("isTournament","==",!0));try{const e=(await(0,ms.getDocs)(n)).docs.map((e=>{const t=e.data();return{id:e.id,name:t.name||"Game Tournament",format:t.tournamentFormat||"Knockout",location:t.location,startDate:t.date,startTime:t.time,status:t.status,createdAt:t.createdAt,tournamentData:t.tournamentData,source:"games"}})).sort(((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(0);return(t.createdAt?new Date(t.createdAt):new Date(0))-n}));t(e),o(!1)}catch(e){console.error("Error fetching game tournaments:",e),a("Failed to load tournaments. Please try again later."),o(!1)}}catch(e){console.error("Error in tournament list:",e),a("Failed to load tournaments. Please try again later."),o(!1)}})()},sx:{width:{xs:"100%",sm:"auto"}},children:"Refresh"}),k&&(0,_e.jsx)(pi,{variant:"contained",color:"primary",startIcon:(0,_e.jsx)(Zh,{}),onClick:()=>{h(!0)},sx:{width:{xs:"100%",sm:"auto"}},children:"Create Tournament"})]})]}),(0,_e.jsxs)(gt,{sx:{mb:4},children:[i&&(0,_e.jsx)($s,{severity:"error",sx:{mb:2},children:i}),!i&&0===e.length&&!n&&(0,_e.jsx)($s,{severity:"info",sx:{mb:2},children:"No tournaments found. You can create a tournament by converting a game to tournament mode."})]}),n?(0,_e.jsx)(gt,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,_e.jsx)(Bt,{})}):0===e.length?(0,_e.jsxs)(Gt,{sx:{p:4,textAlign:"center",bgcolor:"background.paper"},children:[(0,_e.jsx)(ss,{sx:{fontSize:60,color:"text.secondary",mb:2,opacity:.3}}),(0,_e.jsx)(yn,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No tournaments available"}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Convert a game to a tournament to get started."}),(0,_e.jsx)(pi,{variant:"contained",color:"primary",onClick:()=>A("/games"),startIcon:(0,_e.jsx)(wv,{}),children:"Go to Games"})]}):(0,_e.jsxs)(wg,{container:!0,spacing:3,children:[e.map((e=>{ug(e.startDate,{addSuffix:!0},"Date not set");return(0,_e.jsx)(wg,{item:!0,xs:12,sm:6,md:4,children:(0,_e.jsxs)(Cg,{sx:{height:"100%",display:"flex",flexDirection:"column",background:e=>"linear-gradient(135deg, \n                    ".concat(e.palette.background.card," 0%, \n                    ").concat((0,Ut.X4)(e.palette.primary.dark,.15)," 100%)"),boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:{xs:2,sm:3},overflow:"visible","&:hover":{boxShadow:"0 8px 25px 0 rgba(0, 0, 0, 0.6)",transform:"translateY(-4px)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out",background:e=>"linear-gradient(135deg, \n                      ".concat(e.palette.background.card," 0%, \n                      ").concat((0,Ut.X4)(e.palette.primary.dark,.25)," 100%)")}},children:[(0,_e.jsxs)(_g,{children:[(0,_e.jsx)(yn,{variant:"h6",component:"div",children:e.name}),(0,_e.jsxs)(yn,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Format: ",e.format]}),(0,_e.jsxs)(yn,{variant:"body2",color:"text.secondary",children:[e.startDate&&Af(new Date(e.startDate),"PPP"),e.startTime&&" at ".concat(e.startTime)]}),(0,_e.jsxs)(yn,{variant:"body2",color:"text.secondary",children:["Location: ",e.location||"Not specified"]}),(0,_e.jsx)(gt,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1},children:(()=>{let t="completed"===e.status,n=null,r=[];if(e.tournamentData&&e.tournamentData.rounds){const o=e.tournamentData.rounds;if(o.length>0){const i=o[o.length-1];if(i.matches&&i.matches[0]&&i.matches[0].winner){let o=i.matches[0].winner,a=null;if("string"===typeof o){a=i.matches[0][o]||(Array.isArray(e.tournamentData.teams)?e.tournamentData.teams.find((e=>e.id===o||e.name===o)):null)}else"object"===typeof o&&(a=o);n=a,r=(a&&a.players?a.players:[]).map((e=>"object"===typeof e?e.name||e.displayName||e.email||"TBC":e||"TBC")),t=!0}}}return(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)(gp,{label:t?"Completed":"Ongoing",color:t?"success":"primary",size:"small",sx:{width:"fit-content",mb:t?1:0,background:e=>t?"linear-gradient(135deg, ".concat(e.palette.success.dark," 30%, ").concat(e.palette.success.main," 90%)"):"linear-gradient(135deg, ".concat(e.palette.primary.dark," 30%, ").concat(e.palette.primary.main," 90%)"),boxShadow:e=>t?"0 2px 6px 0 rgba(102, 187, 106, 0.4)":"0 2px 6px 0 rgba(92, 107, 192, 0.4)",border:e=>t?"1px solid rgba(102, 187, 106, 0.5)":"1px solid rgba(92, 107, 192, 0.5)",fontWeight:"medium","& .MuiChip-label":{color:e=>(e.palette.mode,"#fff")}}}),t&&n&&(0,_e.jsxs)(gt,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",bgcolor:e=>"dark"===e.palette.mode?"rgba(255, 215, 0, 0.15)":"rgba(255, 249, 196, 0.7)",borderRadius:2,p:1.5,mt:1.2,mb:.5,boxShadow:e=>"dark"===e.palette.mode?"0 4px 12px rgba(255, 215, 0, 0.2)":1,minWidth:0,border:e=>"dark"===e.palette.mode?"1px solid rgba(255, 215, 0, 0.3)":"none"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mb:.5},children:[(0,_e.jsx)(ss,{sx:{color:"gold",fontSize:28,mr:1}}),(0,_e.jsx)(yn,{variant:"subtitle1",sx:{fontWeight:700,color:e=>"dark"===e.palette.mode?"#ffd700":"#7c6f3f",fontSize:"1.07rem",mr:1,wordBreak:"break-word",textShadow:e=>"dark"===e.palette.mode?"0 1px 2px rgba(0, 0, 0, 0.5)":"none"},children:n.name})]}),(0,_e.jsx)(gt,{sx:{display:"flex",alignItems:"center",pl:4,gap:1},children:n&&n.players&&n.players.map(((e,t)=>{const r="object"===typeof e?e.name||e.displayName||e.email||"TBC":e||"TBC",o="object"===typeof e?e.photoURL:void 0,i="object"===typeof e?e.email:void 0;return(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mr:1},children:[(0,_e.jsx)(Qm,{photoURL:o,name:r,size:28,email:i}),(0,_e.jsx)(yn,{variant:"body2",sx:{color:"text.primary",fontSize:"1rem",ml:.5},children:r}),0===t&&n.players.length>1&&(0,_e.jsx)(yn,{sx:{mx:.5},children:"&"})]},t)}))})]})]})})()})]}),(0,_e.jsxs)(Dg,{sx:{p:2,pt:0},children:[(0,_e.jsx)(pi,{variant:"contained",color:"primary",onClick:()=>A("games"===e.source?"/games/".concat(e.id):"/tournaments/".concat(e.id)),sx:{flexGrow:1,background:e=>(e.palette.mode,"linear-gradient(135deg, ".concat(e.palette.primary.main," 30%, ").concat(e.palette.primary.dark," 90%)")),color:"#ffffff",fontWeight:700,letterSpacing:"0.5px","&:hover":{background:e=>(e.palette.mode,"linear-gradient(135deg, ".concat(e.palette.primary.light," 30%, ").concat(e.palette.primary.main," 90%)")),transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(121, 134, 203, 0.6)"},boxShadow:"0 2px 8px 0 rgba(121, 134, 203, 0.5)"},children:"View Tournament"}),(0,_e.jsx)(pi,{variant:"outlined",color:"secondary",onClick:()=>(e=>{const t="".concat(window.location.origin,"/tournaments/").concat(e);navigator.clipboard.writeText(t).then((()=>{a("Tournament link copied to clipboard!"),setTimeout((()=>a("")),3e3)})).catch((e=>{console.error("Failed to copy link:",e),a("Failed to copy link. Please try again.")}))})(e.id),sx:{ml:1,borderColor:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,color:e=>"dark"===e.palette.mode?"#64b5f6":e.palette.secondary.main,borderWidth:e=>"dark"===e.palette.mode?"2px":"1px",fontWeight:e=>"dark"===e.palette.mode?700:600,"&:hover":{borderColor:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.light,color:e=>"dark"===e.palette.mode?"#9be7ff":e.palette.secondary.light,transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(100, 181, 246, 0.4)",backgroundColor:e=>"dark"===e.palette.mode?"rgba(100, 181, 246, 0.1)":void 0}},startIcon:(0,_e.jsx)(Yg,{}),children:"Share"}),k&&(0,_e.jsx)(nr,{color:"error",onClick:()=>{u(e),l(!0)},sx:{ml:1,bgcolor:e=>(0,Ut.X4)(e.palette.error.main,.1),"&:hover":{bgcolor:e=>(0,Ut.X4)(e.palette.error.main,.2),transform:"translateY(-2px)"}},size:"small",children:(0,_e.jsx)(Em,{})})]})]})},e.id)})),0===e.length&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(yn,{variant:"body1",color:"text.secondary",align:"center",children:"No tournaments available"})})]}),(0,_e.jsxs)(Is,{open:s,onClose:()=>l(!1),children:[(0,_e.jsx)(Ds,{children:"Delete Tournament"}),(0,_e.jsx)(Os,{children:(0,_e.jsx)(yn,{children:"Are you sure you want to delete this tournament? This action cannot be undone."})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>l(!1),disabled:n,sx:{"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.2)"}},children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{if(c)try{if(o(!0),"games"===c.source){const e=(0,ms.doc)(fs.db,"games",c.id);await(0,ms.updateDoc)(e,{isTournament:!1,tournamentData:null,isConvertedToTournament:!1})}t((e=>e.filter((e=>e.id!==c.id)))),a("Tournament deleted successfully!"),setTimeout((()=>a("")),3e3)}catch(e){console.error("Error deleting tournament:",e),a("Failed to delete tournament. Please try again.")}finally{o(!1),l(!1),u(null)}},color:"error",disabled:n,startIcon:n?(0,_e.jsx)(Bt,{size:20}):(0,_e.jsx)(Em,{}),sx:{background:e=>"dark"===e.palette.mode?"linear-gradient(135deg, ".concat(e.palette.error.dark," 30%, ").concat(e.palette.error.main," 90%)"):void 0,"&:hover":{background:e=>"dark"===e.palette.mode?"linear-gradient(135deg, ".concat(e.palette.error.main," 30%, ").concat(e.palette.error.light," 90%)"):void 0,transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(244, 67, 54, 0.4)"},boxShadow:"0 2px 8px 0 rgba(244, 67, 54, 0.3)"},children:n?"Deleting...":"Delete"})]})]}),(0,_e.jsxs)(Is,{open:d,onClose:()=>h(!1),maxWidth:"sm",fullWidth:!0,children:[(0,_e.jsx)(Ds,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{mr:1}}),"Create Tournament"]})}),(0,_e.jsxs)(Os,{children:[(0,_e.jsx)(yn,{variant:"subtitle1",gutterBottom:!0,sx:{mt:1},children:"Select a game to convert to tournament:"}),p.length>0?(0,_e.jsx)(lr,{sx:{width:"100%",bgcolor:"background.paper"},children:p.map((e=>{var t;return(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsxs)(Dy,{alignItems:"flex-start",button:!0,onClick:()=>S(e.id),secondaryAction:(0,_e.jsx)(mv,{edge:"end",checked:m===e.id,onChange:()=>S(e.id)}),children:[(0,_e.jsx)(bv,{children:(0,_e.jsx)(ts,{sx:{bgcolor:"primary.main"},children:(0,_e.jsx)(wv,{})})}),(0,_e.jsx)(zg,{primary:e.location,secondary:(0,_e.jsxs)(r.Fragment,{children:[(0,_e.jsx)(yn,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:e.date&&Af(new Date(e.date),"PPP")}),e.time&&" at ".concat(e.time),(0,_e.jsx)("br",{}),"".concat((null===(t=e.players)||void 0===t?void 0:t.length)||0," players")]})})]}),(0,_e.jsx)(is,{variant:"inset",component:"li"})]},e.id)}))}):(0,_e.jsx)(yn,{variant:"body1",color:"text.secondary",align:"center",sx:{py:3},children:"No available games found"})]}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>h(!1),sx:{"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.2)"}},children:"Cancel"}),(0,_e.jsx)(pi,{onClick:()=>{m&&(h(!1),v(!0))},variant:"contained",color:"primary",disabled:!m,sx:{background:e=>"linear-gradient(135deg, ".concat(e.palette.primary.main," 30%, ").concat(e.palette.primary.dark," 90%)"),"&:hover":{background:e=>"linear-gradient(135deg, ".concat(e.palette.primary.light," 30%, ").concat(e.palette.primary.main," 90%)"),transform:"translateY(-2px)",boxShadow:"0 4px 12px 0 rgba(92, 107, 192, 0.5)"},boxShadow:"0 2px 8px 0 rgba(92, 107, 192, 0.4)","&.Mui-disabled":{background:e=>"dark"===e.palette.mode?"rgba(92, 107, 192, 0.2)":void 0}},children:"Next"})]})]}),(0,_e.jsx)(qy,{open:y,onClose:e=>{v(!1),e&&window.location.reload()},game:b})]})}const Av=(0,Xa.A)([(0,_e.jsx)("path",{d:"M11.23 6c-1.66 0-3.22.66-4.36 1.73C6.54 6.73 5.61 6 4.5 6 3.12 6 2 7.12 2 8.5S3.12 11 4.5 11c.21 0 .41-.03.61-.08-.05.25-.09.51-.1.78-.18 3.68 2.95 6.68 6.68 6.27 2.55-.28 4.68-2.26 5.19-4.77.15-.71.15-1.4.06-2.06-.09-.6.38-1.13.99-1.13H22V6H11.23zM4.5 9c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zm6.5 6c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"},"0"),(0,_e.jsx)("circle",{cx:"11",cy:"12",r:"2"},"1")],"Sports"),Sv=(0,Xa.A)((0,_e.jsx)("path",{d:"M17.5 13.5H16v-3h1.5v3zM20 4h-3V2h-2v2H9V2H7v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM9.5 11.5c0 .55-.45 1-1 1h-2v1h3V15H5v-2.5c0-.55.45-1 1-1h2v-1H5V9h3.5c.55 0 1 .45 1 1v1.5zm3.25 6.5h-1.5v-1.5h1.5V18zm0-3.5h-1.5V13h1.5v1.5zm0-3.5h-1.5V9.5h1.5V11zm0-3.5h-1.5V6h1.5v1.5zM19 14c0 .55-.45 1-1 1h-2.5c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1H18c.55 0 1 .45 1 1v4z"}),"Scoreboard"),Cv=(0,Xa.A)((0,_e.jsx)("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z"}),"TableChart"),Tv=e=>{var t,n;let{teams:o,rounds:a}=e;if((0,r.useEffect)((()=>{if(console.log("[LeagueTable] Received teams:",null===o||void 0===o?void 0:o.length),console.log("[LeagueTable] Received rounds:",null===a||void 0===a?void 0:a.length),a){const e=a.flatMap((e=>e.matches||[])).filter((e=>e.completed));console.log("[LeagueTable] Completed matches:",e.length),e.length>0&&console.log("[LeagueTable] Sample completed match:",e[0])}}),[o,a]),!o||0===o.length)return(0,_e.jsx)(gt,{sx:{textAlign:"center",py:4},children:(0,_e.jsx)(yn,{variant:"body1",color:"text.secondary",children:"League table not yet generated"})});const s=o.map((e=>(0,i.A)((0,i.A)({},e),{},{points:0,played:0,won:0,lost:0})));a&&a.length>0&&a.forEach((e=>{e.matches&&e.matches.length>0&&e.matches.forEach((e=>{if(e.completed&&e.team1&&e.team2&&null!==e.score1&&void 0!==e.score1&&null!==e.score2&&void 0!==e.score2){const t=s.findIndex((t=>t.id===e.team1.id)),n=s.findIndex((t=>t.id===e.team2.id));t>=0&&n>=0&&(s[t].played++,s[n].played++,parseInt(e.score1)>parseInt(e.score2)?(s[t].won++,s[t].points+=3,s[n].lost++):parseInt(e.score1)<parseInt(e.score2)&&(s[n].won++,s[n].points+=3,s[t].lost++))}}))})),console.log("[LeagueTable] Calculated team stats:",s);const l=[...s].sort(((e,t)=>t.points!==e.points?t.points-e.points:t.won!==e.won?t.won-e.won:t.played-e.played)),c=o.length*(o.length-1)/2;let u=0;a&&a.length>0&&a.forEach((e=>{e.matches&&e.matches.length>0&&(u+=e.matches.filter((e=>e.completed)).length)}));const d=u>=c;return console.log("Completed matches: ".concat(u,"/").concat(c)),(0,_e.jsxs)(_e.Fragment,{children:[d&&l.length>0&&(0,_e.jsx)(Gt,{sx:{mb:3,overflow:"hidden"},children:(0,_e.jsxs)(gt,{sx:{p:3,bgcolor:"success.main",color:"white",display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{fontSize:40,mr:2}}),(0,_e.jsxs)(gt,{children:[(0,_e.jsx)(yn,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:"TOURNAMENT CHAMPION"}),(0,_e.jsxs)(yn,{variant:"h6",children:[l[0].name," (",null===(t=l[0].players)||void 0===t?void 0:t.map((e=>(null===e||void 0===e?void 0:e.name)||"Unknown")).join(" & "),")"]}),(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,_e.jsx)(gp,{label:"".concat(l[0].points," Points"),color:"secondary",sx:{mr:1,fontWeight:"bold"}}),(0,_e.jsx)(gp,{label:"".concat(l[0].won,"W ").concat(l[0].lost,"L"),color:"default",sx:{bgcolor:"rgba(255,255,255,0.3)",color:"white"}})]})]})]})}),(0,_e.jsxs)(kh,{component:Gt,children:[(0,_e.jsxs)(gt,{sx:{p:2,bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center"},children:[(0,_e.jsx)(Cv,{sx:{mr:1}}),(0,_e.jsx)(yn,{variant:"h6",children:"League Table"}),(0,_e.jsx)(gp,{label:"3 points per win",color:"secondary",size:"small",icon:(0,_e.jsx)(cy,{}),sx:{ml:2,"& .MuiChip-icon":{color:"inherit"}}})]}),(0,_e.jsxs)(Ih,{children:[(0,_e.jsx)(Mh,{children:(0,_e.jsxs)(Uh,{children:[(0,_e.jsx)(Gh,{align:"center",sx:{fontWeight:"bold",width:"40px"},children:"#"}),(0,_e.jsx)(Gh,{sx:{fontWeight:"bold",width:"120px"},children:"Team"}),(0,_e.jsx)(Gh,{sx:{fontWeight:"bold",width:"180px"},children:"Players"}),(0,_e.jsx)(Gh,{align:"center",sx:{fontWeight:"bold",width:"40px"},children:"P"}),(0,_e.jsx)(Gh,{align:"center",sx:{fontWeight:"bold",width:"40px"},children:"W"}),(0,_e.jsx)(Gh,{align:"center",sx:{fontWeight:"bold",width:"40px"},children:"L"}),(0,_e.jsx)(Gh,{align:"center",sx:{fontWeight:"bold",width:"60px",bgcolor:"primary.light",color:"white"},children:"Pts"})]})}),(0,_e.jsx)(Jh,{children:l.map(((e,t)=>{var n;return(0,_e.jsxs)(Uh,{sx:{bgcolor:0===t?"rgba(76, 175, 80, 0.1)":"inherit","&:nth-of-type(odd)":{bgcolor:0===t?"rgba(76, 175, 80, 0.1)":"action.hover"}},children:[(0,_e.jsxs)(Gh,{align:"center",children:[0===t&&(0,_e.jsx)(cy,{fontSize:"small",color:"primary",sx:{mr:.5,verticalAlign:"middle"}}),t+1]}),(0,_e.jsx)(Gh,{children:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ts,{sx:{bgcolor:e.color||"hsl(".concat(137.5*t%360,", 70%, 45%)"),width:28,height:28,fontSize:"0.75rem"},children:(null===(n=e.name)||void 0===n?void 0:n.substring(0,2))||"T".concat(t+1)}),(0,_e.jsx)(yn,{variant:"body2",sx:{fontWeight:"bold",ml:1},children:e.name||"Team ".concat(t+1)})]})}),(0,_e.jsx)(Gh,{children:e.players.map(((e,t)=>(0,_e.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:[t>0&&", ",(0,_e.jsx)(Qm,{photoURL:e.photoURL,name:e.name||e.email||"TBC",size:24}),(0,_e.jsx)("span",{style:{marginLeft:4},children:e.name||e.email||"TBC"})]},e.id||e)))}),(0,_e.jsx)(Gh,{align:"center",children:e.played||0}),(0,_e.jsx)(Gh,{align:"center",children:e.won||0}),(0,_e.jsx)(Gh,{align:"center",children:e.lost||0}),(0,_e.jsx)(Gh,{align:"center",sx:{bgcolor:"primary.light",color:"white",fontWeight:"bold"},children:e.points||0})]},"team-".concat(t))}))})]})]}),!d&&l.length>0&&(0,_e.jsxs)(gt,{sx:{p:2,mt:2,bgcolor:"info.light",color:"info.contrastText",display:"flex",alignItems:"center",borderRadius:1},children:[(0,_e.jsx)(cy,{sx:{mr:1}}),(0,_e.jsxs)(yn,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Current Leader: ",l[0].name," (",null===(n=l[0].players)||void 0===n?void 0:n.map((e=>(null===e||void 0===e?void 0:e.name)||"Unknown")).join(" & "),") with ",l[0].points," points"]})]})]})},Ev=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.email)||"TBC",Iv=e=>{const t=["#f44336","#9c27b0","#ff9800","#4caf50","#2196f3","#607d8b","#795548","#009688","#e91e63","#3f51b5"];return t[e%t.length]};function _v(){const{id:e}=Z(),{currentUser:t}=ys(),n="dark"===jr().palette.mode,[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(0),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)({}),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{l(!0),u("");const n=(0,ms.doc)(fs.db,"games",e),r=(0,ms.onSnapshot)(n,(e=>{var n,r,o,s;if(console.log("[TournamentDetail] Received Firestore update:",e.id),!e.exists())return u("Tournament not found"),void l(!1);const c=e.data();if(console.log("[TournamentDetail] Tournament data received"),!c.isTournament||!c.tournamentData)return u("This game is not a tournament"),void l(!1);const d=(0,i.A)((0,i.A)({id:e.id},c.tournamentData),{},{format:c.tournamentFormat||c.tournamentData.format||"Knockout",date:c.date,time:c.time,location:c.location,currentUserEmail:(null===t||void 0===t?void 0:t.email)||""});f({date:c.date,time:c.time,location:c.location}),console.log("[TournamentDetail] Teams:",null===(n=d.teams)||void 0===n?void 0:n.length,"Rounds:",null===(r=d.bracketRounds)||void 0===r?void 0:r.length,"Matches:",null===(o=d.bracketRounds)||void 0===o?void 0:o.reduce(((e,t)=>{var n;return e+((null===(n=t.matches)||void 0===n?void 0:n.length)||0)}),0));const h=null===(s=d.bracketRounds)||void 0===s?void 0:s.flatMap((e=>e.matches||[])).find((e=>e.completed));var p,m;h&&console.log("[TournamentDetail] Sample completed match:","Team1:",null===(p=h.team1)||void 0===p?void 0:p.name,"Team2:",null===(m=h.team2)||void 0===m?void 0:m.name,"Score:",h.score1+"-"+h.score2);let y=[];d.teams&&d.teams.forEach((e=>{e.players&&e.players.forEach((e=>{e&&e.id&&y.push(e.id)}))})),d.bracketRounds&&d.bracketRounds.forEach((e=>{e.matches&&e.matches.forEach((e=>{["team1","team2"].forEach((t=>{const n=e[t];n&&n.players&&n.players.forEach((e=>{e&&e.id&&y.push(e.id)}))}))}))})),y=Array.from(new Set(y)),Lp(y,null===t||void 0===t?void 0:t.uid).then(g),a(d),l(!1)}),(e=>{console.error("[TournamentDetail] Firestore error:",e),u("Failed to load tournament data: "+e.message),l(!1)}));return()=>{r()}}),[e]),s)return(0,_e.jsx)(gt,{mt:4,display:"flex",justifyContent:"center",children:(0,_e.jsx)(Bt,{})});if(c)return(0,_e.jsx)(gt,{mt:4,children:(0,_e.jsx)($s,{severity:"error",children:c})});if(!o)return null;const w=(()=>{if(!o)return{rounds:[],teams:[],format:"knockout"};const e=["Wolves","Eagles","Tigers","Bears","Dolphins","Sharks","Lions","Panthers","Hawks","Falcons","Jaguars","Rhinos","Cobras","Vipers","Dragons"],t=[],n={};o.teams&&o.teams.length>0&&o.teams.forEach(((r,o)=>{const i=r.name||e[o%e.length],a={id:r.id||"team".concat(o+1),name:i,color:r.color||Iv(o),players:[]};if(r.players&&r.players.length>0){let e=r.players[0],t=e&&e.id&&m[e.id]?m[e.id]:{id:(null===e||void 0===e?void 0:e.id)||"p".concat(o,"a"),name:Ev(e)};if(a.players.push(t),r.players.length>1){let e=r.players[1],t=e&&e.id&&m[e.id]?m[e.id]:{id:(null===e||void 0===e?void 0:e.id)||"p".concat(o,"b"),name:Ev(e)};a.players.push(t)}else a.players.push({id:"p".concat(o,"b"),name:"TBC"})}else a.players=[{id:"p".concat(o,"a"),name:"TBC"},{id:"p".concat(o,"b"),name:"TBC"}];t.push(a),n[a.id]=a}));const r=[];return o.bracketRounds&&o.bracketRounds.length>0&&o.bracketRounds.forEach(((t,o)=>{const i={name:t.name||"Round ".concat(o+1),matches:[]};t.matches&&t.matches.length>0&&t.matches.forEach(((t,r)=>{const a={id:t.id||"match".concat(o,"_").concat(r),completed:t.completed||!1,score1:t.score1,score2:t.score2,winner:t.winner};if(t.team1){let o=n[t.team1.id]||{id:t.team1.id||"team".concat(2*r+1),name:t.team1.name||e[2*r%e.length],color:t.team1.color||Iv(2*r),players:t.team1.players&&t.team1.players.length>0?t.team1.players.map(((e,t)=>e&&e.id&&m[e.id]?m[e.id]:{id:(null===e||void 0===e?void 0:e.id)||"p".concat(2*r).concat(0===t?"a":"b"),name:Ev(e)})):[{id:"p".concat(2*r,"a"),name:"TBC"},{id:"p".concat(2*r,"b"),name:"TBC"}]};a.team1=o}if(t.team2){let o=n[t.team2.id]||{id:t.team2.id||"team".concat(2*r+2),name:t.team2.name||e[(2*r+1)%e.length],color:t.team2.color||Iv(2*r+1),players:t.team2.players&&t.team2.players.length>0?t.team2.players.map(((e,t)=>e&&e.id&&m[e.id]?m[e.id]:{id:(null===e||void 0===e?void 0:e.id)||"p".concat(2*r+1).concat(0===t?"a":"b"),name:Ev(e)})):[{id:"p".concat(2*r+1,"a"),name:"TBC"},{id:"p".concat(2*r+1,"b"),name:"TBC"}]};a.team2=o}i.matches.push(a)})),r.push(i)})),{rounds:r,teams:t,format:o.format||"knockout"}})();return(0,_e.jsx)(gt,{sx:{maxWidth:1200,mx:"auto",mt:4,px:2},children:(0,_e.jsxs)(Gt,{elevation:n?6:3,sx:{p:3,borderRadius:2,mb:4,bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.8):e.palette.background.paper,boxShadow:e=>"dark"===e.palette.mode?"0 8px 32px rgba(0, 0, 0, 0.3)":void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:{xs:"wrap",sm:"nowrap"},gap:{xs:2,sm:0}},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(ss,{sx:{color:n?"#FFD700":"#ffc107",fontSize:32,mr:2,filter:n?"drop-shadow(0 0 8px rgba(255, 215, 0, 0.3))":"none"}}),(0,_e.jsx)(yn,{variant:"h4",component:"h1",sx:{color:e=>"dark"===e.palette.mode?e.palette.primary.light:"#1a237e",fontWeight:"bold",textShadow:n?"0 1px 2px rgba(0,0,0,0.3)":"none"},children:o.name||"Tournament Details"})]}),(0,_e.jsxs)(gt,{sx:{display:"flex",gap:1},children:[(0,_e.jsx)(Ka,{title:"Rotate screen for better view",children:(0,_e.jsx)(nr,{onClick:()=>{if("undefined"!==typeof window&&window.screen&&window.screen.orientation)try{window.screen.orientation.type.includes("portrait")?window.screen.orientation.lock("landscape").then((()=>v(!0))).catch((e=>console.error("Could not lock screen orientation:",e))):window.screen.orientation.lock("portrait").then((()=>v(!1))).catch((e=>console.error("Could not lock screen orientation:",e)))}catch(c){console.error("Screen orientation API error:",c),alert("Please rotate your device manually for a better view of the tournament bracket.")}else alert("Please rotate your device manually for a better view of the tournament bracket.")},size:"small",sx:{bgcolor:e=>(0,Ut.X4)(e.palette.primary.main,.1),"&:hover":{bgcolor:e=>(0,Ut.X4)(e.palette.primary.main,.2)},display:{xs:"flex",md:"none"}},children:(0,_e.jsx)(dy,{})})}),(0,_e.jsx)(Ka,{title:b?"Exit fullscreen":"View fullscreen",children:(0,_e.jsx)(nr,{onClick:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen().then((()=>{x(!1)})).catch((e=>{console.error("Error attempting to exit fullscreen:",e)})):document.documentElement.requestFullscreen().then((()=>{x(!0)})).catch((e=>{console.error("Error attempting to enable fullscreen:",e)}))},size:"small",sx:{bgcolor:e=>(0,Ut.X4)(e.palette.primary.main,.1),"&:hover":{bgcolor:e=>(0,Ut.X4)(e.palette.primary.main,.2)}},children:b?(0,_e.jsx)(hy,{}):(0,_e.jsx)(py,{})})})]})]}),(0,_e.jsxs)(gt,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:[(0,_e.jsx)(gp,{icon:(0,_e.jsx)(Av,{}),label:"Format: ".concat(o.format),color:"primary",variant:n?"default":"outlined",sx:{bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.primary.main,.15):void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.3)):void 0,"& .MuiChip-icon":{color:e=>"dark"===e.palette.mode?e.palette.primary.light:void 0}}}),(0,_e.jsx)(gp,{icon:(0,_e.jsx)(Fy,{}),label:"Teams: ".concat(w.teams.length),color:"secondary",variant:n?"default":"outlined",sx:{bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.secondary.main,.15):void 0,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.secondary.main,.3)):void 0,"& .MuiChip-icon":{color:e=>"dark"===e.palette.mode?e.palette.secondary.light:void 0}}}),o.status&&(0,_e.jsx)(gp,{icon:"Completed"===o.status?(0,_e.jsx)(cy,{}):(0,_e.jsx)(Sv,{}),label:"Status: ".concat(o.status),color:"Completed"===o.status?"success":"info",variant:n?"default":"outlined",sx:{bgcolor:e=>{if("dark"!==!e.palette.mode)return"Completed"===o.status?(0,Ut.X4)(e.palette.success.main,.15):(0,Ut.X4)(e.palette.info.main,.15)},border:e=>{if("dark"!==!e.palette.mode)return"Completed"===o.status?"1px solid ".concat((0,Ut.X4)(e.palette.success.main,.3)):"1px solid ".concat((0,Ut.X4)(e.palette.info.main,.3))},"& .MuiChip-icon":{color:e=>{if("dark"!==!e.palette.mode)return"Completed"===o.status?e.palette.success.light:e.palette.info.light}}}})]}),(0,_e.jsx)(is,{sx:{mb:3,borderColor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.divider,.5):e.palette.divider}}),"league"===o.format.toLowerCase()&&(0,_e.jsx)(gt,{sx:(0,i.A)({mt:2,position:"relative",bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.4):(0,Ut.X4)(e.palette.background.paper,1),borderRadius:2,p:2,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.2)":"none",transition:"all 0.3s ease-in-out"},y&&{height:"80vh",display:"flex",alignItems:"center",justifyContent:"center"}),children:!s&&w&&(0,_e.jsx)(Tv,{rounds:w.rounds,teams:w.teams})}),"knockout"===o.format.toLowerCase()&&(0,_e.jsx)(gt,{sx:(0,i.A)({mt:2,position:"relative",bgcolor:e=>"dark"===e.palette.mode?(0,Ut.X4)(e.palette.background.paper,.4):(0,Ut.X4)(e.palette.background.paper,1),borderRadius:2,p:2,border:e=>"dark"===e.palette.mode?"1px solid ".concat((0,Ut.X4)(e.palette.primary.main,.1)):"none",boxShadow:e=>"dark"===e.palette.mode?"0 4px 20px rgba(0, 0, 0, 0.2)":"none",transition:"all 0.3s ease-in-out"},y&&{height:"80vh",display:"flex",alignItems:"center",justifyContent:"center"}),children:!s&&w&&(0,_e.jsx)(xy,{rounds:w.rounds,teams:w.teams,format:"knockout",displayDate:o.date||"",displayTime:o.time||"",currentUserEmail:(null===t||void 0===t?void 0:t.email)||"",isDarkMode:n})})]})})}const jv={format:"knockout",teams:[{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},{id:"team2",name:"Eagles",color:"#9c27b0",players:[{id:"p3",name:"Ali"},{id:"p4",name:"Ahmed"}]},{id:"team3",name:"Tigers",color:"#ff9800",players:[{id:"p5",name:"Hassan"},{id:"p6",name:"Khaled"}]},{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},{id:"team5",name:"Dolphins",color:"#2196f3",players:[{id:"p9",name:"Tarek"},{id:"p10",name:"Karim"}]},{id:"team6",name:"Sharks",color:"#607d8b",players:[{id:"p11",name:"Amr"},{id:"p12",name:"Hossam"}]},{id:"team7",name:"Lions",color:"#795548",players:[{id:"p13",name:"Ramy"},{id:"p14",name:"Sherif"}]},{id:"team8",name:"Panthers",color:"#009688",players:[{id:"p15",name:"Walid"},{id:"p16",name:"Tamer"}]}],rounds:[{name:"Quarter Finals",matches:[{id:"match1",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team2",name:"Eagles",color:"#9c27b0",players:[{id:"p3",name:"Ali"},{id:"p4",name:"Ahmed"}]},score1:21,score2:18,winner:"team1",completed:!0},{id:"match2",team1:{id:"team3",name:"Tigers",color:"#ff9800",players:[{id:"p5",name:"Hassan"},{id:"p6",name:"Khaled"}]},team2:{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},score1:15,score2:21,winner:"team2",completed:!0},{id:"match3",team1:{id:"team5",name:"Dolphins",color:"#2196f3",players:[{id:"p9",name:"Tarek"},{id:"p10",name:"Karim"}]},team2:{id:"team6",name:"Sharks",color:"#607d8b",players:[{id:"p11",name:"Amr"},{id:"p12",name:"Hossam"}]},score1:21,score2:19,winner:"team1",completed:!0},{id:"match4",team1:{id:"team7",name:"Lions",color:"#795548",players:[{id:"p13",name:"Ramy"},{id:"p14",name:"Sherif"}]},team2:{id:"team8",name:"Panthers",color:"#009688",players:[{id:"p15",name:"Walid"},{id:"p16",name:"Tamer"}]},score1:18,score2:21,winner:"team2",completed:!0}]},{name:"Semi Finals",matches:[{id:"match5",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},score1:21,score2:17,winner:"team1",completed:!0},{id:"match6",team1:{id:"team5",name:"Dolphins",color:"#2196f3",players:[{id:"p9",name:"Tarek"},{id:"p10",name:"Karim"}]},team2:{id:"team8",name:"Panthers",color:"#009688",players:[{id:"p15",name:"Walid"},{id:"p16",name:"Tamer"}]},score1:19,score2:21,winner:"team2",completed:!0}]},{name:"Final",matches:[{id:"match7",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team8",name:"Panthers",color:"#009688",players:[{id:"p15",name:"Walid"},{id:"p16",name:"Tamer"}]},score1:21,score2:15,winner:"team1",completed:!0}]}]},Nv={format:"League",teams:jv.teams,rounds:[{name:"Round 1",matches:[{id:"match1",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team2",name:"Eagles",color:"#9c27b0",players:[{id:"p3",name:"Ali"},{id:"p4",name:"Ahmed"}]},score1:21,score2:18,winner:"team1",completed:!0},{id:"match2",team1:{id:"team3",name:"Tigers",color:"#ff9800",players:[{id:"p5",name:"Hassan"},{id:"p6",name:"Khaled"}]},team2:{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},score1:15,score2:21,winner:"team2",completed:!0}]},{name:"Round 2",matches:[{id:"match3",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team3",name:"Tigers",color:"#ff9800",players:[{id:"p5",name:"Hassan"},{id:"p6",name:"Khaled"}]},score1:21,score2:15,winner:"team1",completed:!0},{id:"match4",team1:{id:"team2",name:"Eagles",color:"#9c27b0",players:[{id:"p3",name:"Ali"},{id:"p4",name:"Ahmed"}]},team2:{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},score1:18,score2:21,winner:"team2",completed:!0}]},{name:"Round 3",matches:[{id:"match5",team1:{id:"team1",name:"Wolves",color:"#f44336",players:[{id:"p1",name:"Mahmoud"},{id:"p2",name:"Moataz"}]},team2:{id:"team4",name:"Bears",color:"#4caf50",players:[{id:"p7",name:"Omar"},{id:"p8",name:"Youssef"}]},score1:21,score2:19,winner:"team1",completed:!0},{id:"match6",team1:{id:"team2",name:"Eagles",color:"#9c27b0",players:[{id:"p3",name:"Ali"},{id:"p4",name:"Ahmed"}]},team2:{id:"team3",name:"Tigers",color:"#ff9800",players:[{id:"p5",name:"Hassan"},{id:"p6",name:"Khaled"}]},score1:21,score2:17,winner:"team1",completed:!0}]}]},Rv=()=>(0,_e.jsxs)(sn,{maxWidth:"lg",sx:{py:4},children:[(0,_e.jsx)(yn,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#1a237e",fontWeight:"bold",textAlign:"center",mb:4},children:"Tournament Visualization Demo"}),(0,_e.jsx)(gt,{sx:{mb:6},children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,borderRadius:2},children:[(0,_e.jsxs)(yn,{variant:"h5",component:"h2",gutterBottom:!0,sx:{color:"#1976d2",fontWeight:"bold",display:"flex",alignItems:"center",mb:3},children:[(0,_e.jsx)("span",{role:"img","aria-label":"trophy",style:{marginRight:"10px"},children:"\ud83c\udfc6"}),"Knockout Tournament"]}),(0,_e.jsx)(xy,{rounds:jv.rounds,teams:jv.teams,format:"knockout"})]})}),(0,_e.jsx)(is,{sx:{my:5}}),(0,_e.jsx)(gt,{sx:{mb:6},children:(0,_e.jsxs)(Gt,{elevation:3,sx:{p:3,borderRadius:2},children:[(0,_e.jsxs)(yn,{variant:"h5",component:"h2",gutterBottom:!0,sx:{color:"#1976d2",fontWeight:"bold",display:"flex",alignItems:"center",mb:3},children:[(0,_e.jsx)("span",{role:"img","aria-label":"table",style:{marginRight:"10px"},children:"\ud83d\udcca"}),"League Tournament"]}),(0,_e.jsx)(xy,{rounds:Nv.rounds,teams:Nv.teams,format:"League"})]})})]});function Dv(e){return(0,At.Ay)("MuiFormGroup",e)}(0,kt.A)("MuiFormGroup",["root","row","error"]);const Pv=["className","row"],Mv=(0,wt.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),Fv=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiFormGroup"}),{className:r,row:o=!1}=n,i=(0,Ce.A)(n,Pv),a=vl({props:n,muiFormControl:xl(),states:["error"]}),s=(0,Se.A)({},n,{row:o,error:a.error}),l=(e=>{const{classes:t,row:n,error:r}=e,o={root:["root",n&&"row",r&&"error"]};return(0,bt.A)(o,Dv,t)})(s);return(0,_e.jsx)(Mv,(0,Se.A)({className:(0,vt.A)(l.root,r),ownerState:s,ref:t},i))}));function Ov(e){return(0,At.Ay)("MuiFormControlLabel",e)}const Lv=(0,kt.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),zv=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Bv=(0,wt.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Lv.label)]:t.label},t.root,t["labelPlacement".concat((0,xt.A)(n.labelPlacement))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(Lv.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(Lv.label)]:{["&.".concat(Lv.disabled)]:{color:(t.vars||t).palette.text.disabled}}})})),Uv=(0,wt.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(Lv.error)]:{color:(t.vars||t).palette.error.main}}})),Wv=r.forwardRef((function(e,t){var n,o;const i=(0,qe.A)({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:p,slotProps:f={}}=i,m=(0,Ce.A)(i,zv),g=xl(),y=null!=(n=null!=c?c:l.props.disabled)?n:null==g?void 0:g.disabled,v=null!=p?p:l.props.required,b={disabled:y,required:v};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof i[e]&&(b[e]=i[e])}));const x=vl({props:i,muiFormControl:g,states:["error"]}),w=(0,Se.A)({},i,{disabled:y,labelPlacement:h,required:v,error:x.error}),k=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:o,required:i}=e,a={root:["root",n&&"disabled","labelPlacement".concat((0,xt.A)(r)),o&&"error",i&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return(0,bt.A)(a,Ov,t)})(w),A=null!=(o=f.typography)?o:s.typography;let S=d;return null==S||S.type===yn||u||(S=(0,_e.jsx)(yn,(0,Se.A)({component:"span"},A,{className:(0,vt.A)(k.label,null==A?void 0:A.className),children:S}))),(0,_e.jsxs)(Bv,(0,Se.A)({className:(0,vt.A)(k.root,a),ownerState:w,ref:t},m,{children:[r.cloneElement(l,b),S,v&&(0,_e.jsxs)(Uv,{ownerState:w,"aria-hidden":!0,className:k.asterisk,children:["\u2009","*"]})]}))}));function Vv(e){return(0,At.Ay)("MuiSwitch",e)}const qv=(0,kt.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Hv=["className","color","edge","size","sx"],Gv=(0,wt.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat((0,xt.A)(n.edge))],t["size".concat((0,xt.A)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,Se.A)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===t.edge&&{marginLeft:-8},"end"===t.edge&&{marginRight:-8},"small"===t.size&&{width:40,height:24,padding:7,["& .".concat(qv.thumb)]:{width:16,height:16},["& .".concat(qv.switchBase)]:{padding:4,["&.".concat(qv.checked)]:{transform:"translateX(16px)"}}})})),Kv=(0,wt.Ay)(ov,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(qv.input)]:t.input},"default"!==n.color&&t["color".concat((0,xt.A)(n.color))]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(qv.checked)]:{transform:"translateX(20px)"},["&.".concat(qv.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(qv.checked," + .").concat(qv.track)]:{opacity:.5},["&.".concat(qv.disabled," + .").concat(qv.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(qv.input)]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(qv.checked)]:{color:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(qv.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n.color,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,Ut.a)(t.palette[n.color].main,.62):(0,Ut.e$)(t.palette[n.color].main,.55))}},["&.".concat(qv.checked," + .").concat(qv.track)]:{backgroundColor:(t.vars||t).palette[n.color].main}})})),Xv=(0,wt.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),Yv=(0,wt.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),Qv=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiSwitch"}),{className:r,color:o="primary",edge:i=!1,size:a="medium",sx:s}=n,l=(0,Ce.A)(n,Hv),c=(0,Se.A)({},n,{color:o,edge:i,size:a}),u=(e=>{const{classes:t,edge:n,size:r,color:o,checked:i,disabled:a}=e,s={root:["root",n&&"edge".concat((0,xt.A)(n)),"size".concat((0,xt.A)(r))],switchBase:["switchBase","color".concat((0,xt.A)(o)),i&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,bt.A)(s,Vv,t);return(0,Se.A)({},t,l)})(c),d=(0,_e.jsx)(Yv,{className:u.thumb,ownerState:c});return(0,_e.jsxs)(Gv,{className:(0,vt.A)(u.root,r),sx:s,ownerState:c,children:[(0,_e.jsx)(Kv,(0,Se.A)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,Se.A)({},u,{root:u.switchBase})})),(0,_e.jsx)(Xv,{className:u.track,ownerState:c})]})})),$v=(0,Xa.A)((0,_e.jsx)("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42zm12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42zM18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2v-5zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2z"}),"NotificationsActive");var Jv=n(9555),Zv=n(6823);const eb=()=>{const[e,t]=(0,r.useState)({game:!0,game_created:!0,game_updated:!0,gameClosingSoon:!0,gameClosed:!0,tournament_created:!0,tournament_deadline:!0,match_result:!0,tournament_winner:!0,bracket_update:!0,upcoming_match:!0,general:!0,showDuplicates:!1}),[n,o]=(0,r.useState)("default"),[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)({open:!1,message:"",severity:"info"});(0,r.useEffect)((()=>{(async()=>{"Notification"in window&&o(Notification.permission)})(),(async()=>{s(!0);try{const r=(0,Jv.getAuth)();if(!r.currentUser)return void s(!1);const o=localStorage.getItem("notificationPreferences");let a=null;if(o)try{a=JSON.parse(o)}catch(n){console.error("Error parsing local notification preferences:",n)}const l=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",r.currentUser.uid));let c=null;if(l.exists()&&l.data().notificationSettings&&(c=l.data().notificationSettings),c||a){const n=(0,i.A)((0,i.A)((0,i.A)({},e),a||{}),c||{});t(n),localStorage.setItem("notificationPreferences",JSON.stringify(n))}}catch(r){console.error("Error fetching notification settings:",r),d({open:!0,message:"Failed to load notification settings",severity:"error"})}finally{s(!1)}})()}),[]);const h=e=>{t((t=>(0,i.A)((0,i.A)({},t),{},{[e]:!t[e]})))},p=()=>{d((e=>(0,i.A)((0,i.A)({},e),{},{open:!1})))};if(a)return(0,_e.jsx)(gt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,_e.jsx)(Bt,{})});return(0,_e.jsxs)(gt,{children:[(0,_e.jsxs)(Gt,{elevation:2,sx:{p:3,mb:3},children:[(0,_e.jsxs)(gt,{mb:3,children:[(0,_e.jsxs)(gt,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,_e.jsx)(ls,{color:"primary"}),(0,_e.jsx)(yn,{variant:"h5",fontWeight:"bold",children:"Notification Settings"})]}),(0,_e.jsxs)(gt,{display:"flex",alignItems:"center",gap:1,sx:{mb:1},children:[(0,_e.jsx)(yn,{variant:"subtitle1",fontWeight:"bold",children:"Status:"}),"granted"===n&&(0,_e.jsx)(gp,{label:"Enabled",color:"success",sx:{fontWeight:600,fontSize:"1rem"}}),"denied"===n&&(0,_e.jsx)(gp,{label:"Blocked",color:"error",sx:{fontWeight:600,fontSize:"1rem"}}),"granted"!==n&&"denied"!==n&&(0,_e.jsx)(gp,{label:"Not Enabled",color:"warning",sx:{fontWeight:600,fontSize:"1rem"}})]}),(0,_e.jsx)(yn,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"denied"===n?"You have blocked notifications. Please enable them in your browser settings to receive game updates.":"Enable notifications to receive updates about games and tournaments."}),"granted"!==n&&(0,_e.jsx)(pi,{variant:"contained",color:"primary",startIcon:(0,_e.jsx)($v,{}),onClick:async()=>{try{if("Notification"in window){const e=await Notification.requestPermission();o(e),d("granted"===e?{open:!0,message:"Notification permission granted!",severity:"success"}:{open:!0,message:"Notification permission denied. Please enable notifications in your browser settings.",severity:"warning"})}else d({open:!0,message:"Notifications are not supported in this browser.",severity:"error"})}catch(e){console.error("Error requesting notification permission:",e),d({open:!0,message:"Failed to request notification permission",severity:"error"})}},sx:{mt:1},children:"Enable Notifications"})]}),(0,_e.jsx)(yn,{variant:"subtitle1",gutterBottom:!0,children:"Choose which notifications you want to receive:"}),(0,_e.jsxs)(gt,{sx:{mb:3},children:[(0,_e.jsx)(yn,{variant:"h6",gutterBottom:!0,sx:{color:"#FFFFFF",mt:2,mb:1},children:"Game Notifications"}),(0,_e.jsx)(is,{sx:{mb:2,bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,_e.jsxs)(Fv,{children:[(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.game,onChange:()=>h("game"),disabled:"granted"!==n}),label:"All game notifications"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.game_created,onChange:()=>h("game_created"),disabled:"granted"!==n}),label:"New games created"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.game_updated,onChange:()=>h("game_updated"),disabled:"granted"!==n}),label:"Game updates"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.gameClosingSoon,onChange:()=>h("gameClosingSoon"),disabled:"granted"!==n}),label:"Games closing soon (24 hours before)"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.gameClosed,onChange:()=>h("gameClosed"),disabled:"granted"!==n}),label:"Game registration closed"})]})]}),(0,_e.jsxs)(gt,{sx:{mb:3},children:[(0,_e.jsx)(yn,{variant:"h6",gutterBottom:!0,sx:{color:"#FFFFFF",mt:2,mb:1},children:"Tournament Notifications"}),(0,_e.jsx)(is,{sx:{mb:2,bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,_e.jsxs)(Fv,{children:[(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.tournament_created,onChange:()=>h("tournament_created"),disabled:"granted"!==n}),label:"New tournaments created"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.tournament_deadline,onChange:()=>h("tournament_deadline"),disabled:"granted"!==n}),label:"Tournament registration deadlines"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.match_result,onChange:()=>h("match_result"),disabled:"granted"!==n}),label:"Match results"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.tournament_winner,onChange:()=>h("tournament_winner"),disabled:"granted"!==n}),label:"Tournament winners"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.bracket_update,onChange:()=>h("bracket_update"),disabled:"granted"!==n}),label:"Tournament bracket updates"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.upcoming_match,onChange:()=>h("upcoming_match"),disabled:"granted"!==n}),label:"Upcoming match reminders"})]})]}),(0,_e.jsxs)(gt,{sx:{mb:3},children:[(0,_e.jsx)(yn,{variant:"h6",gutterBottom:!0,sx:{color:"#FFFFFF",mt:2,mb:1},children:"Advanced Settings"}),(0,_e.jsx)(is,{sx:{mb:2,bgcolor:"rgba(255, 255, 255, 0.1)"}}),(0,_e.jsxs)(Fv,{children:[(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.general,onChange:()=>h("general"),disabled:"granted"!==n}),label:"General notifications"}),(0,_e.jsx)(Wv,{control:(0,_e.jsx)(Qv,{checked:e.showDuplicates,onChange:()=>h("showDuplicates"),disabled:"granted"!==n}),label:"Allow duplicate notifications"})]})]}),(0,_e.jsx)(gt,{mt:3,children:(0,_e.jsx)(pi,{variant:"contained",color:"primary",onClick:async()=>{c(!0);try{await(0,Zv.Gl)(e),localStorage.setItem("notificationPreferences",JSON.stringify(e)),e.showDuplicates&&(localStorage.removeItem("shownNotifications"),sessionStorage.removeItem("sessionNotifications"),console.log("Cleared notification history to allow duplicates")),d({open:!0,message:"Notification settings saved successfully",severity:"success"})}catch(t){console.error("Error saving notification settings:",t),d({open:!0,message:"Failed to save notification settings",severity:"error"})}finally{c(!1)}},disabled:"granted"!==n||l,startIcon:l?(0,_e.jsx)(Bt,{size:20,color:"inherit"}):null,children:l?"Saving...":"Save Settings"})}),(0,_e.jsx)(ul,{open:u.open,autoHideDuration:6e3,onClose:p,children:(0,_e.jsx)($s,{onClose:p,severity:u.severity,sx:{width:"100%"},children:u.message})})]}),!1]})},tb=async()=>{if(!("serviceWorker"in navigator))return console.log("Service workers not supported"),!1;try{const e=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");return e?e.active?(console.log("Service worker is active"),!0):e.installing||e.waiting?(console.log("Service worker is installing or waiting"),!1):(console.log("Service worker registration exists but no active/installing/waiting worker"),!1):(console.log("Service worker not registered"),!1)}catch(e){return console.error("Error checking service worker status:",e),!1}},nb=()=>{const[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(!1),k=async()=>{y(!0),b(null);try{const e=await(async()=>{try{const n=fs.auth.currentUser;if(!n)return{status:"error",message:"User not logged in"};const r=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",n.uid)),o=!!r.exists()&&!0===r.data().isAdmin,i=o?"admin":"user",a=!!r.exists()&&!0===r.data().notificationsEnabled,s=r.exists()?r.data().fcmToken:null,l=(0,ms.query)((0,ms.collection)(fs.db,"fcmTokens"),(0,ms.where)("userId","==",n.uid)),c=await(0,ms.getDocs)(l),u=c.size,d=[];c.forEach((e=>{const t=e.data();d.push({tokenId:e.id.substring(0,10)+"...",createdAt:t.createdAt,lastUsed:t.lastUsed,deviceId:t.deviceId||"unknown"})}));let h=0;try{const e=(0,ms.query)((0,ms.collection)(fs.db,"userTokens/".concat(n.uid,"/tokens")));h=(await(0,ms.getDocs)(e)).size}catch(e){console.log("User tokens collection may not exist yet:",e.message)}const p=(0,ms.query)((0,ms.collection)(fs.db,"devices"),(0,ms.where)("userId","==",n.uid)),f=await(0,ms.getDocs)(p),m=f.size,g=[];f.forEach((e=>{const t=e.data();g.push({deviceId:e.id,platform:t.platform,lastActive:t.lastActive,hasToken:!!t.fcmToken})}));const y=await tb(),v=Notification.permission;let b=!1;if(navigator.serviceWorker&&navigator.serviceWorker.controller){const e=new Promise((e=>{const t=new MessageChannel;t.port1.onmessage=t=>{e(t.data)},navigator.serviceWorker.controller.postMessage({type:"CHECK_TOKEN",userId:n.uid},[t.port2]),setTimeout((()=>e({found:!1})),1e3)}));try{b=(await e).found}catch(t){console.error("Error checking token in service worker:",t)}}return{status:"success",userId:n.uid,email:n.email,isAdmin:o,userRole:i,hasTokens:!!s||u>0,tokenCount:u,userTokensCount:h,tokenDetails:d.slice(0,3),deviceCount:m,deviceDetails:g.slice(0,3),serviceWorkerActive:y,tokenInServiceWorker:b,notificationPermission:v,notificationsEnabled:a}}catch(v){return console.error("Error checking notification status:",v),{status:"error",message:v.message}}})();o(e),console.log("Notification Status:",e)}catch(e){b(e.message),console.error("Status Check Error:",e)}finally{y(!1)}},A={container:{padding:"20px",backgroundColor:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",maxWidth:"800px",margin:"0 auto",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)"},sectionHeading:{color:"#FFFFFF",marginTop:"20px",marginBottom:"10px",borderBottom:"1px solid #444444",paddingBottom:"5px"},buttonGroup:{display:"flex",flexWrap:"wrap",gap:"10px",marginBottom:"15px"},heading:{color:"#FFFFFF",marginBottom:"15px"},button:{backgroundColor:"#4a4a4a",color:"#FFFFFF",border:"none",padding:"10px 15px",borderRadius:"4px",margin:"5px 10px 5px 0",cursor:"pointer",fontWeight:"bold"},resultContainer:{backgroundColor:"#3a3a3a",padding:"15px",borderRadius:"4px",marginTop:"15px",border:"1px solid #555"},successText:{color:"#4caf50"},errorText:{color:"#f44336"},infoItem:{margin:"8px 0",display:"flex",flexDirection:"column"},label:{fontWeight:"bold",marginBottom:"3px"},value:{wordBreak:"break-all",backgroundColor:"#222",padding:"5px",borderRadius:"3px"}},S=(0,Jv.getAuth)().currentUser;return(0,_e.jsxs)("div",{style:A.container,children:[(0,_e.jsx)("h2",{style:A.heading,children:"Firebase Cloud Messaging Tester"}),!S&&(0,_e.jsx)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),A.errorText),children:(0,_e.jsx)("p",{children:"You must be logged in to test FCM functionality."})}),S&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{children:[(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Basic Tests"}),(0,_e.jsxs)("div",{style:A.buttonGroup,children:[(0,_e.jsx)("button",{style:A.button,onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{console.log("[FCM Test] Starting FCM test...");const o=fs.auth.currentUser;if(!o)return console.warn("[FCM Test] No user logged in"),{success:!1,error:"User not logged in"};if("granted"!==Notification.permission){console.log("[FCM Test] Requesting notification permission...");const e=await Notification.requestPermission();if(console.log("[FCM Test] Permission status: ".concat(e)),"granted"!==e)return{success:!1,error:"Notification permission denied"}}if(!("serviceWorker"in navigator))return{success:!1,error:"Service workers not supported"};console.log("[FCM Test] Checking service worker...");let i=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");if(!i){console.log("[FCM Test] Service worker not found, registering new one...");try{i=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/"}),console.log("[FCM Test] Service worker registered"),i.installing&&(console.log("[FCM Test] Waiting for service worker to activate..."),await new Promise((e=>{i.installing.addEventListener("statechange",(t=>{"activated"===t.target.state&&(console.log("[FCM Test] Service worker activated"),e())}))})))}catch(e){return console.error("[FCM Test] Service worker registration error:",e),{success:!1,error:"Service worker registration failed: ".concat(e.message)}}}console.log("[FCM Test] Service worker status:",i.active?"active":"not active"),console.log("[FCM Test] Getting FCM token...");const a=(0,ey.dG)(),s="BMzSIFpKw-T23cx8aoIfssl2Q8oYxKZVIXY5qYkrAVOzXXOzN3eIhhyQhsuA6_mnC4go0hk9IWQ06Dwqe-eHSfE",l=await(0,ey.gf)(a,{vapidKey:s,serviceWorkerRegistration:i});if(!l)return{success:!1,error:"Failed to get FCM token"};console.log("[FCM Test] Successfully got FCM token:",l.substring(0,10)+"...");try{const e=(0,ms.doc)(fs.db,"users",o.uid);await(0,ms.updateDoc)(e,{fcmTokens:(0,ms.arrayUnion)(l),lastTokenUpdate:(new Date).toISOString()}),console.log("[FCM Test] Token stored in user document")}catch(t){console.error("[FCM Test] Error updating user document:",t)}try{const e=(0,ms.doc)(fs.db,"fcmTests",(new Date).toISOString().replace(/[:.]/g,"_"));await(0,ms.setDoc)(e,{timestamp:(new Date).toISOString(),userId:o.uid,success:!0,tokenPrefix:l.substring(0,10),tokenFull:l,browser:navigator.userAgent,vapidKey:s}),console.log("[FCM Test] Test result stored in Firestore")}catch(n){console.error("[FCM Test] Error storing test result:",n)}try{new Notification("FCM Test Notification",{body:"This is a test notification from your app",icon:"/logo192.png",tag:"fcm-test",requireInteraction:!0,vibrate:[200,100,200]}),console.log("[FCM Test] Local notification displayed")}catch(r){console.error("[FCM Test] Error showing local notification:",r)}return{success:!0,token:l.substring(0,10)+"...",serviceWorkerActive:!!i.active,notificationPermission:Notification.permission,fullToken:l}}catch(v){return console.error("[FCM Test] Error:",v),{success:!1,error:v.message}}})();t(e),console.log("FCM Test Result:",e)}catch(e){b(e.message),console.error("FCM Test Error:",e)}finally{y(!1)}},disabled:g,children:g?"Testing...":"Test FCM Setup"}),(0,_e.jsx)("button",{style:A.button,onClick:()=>{const e=(()=>{try{if("granted"!==Notification.permission)return console.warn("[FCM Test] Notification permission not granted"),!1;const e=new Notification("Test Notification",{body:"This is a test notification with dark mode styling",icon:"/logo192.png",badge:"/logo192.png",requireInteraction:!0,vibrate:[200,100,200],tag:"test-notification-"+Date.now(),renotify:!0,silent:!1});return e.onclick=()=>{console.log("[FCM Test] Notification clicked"),window.focus(),e.close()},!0}catch(v){return console.error("[FCM Test] Error showing test notification:",v),!1}})();e||b("Failed to show test notification. Check console for details.")},children:"Show Test Notification"}),(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#4caf50"}),onClick:k,disabled:g,children:"Check Notification Status"}),(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#f44336"}),onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{const e=fs.auth.currentUser;if(!e)return{success:!1,error:"User not logged in"};const t=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",e.uid)),n=!!t.exists()&&!0===t.data().isAdmin,r=n?"admin":"user",o=await tb(),a=await Notification.requestPermission();if("granted"!==a)return{success:!1,error:"Notification permission ".concat(a),serviceWorkerActive:o};const s="BLBz-YOxJNIKdSQTmP6Wm4kQGf0qZIkA9Bq0_H0qQ3QTLPOGZdPRJgHpPCp_-_6Xz0utIz4LJKo7U-WQTNdLxJo",l=await(0,ey.gf)(fs.messaging,{vapidKey:s});if(!l)return{success:!1,error:"Failed to get FCM token",serviceWorkerActive:o};const c="".concat(e.uid,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,15));await(0,ms.setDoc)((0,ms.doc)(fs.db,"users",e.uid),{fcmToken:l,fcmTokenUpdated:(new Date).toISOString(),notificationsEnabled:!0,devices:(0,ms.arrayUnion)(c)},{merge:!0}),await(0,ms.setDoc)((0,ms.doc)(fs.db,"fcmTokens",l),{userId:e.uid,email:e.email,isAdmin:n,userRole:r,deviceId:c,createdAt:(new Date).toISOString(),lastUsed:(new Date).toISOString()}),await(0,ms.setDoc)((0,ms.doc)(fs.db,"userTokens/".concat(e.uid,"/tokens"),l),{token:l,deviceId:c,createdAt:(new Date).toISOString(),lastUsed:(new Date).toISOString()});const u={platform:navigator.platform,userAgent:navigator.userAgent,language:navigator.language,lastActive:(new Date).toISOString(),fcmToken:l,isAdmin:n,userRole:r};return await(0,ms.setDoc)((0,ms.doc)(fs.db,"devices",c),(0,i.A)({userId:e.uid},u)),navigator.serviceWorker&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"UPDATE_FCM_TOKEN",token:l,userId:e.uid,userRole:r,deviceId:c}),console.log("Sent token to service worker for user ".concat(e.uid," with role ").concat(r))):console.warn("Service worker controller not available to send token"),{success:!0,token:l.substring(0,10)+"...",isAdmin:n,userRole:r,deviceId:c,serviceWorkerActive:o}}catch(v){return console.error("Error fixing notification registration:",v),{success:!1,error:v.message}}})();s(e),console.log("Notification Fix Result:",e),await k()}catch(e){b(e.message),console.error("Notification Fix Error:",e)}finally{y(!1)}},disabled:g,children:"Fix Notifications"})]}),(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Advanced Diagnostics"}),(0,_e.jsxs)("div",{style:A.buttonGroup,children:[(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#2196f3"}),onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{if("granted"!==Notification.permission&&"granted"!==await Notification.requestPermission())return{success:!1,error:"Notification permission denied"};const e=new Notification("Direct Test Notification",{body:"This is a direct test notification bypassing Firebase",icon:"/logo192.png",badge:"/logo192.png",tag:"direct-test-"+Date.now(),requireInteraction:!0,vibrate:[200,100,200]});return console.log("Direct notification created:",e),e.onclick=()=>{console.log("Direct notification clicked"),e.close(),window.focus()},{success:!0,message:"Direct notification shown"}}catch(v){return console.error("Error showing direct notification:",v),{success:!1,error:v.message}}})();c(e),console.log("Direct notification result:",e)}catch(e){b(e.message),console.error("Direct notification error:",e)}finally{y(!1)}},disabled:g,children:"Direct Browser Notification"}),(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#2196f3"}),onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{if(!("serviceWorker"in navigator))return{success:!1,error:"Service Worker API not supported in this browser"};const e=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");if(!e)return{success:!1,error:"Service worker not registered"};if(!e.active)return{success:!1,error:"Service worker not active",state:e.installing?"installing":e.waiting?"waiting":"unknown"};const t=new MessageChannel,n=new Promise((e=>{t.port1.onmessage=t=>{e(t.data)},setTimeout((()=>{e({success:!1,error:"Service worker did not respond"})}),3e3)}));return e.active.postMessage({type:"TEST_COMMUNICATION",timestamp:Date.now()},[t.port2]),{success:!0,serviceWorkerResponse:await n,active:!0}}catch(v){return console.error("Error testing service worker communication:",v),{success:!1,error:v.message}}})();d(e),console.log("Service worker communication result:",e)}catch(e){b(e.message),console.error("Service worker communication error:",e)}finally{y(!1)}},disabled:g,children:"Test SW Communication"}),(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#2196f3"}),onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{const t=fs.auth.currentUser;if(!t)return{success:!1,error:"User not authenticated"};try{const e=await(0,ey.gf)(fs.messaging,{vapidKey:"BMzSIFpKw-T23cx8aoIfssl2Q8oYxKZVIXY5qYkrAVOzXXOzN3eIhhyQhsuA6_mnC4go0hk9IWQ06Dwqe-eHSfE"});if(!e)return{success:!1,error:"Failed to get FCM token"};const n=(0,ms.query)((0,ms.collection)(fs.db,"fcmTokens"),(0,ms.where)("userId","==",t.uid)),r=await(0,ms.getDocs)(n),o=r.size>0;return{success:!0,token:e.substring(0,10)+"...",tokenExists:o,tokenCount:r.size,userId:t.uid}}catch(e){return{success:!1,error:"FCM token error: "+e.message}}}catch(v){return console.error("Error verifying Firebase config:",v),{success:!1,error:v.message}}})();p(e),console.log("Firebase config verification result:",e)}catch(e){b(e.message),console.error("Firebase config verification error:",e)}finally{y(!1)}},disabled:g,children:"Verify Firebase Config"}),(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#2196f3"}),onClick:async()=>{y(!0),b(null);try{const e=await(async()=>{try{if(!("serviceWorker"in navigator))return{success:!1,error:"Service Worker API not supported in this browser"};const e=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");return e&&e.active?(e.active.postMessage({type:"SHOW_TEST_NOTIFICATION",title:"Test Notification",body:"This is a test notification sent directly to the service worker",timestamp:Date.now()}),{success:!0,message:"Test notification message sent to service worker"}):{success:!1,error:"Service worker not registered or not active"}}catch(v){return console.error("Error testing service worker notification:",v),{success:!1,error:v.message}}})();m(e),console.log("Service worker notification test result:",e)}catch(e){b(e.message),console.error("Service worker notification test error:",e)}finally{y(!1)}},disabled:g,children:"Test SW Notification"})]}),(0,_e.jsx)("h3",{style:A.sectionHeading,children:"User Settings"}),(0,_e.jsxs)("div",{style:A.buttonGroup,children:[n&&!n.notificationsEnabled&&(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#9c27b0"}),onClick:async()=>{y(!0),b(null);try{const e=(0,Jv.getAuth)().currentUser;if(!e)return void b("User not logged in");const t=(0,ms.doc)(fs.db,"users",e.uid);await(0,ms.updateDoc)(t,{notificationsEnabled:!0,notificationSettings:{gameCreated:!0,gameClosingSoon:!0,gameClosed:!0,tournamentUpdates:!0}}),w(!0),console.log("Notifications enabled for user:",e.uid),await k()}catch(e){b(e.message),console.error("Error enabling notifications:",e)}finally{y(!1)}},disabled:g,children:"Enable Notifications"}),n&&!n.isAdmin&&(0,_e.jsx)("button",{style:(0,i.A)((0,i.A)({},A.button),{},{backgroundColor:"#ff9800"}),onClick:async()=>{y(!0),b(null);try{const e=(0,Jv.getAuth)().currentUser;if(!e)return void b("User not logged in");const t=(0,ms.doc)(fs.db,"users",e.uid);await(0,ms.updateDoc)(t,{isAdmin:!0,role:"admin",userRole:"admin"}),console.log("Admin status fixed for user:",e.uid),await k()}catch(e){b(e.message),console.error("Error fixing admin status:",e)}finally{y(!1)}},disabled:g,children:"Fix Admin Status"})]})]}),v&&(0,_e.jsx)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),A.errorText),children:(0,_e.jsxs)("p",{children:["Error: ",v]})}),e&&(0,_e.jsxs)("div",{style:A.resultContainer,children:[(0,_e.jsx)("h3",{style:e.success?A.successText:A.errorText,children:e.success?"FCM Setup Successful!":"FCM Setup Failed"}),e.error&&(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:e.error})]}),e.success&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"FCM Token (prefix):"}),(0,_e.jsx)("span",{style:A.value,children:e.token})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Service Worker Active:"}),(0,_e.jsx)("span",{style:A.value,children:e.serviceWorkerActive?"Yes":"No"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Notification Permission:"}),(0,_e.jsx)("span",{style:A.value,children:e.notificationPermission})]})]})]}),n&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px"}),children:[(0,_e.jsx)("h3",{style:"success"===n.status?A.successText:A.errorText,children:"Notification Status Check"}),"error"===n.status?(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:n.message})]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"User ID:"}),(0,_e.jsx)("span",{style:A.value,children:n.userId})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Email:"}),(0,_e.jsx)("span",{style:A.value,children:n.email})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Admin User:"}),(0,_e.jsx)("span",{style:A.value,children:n.isAdmin?"Yes":"No"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"FCM Tokens:"}),(0,_e.jsx)("span",{style:A.value,children:n.hasTokens?"".concat(n.tokenCount," tokens"):"No tokens"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Registered Devices:"}),(0,_e.jsx)("span",{style:A.value,children:n.deviceCount})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Service Worker:"}),(0,_e.jsx)("span",{style:A.value,children:n.serviceWorkerActive?"Active":"Not active"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Notification Permission:"}),(0,_e.jsx)("span",{style:A.value,children:n.notificationPermission})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Notifications Enabled:"}),(0,_e.jsx)("span",{style:A.value,children:n.notificationsEnabled?"Yes":"No"})]})]})]}),a&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px",backgroundColor:a.success?"#2a3b2a":"#3a2a2a"}),children:[(0,_e.jsx)("h3",{style:a.success?A.successText:A.errorText,children:a.success?"Notification Registration Fixed!":"Fix Failed"}),a.error&&(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:a.error})]}),a.success&&(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"FCM Token (prefix):"}),(0,_e.jsx)("span",{style:A.value,children:a.token})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Admin User:"}),(0,_e.jsx)("span",{style:A.value,children:a.isAdmin?"Yes":"No"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Service Worker Active:"}),(0,_e.jsx)("span",{style:A.value,children:a.serviceWorkerActive?"Yes":"No"})]}),(0,_e.jsx)("p",{style:{color:"#4caf50",fontWeight:"bold",marginTop:"15px"},children:"Notification registration has been fixed. You should now receive notifications properly."})]})]}),l&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px",backgroundColor:l.success?"#2a3b2a":"#3a2a2a"}),children:[(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Direct Browser Notification Result"}),l.error?(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:l.error})]}):(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Status:"}),(0,_e.jsx)("span",{style:A.value,children:l.success?"Notification shown successfully":"Failed to show notification"})]})]}),u&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px",backgroundColor:u.success?"#2a3b2a":"#3a2a2a"}),children:[(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Service Worker Communication Result"}),u.error?(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:u.error})]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Status:"}),(0,_e.jsx)("span",{style:A.value,children:u.success?"Communication successful":"Communication failed"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Service Worker Active:"}),(0,_e.jsx)("span",{style:A.value,children:u.active?"Yes":"No"})]}),u.serviceWorkerResponse&&(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Response:"}),(0,_e.jsx)("span",{style:A.value,children:JSON.stringify(u.serviceWorkerResponse)})]})]})]}),h&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px",backgroundColor:h.success?"#2a3b2a":"#3a2a2a"}),children:[(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Firebase Configuration Result"}),h.error?(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:h.error})]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"FCM Token (prefix):"}),(0,_e.jsx)("span",{style:A.value,children:h.token})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Token Exists in Firestore:"}),(0,_e.jsx)("span",{style:A.value,children:h.tokenExists?"Yes":"No"})]}),(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Token Count:"}),(0,_e.jsx)("span",{style:A.value,children:h.tokenCount})]})]})]}),f&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px",backgroundColor:f.success?"#2a3b2a":"#3a2a2a"}),children:[(0,_e.jsx)("h3",{style:A.sectionHeading,children:"Service Worker Notification Test"}),f.error?(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Error:"}),(0,_e.jsx)("span",{style:(0,i.A)((0,i.A)({},A.value),A.errorText),children:f.error})]}):(0,_e.jsxs)("div",{style:A.infoItem,children:[(0,_e.jsx)("span",{style:A.label,children:"Status:"}),(0,_e.jsx)("span",{style:A.value,children:f.message||"Test notification sent to service worker"})]}),(0,_e.jsx)("p",{style:{color:"#FFFFFF",marginTop:"10px"},children:"Check the browser console for detailed logs about the notification display process."})]})]}),(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},A.resultContainer),{},{marginTop:"20px"}),children:[(0,_e.jsx)("h3",{style:A.heading,children:"Troubleshooting Tips"}),(0,_e.jsxs)("ul",{children:[(0,_e.jsx)("li",{children:"Make sure you've granted notification permissions in your browser"}),(0,_e.jsx)("li",{children:"Check that your service worker is properly registered"}),(0,_e.jsx)("li",{children:"Verify that your VAPID key is correctly configured"}),(0,_e.jsx)("li",{children:"Ensure you're testing in a supported browser (Chrome works best)"}),(0,_e.jsx)("li",{children:"Check the browser console for detailed logs"})]})]})]})};const rb=r.createContext(void 0),ob=["actions","children","defaultValue","name","onChange","value"],ib=r.forwardRef((function(e,t){const{actions:n,children:o,defaultValue:i,name:a,onChange:s,value:l}=e,c=(0,Ce.A)(e,ob),u=r.useRef(null),[d,h]=(0,Fa.A)({controlled:l,default:i,name:"RadioGroup"});r.useImperativeHandle(n,(()=>({focus:()=>{let e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const p=(0,vn.A)(t,u),f=(0,Ma.A)(a),m=r.useMemo((()=>({name:f,onChange(e){h(e.target.value),s&&s(e,e.target.value)},value:d})),[f,s,h,d]);return(0,_e.jsx)(rb.Provider,{value:m,children:(0,_e.jsx)(Fv,(0,Se.A)({role:"radiogroup",ref:p},c,{children:o}))})})),ab=(0,Xa.A)((0,_e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),sb=(0,Xa.A)((0,_e.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),lb=(0,wt.Ay)("span")({position:"relative",display:"flex"}),cb=(0,wt.Ay)(ab)({transform:"scale(1)"}),ub=(0,wt.Ay)(sb)((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},n.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));const db=function(e){const{checked:t=!1,classes:n={},fontSize:r}=e,o=(0,Se.A)({},e,{checked:t});return(0,_e.jsxs)(lb,{className:n.root,ownerState:o,children:[(0,_e.jsx)(cb,{fontSize:r,className:n.background,ownerState:o}),(0,_e.jsx)(ub,{fontSize:r,className:n.dot,ownerState:o})]})};var hb=n(6593);function pb(e){return(0,At.Ay)("MuiRadio",e)}const fb=(0,kt.A)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),mb=["checked","checkedIcon","color","icon","name","onChange","size","className"],gb=(0,wt.Ay)(ov,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["color".concat((0,xt.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,Se.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ut.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(fb.checked)]:{color:(t.vars||t).palette[n.color].main}},{["&.".concat(fb.disabled)]:{color:(t.vars||t).palette.action.disabled}})}));const yb=(0,_e.jsx)(db,{checked:!0}),vb=(0,_e.jsx)(db,{}),bb=r.forwardRef((function(e,t){var n,o;const i=(0,qe.A)({props:e,name:"MuiRadio"}),{checked:a,checkedIcon:s=yb,color:l="primary",icon:c=vb,name:u,onChange:d,size:h="medium",className:p}=i,f=(0,Ce.A)(i,mb),m=(0,Se.A)({},i,{color:l,size:h}),g=(e=>{const{classes:t,color:n}=e,r={root:["root","color".concat((0,xt.A)(n))]};return(0,Se.A)({},t,(0,bt.A)(r,pb,t))})(m),y=r.useContext(rb);let v=a;const b=(0,hb.A)(d,y&&y.onChange);let x=u;var w,k;return y&&("undefined"===typeof v&&(w=y.value,v="object"===typeof(k=i.value)&&null!==k?w===k:String(w)===String(k)),"undefined"===typeof x&&(x=y.name)),(0,_e.jsx)(gb,(0,Se.A)({type:"radio",icon:r.cloneElement(c,{fontSize:null!=(n=vb.props.fontSize)?n:h}),checkedIcon:r.cloneElement(s,{fontSize:null!=(o=yb.props.fontSize)?o:h}),ownerState:m,classes:g,name:x,checked:v,onChange:b,ref:t,className:(0,vt.A)(g.root,p)},f))}));function xb(e){return(0,At.Ay)("MuiDialogContentText",e)}(0,kt.A)("MuiDialogContentText",["root"]);const wb=["children","className"],kb=(0,wt.Ay)(yn,{shouldForwardProp:e=>(0,wt.ep)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ab=r.forwardRef((function(e,t){const n=(0,qe.A)({props:e,name:"MuiDialogContentText"}),{className:r}=n,o=(0,Ce.A)(n,wb),i=(e=>{const{classes:t}=e,n=(0,bt.A)({root:["root"]},xb,t);return(0,Se.A)({},t,n)})(o);return(0,_e.jsx)(kb,(0,Se.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:o,className:(0,vt.A)(i.root,r)},n,{classes:i}))}));var Sb=n(9120),Cb=n(1958),Tb=n(9719);const Eb=()=>{const e=J(),[t,o]=(0,r.useState)((()=>{const e=localStorage.getItem("themeMode");return e?"dark"===e:document.documentElement.classList.contains("dark-mode")}));(0,r.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("themeMode");o(e?"dark"===e:document.documentElement.classList.contains("dark-mode"))};window.addEventListener("storage",e);const t=setInterval(e,1e3);return()=>{window.removeEventListener("storage",e),clearInterval(t)}}),[]);const[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(0),[f,m]=(0,r.useState)("basic"),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[x,w]=(0,r.useState)("all"),[k,A]=(0,r.useState)(""),[S,C]=(0,r.useState)("user"),[T,E]=(0,r.useState)([]),[I,_]=(0,r.useState)(!1),[j,N]=(0,r.useState)(""),[R,D]=(0,r.useState)("success"),[P,M]=(0,r.useState)([]),[F,O]=(0,r.useState)(!1),[L,z]=(0,r.useState)(""),[B,U]=(0,r.useState)(null),[W,V]=(0,r.useState)(!1),[q,H]=(0,r.useState)(null),[G,K]=(0,r.useState)([]),[X,Y]=(0,r.useState)(!1),[Q,$]=(0,r.useState)("/games"),[Z,ee]=(0,r.useState)("View"),[te,ne]=(0,r.useState)("normal"),[re,oe]=(0,r.useState)([]),[ie,ae]=(0,r.useState)(""),[se,le]=(0,r.useState)(""),[ce,ue]=(0,r.useState)(!1),de={container:{minHeight:"100vh",padding:"2rem",backgroundColor:(he=t)?"#2A2A2A":"#f5f5f5"},paper:{padding:"2rem",backgroundColor:he?"#2A2A2A":"#ffffff",color:he?"#FFFFFF":"#000000"},header:{display:"flex",alignItems:"center",marginBottom:"2rem"},backButton:{marginRight:"1rem",color:he?"#FFFFFF":"#000000"},title:{color:he?"#FFFFFF":"#000000",flexGrow:1},tabs:{marginBottom:"2rem","& .MuiTab-root":{color:he?"#FFFFFF":"#000000"}},tab:{color:he?"#FFFFFF":"#000000"},content:{padding:"1rem"},input:{"& .MuiInputLabel-root":{color:he?"#FFFFFF":"#000000"},"& .MuiOutlinedInput-root":{color:he?"#FFFFFF":"#000000","& fieldset":{borderColor:he?"#FFFFFF":"rgba(0, 0, 0, 0.23)"},"&:hover fieldset":{borderColor:he?"#FFFFFF":"rgba(0, 0, 0, 0.87)"}}},select:{color:he?"#FFFFFF":"#000000","& .MuiOutlinedInput-notchedOutline":{borderColor:he?"#FFFFFF":"rgba(0, 0, 0, 0.23)"}},formLabel:{color:he?"#FFFFFF":"#000000","&.Mui-focused":{color:he?"#FFFFFF":"#1976d2"}},radio:{color:he?"#FFFFFF":"#1976d2","&.Mui-checked":{color:he?"#FFFFFF":"#1976d2"}},button:{backgroundColor:he?"#FFFFFF":"#1976d2",color:he?"#000000":"#FFFFFF","&:hover":{backgroundColor:he?"#e0e0e0":"#1565c0"}},gameChip:{backgroundColor:he?"#FFFFFF":"#1976d2",color:he?"#000000":"#FFFFFF",margin:"0.25rem"},templateSection:{marginTop:"1rem",padding:"1rem",border:"1px solid ".concat(he?"#FFFFFF":"rgba(0, 0, 0, 0.23)"),borderRadius:"4px"}};var he;const pe=()=>{_(!1)};(0,r.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{const e=await(0,ms.getDocs)((0,ms.collection)(fs.db,"users")),t=[];return e.forEach((e=>{const n=e.data();t.push({id:e.id,email:n.email||"No email",displayName:n.displayName||n.email||"Unknown user",isAdmin:!0===n.isAdmin||"admin"===n.role||"admin"===n.userRole,role:n.role||n.userRole||"user"})})),{success:!0,users:t}}catch(B){return console.error("Error getting notification users:",B),{success:!1,error:B.message}}})();E(e)}catch(B){console.error("Failed to load users:",B),N("Failed to load users: "+B.message),D("error"),_(!0)}})()}),[]),(0,r.useEffect)((()=>{"game"===f&&(async()=>{O(!0);try{const{db:e}=await Promise.resolve().then(n.bind(n,1288)),{collection:t,query:r,where:o,getDocs:a,orderBy:s}=await Promise.resolve().then(n.bind(n,6032)),l=r(t(e,"games"),s("date","asc")),c=await a(l),u=[];c.forEach((e=>{const t=e.data();u.push((0,i.A)((0,i.A)({id:e.id},t),{},{title:t.title||"Game at ".concat(t.location)}))})),M(u)}catch(B){console.error("Error fetching games:",B),N("Error loading games: "+B.message),D("error"),_(!0)}finally{O(!1)}})()}),[f]);const fe=async()=>{Y(!0);try{const e=(0,Jv.getAuth)().currentUser;if(!e)throw new Error("User not authenticated");const{db:t}=await Promise.resolve().then(n.bind(n,1288)),{collection:r,query:o,where:a,getDocs:s,orderBy:l}=await Promise.resolve().then(n.bind(n,6032)),c=o(r(t,"customNotifications"),a("senderId","==",e.uid)),u=await s(c),d=[];u.forEach((e=>{d.push((0,i.A)((0,i.A)({id:e.id},e.data()),{},{timestamp:e.data().createdAt?e.data().createdAt:0,createdAt:e.data().createdAt?new Date(e.data().createdAt).toLocaleString():"Unknown"}))})),d.sort(((e,t)=>t.timestamp-e.timestamp)),K(d)}catch(e){console.error("Error fetching notification history:",e),N("Error loading history: ".concat(e.message)),D("error"),_(!0)}finally{Y(!1)}};return(0,_e.jsxs)(gt,{children:[(0,_e.jsx)(sn,{maxWidth:"md",sx:de.container,children:(0,_e.jsxs)(Gt,{elevation:3,sx:de.paper,children:[(0,_e.jsxs)(gt,{sx:de.header,children:[(0,_e.jsx)(nr,{onClick:()=>e(-1),sx:de.backButton,children:(0,_e.jsx)(Sb.A,{})}),(0,_e.jsx)(yn,{variant:"h4",sx:de.title,children:"Send Notification"})]}),(0,_e.jsxs)(hh,{value:h,onChange:(e,t)=>{p(t),1===t&&fe()},sx:de.tabs,children:[(0,_e.jsx)(yh,{label:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(Xu.A,{sx:{mr:1}}),"Send"]}),sx:de.tab}),(0,_e.jsx)(yh,{label:(0,_e.jsxs)(gt,{sx:{display:"flex",alignItems:"center"},children:[(0,_e.jsx)(Cb.A,{sx:{mr:1}}),"History"]}),sx:de.tab})]}),0===h&&(0,_e.jsx)(gt,{sx:de.content,children:(0,_e.jsxs)(wg,{container:!0,spacing:3,children:[(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{component:"fieldset",children:[(0,_e.jsx)(uc,{component:"legend",sx:de.formLabel,children:"Notification Type"}),(0,_e.jsxs)(ib,{row:!0,value:f,onChange:e=>m(e.target.value),children:[(0,_e.jsx)(Wv,{value:"basic",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"Basic",sx:{color:de.paper.color}}),(0,_e.jsx)(Wv,{value:"link",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"Link",sx:{color:de.paper.color}}),(0,_e.jsx)(Wv,{value:"action",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"Action",sx:{color:de.paper.color}}),(0,_e.jsx)(Wv,{value:"game",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"Game",sx:{color:de.paper.color}})]})]})}),"game"===f&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{fullWidth:!0,sx:de.input,children:[(0,_e.jsx)(fc,{id:"game-select-label",children:"Select Game"}),(0,_e.jsxs)($c,{labelId:"game-select-label",id:"game-select",value:L,onChange:e=>{const t=e.target.value;if(z(t),t){const e=P.find((e=>e.id===t));if(e){const t=new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});y("Game at ".concat(e.location)),b("Join us for a game at ".concat(e.location," on ").concat(t,"!"))}}},label:"Select Game",sx:de.select,disabled:F,children:[(0,_e.jsx)(ri,{value:"",children:(0,_e.jsx)("em",{children:"Select a game"})}),P.map((e=>(0,_e.jsxs)(ri,{value:e.id,children:[e.title||"Game at ".concat(e.location)," ",(0,_e.jsx)(gp,{label:e.isOpen?"OPEN":"CLOSED",color:e.isOpen?"success":"error",size:"small",sx:{ml:1}})]},e.id)))]})]})}),"link"===f&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(nu,{fullWidth:!0,label:"URL",value:Q,onChange:e=>$(e.target.value),sx:de.input})}),"action"===f&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(nu,{fullWidth:!0,label:"Action Text",value:Z,onChange:e=>ee(e.target.value),sx:de.input})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(nu,{fullWidth:!0,label:"Title",value:g,onChange:e=>y(e.target.value),sx:de.input})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(nu,{fullWidth:!0,label:"Body",value:v,onChange:e=>b(e.target.value),multiline:!0,rows:4,sx:de.input})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{component:"fieldset",children:[(0,_e.jsx)(uc,{component:"legend",sx:de.formLabel,children:"Target"}),(0,_e.jsxs)(ib,{row:!0,value:x,onChange:e=>w(e.target.value),children:[(0,_e.jsx)(Wv,{value:"all",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"All Users",sx:{color:de.paper.color}}),(0,_e.jsx)(Wv,{value:"user",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"Specific User",sx:{color:de.paper.color}}),(0,_e.jsx)(Wv,{value:"role",control:(0,_e.jsx)(bb,{sx:de.radio}),label:"By Role",sx:{color:de.paper.color}})]})]})}),"user"===x&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{fullWidth:!0,sx:de.input,children:[(0,_e.jsx)(fc,{id:"user-select-label",children:"Select User"}),(0,_e.jsxs)($c,{labelId:"user-select-label",id:"user-select",value:k,onChange:e=>A(e.target.value),label:"Select User",sx:de.select,children:[(0,_e.jsx)(ri,{value:"",children:(0,_e.jsx)("em",{children:"Select a user"})}),T.map((e=>(0,_e.jsx)(ri,{value:e.id,children:e.displayName||e.email||e.id},e.id)))]})]})}),"role"===x&&(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{fullWidth:!0,sx:de.input,children:[(0,_e.jsx)(fc,{id:"role-select-label",children:"Select Role"}),(0,_e.jsxs)($c,{labelId:"role-select-label",id:"role-select",value:S,onChange:e=>C(e.target.value),label:"Select Role",sx:de.select,children:[(0,_e.jsx)(ri,{value:"user",children:"User"}),(0,_e.jsx)(ri,{value:"admin",children:"Admin"}),(0,_e.jsx)(ri,{value:"moderator",children:"Moderator"})]})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(bc,{fullWidth:!0,sx:de.input,children:[(0,_e.jsx)(fc,{id:"priority-select-label",children:"Priority"}),(0,_e.jsxs)($c,{labelId:"priority-select-label",id:"priority-select",value:te,onChange:e=>ne(e.target.value),label:"Priority",sx:de.select,children:[(0,_e.jsx)(ri,{value:"normal",children:"Normal"}),(0,_e.jsx)(ri,{value:"high",children:"High"})]})]})}),(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsx)(pi,{variant:"contained",onClick:async()=>{if("user"===x&&!k)return N("Please select a target user"),D("warning"),void _(!0);if("role"===x&&!S)return N("Please select a target role"),D("warning"),void _(!0);if("game"===f&&!L)return N("Please select a game"),D("warning"),void _(!0);if(!g)return N("Please enter a title"),D("warning"),void _(!0);if(!v)return N("Please enter a body"),D("warning"),void _(!0);V(!0),U(null),H(null);try{const e={type:f,title:g,body:v,targetType:x,targetUserId:"user"===x?k:void 0,targetRole:"role"===x?S:void 0,gameId:"game"===f?L:void 0,url:"link"===f?Q:void 0,actionText:"action"===f?Z:void 0,priority:te};await(async e=>{try{const{title:t,body:n,targetUserId:r,targetRole:o,gameId:i,url:a}=e,s=fs.auth.currentUser;if(!s)return{success:!1,error:"You must be logged in to send notifications"};const l={title:t||"New Notification",body:n||"You have a new notification",senderId:s.uid,senderEmail:s.email,createdAt:(new Date).toISOString(),delivered:!1,data:{gameId:i||null,url:a||"/games",timestamp:Date.now()}};r&&(l.targetUserId=r),o&&(l.targetRole=o);const c=await(0,ms.addDoc)((0,ms.collection)(fs.db,"customNotifications"),l);let u=[];if(r){const e=(0,ms.query)((0,ms.collection)(fs.db,"fcmTokens"),(0,ms.where)("userId","==",r));(await(0,ms.getDocs)(e)).forEach((e=>{const t=e.data();t.token&&u.push(t.token)}))}else if(o){const e=(0,ms.query)((0,ms.collection)(fs.db,"fcmTokens"),(0,ms.where)("userRole","==",o));(await(0,ms.getDocs)(e)).forEach((e=>{const t=e.data();t.token&&u.push(t.token)}))}else(await(0,ms.getDocs)((0,ms.collection)(fs.db,"fcmTokens"))).forEach((e=>{const t=e.data();t.token&&u.push(t.token)}));return await(0,ms.addDoc)((0,ms.collection)(fs.db,"notificationTriggers"),{notificationId:c.id,tokens:u,createdAt:(new Date).toISOString(),processed:!1}),{success:!0,notificationId:c.id,tokenCount:u.length,message:"Notification sent to ".concat(u.length," devices")}}catch(B){return console.error("Error sending custom notification:",B),{success:!1,error:B.message}}})(e),N("Notification sent successfully"),D("success"),"game"!==f&&(y(""),b(""))}catch(B){N("Failed to send notification: "+B.message),D("error"),U(B.message)}finally{V(!1),_(!0)}},disabled:W,sx:de.button,fullWidth:!0,children:W?"Sending...":"Send Notification"})})]})}),1===h&&(0,_e.jsxs)(gt,{sx:de.content,children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,_e.jsx)(yn,{variant:"h6",sx:{color:de.paper.color},children:"Notification History"}),G.length>0&&(0,_e.jsx)(pi,{variant:"outlined",color:"error",startIcon:(0,_e.jsx)(Tb.A,{}),onClick:()=>c(!0),size:"small",children:"Delete All"})]}),X?(0,_e.jsx)(yn,{children:"Loading history..."}):0===G.length?(0,_e.jsx)(yn,{children:"No notifications sent yet."}):(0,_e.jsx)(wg,{container:!0,spacing:2,children:G.map((e=>(0,_e.jsx)(wg,{item:!0,xs:12,children:(0,_e.jsxs)(Gt,{elevation:2,sx:{p:2,backgroundColor:t?"#333333":"#f9f9f9",color:t?"#FFFFFF":"#000000"},children:[(0,_e.jsxs)(gt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,_e.jsx)(yn,{variant:"subtitle1",fontWeight:"bold",children:e.title}),(0,_e.jsx)(nr,{size:"small",color:"error",onClick:()=>{d(e),s(!0)},children:(0,_e.jsx)(Yu.A,{fontSize:"small"})})]}),(0,_e.jsx)(yn,{variant:"body2",children:e.body}),(0,_e.jsxs)(gt,{sx:{mt:1,display:"flex",justifyContent:"space-between"},children:[(0,_e.jsx)(gp,{label:e.type,size:"small",sx:de.gameChip}),(0,_e.jsx)(yn,{variant:"caption",children:e.createdAt})]})]})},e.id)))}),(0,_e.jsxs)(Is,{open:a,onClose:()=>s(!1),children:[(0,_e.jsx)(Ds,{children:"Delete Notification"}),(0,_e.jsx)(Os,{children:(0,_e.jsx)(Ab,{children:"Are you sure you want to delete this notification? This action cannot be undone."})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>s(!1),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{if(u)try{const{db:e}=await Promise.resolve().then(n.bind(n,1288)),{doc:t,deleteDoc:r}=await Promise.resolve().then(n.bind(n,6032));await r(t(e,"customNotifications",u.id)),K((e=>e.filter((e=>e.id!==u.id)))),N("Notification deleted successfully"),D("success"),_(!0)}catch(B){console.error("Error deleting notification:",B),N("Error deleting notification: ".concat(B.message)),D("error"),_(!0)}finally{s(!1),d(null)}},color:"error",autoFocus:!0,children:"Delete"})]})]}),(0,_e.jsxs)(Is,{open:l,onClose:()=>c(!1),children:[(0,_e.jsx)(Ds,{children:"Delete All Notifications"}),(0,_e.jsx)(Os,{children:(0,_e.jsx)(Ab,{children:"Are you sure you want to delete ALL notifications? This action cannot be undone."})}),(0,_e.jsxs)(au,{children:[(0,_e.jsx)(pi,{onClick:()=>c(!1),children:"Cancel"}),(0,_e.jsx)(pi,{onClick:async()=>{try{const{db:e}=await Promise.resolve().then(n.bind(n,1288)),{collection:t,query:r,where:o,getDocs:i,writeBatch:a}=await Promise.resolve().then(n.bind(n,6032)),s=(0,Jv.getAuth)().currentUser;if(!s)throw new Error("User not authenticated");const l=a(e),c=r(t(e,"customNotifications"),o("senderId","==",s.uid));(await i(c)).forEach((e=>{l.delete(e.ref)})),await l.commit(),K([]),N("All notifications deleted successfully"),D("success"),_(!0)}catch(B){console.error("Error deleting all notifications:",B),N("Error deleting notifications: ".concat(B.message)),D("error"),_(!0)}finally{c(!1)}},color:"error",autoFocus:!0,children:"Delete All"})]})]})]})]})}),(0,_e.jsx)(ul,{open:I,autoHideDuration:6e3,onClose:pe,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,_e.jsx)($s,{onClose:pe,severity:R,sx:{width:"100%",bgcolor:t?"#333333":void 0,color:t?"#FFFFFF":void 0},children:j})})]})},Ib=()=>{const[e,t]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=(0,Jv.getAuth)().currentUser;e&&(t(e.uid),o(e.email),h())}),[]);const h=async()=>{try{const e=(0,ms.query)((0,ms.collection)(fs.db,"customNotifications"),(0,ms.orderBy)("createdAt","desc"),(0,ms.limit)(5)),t=await(0,ms.getDocs)(e),n=[];t.forEach((e=>{n.push((0,i.A)({id:e.id},e.data()))})),d(n)}catch(e){console.error("Error loading recent notifications:",e)}},p={container:{padding:"20px",backgroundColor:"#2A2A2A",color:"#FFFFFF",borderRadius:"8px",maxWidth:"800px",margin:"20px auto",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)"},heading:{color:"#FFFFFF",marginBottom:"15px",borderBottom:"1px solid #444444",paddingBottom:"10px"},userInfo:{backgroundColor:"#3A3A3A",padding:"15px",borderRadius:"4px",marginBottom:"20px"},button:{padding:"12px 24px",backgroundColor:"#4caf50",color:"#FFFFFF",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"16px"},disabledButton:{padding:"12px 24px",backgroundColor:"#555555",color:"#AAAAAA",border:"none",borderRadius:"4px",cursor:"not-allowed",fontWeight:"bold",fontSize:"16px"},resultContainer:{marginTop:"20px",padding:"15px",backgroundColor:"#1E1E1E",borderRadius:"4px",border:"1px solid #444444"},successText:{color:"#4caf50"},errorText:{color:"#f44336"},notificationsList:{marginTop:"30px"},notificationItem:{backgroundColor:"#3A3A3A",padding:"15px",borderRadius:"4px",marginBottom:"10px",borderLeft:"4px solid #4caf50"},notificationTitle:{fontSize:"18px",fontWeight:"bold",marginBottom:"5px"},notificationBody:{marginBottom:"10px"},notificationMeta:{fontSize:"12px",color:"#AAAAAA"},instructions:{backgroundColor:"#3A3A3A",padding:"15px",borderRadius:"4px",marginBottom:"20px",borderLeft:"4px solid #2196f3"},instructionsList:{marginLeft:"20px",lineHeight:"1.6"}};return(0,Jv.getAuth)().currentUser?(0,_e.jsxs)("div",{style:p.container,children:[(0,_e.jsx)("h2",{style:p.heading,children:"Simple Notification Test"}),(0,_e.jsxs)("div",{style:p.instructions,children:[(0,_e.jsx)("h3",{children:"How to Test Notifications Across Browsers"}),(0,_e.jsxs)("ol",{style:p.instructionsList,children:[(0,_e.jsx)("li",{children:"Open this page in multiple browsers or devices"}),(0,_e.jsx)("li",{children:'Click the "Send Test Notification" button below'}),(0,_e.jsx)("li",{children:"All browsers/devices with this app open should receive the notification"}),(0,_e.jsx)("li",{children:"If a browser doesn't receive the notification, make sure it's logged in with the same account"})]})]}),(0,_e.jsxs)("div",{style:p.userInfo,children:[(0,_e.jsxs)("p",{children:[(0,_e.jsx)("strong",{children:"User ID:"})," ",e]}),(0,_e.jsxs)("p",{children:[(0,_e.jsx)("strong",{children:"Email:"})," ",n]})]}),(0,_e.jsx)("button",{style:a?p.disabledButton:p.button,onClick:async()=>{s(!0),c(null);try{const e=(0,Jv.getAuth)().currentUser;if(!e)return void c({success:!1,error:"You must be logged in to send test notifications"});const t={title:"Test Notification",body:"This is a test notification sent at ".concat((new Date).toLocaleTimeString()),senderId:e.uid,senderEmail:e.email,createdAt:(new Date).toISOString(),data:{url:"/notification-test",timestamp:Date.now(),test:!0}},n=await(0,ms.addDoc)((0,ms.collection)(fs.db,"customNotifications"),t);c({success:!0,notificationId:n.id,message:"Test notification sent successfully"}),h()}catch(e){console.error("Error sending test notification:",e),c({success:!1,error:e.message})}finally{s(!1)}},disabled:a,children:a?"Sending...":"Send Test Notification"}),l&&(0,_e.jsxs)("div",{style:(0,i.A)((0,i.A)({},p.resultContainer),{},{borderColor:l.success?"#4caf50":"#f44336"}),children:[(0,_e.jsx)("h3",{style:l.success?p.successText:p.errorText,children:l.success?"Notification Sent!":"Failed to Send Notification"}),l.success?(0,_e.jsxs)("p",{children:["Notification ID: ",l.notificationId]}):(0,_e.jsx)("p",{children:l.error})]}),u.length>0&&(0,_e.jsxs)("div",{style:p.notificationsList,children:[(0,_e.jsx)("h3",{children:"Recent Notifications"}),u.map((e=>(0,_e.jsxs)("div",{style:p.notificationItem,children:[(0,_e.jsx)("div",{style:p.notificationTitle,children:e.title}),(0,_e.jsx)("div",{style:p.notificationBody,children:e.body}),(0,_e.jsxs)("div",{style:p.notificationMeta,children:["Sent by: ",e.senderEmail," \u2022 Time: ",new Date(e.createdAt).toLocaleString()]})]},e.id)))]})]}):(0,_e.jsxs)("div",{style:p.container,children:[(0,_e.jsx)("h2",{style:p.heading,children:"Simple Notification Test"}),(0,_e.jsx)("p",{style:p.errorText,children:"You must be logged in to use this page."})]})},_b=new Set;try{const e=localStorage.getItem("shownNotifications");if(e){JSON.parse(e).forEach((e=>_b.add(e))),console.log("Loaded ".concat(_b.size," previously shown notifications"))}}catch(Bb){console.error("Error loading shown notifications:",Bb)}const jb=()=>{if(!("Notification"in window))return console.error("This browser does not support notifications"),()=>{};const e=fs.auth.currentUser;if(!e)return console.log("User not logged in, not setting up notification listener"),()=>{};console.log("Setting up notification listener for user:",e.uid);const t=e=>{"granted"!==Notification.permission?Notification.requestPermission().then((t=>{"granted"===t&&n(e)})):n(e)},n=e=>{try{var t,n,r;const i=e.id||"",a="custom-notification-"+i+"-"+Date.now(),s="".concat(i,"-").concat(e.type||"","-").concat(e.title,"-").concat(e.body),l=u(),c=e.type||"general";if(l&&!1===l[c])return console.log("User has disabled ".concat(c," notifications. Skipping:"),e.title),!1;if(_b.has(s))return console.log("Skipping duplicate notification:",e.title),!1;if(_b.add(s),_b.size>200){const p=Array.from(_b);_b.clear(),p.slice(-100).forEach((e=>_b.add(e)))}try{localStorage.setItem("shownNotifications",JSON.stringify(Array.from(_b)));const f=JSON.parse(sessionStorage.getItem("sessionNotifications")||"[]");if(f.includes(s))return console.log("Skipping duplicate notification (from session):",e.title),!1;f.push(s),f.length>100&&f.splice(0,f.length-100),sessionStorage.setItem("sessionNotifications",JSON.stringify(f))}catch(Bb){console.error("Error with notification storage:",Bb)}function u(){try{const e=localStorage.getItem("notificationPreferences");return e?JSON.parse(e):null}catch(Bb){return console.error("Error getting notification preferences:",Bb),null}}const d={body:e.body||"You have a new notification",icon:"/logo192.png",badge:"/logo192.png",tag:a,requireInteraction:!0,vibrate:[200,100,200],data:{url:(null===(t=e.data)||void 0===t?void 0:t.url)||"/",gameId:(null===(n=e.data)||void 0===n?void 0:n.gameId)||null,timestamp:Date.now(),notificationId:e.id||a}};null!==(r=e.data)&&void 0!==r&&r.gameId&&(d.actions=[{action:"join",title:"Join Game",icon:"/logo192.png"},{action:"dismiss",title:"Dismiss",icon:"/close-icon.png"}]);const h=new Notification(e.title||"New Notification",d);return h.onclick=()=>{var t;console.log("Notification clicked"),h.close(),window.focus(),null!==(t=e.data)&&void 0!==t&&t.url&&(window.location.href=e.data.url)},navigator.serviceWorker.ready.then((t=>{t.addEventListener("notificationclick",(t=>{var n;t.notification.close(),"join"===t.action&&null!==(n=e.data)&&void 0!==n&&n.gameId?(console.log("Join game action clicked for game:",e.data.gameId),window.focus(),window.location.href="/games/".concat(e.data.gameId)):"dismiss"===t.action&&console.log("Notification dismissed")}))})).catch((e=>{console.error("Error setting up notification action handlers:",e)})),console.log("Notification displayed:",e.title),!0}catch(o){return console.error("Error displaying notification:",o),!1}};return(async()=>{const n=await(async()=>{try{const t=await(0,ms.getDoc)((0,ms.doc)(fs.db,"users",e.uid));if(!t.exists())return"user";const n=t.data();return!0===n.isAdmin||"admin"===n.role||"admin"===n.userRole?"admin":"user"}catch(t){return console.error("Error getting user role:",t),"user"}})();console.log("User role for notifications:",n);let r=localStorage.getItem("notificationsEnabledTime");r||(r=Date.now().toString(),localStorage.setItem("notificationsEnabledTime",r),console.log("First time enabling notifications, setting current time as baseline:",new Date(parseInt(r))));const o=localStorage.getItem("lastNotificationTime")||r;console.log("Last notification time:",new Date(parseInt(o)));const i=(0,ms.query)((0,ms.collection)(fs.db,"customNotifications"),(0,ms.orderBy)("createdAt","desc"),(0,ms.limit)(20)),a=(0,ms.onSnapshot)(i,(async r=>{const i=[];if(r.docChanges().forEach((t=>{if("added"===t.type){const r=t.doc.data(),a=t.doc.id;r.id=a;if(new Date(r.createdAt).getTime()>parseInt(o)){(!r.targetUserId&&!r.targetRole||r.targetUserId===e.uid||r.targetRole===n)&&(console.log("New notification found:",a),i.push(r))}}})),i.length>0){console.log("Found ".concat(i.length," new notifications")),i.sort(((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()));let e=0;for(const n of i)setTimeout((()=>{t(n)}),e),e+=1e3;Math.max(...i.map((e=>new Date(e.createdAt).getTime())));localStorage.setItem("lastNotificationTime",Date.now().toString())}})),s=(0,ms.query)((0,ms.collection)(fs.db,"notificationTriggers"),(0,ms.orderBy)("createdAt","desc"),(0,ms.limit)(5),(0,ms.where)("processed","==",!1)),l=(0,ms.onSnapshot)(s,(async r=>{r.docChanges().forEach((async r=>{if("added"===r.type){const i=r.doc.data().notificationId;console.log("New notification trigger:",i);try{const o=await(0,ms.getDoc)((0,ms.doc)(fs.db,"customNotifications",i));if(!o.exists())return;const a=o.data();a.id=i;if(!(!a.targetUserId&&!a.targetRole||a.targetUserId===e.uid||a.targetRole===n))return void console.log("Notification not targeted to this user, skipping");t(a),await(0,ms.updateDoc)((0,ms.doc)(fs.db,"notificationTriggers",r.doc.id),{["processedBy.".concat(e.uid)]:!0,processedAt:(new Date).toISOString()})}catch(o){console.error("Error processing notification trigger:",o)}}}))}));return()=>{a(),l()}})()},Nb=(new Set,(0,r.createContext)()),Rb=()=>(0,r.useContext)(Nb),Db=e=>{let{children:t}=e;const{currentUser:n,loading:r}=ys();return r?(0,_e.jsx)(gt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,_e.jsx)(Bt,{})}):n?t:(0,_e.jsx)(pe,{to:"/login",replace:!0})},Pb=e=>{let{children:t}=e;const{currentUser:n,isAdmin:r,loading:o}=ys();return o?(0,_e.jsx)(gt,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,_e.jsx)(Bt,{})}):n&&r?t:(0,_e.jsx)(pe,{to:"/"})},Mb=()=>{const{currentUser:e,loading:t}=ys();return t?null:e?(0,_e.jsx)(Pd,{}):null};function Fb(){const{currentUser:e}=ys();(0,r.useEffect)((()=>{if(e){const e=async()=>{try{const{requestFcmToken:e}=await Promise.resolve().then(n.bind(n,1288));if(await e()){console.log("[Notifications] Successfully registered FCM token");const e=localStorage.getItem("lastNotificationShown"),t=(new Date).getTime();(!e||t-parseInt(e)>864e5)&&((0,Zv.k1)("Notifications Enabled","You will now receive notifications for game updates!",{type:"welcome"}),localStorage.setItem("lastNotificationShown",t.toString()))}else console.warn("[Notifications] Failed to register FCM token")}catch(e){console.error("[Notifications] Error initializing notifications:",e)}};e();const t=setInterval((()=>{console.log("[Notifications] Refreshing FCM token..."),e()}),864e5);return()=>{clearInterval(t)}}}),[e]);return(0,_e.jsxs)(xe,{children:[(0,_e.jsx)(Mb,{}),(0,_e.jsxs)(ge,{children:[(0,_e.jsx)(fe,{path:"/",element:(0,_e.jsx)(Bd,{})}),(0,_e.jsx)(fe,{path:"/login",element:(0,_e.jsx)(Bd,{})}),(0,_e.jsx)(fe,{path:"/games",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(Zg,{})})}),(0,_e.jsx)(fe,{path:"/games/:id",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)($y,{})})}),(0,_e.jsx)(fe,{path:"/create-game",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(Zy,{})})}),(0,_e.jsx)(fe,{path:"/tournaments",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(kv,{})})}),(0,_e.jsx)(fe,{path:"/tournaments/:id",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(_v,{})})}),(0,_e.jsx)(fe,{path:"/tournament-demo",element:(0,_e.jsx)(Rv,{})}),(0,_e.jsx)(fe,{path:"/notifications",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(eb,{})})}),(0,_e.jsx)(fe,{path:"/fcm-test",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(nb,{})})}),(0,_e.jsx)(fe,{path:"/send-notification",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(Eb,{})})}),(0,_e.jsx)(fe,{path:"/notification-test",element:(0,_e.jsx)(Db,{children:(0,_e.jsx)(Ib,{})})}),(0,_e.jsx)(fe,{path:"/admin/*",element:(0,_e.jsx)(Pb,{children:(0,_e.jsx)(og,{})})})]})]})}const Ob=function(){const[e,t]=(0,r.useState)((()=>localStorage.getItem("themeMode")||"dark"));(0,r.useEffect)((()=>{(async()=>{if("Notification"in window)try{const e=await Notification.requestPermission();if(console.log("Notification permission:",e),"granted"===e){const e=new Notification("Notifications Enabled",{body:"You will now receive notifications for game events.",icon:"/logo192.png"});setTimeout((()=>e.close()),3e3)}return e}catch(e){console.error("Error requesting notification permission:",e)}else console.warn("This browser does not support desktop notifications")})(),fs.auth.onAuthStateChanged((e=>{if(e){const e=jb();window.notificationListenerCleanup=e}else window.notificationListenerCleanup&&(window.notificationListenerCleanup(),window.notificationListenerCleanup=null)}))}),[]);const n=(o=e,(0,Ae.A)({palette:{mode:o,primary:{main:"dark"===o?"#7986cb":"#3f51b5",light:"dark"===o?"#aab6fe":"#757de8",dark:"dark"===o?"#49599a":"#002984",contrastText:"#ffffff"},secondary:{main:"dark"===o?"#64b5f6":"#2196f3",light:"dark"===o?"#9be7ff":"#6ec6ff",dark:"dark"===o?"#2286c3":"#0069c0",contrastText:"#ffffff"},background:{default:"dark"===o?"#121212":"#f5f5f5",paper:"dark"===o?"#2A2A2A":"#ffffff",card:"dark"===o?"#2A2A2A":"#ffffff",cardHover:"dark"===o?"#333333":"#f5f5f5"},success:{main:"dark"===o?"#66bb6a":"#4caf50",dark:"dark"===o?"#338a3e":"#087f23",light:"dark"===o?"#99d066":"#80e27e",contrastText:"dark"===o?"#000000":"#ffffff"},error:{main:"#f44336",dark:"#ba000d",light:"#ff7961",contrastText:"#ffffff"},warning:{main:"#ffa726",dark:"#c77800",light:"#ffd95b",contrastText:"#000000"},info:{main:"dark"===o?"#29b6f6":"#03a9f4",dark:"dark"===o?"#0086c3":"#007ac1",light:"dark"===o?"#73e8ff":"#67daff",contrastText:"dark"===o?"#000000":"#ffffff"},text:{primary:"dark"===o?"#ffffff":"#000000",secondary:"dark"===o?"#b0b0b0":"#757575",disabled:"dark"===o?"#6c6c6c":"#9e9e9e"},divider:"dark"===o?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)"},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:700,color:"dark"===o?"#FFFFFF":void 0},h2:{fontSize:"2rem",fontWeight:600,color:"dark"===o?"#FFFFFF":void 0},h3:{fontSize:"1.75rem",fontWeight:600,color:"dark"===o?"#FFFFFF":void 0},h4:{fontSize:"1.5rem",fontWeight:600,color:"dark"===o?"#FFFFFF":void 0},h5:{fontSize:"1.25rem",fontWeight:600,color:"dark"===o?"#FFFFFF":void 0},h6:{fontSize:"1rem",fontWeight:600,color:"dark"===o?"#FFFFFF":void 0},body1:{fontSize:"1rem",lineHeight:1.5,color:"dark"===o?"#FFFFFF":void 0},body2:{fontSize:"0.875rem",lineHeight:1.43,color:"dark"===o?"#FFFFFF":void 0},button:{textTransform:"none",fontWeight:500},caption:{fontSize:"0.75rem",lineHeight:1.66,color:"dark"===o?"#FFFFFF":void 0}},shape:{borderRadius:8},components:{MuiCard:{styleOverrides:{root:{backgroundImage:"dark"===o?"linear-gradient(to bottom right, rgba(92, 107, 192, 0.05), rgba(41, 182, 246, 0.05))":"linear-gradient(to bottom right, rgba(63, 81, 181, 0.02), rgba(33, 150, 243, 0.02))",boxShadow:"dark"===o?"0 4px 20px 0 rgba(0, 0, 0, 0.5)":"0 2px 10px 0 rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:"dark"===o?"0 8px 25px 0 rgba(0, 0, 0, 0.6)":"0 4px 15px 0 rgba(0, 0, 0, 0.2)"}}}},MuiButton:{styleOverrides:{root:{borderRadius:8,textTransform:"none",fontWeight:600,boxShadow:"dark"===o?"0 2px 8px 0 rgba(0, 0, 0, 0.3)":"0 1px 5px 0 rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"dark"===o?"0 4px 12px 0 rgba(0, 0, 0, 0.4)":"0 2px 8px 0 rgba(0, 0, 0, 0.2)"}},contained:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #7986cb 30%, #49599a 90%)",color:"#ffffff",fontWeight:700,letterSpacing:"0.5px","&:hover":{background:"linear-gradient(135deg, #aab6fe 30%, #7986cb 90%)",boxShadow:"0 4px 12px 0 rgba(121, 134, 203, 0.6)"}}),outlined:(0,i.A)({},"dark"===o&&{borderWidth:"2px",fontWeight:700,"&:hover":{borderWidth:"2px",backgroundColor:"rgba(255, 255, 255, 0.1)"}}),containedSecondary:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #64b5f6 30%, #2286c3 90%)",color:"#ffffff","&:hover":{background:"linear-gradient(135deg, #9be7ff 30%, #64b5f6 90%)",boxShadow:"0 4px 12px 0 rgba(100, 181, 246, 0.6)"}}),outlinedSecondary:(0,i.A)({},"dark"===o&&{borderColor:"#64b5f6",color:"#64b5f6",borderWidth:"2px","&:hover":{borderColor:"#9be7ff",color:"#9be7ff",borderWidth:"2px",backgroundColor:"rgba(100, 181, 246, 0.1)"}})}},MuiChip:{styleOverrides:{root:(0,i.A)({borderRadius:8,fontWeight:600},"dark"===o&&{boxShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"}),colorPrimary:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #7986cb 30%, #49599a 90%)",color:"#ffffff",border:"1px solid rgba(121, 134, 203, 0.5)"}),colorSecondary:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #64b5f6 30%, #2286c3 90%)",color:"#ffffff",border:"1px solid rgba(100, 181, 246, 0.5)"}),colorSuccess:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #66bb6a 30%, #338a3e 90%)",color:"#ffffff",border:"1px solid rgba(102, 187, 106, 0.5)"}),colorError:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #f44336 30%, #ba000d 90%)",color:"#ffffff",border:"1px solid rgba(244, 67, 54, 0.5)"}),colorWarning:(0,i.A)({},"dark"===o&&{background:"linear-gradient(135deg, #ffa726 30%, #c77800 90%)",color:"#000000",border:"1px solid rgba(255, 167, 38, 0.5)",fontWeight:700})}}}}));var o;return(0,_e.jsxs)("div",{className:"App",children:[(0,_e.jsx)(Nb.Provider,{value:{themeMode:e,toggleTheme:()=>{const n="dark"===e?"light":"dark";t(n),localStorage.setItem("themeMode",n)}},children:(0,_e.jsxs)(Ve,{theme:n,children:[(0,_e.jsx)(ot,{}),(0,_e.jsx)(vs,{children:(0,_e.jsx)(Fb,{})})]})}),(0,_e.jsx)(Sm,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:e})]})},Lb=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)}))};(0,n(7064).Wp)({apiKey:"AIzaSyAyZAakNVP3eOnIeJ1qB1Ki-6qRgZ4VBg8",authDomain:"padelbolt-5d9a2.firebaseapp.com",projectId:"padelbolt-5d9a2",storageBucket:"padelbolt-5d9a2.firebasestorage.app",messagingSenderId:"773090904452",appId:"1:773090904452:web:e33380da424fe8d69e75d1",measurementId:"G-1PRKH5C8NV"});let zb=!1;(async()=>{try{if(zb)return;if("true"===localStorage.getItem("notificationInitialized"))return console.log("\ud83d\udd14 Notifications already initialized in a previous session"),void(zb=!0);if(console.log("\ud83d\udd14 Initializing notifications for the first time..."),!("Notification"in window))return void console.warn("\u26a0\ufe0f Notifications not supported in this browser");if("granted"!==Notification.permission){console.log("\ud83d\udd14 Requesting notification permission...");if("granted"!==await Notification.requestPermission())return void console.warn("\u26a0\ufe0f Notification permission denied");console.log("\u2705 Notification permission granted")}const{getAuth:t,onAuthStateChanged:r}=await Promise.resolve().then(n.bind(n,9555)),o=t();if(await new Promise((e=>{const t=r(o,(n=>{t(),console.log("\ud83d\udd14 Auth state resolved:",n?"User authenticated":"No user"),e(n)}))})),"serviceWorker"in navigator)try{const{initializeServiceWorker:e,setupTokenRefresh:t}=await Promise.resolve().then(n.bind(n,1288));await e();console.log("\u2705 Service Worker registered successfully"),t(),console.log("\u2705 FCM token refresh monitoring activated");await navigator.serviceWorker.ready;console.log("\u2705 Service Worker ready"),console.log("\ud83d\udd14 Setting up notifications...");const{registerDevice:r}=await Promise.resolve().then(n.bind(n,6823)),o=await r();if(o){console.log("\u2705 Device registered:",o);const{requestFcmToken:e}=await Promise.resolve().then(n.bind(n,1288)),t=await e();t?(console.log("\u2705 FCM token registered:",t.substring(0,10)+"..."),navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"UPDATE_FCM_TOKEN",token:t}),console.log("\u2705 FCM token sent to Service Worker"))):console.warn("\u26a0\ufe0f Could not register FCM token")}else console.warn("\u26a0\ufe0f Could not register device for notifications");const{requestFcmToken:i}=await Promise.resolve().then(n.bind(n,1288));await i()?console.log("\u2705 Legacy notification setup complete"):console.warn("\u26a0\ufe0f Legacy notification setup failed, but this is OK")}catch(e){console.error("\u274c Error registering service worker:",e)}else console.warn("\u26a0\ufe0f Service Worker not supported in this browser");zb=!0,localStorage.setItem("notificationInitialized","true"),"granted"===Notification.permission&&setTimeout((()=>{try{new Notification("Notifications Enabled",{body:"You will now receive notifications for games and tournaments.",icon:"/logo192.png",silent:!1})}catch(Bb){console.error("Error showing welcome notification:",Bb)}}),2e3)}catch(e){console.error("\u274c Error initializing notifications:",e),console.error(e)}})();o.createRoot(document.getElementById("root")).render((0,_e.jsx)(r.StrictMode,{children:(0,_e.jsx)(Ob,{})})),Lb()})()})();
//# sourceMappingURL=main.c7b51910.js.map